import{S as ne,e as te,O as he,p as Se,q as xe,D as Re}from"./dataUnitInMemoryLoader-BjgoPaoq.js";import{A as pe}from"./ApplicationContext-B_qAnYBt.js";import{P as ye}from"./PrintUtils-3e4ff0f5-DDjQRNo9.js";class ce extends Error{constructor(n,a,o=""){super(a),this.title=n,this.name="",this.message=a,this.errorCode=o}}var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V(B,n,a){return a={path:n,exports:{},require:function(o,m){return Ce()}},B(a,a.exports),a.exports}function Ce(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var De=V(function(B,n){var a=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof M<"u"&&M,o=function(){function c(){this.fetch=!1,this.DOMException=a.DOMException}return c.prototype=a,new c}();(function(c){(function(h){var i=typeof c<"u"&&c||typeof self<"u"&&self||typeof M<"u"&&M||{},d={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function y(r){return r&&DataView.prototype.isPrototypeOf(r)}if(d.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(r){return r&&e.indexOf(Object.prototype.toString.call(r))>-1};function s(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(r)||r==="")throw new TypeError('Invalid character in header field name: "'+r+'"');return r.toLowerCase()}function p(r){return typeof r!="string"&&(r=String(r)),r}function I(r){var f={next:function(){var g=r.shift();return{done:g===void 0,value:g}}};return d.iterable&&(f[Symbol.iterator]=function(){return f}),f}function N(r){this.map={},r instanceof N?r.forEach(function(f,g){this.append(g,f)},this):Array.isArray(r)?r.forEach(function(f){if(f.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+f.length);this.append(f[0],f[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(f){this.append(f,r[f])},this)}N.prototype.append=function(r,f){r=s(r),f=p(f);var g=this.map[r];this.map[r]=g?g+", "+f:f},N.prototype.delete=function(r){delete this.map[s(r)]},N.prototype.get=function(r){return r=s(r),this.has(r)?this.map[r]:null},N.prototype.has=function(r){return this.map.hasOwnProperty(s(r))},N.prototype.set=function(r,f){this.map[s(r)]=p(f)},N.prototype.forEach=function(r,f){for(var g in this.map)this.map.hasOwnProperty(g)&&r.call(f,this.map[g],g,this)},N.prototype.keys=function(){var r=[];return this.forEach(function(f,g){r.push(g)}),I(r)},N.prototype.values=function(){var r=[];return this.forEach(function(f){r.push(f)}),I(r)},N.prototype.entries=function(){var r=[];return this.forEach(function(f,g){r.push([g,f])}),I(r)},d.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function A(r){if(!r._noBody){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}}function D(r){return new Promise(function(f,g){r.onload=function(){f(r.result)},r.onerror=function(){g(r.error)}})}function C(r){var f=new FileReader,g=D(f);return f.readAsArrayBuffer(r),g}function P(r){var f=new FileReader,g=D(f),O=/charset=([A-Za-z0-9_-]+)/.exec(r.type),L=O?O[1]:"utf-8";return f.readAsText(r,L),g}function G(r){for(var f=new Uint8Array(r),g=new Array(f.length),O=0;O<f.length;O++)g[O]=String.fromCharCode(f[O]);return g.join("")}function x(r){if(r.slice)return r.slice(0);var f=new Uint8Array(r.byteLength);return f.set(new Uint8Array(r)),f.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(r){this.bodyUsed=this.bodyUsed,this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:d.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:d.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():d.arrayBuffer&&d.blob&&y(r)?(this._bodyArrayBuffer=x(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||t(r))?this._bodyArrayBuffer=x(r):this._bodyText=r=Object.prototype.toString.call(r):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var r=A(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var r=A(this);return r||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(C);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var r=A(this);if(r)return r;if(this._bodyBlob)return P(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(G(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(r){var f=r.toUpperCase();return b.indexOf(f)>-1?f:r}function w(r,f){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');f=f||{};var g=f.body;if(r instanceof w){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,f.headers||(this.headers=new N(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!g&&r._bodyInit!=null&&(g=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new N(f.headers)),this.method=T(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal||function(){if("AbortController"in i){var S=new AbortController;return S.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(g),(this.method==="GET"||this.method==="HEAD")&&(f.cache==="no-store"||f.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function l(r){var f=new FormData;return r.trim().split("&").forEach(function(g){if(g){var O=g.split("="),L=O.shift().replace(/\+/g," "),S=O.join("=").replace(/\+/g," ");f.append(decodeURIComponent(L),decodeURIComponent(S))}}),f}function k(r){var f=new N,g=r.replace(/\r?\n[\t ]+/g," ");return g.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var L=O.split(":"),S=L.shift().trim();if(S){var U=L.join(":").trim();try{f.append(S,U)}catch(R){console.warn("Response "+R.message)}}}),f}u.call(w.prototype);function K(r,f){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=f.statusText===void 0?"":""+f.statusText,this.headers=new N(f.headers),this.url=f.url||"",this._initBody(r)}u.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},K.error=function(){var r=new K(null,{status:200,statusText:""});return r.ok=!1,r.status=0,r.type="error",r};var E=[301,302,303,307,308];K.redirect=function(r,f){if(E.indexOf(f)===-1)throw new RangeError("Invalid status code");return new K(null,{status:f,headers:{location:r}})},h.DOMException=i.DOMException;try{new h.DOMException}catch{h.DOMException=function(f,g){this.message=f,this.name=g;var O=Error(f);this.stack=O.stack},h.DOMException.prototype=Object.create(Error.prototype),h.DOMException.prototype.constructor=h.DOMException}function v(r,f){return new Promise(function(g,O){var L=new w(r,f);if(L.signal&&L.signal.aborted)return O(new h.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function U(){S.abort()}S.onload=function(){var j={statusText:S.statusText,headers:k(S.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(S.status<200||S.status>599)?j.status=200:j.status=S.status,j.url="responseURL"in S?S.responseURL:j.headers.get("X-Request-URL");var Q="response"in S?S.response:S.responseText;setTimeout(function(){g(new K(Q,j))},0)},S.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},S.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},S.onabort=function(){setTimeout(function(){O(new h.DOMException("Aborted","AbortError"))},0)};function R(j){try{return j===""&&i.location.href?i.location.href:j}catch{return j}}if(S.open(L.method,R(L.url),!0),L.credentials==="include"?S.withCredentials=!0:L.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&(d.blob?S.responseType="blob":d.arrayBuffer&&(S.responseType="arraybuffer")),f&&typeof f.headers=="object"&&!(f.headers instanceof N||i.Headers&&f.headers instanceof i.Headers)){var $=[];Object.getOwnPropertyNames(f.headers).forEach(function(j){$.push(s(j)),S.setRequestHeader(j,p(f.headers[j]))}),L.headers.forEach(function(j,Q){$.indexOf(Q)===-1&&S.setRequestHeader(Q,j)})}else L.headers.forEach(function(j,Q){S.setRequestHeader(Q,j)});L.signal&&(L.signal.addEventListener("abort",U),S.onreadystatechange=function(){S.readyState===4&&L.signal.removeEventListener("abort",U)}),S.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return v.polyfill=!0,i.fetch||(i.fetch=v,i.Headers=N,i.Request=w,i.Response=K),h.Headers=N,h.Request=w,h.Response=K,h.fetch=v,Object.defineProperty(h,"__esModule",{value:!0}),h})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var m=a.fetch?a:o;n=m.fetch,n.default=m.fetch,n.fetch=m.fetch,n.Headers=m.Headers,n.Request=m.Request,n.Response=m.Response,B.exports=n}),Le=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isObjectLike=a;function a(o){return typeof o=="object"&&o!==null}}),Pe=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.invariant=a;function a(o,m){if(!!!o)throw new Error(m??"Unexpected invariant triggered.")}}),le=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getLocation=o;const a=/\r\n|[\n\r]/g;function o(m,c){let h=0,i=1;for(const d of m.body.matchAll(a)){if(typeof d.index=="number"||(0,Pe.invariant)(!1),d.index>=c)break;h=d.index+d[0].length,i+=1}return{line:i,column:c+1-h}}}),ve=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.printLocation=a,n.printSourceLocation=o;function a(c){return o(c.source,(0,le.getLocation)(c.source,c.start))}function o(c,h){const i=c.locationOffset.column-1,d="".padStart(i)+c.body,y=h.line-1,e=c.locationOffset.line-1,t=h.line+e,s=h.line===1?i:0,p=h.column+s,I=`${c.name}:${t}:${p}
`,N=d.split(/\r\n|[\n\r]/g),A=N[y];if(A.length>120){const D=Math.floor(p/80),C=p%80,P=[];for(let G=0;G<A.length;G+=80)P.push(A.slice(G,G+80));return I+m([[`${t} |`,P[0]],...P.slice(1,D+1).map(G=>["|",G]),["|","^".padStart(C)],["|",P[D+1]]])}return I+m([[`${t-1} |`,N[y-1]],[`${t} |`,A],["|","^".padStart(p)],[`${t+1} |`,N[y+1]]])}function m(c){const h=c.filter(([d,y])=>y!==void 0),i=Math.max(...h.map(([d])=>d.length));return h.map(([d,y])=>d.padStart(i)+(y?" "+y:"")).join(`
`)}}),Be=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GraphQLError=void 0,n.formatError=h,n.printError=c;function a(i){const d=i[0];return d==null||"kind"in d||"length"in d?{nodes:d,source:i[1],positions:i[2],path:i[3],originalError:i[4],extensions:i[5]}:d}class o extends Error{constructor(d,...y){var e,t,s;const{nodes:p,source:I,positions:N,path:A,originalError:D,extensions:C}=a(y);super(d),this.name="GraphQLError",this.path=A??void 0,this.originalError=D??void 0,this.nodes=m(Array.isArray(p)?p:p?[p]:void 0);const P=m((e=this.nodes)===null||e===void 0?void 0:e.map(x=>x.loc).filter(x=>x!=null));this.source=I??(P==null||(t=P[0])===null||t===void 0?void 0:t.source),this.positions=N??(P==null?void 0:P.map(x=>x.start)),this.locations=N&&I?N.map(x=>(0,le.getLocation)(I,x)):P==null?void 0:P.map(x=>(0,le.getLocation)(x.source,x.start));const G=(0,Le.isObjectLike)(D==null?void 0:D.extensions)?D==null?void 0:D.extensions:void 0;this.extensions=(s=C??G)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),D!=null&&D.stack?Object.defineProperty(this,"stack",{value:D.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let d=this.message;if(this.nodes)for(const y of this.nodes)y.loc&&(d+=`

`+(0,ve.printLocation)(y.loc));else if(this.source&&this.locations)for(const y of this.locations)d+=`

`+(0,ve.printSourceLocation)(this.source,y);return d}toJSON(){const d={message:this.message};return this.locations!=null&&(d.locations=this.locations),this.path!=null&&(d.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(d.extensions=this.extensions),d}}n.GraphQLError=o;function m(i){return i===void 0||i.length===0?void 0:i}function c(i){return i.toString()}function h(i){return i.toJSON()}}),J=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.syntaxError=a;function a(o,m,c){return new Be.GraphQLError(`Syntax Error: ${c}`,{source:o,positions:[m]})}}),W=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Token=n.QueryDocumentKeys=n.OperationTypeNode=n.Location=void 0,n.isNode=h;class a{constructor(y,e,t){this.start=y.start,this.end=e.end,this.startToken=y,this.endToken=e,this.source=t}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}n.Location=a;class o{constructor(y,e,t,s,p,I){this.kind=y,this.start=e,this.end=t,this.line=s,this.column=p,this.value=I,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}n.Token=o;const m={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};n.QueryDocumentKeys=m;const c=new Set(Object.keys(m));function h(d){const y=d==null?void 0:d.kind;return typeof y=="string"&&c.has(y)}var i;n.OperationTypeNode=i,function(d){d.QUERY="query",d.MUTATION="mutation",d.SUBSCRIPTION="subscription"}(i||(n.OperationTypeNode=i={}))}),qe=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectiveLocation=void 0;var a;n.DirectiveLocation=a,function(o){o.QUERY="QUERY",o.MUTATION="MUTATION",o.SUBSCRIPTION="SUBSCRIPTION",o.FIELD="FIELD",o.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",o.FRAGMENT_SPREAD="FRAGMENT_SPREAD",o.INLINE_FRAGMENT="INLINE_FRAGMENT",o.VARIABLE_DEFINITION="VARIABLE_DEFINITION",o.SCHEMA="SCHEMA",o.SCALAR="SCALAR",o.OBJECT="OBJECT",o.FIELD_DEFINITION="FIELD_DEFINITION",o.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",o.INTERFACE="INTERFACE",o.UNION="UNION",o.ENUM="ENUM",o.ENUM_VALUE="ENUM_VALUE",o.INPUT_OBJECT="INPUT_OBJECT",o.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(a||(n.DirectiveLocation=a={}))}),q=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Kind=void 0;var a;n.Kind=a,function(o){o.NAME="Name",o.DOCUMENT="Document",o.OPERATION_DEFINITION="OperationDefinition",o.VARIABLE_DEFINITION="VariableDefinition",o.SELECTION_SET="SelectionSet",o.FIELD="Field",o.ARGUMENT="Argument",o.FRAGMENT_SPREAD="FragmentSpread",o.INLINE_FRAGMENT="InlineFragment",o.FRAGMENT_DEFINITION="FragmentDefinition",o.VARIABLE="Variable",o.INT="IntValue",o.FLOAT="FloatValue",o.STRING="StringValue",o.BOOLEAN="BooleanValue",o.NULL="NullValue",o.ENUM="EnumValue",o.LIST="ListValue",o.OBJECT="ObjectValue",o.OBJECT_FIELD="ObjectField",o.DIRECTIVE="Directive",o.NAMED_TYPE="NamedType",o.LIST_TYPE="ListType",o.NON_NULL_TYPE="NonNullType",o.SCHEMA_DEFINITION="SchemaDefinition",o.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",o.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",o.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",o.FIELD_DEFINITION="FieldDefinition",o.INPUT_VALUE_DEFINITION="InputValueDefinition",o.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",o.UNION_TYPE_DEFINITION="UnionTypeDefinition",o.ENUM_TYPE_DEFINITION="EnumTypeDefinition",o.ENUM_VALUE_DEFINITION="EnumValueDefinition",o.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",o.DIRECTIVE_DEFINITION="DirectiveDefinition",o.SCHEMA_EXTENSION="SchemaExtension",o.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",o.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",o.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",o.UNION_TYPE_EXTENSION="UnionTypeExtension",o.ENUM_TYPE_EXTENSION="EnumTypeExtension",o.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(a||(n.Kind=a={}))}),Y=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isDigit=o,n.isLetter=m,n.isNameContinue=h,n.isNameStart=c,n.isWhiteSpace=a;function a(i){return i===9||i===32}function o(i){return i>=48&&i<=57}function m(i){return i>=97&&i<=122||i>=65&&i<=90}function c(i){return m(i)||i===95}function h(i){return m(i)||o(i)||i===95}}),ge=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.dedentBlockStringLines=a,n.isPrintableAsBlockString=m,n.printBlockString=c;function a(h){var i;let d=Number.MAX_SAFE_INTEGER,y=null,e=-1;for(let s=0;s<h.length;++s){var t;const p=h[s],I=o(p);I!==p.length&&(y=(t=y)!==null&&t!==void 0?t:s,e=s,s!==0&&I<d&&(d=I))}return h.map((s,p)=>p===0?s:s.slice(d)).slice((i=y)!==null&&i!==void 0?i:0,e+1)}function o(h){let i=0;for(;i<h.length&&(0,Y.isWhiteSpace)(h.charCodeAt(i));)++i;return i}function m(h){if(h==="")return!0;let i=!0,d=!1,y=!0,e=!1;for(let t=0;t<h.length;++t)switch(h.codePointAt(t)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:return!1;case 13:return!1;case 10:if(i&&!e)return!1;e=!0,i=!0,d=!1;break;case 9:case 32:d||(d=i);break;default:y&&(y=d),i=!1}return!(i||y&&e)}function c(h,i){const d=h.replace(/"""/g,'\\"""'),y=d.split(/\r\n|[\n\r]/g),e=y.length===1,t=y.length>1&&y.slice(1).every(P=>P.length===0||(0,Y.isWhiteSpace)(P.charCodeAt(0))),s=d.endsWith('\\"""'),p=h.endsWith('"')&&!s,I=h.endsWith("\\"),N=p||I,A=!(i!=null&&i.minimize)&&(!e||h.length>70||N||t||s);let D="";const C=e&&(0,Y.isWhiteSpace)(h.charCodeAt(0));return(A&&!C||t)&&(D+=`
`),D+=d,(A||N)&&(D+=`
`),'"""'+D+'"""'}}),_=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenKind=void 0;var a;n.TokenKind=a,function(o){o.SOF="<SOF>",o.EOF="<EOF>",o.BANG="!",o.DOLLAR="$",o.AMP="&",o.PAREN_L="(",o.PAREN_R=")",o.SPREAD="...",o.COLON=":",o.EQUALS="=",o.AT="@",o.BRACKET_L="[",o.BRACKET_R="]",o.BRACE_L="{",o.PIPE="|",o.BRACE_R="}",o.NAME="Name",o.INT="Int",o.FLOAT="Float",o.STRING="String",o.BLOCK_STRING="BlockString",o.COMMENT="Comment"}(a||(n.TokenKind=a={}))}),Ee=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Lexer=void 0,n.isPunctuatorTokenKind=o;class a{constructor(b){const T=new W.Token(_.TokenKind.SOF,0,0,0,0);this.source=b,this.lastToken=T,this.token=T,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let b=this.token;if(b.kind!==_.TokenKind.EOF)do if(b.next)b=b.next;else{const T=e(this,b.end);b.next=T,T.prev=b,b=T}while(b.kind===_.TokenKind.COMMENT);return b}}n.Lexer=a;function o(u){return u===_.TokenKind.BANG||u===_.TokenKind.DOLLAR||u===_.TokenKind.AMP||u===_.TokenKind.PAREN_L||u===_.TokenKind.PAREN_R||u===_.TokenKind.SPREAD||u===_.TokenKind.COLON||u===_.TokenKind.EQUALS||u===_.TokenKind.AT||u===_.TokenKind.BRACKET_L||u===_.TokenKind.BRACKET_R||u===_.TokenKind.BRACE_L||u===_.TokenKind.PIPE||u===_.TokenKind.BRACE_R}function m(u){return u>=0&&u<=55295||u>=57344&&u<=1114111}function c(u,b){return h(u.charCodeAt(b))&&i(u.charCodeAt(b+1))}function h(u){return u>=55296&&u<=56319}function i(u){return u>=56320&&u<=57343}function d(u,b){const T=u.source.body.codePointAt(b);if(T===void 0)return _.TokenKind.EOF;if(T>=32&&T<=126){const w=String.fromCodePoint(T);return w==='"'?`'"'`:`"${w}"`}return"U+"+T.toString(16).toUpperCase().padStart(4,"0")}function y(u,b,T,w,l){const k=u.line,K=1+T-u.lineStart;return new W.Token(b,T,w,k,K,l)}function e(u,b){const T=u.source.body,w=T.length;let l=b;for(;l<w;){const k=T.charCodeAt(l);switch(k){case 65279:case 9:case 32:case 44:++l;continue;case 10:++l,++u.line,u.lineStart=l;continue;case 13:T.charCodeAt(l+1)===10?l+=2:++l,++u.line,u.lineStart=l;continue;case 35:return t(u,l);case 33:return y(u,_.TokenKind.BANG,l,l+1);case 36:return y(u,_.TokenKind.DOLLAR,l,l+1);case 38:return y(u,_.TokenKind.AMP,l,l+1);case 40:return y(u,_.TokenKind.PAREN_L,l,l+1);case 41:return y(u,_.TokenKind.PAREN_R,l,l+1);case 46:if(T.charCodeAt(l+1)===46&&T.charCodeAt(l+2)===46)return y(u,_.TokenKind.SPREAD,l,l+3);break;case 58:return y(u,_.TokenKind.COLON,l,l+1);case 61:return y(u,_.TokenKind.EQUALS,l,l+1);case 64:return y(u,_.TokenKind.AT,l,l+1);case 91:return y(u,_.TokenKind.BRACKET_L,l,l+1);case 93:return y(u,_.TokenKind.BRACKET_R,l,l+1);case 123:return y(u,_.TokenKind.BRACE_L,l,l+1);case 124:return y(u,_.TokenKind.PIPE,l,l+1);case 125:return y(u,_.TokenKind.BRACE_R,l,l+1);case 34:return T.charCodeAt(l+1)===34&&T.charCodeAt(l+2)===34?G(u,l):I(u,l)}if((0,Y.isDigit)(k)||k===45)return s(u,l,k);if((0,Y.isNameStart)(k))return x(u,l);throw(0,J.syntaxError)(u.source,l,k===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:m(k)||c(T,l)?`Unexpected character: ${d(u,l)}.`:`Invalid character: ${d(u,l)}.`)}return y(u,_.TokenKind.EOF,w,w)}function t(u,b){const T=u.source.body,w=T.length;let l=b+1;for(;l<w;){const k=T.charCodeAt(l);if(k===10||k===13)break;if(m(k))++l;else if(c(T,l))l+=2;else break}return y(u,_.TokenKind.COMMENT,b,l,T.slice(b+1,l))}function s(u,b,T){const w=u.source.body;let l=b,k=T,K=!1;if(k===45&&(k=w.charCodeAt(++l)),k===48){if(k=w.charCodeAt(++l),(0,Y.isDigit)(k))throw(0,J.syntaxError)(u.source,l,`Invalid number, unexpected digit after 0: ${d(u,l)}.`)}else l=p(u,l,k),k=w.charCodeAt(l);if(k===46&&(K=!0,k=w.charCodeAt(++l),l=p(u,l,k),k=w.charCodeAt(l)),(k===69||k===101)&&(K=!0,k=w.charCodeAt(++l),(k===43||k===45)&&(k=w.charCodeAt(++l)),l=p(u,l,k),k=w.charCodeAt(l)),k===46||(0,Y.isNameStart)(k))throw(0,J.syntaxError)(u.source,l,`Invalid number, expected digit but got: ${d(u,l)}.`);return y(u,K?_.TokenKind.FLOAT:_.TokenKind.INT,b,l,w.slice(b,l))}function p(u,b,T){if(!(0,Y.isDigit)(T))throw(0,J.syntaxError)(u.source,b,`Invalid number, expected digit but got: ${d(u,b)}.`);const w=u.source.body;let l=b+1;for(;(0,Y.isDigit)(w.charCodeAt(l));)++l;return l}function I(u,b){const T=u.source.body,w=T.length;let l=b+1,k=l,K="";for(;l<w;){const E=T.charCodeAt(l);if(E===34)return K+=T.slice(k,l),y(u,_.TokenKind.STRING,b,l+1,K);if(E===92){K+=T.slice(k,l);const v=T.charCodeAt(l+1)===117?T.charCodeAt(l+2)===123?N(u,l):A(u,l):P(u,l);K+=v.value,l+=v.size,k=l;continue}if(E===10||E===13)break;if(m(E))++l;else if(c(T,l))l+=2;else throw(0,J.syntaxError)(u.source,l,`Invalid character within String: ${d(u,l)}.`)}throw(0,J.syntaxError)(u.source,l,"Unterminated string.")}function N(u,b){const T=u.source.body;let w=0,l=3;for(;l<12;){const k=T.charCodeAt(b+l++);if(k===125){if(l<5||!m(w))break;return{value:String.fromCodePoint(w),size:l}}if(w=w<<4|C(k),w<0)break}throw(0,J.syntaxError)(u.source,b,`Invalid Unicode escape sequence: "${T.slice(b,b+l)}".`)}function A(u,b){const T=u.source.body,w=D(T,b+2);if(m(w))return{value:String.fromCodePoint(w),size:6};if(h(w)&&T.charCodeAt(b+6)===92&&T.charCodeAt(b+7)===117){const l=D(T,b+8);if(i(l))return{value:String.fromCodePoint(w,l),size:12}}throw(0,J.syntaxError)(u.source,b,`Invalid Unicode escape sequence: "${T.slice(b,b+6)}".`)}function D(u,b){return C(u.charCodeAt(b))<<12|C(u.charCodeAt(b+1))<<8|C(u.charCodeAt(b+2))<<4|C(u.charCodeAt(b+3))}function C(u){return u>=48&&u<=57?u-48:u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:-1}function P(u,b){const T=u.source.body;switch(T.charCodeAt(b+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw(0,J.syntaxError)(u.source,b,`Invalid character escape sequence: "${T.slice(b,b+2)}".`)}function G(u,b){const T=u.source.body,w=T.length;let l=u.lineStart,k=b+3,K=k,E="";const v=[];for(;k<w;){const r=T.charCodeAt(k);if(r===34&&T.charCodeAt(k+1)===34&&T.charCodeAt(k+2)===34){E+=T.slice(K,k),v.push(E);const f=y(u,_.TokenKind.BLOCK_STRING,b,k+3,(0,ge.dedentBlockStringLines)(v).join(`
`));return u.line+=v.length-1,u.lineStart=l,f}if(r===92&&T.charCodeAt(k+1)===34&&T.charCodeAt(k+2)===34&&T.charCodeAt(k+3)===34){E+=T.slice(K,k),K=k+1,k+=4;continue}if(r===10||r===13){E+=T.slice(K,k),v.push(E),r===13&&T.charCodeAt(k+1)===10?k+=2:++k,E="",K=k,l=k;continue}if(m(r))++k;else if(c(T,k))k+=2;else throw(0,J.syntaxError)(u.source,k,`Invalid character within String: ${d(u,k)}.`)}throw(0,J.syntaxError)(u.source,k,"Unterminated string.")}function x(u,b){const T=u.source.body,w=T.length;let l=b+1;for(;l<w;){const k=T.charCodeAt(l);if((0,Y.isNameContinue)(k))++l;else break}return y(u,_.TokenKind.NAME,b,l,T.slice(b,l))}}),ie=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.devAssert=a;function a(o,m){if(!!!o)throw new Error(m)}}),_e=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.inspect=m;const a=10,o=2;function m(t){return c(t,[])}function c(t,s){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return h(t,s);default:return String(t)}}function h(t,s){if(t===null)return"null";if(s.includes(t))return"[Circular]";const p=[...s,t];if(i(t)){const I=t.toJSON();if(I!==t)return typeof I=="string"?I:c(I,p)}else if(Array.isArray(t))return y(t,p);return d(t,p)}function i(t){return typeof t.toJSON=="function"}function d(t,s){const p=Object.entries(t);return p.length===0?"{}":s.length>o?"["+e(t)+"]":"{ "+p.map(([N,A])=>N+": "+c(A,s)).join(", ")+" }"}function y(t,s){if(t.length===0)return"[]";if(s.length>o)return"[Array]";const p=Math.min(a,t.length),I=t.length-p,N=[];for(let A=0;A<p;++A)N.push(c(t[A],s));return I===1?N.push("... 1 more item"):I>1&&N.push(`... ${I} more items`),"["+N.join(", ")+"]"}function e(t){const s=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(s==="Object"&&typeof t.constructor=="function"){const p=t.constructor.name;if(typeof p=="string"&&p!=="")return p}return s}}),Ke=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.instanceOf=void 0;const a=function(m,c){return m instanceof c};n.instanceOf=a}),me=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Source=void 0,n.isSource=o;class a{constructor(c,h="GraphQL request",i={line:1,column:1}){typeof c=="string"||(0,ie.devAssert)(!1,`Body must be a string. Received: ${(0,_e.inspect)(c)}.`),this.body=c,this.name=h,this.locationOffset=i,this.locationOffset.line>0||(0,ie.devAssert)(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||(0,ie.devAssert)(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}n.Source=a;function o(m){return(0,Ke.instanceOf)(m,a)}}),Fe=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0,n.parse=a,n.parseConstValue=m,n.parseType=c,n.parseValue=o;function a(y,e){return new h(y,e).parseDocument()}function o(y,e){const t=new h(y,e);t.expectToken(_.TokenKind.SOF);const s=t.parseValueLiteral(!1);return t.expectToken(_.TokenKind.EOF),s}function m(y,e){const t=new h(y,e);t.expectToken(_.TokenKind.SOF);const s=t.parseConstValueLiteral();return t.expectToken(_.TokenKind.EOF),s}function c(y,e){const t=new h(y,e);t.expectToken(_.TokenKind.SOF);const s=t.parseTypeReference();return t.expectToken(_.TokenKind.EOF),s}class h{constructor(e,t={}){const s=(0,me.isSource)(e)?e:new me.Source(e);this._lexer=new Ee.Lexer(s),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(_.TokenKind.NAME);return this.node(e,{kind:q.Kind.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:q.Kind.DOCUMENT,definitions:this.many(_.TokenKind.SOF,this.parseDefinition,_.TokenKind.EOF)})}parseDefinition(){if(this.peek(_.TokenKind.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===_.TokenKind.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw(0,J.syntaxError)(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(_.TokenKind.BRACE_L))return this.node(e,{kind:q.Kind.OPERATION_DEFINITION,operation:W.OperationTypeNode.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let s;return this.peek(_.TokenKind.NAME)&&(s=this.parseName()),this.node(e,{kind:q.Kind.OPERATION_DEFINITION,operation:t,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(_.TokenKind.NAME);switch(e.value){case"query":return W.OperationTypeNode.QUERY;case"mutation":return W.OperationTypeNode.MUTATION;case"subscription":return W.OperationTypeNode.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(_.TokenKind.PAREN_L,this.parseVariableDefinition,_.TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:q.Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(_.TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(_.TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(_.TokenKind.DOLLAR),this.node(e,{kind:q.Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:q.Kind.SELECTION_SET,selections:this.many(_.TokenKind.BRACE_L,this.parseSelection,_.TokenKind.BRACE_R)})}parseSelection(){return this.peek(_.TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let s,p;return this.expectOptionalToken(_.TokenKind.COLON)?(s=t,p=this.parseName()):p=t,this.node(e,{kind:q.Kind.FIELD,alias:s,name:p,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(_.TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(_.TokenKind.PAREN_L,t,_.TokenKind.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,s=this.parseName();return this.expectToken(_.TokenKind.COLON),this.node(t,{kind:q.Kind.ARGUMENT,name:s,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(_.TokenKind.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(_.TokenKind.NAME)?this.node(e,{kind:q.Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:q.Kind.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:q.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:q.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case _.TokenKind.BRACKET_L:return this.parseList(e);case _.TokenKind.BRACE_L:return this.parseObject(e);case _.TokenKind.INT:return this.advanceLexer(),this.node(t,{kind:q.Kind.INT,value:t.value});case _.TokenKind.FLOAT:return this.advanceLexer(),this.node(t,{kind:q.Kind.FLOAT,value:t.value});case _.TokenKind.STRING:case _.TokenKind.BLOCK_STRING:return this.parseStringLiteral();case _.TokenKind.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:q.Kind.BOOLEAN,value:!0});case"false":return this.node(t,{kind:q.Kind.BOOLEAN,value:!1});case"null":return this.node(t,{kind:q.Kind.NULL});default:return this.node(t,{kind:q.Kind.ENUM,value:t.value})}case _.TokenKind.DOLLAR:if(e)if(this.expectToken(_.TokenKind.DOLLAR),this._lexer.token.kind===_.TokenKind.NAME){const s=this._lexer.token.value;throw(0,J.syntaxError)(this._lexer.source,t.start,`Unexpected variable "$${s}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:q.Kind.STRING,value:e.value,block:e.kind===_.TokenKind.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:q.Kind.LIST,values:this.any(_.TokenKind.BRACKET_L,t,_.TokenKind.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:q.Kind.OBJECT,fields:this.any(_.TokenKind.BRACE_L,t,_.TokenKind.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,s=this.parseName();return this.expectToken(_.TokenKind.COLON),this.node(t,{kind:q.Kind.OBJECT_FIELD,name:s,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(_.TokenKind.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(_.TokenKind.AT),this.node(t,{kind:q.Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(_.TokenKind.BRACKET_L)){const s=this.parseTypeReference();this.expectToken(_.TokenKind.BRACKET_R),t=this.node(e,{kind:q.Kind.LIST_TYPE,type:s})}else t=this.parseNamedType();return this.expectOptionalToken(_.TokenKind.BANG)?this.node(e,{kind:q.Kind.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:q.Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(_.TokenKind.STRING)||this.peek(_.TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const s=this.parseConstDirectives(),p=this.many(_.TokenKind.BRACE_L,this.parseOperationTypeDefinition,_.TokenKind.BRACE_R);return this.node(e,{kind:q.Kind.SCHEMA_DEFINITION,description:t,directives:s,operationTypes:p})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(_.TokenKind.COLON);const s=this.parseNamedType();return this.node(e,{kind:q.Kind.OPERATION_TYPE_DEFINITION,operation:t,type:s})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const s=this.parseName(),p=this.parseConstDirectives();return this.node(e,{kind:q.Kind.SCALAR_TYPE_DEFINITION,description:t,name:s,directives:p})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const s=this.parseName(),p=this.parseImplementsInterfaces(),I=this.parseConstDirectives(),N=this.parseFieldsDefinition();return this.node(e,{kind:q.Kind.OBJECT_TYPE_DEFINITION,description:t,name:s,interfaces:p,directives:I,fields:N})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(_.TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(_.TokenKind.BRACE_L,this.parseFieldDefinition,_.TokenKind.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseName(),p=this.parseArgumentDefs();this.expectToken(_.TokenKind.COLON);const I=this.parseTypeReference(),N=this.parseConstDirectives();return this.node(e,{kind:q.Kind.FIELD_DEFINITION,description:t,name:s,arguments:p,type:I,directives:N})}parseArgumentDefs(){return this.optionalMany(_.TokenKind.PAREN_L,this.parseInputValueDef,_.TokenKind.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseName();this.expectToken(_.TokenKind.COLON);const p=this.parseTypeReference();let I;this.expectOptionalToken(_.TokenKind.EQUALS)&&(I=this.parseConstValueLiteral());const N=this.parseConstDirectives();return this.node(e,{kind:q.Kind.INPUT_VALUE_DEFINITION,description:t,name:s,type:p,defaultValue:I,directives:N})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const s=this.parseName(),p=this.parseImplementsInterfaces(),I=this.parseConstDirectives(),N=this.parseFieldsDefinition();return this.node(e,{kind:q.Kind.INTERFACE_TYPE_DEFINITION,description:t,name:s,interfaces:p,directives:I,fields:N})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const s=this.parseName(),p=this.parseConstDirectives(),I=this.parseUnionMemberTypes();return this.node(e,{kind:q.Kind.UNION_TYPE_DEFINITION,description:t,name:s,directives:p,types:I})}parseUnionMemberTypes(){return this.expectOptionalToken(_.TokenKind.EQUALS)?this.delimitedMany(_.TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const s=this.parseName(),p=this.parseConstDirectives(),I=this.parseEnumValuesDefinition();return this.node(e,{kind:q.Kind.ENUM_TYPE_DEFINITION,description:t,name:s,directives:p,values:I})}parseEnumValuesDefinition(){return this.optionalMany(_.TokenKind.BRACE_L,this.parseEnumValueDefinition,_.TokenKind.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseEnumValueName(),p=this.parseConstDirectives();return this.node(e,{kind:q.Kind.ENUM_VALUE_DEFINITION,description:t,name:s,directives:p})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw(0,J.syntaxError)(this._lexer.source,this._lexer.token.start,`${i(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const s=this.parseName(),p=this.parseConstDirectives(),I=this.parseInputFieldsDefinition();return this.node(e,{kind:q.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:s,directives:p,fields:I})}parseInputFieldsDefinition(){return this.optionalMany(_.TokenKind.BRACE_L,this.parseInputValueDef,_.TokenKind.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===_.TokenKind.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),s=this.optionalMany(_.TokenKind.BRACE_L,this.parseOperationTypeDefinition,_.TokenKind.BRACE_R);if(t.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.SCHEMA_EXTENSION,directives:t,operationTypes:s})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),s=this.parseConstDirectives();if(s.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.SCALAR_TYPE_EXTENSION,name:t,directives:s})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),s=this.parseImplementsInterfaces(),p=this.parseConstDirectives(),I=this.parseFieldsDefinition();if(s.length===0&&p.length===0&&I.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.OBJECT_TYPE_EXTENSION,name:t,interfaces:s,directives:p,fields:I})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),s=this.parseImplementsInterfaces(),p=this.parseConstDirectives(),I=this.parseFieldsDefinition();if(s.length===0&&p.length===0&&I.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.INTERFACE_TYPE_EXTENSION,name:t,interfaces:s,directives:p,fields:I})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),s=this.parseConstDirectives(),p=this.parseUnionMemberTypes();if(s.length===0&&p.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.UNION_TYPE_EXTENSION,name:t,directives:s,types:p})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),s=this.parseConstDirectives(),p=this.parseEnumValuesDefinition();if(s.length===0&&p.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.ENUM_TYPE_EXTENSION,name:t,directives:s,values:p})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),s=this.parseConstDirectives(),p=this.parseInputFieldsDefinition();if(s.length===0&&p.length===0)throw this.unexpected();return this.node(e,{kind:q.Kind.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:s,fields:p})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(_.TokenKind.AT);const s=this.parseName(),p=this.parseArgumentDefs(),I=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const N=this.parseDirectiveLocations();return this.node(e,{kind:q.Kind.DIRECTIVE_DEFINITION,description:t,name:s,arguments:p,repeatable:I,locations:N})}parseDirectiveLocations(){return this.delimitedMany(_.TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(qe.DirectiveLocation,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new W.Location(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw(0,J.syntaxError)(this._lexer.source,t.start,`Expected ${d(e)}, found ${i(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===_.TokenKind.NAME&&t.value===e)this.advanceLexer();else throw(0,J.syntaxError)(this._lexer.source,t.start,`Expected "${e}", found ${i(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===_.TokenKind.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return(0,J.syntaxError)(this._lexer.source,t.start,`Unexpected ${i(t)}.`)}any(e,t,s){this.expectToken(e);const p=[];for(;!this.expectOptionalToken(s);)p.push(t.call(this));return p}optionalMany(e,t,s){if(this.expectOptionalToken(e)){const p=[];do p.push(t.call(this));while(!this.expectOptionalToken(s));return p}return[]}many(e,t,s){this.expectToken(e);const p=[];do p.push(t.call(this));while(!this.expectOptionalToken(s));return p}delimitedMany(e,t){this.expectOptionalToken(e);const s=[];do s.push(t.call(this));while(this.expectOptionalToken(e));return s}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==_.TokenKind.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw(0,J.syntaxError)(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}n.Parser=h;function i(y){const e=y.value;return d(y.kind)+(e!=null?` "${e}"`:"")}function d(y){return(0,Ee.isPunctuatorTokenKind)(y)?`"${y}"`:y}}),je=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.printString=a;function a(h){return`"${h.replace(o,m)}"`}const o=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function m(h){return c[h.charCodeAt(0)]}const c=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"]}),Me=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BREAK=void 0,n.getEnterLeaveForKind=c,n.getVisitFn=h,n.visit=o,n.visitInParallel=m;const a=Object.freeze({});n.BREAK=a;function o(i,d,y=W.QueryDocumentKeys){const e=new Map;for(const T of Object.values(q.Kind))e.set(T,c(d,T));let t,s=Array.isArray(i),p=[i],I=-1,N=[],A=i,D,C;const P=[],G=[];do{I++;const T=I===p.length,w=T&&N.length!==0;if(T){if(D=G.length===0?void 0:P[P.length-1],A=C,C=G.pop(),w)if(s){A=A.slice();let k=0;for(const[K,E]of N){const v=K-k;E===null?(A.splice(v,1),k++):A[v]=E}}else{A=Object.defineProperties({},Object.getOwnPropertyDescriptors(A));for(const[k,K]of N)A[k]=K}I=t.index,p=t.keys,N=t.edits,s=t.inArray,t=t.prev}else if(C){if(D=s?I:p[I],A=C[D],A==null)continue;P.push(D)}let l;if(!Array.isArray(A)){var x,u;(0,W.isNode)(A)||(0,ie.devAssert)(!1,`Invalid AST Node: ${(0,_e.inspect)(A)}.`);const k=T?(x=e.get(A.kind))===null||x===void 0?void 0:x.leave:(u=e.get(A.kind))===null||u===void 0?void 0:u.enter;if(l=k==null?void 0:k.call(d,A,D,C,P,G),l===a)break;if(l===!1){if(!T){P.pop();continue}}else if(l!==void 0&&(N.push([D,l]),!T))if((0,W.isNode)(l))A=l;else{P.pop();continue}}if(l===void 0&&w&&N.push([D,A]),T)P.pop();else{var b;t={inArray:s,index:I,keys:p,edits:N,prev:t},s=Array.isArray(A),p=s?A:(b=y[A.kind])!==null&&b!==void 0?b:[],I=-1,N=[],C&&G.push(C),C=A}}while(t!==void 0);return N.length!==0?N[N.length-1][1]:i}function m(i){const d=new Array(i.length).fill(null),y=Object.create(null);for(const e of Object.values(q.Kind)){let t=!1;const s=new Array(i.length).fill(void 0),p=new Array(i.length).fill(void 0);for(let N=0;N<i.length;++N){const{enter:A,leave:D}=c(i[N],e);t||(t=A!=null||D!=null),s[N]=A,p[N]=D}if(!t)continue;const I={enter(...N){const A=N[0];for(let C=0;C<i.length;C++)if(d[C]===null){var D;const P=(D=s[C])===null||D===void 0?void 0:D.apply(i[C],N);if(P===!1)d[C]=A;else if(P===a)d[C]=a;else if(P!==void 0)return P}},leave(...N){const A=N[0];for(let C=0;C<i.length;C++)if(d[C]===null){var D;const P=(D=p[C])===null||D===void 0?void 0:D.apply(i[C],N);if(P===a)d[C]=a;else if(P!==void 0&&P!==!1)return P}else d[C]===A&&(d[C]=null)}};y[e]=I}return y}function c(i,d){const y=i[d];return typeof y=="object"?y:typeof y=="function"?{enter:y,leave:void 0}:{enter:i.enter,leave:i.leave}}function h(i,d,y){const{enter:e,leave:t}=c(i,d);return y?t:e}}),Ue=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.print=a;function a(e){return(0,Me.visit)(e,m)}const o=80,m={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>c(e.definitions,`

`)},OperationDefinition:{leave(e){const t=i("(",c(e.variableDefinitions,", "),")"),s=c([e.operation,c([e.name,t]),c(e.directives," ")]," ");return(s==="query"?"":s+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:s,directives:p})=>e+": "+t+i(" = ",s)+i(" ",c(p," "))},SelectionSet:{leave:({selections:e})=>h(e)},Field:{leave({alias:e,name:t,arguments:s,directives:p,selectionSet:I}){const N=i("",e,": ")+t;let A=N+i("(",c(s,", "),")");return A.length>o&&(A=N+i(`(
`,d(c(s,`
`)),`
)`)),c([A,c(p," "),I]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+i(" ",c(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:s})=>c(["...",i("on ",e),c(t," "),s]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:s,directives:p,selectionSet:I})=>`fragment ${e}${i("(",c(s,", "),")")} on ${t} ${i("",c(p," ")," ")}`+I},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?(0,ge.printBlockString)(e):(0,je.printString)(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+c(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+c(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+i("(",c(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:s})=>i("",e,`
`)+c(["schema",c(t," "),h(s)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:s})=>i("",e,`
`)+c(["scalar",t,c(s," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:s,directives:p,fields:I})=>i("",e,`
`)+c(["type",t,i("implements ",c(s," & ")),c(p," "),h(I)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:s,type:p,directives:I})=>i("",e,`
`)+t+(y(s)?i(`(
`,d(c(s,`
`)),`
)`):i("(",c(s,", "),")"))+": "+p+i(" ",c(I," "))},InputValueDefinition:{leave:({description:e,name:t,type:s,defaultValue:p,directives:I})=>i("",e,`
`)+c([t+": "+s,i("= ",p),c(I," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:s,directives:p,fields:I})=>i("",e,`
`)+c(["interface",t,i("implements ",c(s," & ")),c(p," "),h(I)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:s,types:p})=>i("",e,`
`)+c(["union",t,c(s," "),i("= ",c(p," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:s,values:p})=>i("",e,`
`)+c(["enum",t,c(s," "),h(p)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:s})=>i("",e,`
`)+c([t,c(s," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:s,fields:p})=>i("",e,`
`)+c(["input",t,c(s," "),h(p)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:s,repeatable:p,locations:I})=>i("",e,`
`)+"directive @"+t+(y(s)?i(`(
`,d(c(s,`
`)),`
)`):i("(",c(s,", "),")"))+(p?" repeatable":"")+" on "+c(I," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>c(["extend schema",c(e," "),h(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>c(["extend scalar",e,c(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:s,fields:p})=>c(["extend type",e,i("implements ",c(t," & ")),c(s," "),h(p)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:s,fields:p})=>c(["extend interface",e,i("implements ",c(t," & ")),c(s," "),h(p)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:s})=>c(["extend union",e,c(t," "),i("= ",c(s," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:s})=>c(["extend enum",e,c(t," "),h(s)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:s})=>c(["extend input",e,c(t," "),h(s)]," ")}};function c(e,t=""){var s;return(s=e==null?void 0:e.filter(p=>p).join(t))!==null&&s!==void 0?s:""}function h(e){return i(`{
`,d(c(e,`
`)),`
}`)}function i(e,t,s=""){return t!=null&&t!==""?e+t+s:""}function d(e){return i("  ",e.replace(/\n/g,`
  `))}function y(e){var t;return(t=e==null?void 0:e.some(s=>s.includes(`
`)))!==null&&t!==void 0?t:!1}}),Oe=function(n){var a=n.uri,o=n.name,m=n.type;this.uri=a,this.name=o,this.type=m},Ne=function(n){return typeof File<"u"&&n instanceof File||typeof Blob<"u"&&n instanceof Blob||n instanceof Oe},Ve=function B(n,a,o){a===void 0&&(a=""),o===void 0&&(o=Ne);var m,c=new Map;function h(e,t){var s=c.get(t);s?s.push.apply(s,e):c.set(t,e)}if(o(n))m=null,h([a],n);else{var i=a?a+".":"";if(typeof FileList<"u"&&n instanceof FileList)m=Array.prototype.map.call(n,function(e,t){return h([""+i+t],e),null});else if(Array.isArray(n))m=n.map(function(e,t){var s=B(e,""+i+t,o);return s.files.forEach(h),s.clone});else if(n&&n.constructor===Object){m={};for(var d in n){var y=B(n[d],""+i+d,o);y.files.forEach(h),m[d]=y.clone}}else m=n}return{clone:m,files:c}},Ge=Oe,$e=Ve,Qe=Ne,Te={ReactNativeFile:Ge,extractFiles:$e,isExtractableFile:Qe},He=typeof self=="object"?self.FormData:window.FormData,ke=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.defaultJsonSerializer=void 0,n.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify}}),Je=V(function(B,n){var a=M&&M.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(n,"__esModule",{value:!0});var o=a(He),m=function(h){return Te.isExtractableFile(h)||h!==null&&typeof h=="object"&&typeof h.pipe=="function"};function c(h,i,d,y){y===void 0&&(y=ke.defaultJsonSerializer);var e=Te.extractFiles({query:h,variables:i,operationName:d},"",m),t=e.clone,s=e.files;if(s.size===0){if(!Array.isArray(h))return y.stringify(t);if(typeof i<"u"&&!Array.isArray(i))throw new Error("Cannot create request body with given variable type, array expected");var p=h.reduce(function(C,P,G){return C.push({query:P,variables:i?i[G]:void 0}),C},[]);return y.stringify(p)}var I=typeof FormData>"u"?o.default:FormData,N=new I;N.append("operations",y.stringify(t));var A={},D=0;return s.forEach(function(C){A[++D]=C}),N.append("map",y.stringify(A)),D=0,s.forEach(function(C,P){N.append(""+ ++D,P)}),N}n.default=c}),re=V(function(B,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseBatchRequestsExtendedArgs=n.parseRawRequestExtendedArgs=n.parseRequestExtendedArgs=n.parseBatchRequestArgs=n.parseRawRequestArgs=n.parseRequestArgs=void 0;function a(d,y,e){return d.document?d:{document:d,variables:y,requestHeaders:e,signal:void 0}}n.parseRequestArgs=a;function o(d,y,e){return d.query?d:{query:d,variables:y,requestHeaders:e,signal:void 0}}n.parseRawRequestArgs=o;function m(d,y){return d.documents?d:{documents:d,requestHeaders:y,signal:void 0}}n.parseBatchRequestArgs=m;function c(d,y,e,t){return d.document?d:{url:d,document:y,variables:e,requestHeaders:t,signal:void 0}}n.parseRequestExtendedArgs=c;function h(d,y,e,t){return d.query?d:{url:d,query:y,variables:e,requestHeaders:t,signal:void 0}}n.parseRawRequestExtendedArgs=h;function i(d,y,e){return d.documents?d:{url:d,documents:y,requestHeaders:e,signal:void 0}}n.parseBatchRequestsExtendedArgs=i}),se=V(function(B,n){var a=M&&M.__extends||function(){var m=function(c,h){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,d){i.__proto__=d}||function(i,d){for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(i[y]=d[y])},m(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");m(c,h);function i(){this.constructor=c}c.prototype=h===null?Object.create(h):(i.prototype=h.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.ClientError=void 0;var o=function(m){a(c,m);function c(h,i){var d=this,y=c.extractMessage(h)+": "+JSON.stringify({response:h,request:i});return d=m.call(this,y)||this,Object.setPrototypeOf(d,c.prototype),d.response=h,d.request=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(d,c),d}return c.extractMessage=function(h){try{return h.errors[0].message}catch{return"GraphQL Error (Code: "+h.status+")"}},c}(Error);n.ClientError=o}),Ye=V(function(B,n){var a=M&&M.__assign||function(){return a=Object.assign||function(x){for(var u,b=1,T=arguments.length;b<T;b++){u=arguments[b];for(var w in u)Object.prototype.hasOwnProperty.call(u,w)&&(x[w]=u[w])}return x},a.apply(this,arguments)},o=M&&M.__awaiter||function(x,u,b,T){function w(l){return l instanceof b?l:new b(function(k){k(l)})}return new(b||(b=Promise))(function(l,k){function K(r){try{v(T.next(r))}catch(f){k(f)}}function E(r){try{v(T.throw(r))}catch(f){k(f)}}function v(r){r.done?l(r.value):w(r.value).then(K,E)}v((T=T.apply(x,u||[])).next())})},m=M&&M.__generator||function(x,u){var b={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},T,w,l,k;return k={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function K(v){return function(r){return E([v,r])}}function E(v){if(T)throw new TypeError("Generator is already executing.");for(;b;)try{if(T=1,w&&(l=v[0]&2?w.return:v[0]?w.throw||((l=w.return)&&l.call(w),0):w.next)&&!(l=l.call(w,v[1])).done)return l;switch(w=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return b.label++,{value:v[1],done:!1};case 5:b.label++,w=v[1],v=[0];continue;case 7:v=b.ops.pop(),b.trys.pop();continue;default:if(l=b.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){b=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){b.label=v[1];break}if(v[0]===6&&b.label<l[1]){b.label=l[1],l=v;break}if(l&&b.label<l[2]){b.label=l[2],b.ops.push(v);break}l[2]&&b.ops.pop(),b.trys.pop();continue}v=u.call(x,b)}catch(r){v=[6,r],w=0}finally{T=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GraphQLWebSocketClient=void 0;var c="connection_init",h="connection_ack",i="ping",d="pong",y="subscribe",e="next",t="error",s="complete",p=function(){function x(u,b,T){this._type=u,this._payload=b,this._id=T}return Object.defineProperty(x.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"text",{get:function(){var u={type:this.type};return this.id!=null&&this.id!=null&&(u.id=this.id),this.payload!=null&&this.payload!=null&&(u.payload=this.payload),JSON.stringify(u)},enumerable:!1,configurable:!0}),x.parse=function(u,b){var T=JSON.parse(u),w=T.type,l=T.payload,k=T.id;return new x(w,b(l),k)},x}(),I=function(){function x(u,b){var T=this,w=b.onInit,l=b.onAcknowledged,k=b.onPing,K=b.onPong;this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=u,u.onopen=function(E){return o(T,void 0,void 0,function(){var v,r,f,g;return m(this,function(O){switch(O.label){case 0:return this.socketState.acknowledged=!1,this.socketState.subscriptions={},r=(v=u).send,f=A,w?[4,w()]:[3,2];case 1:return g=O.sent(),[3,3];case 2:g=null,O.label=3;case 3:return r.apply(v,[f.apply(void 0,[g]).text]),[2]}})})},u.onclose=function(E){T.socketState.acknowledged=!1,T.socketState.subscriptions={}},u.onerror=function(E){console.error(E)},u.onmessage=function(E){try{var v=N(E.data);switch(v.type){case h:{T.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(T.socketState.acknowledged=!0,l&&l(v.payload));return}case i:{k?k(v.payload).then(function(L){return u.send(C(L).text)}):u.send(C(null).text);return}case d:{K&&K(v.payload);return}}if(!T.socketState.acknowledged||v.id===void 0||v.id===null||!T.socketState.subscriptions[v.id])return;var r=T.socketState.subscriptions[v.id],f=r.query,g=r.variables,O=r.subscriber;switch(v.type){case e:{!v.payload.errors&&v.payload.data&&O.next&&O.next(v.payload.data),v.payload.errors&&O.error&&O.error(new se.ClientError(a(a({},v.payload),{status:200}),{query:f,variables:g}));return}case t:{O.error&&O.error(new se.ClientError({errors:v.payload,status:200},{query:f,variables:g}));return}case s:{O.complete&&O.complete(),delete T.socketState.subscriptions[v.id];return}}}catch(L){console.error(L),u.close(1006)}u.close(4400,"Unknown graphql-ws message.")}}return x.prototype.makeSubscribe=function(u,b,T,w){var l=this,k=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[k]={query:u,variables:T,subscriber:w},this.socket.send(P(k,{query:u,operationName:b,variables:T}).text),function(){l.socket.send(G(k).text),delete l.socketState.subscriptions[k]}},x.prototype.rawRequest=function(u,b){var T=this;return new Promise(function(w,l){var k;T.rawSubscribe(u,{next:function(K,E){return k={data:K,extensions:E}},error:l,complete:function(){return w(k)}},b)})},x.prototype.request=function(u,b){var T=this;return new Promise(function(w,l){var k;T.subscribe(u,{next:function(K){return k=K},error:l,complete:function(){return w(k)}},b)})},x.prototype.subscribe=function(u,b,T){var w=Ie.resolveRequestDocument(u),l=w.query,k=w.operationName;return this.makeSubscribe(l,k,T,b)},x.prototype.rawSubscribe=function(u,b,T){return this.makeSubscribe(u,void 0,T,b)},x.prototype.ping=function(u){this.socket.send(D(u).text)},x.prototype.close=function(){this.socket.close(1e3)},x.PROTOCOL="graphql-transport-ws",x}();n.GraphQLWebSocketClient=I;function N(x,u){u===void 0&&(u=function(T){return T});var b=p.parse(x,u);return b}function A(x){return new p(c,x)}function D(x){return new p(i,x,void 0)}function C(x){return new p(d,x,void 0)}function P(x,u){return new p(y,u,x)}function G(x){return new p(s,void 0,x)}}),Ie=V(function(B,n){var a=M&&M.__assign||function(){return a=Object.assign||function(E){for(var v,r=1,f=arguments.length;r<f;r++){v=arguments[r];for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(E[g]=v[g])}return E},a.apply(this,arguments)},o=M&&M.__createBinding||(Object.create?function(E,v,r,f){f===void 0&&(f=r),Object.defineProperty(E,f,{enumerable:!0,get:function(){return v[r]}})}:function(E,v,r,f){f===void 0&&(f=r),E[f]=v[r]}),m=M&&M.__setModuleDefault||(Object.create?function(E,v){Object.defineProperty(E,"default",{enumerable:!0,value:v})}:function(E,v){E.default=v}),c=M&&M.__importStar||function(E){if(E&&E.__esModule)return E;var v={};if(E!=null)for(var r in E)r!=="default"&&Object.prototype.hasOwnProperty.call(E,r)&&o(v,E,r);return m(v,E),v},h=M&&M.__awaiter||function(E,v,r,f){function g(O){return O instanceof r?O:new r(function(L){L(O)})}return new(r||(r=Promise))(function(O,L){function S($){try{R(f.next($))}catch(j){L(j)}}function U($){try{R(f.throw($))}catch(j){L(j)}}function R($){$.done?O($.value):g($.value).then(S,U)}R((f=f.apply(E,v||[])).next())})},i=M&&M.__generator||function(E,v){var r={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},f,g,O,L;return L={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function S(R){return function($){return U([R,$])}}function U(R){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,g&&(O=R[0]&2?g.return:R[0]?g.throw||((O=g.return)&&O.call(g),0):g.next)&&!(O=O.call(g,R[1])).done)return O;switch(g=0,O&&(R=[R[0]&2,O.value]),R[0]){case 0:case 1:O=R;break;case 4:return r.label++,{value:R[1],done:!1};case 5:r.label++,g=R[1],R=[0];continue;case 7:R=r.ops.pop(),r.trys.pop();continue;default:if(O=r.trys,!(O=O.length>0&&O[O.length-1])&&(R[0]===6||R[0]===2)){r=0;continue}if(R[0]===3&&(!O||R[1]>O[0]&&R[1]<O[3])){r.label=R[1];break}if(R[0]===6&&r.label<O[1]){r.label=O[1],O=R;break}if(O&&r.label<O[2]){r.label=O[2],r.ops.push(R);break}O[2]&&r.ops.pop(),r.trys.pop();continue}R=v.call(E,r)}catch($){R=[6,$],g=0}finally{f=O=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},d=M&&M.__rest||function(E,v){var r={};for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&v.indexOf(f)<0&&(r[f]=E[f]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(E);g<f.length;g++)v.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(E,f[g])&&(r[f[g]]=E[f[g]]);return r},y=M&&M.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(n,"__esModule",{value:!0}),n.GraphQLWebSocketClient=n.gql=n.resolveRequestDocument=n.batchRequests=n.request=n.rawRequest=n.GraphQLClient=n.ClientError=void 0;var e=c(De),t=e,s=y(Je);Object.defineProperty(n,"ClientError",{enumerable:!0,get:function(){return se.ClientError}});var p=function(E){var v={};return E&&(typeof Headers<"u"&&E instanceof Headers||E instanceof t.Headers?v=K(E):Array.isArray(E)?E.forEach(function(r){var f=r[0],g=r[1];v[f]=g}):v=E),v},I=function(E){return E.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},N=function(E){var v=E.query,r=E.variables,f=E.operationName,g=E.jsonSerializer;if(!Array.isArray(v)){var O=["query="+encodeURIComponent(I(v))];return r&&O.push("variables="+encodeURIComponent(g.stringify(r))),f&&O.push("operationName="+encodeURIComponent(f)),O.join("&")}if(typeof r<"u"&&!Array.isArray(r))throw new Error("Cannot create query with given variable type, array expected");var L=v.reduce(function(S,U,R){return S.push({query:I(U),variables:r?g.stringify(r[R]):void 0}),S},[]);return"query="+encodeURIComponent(g.stringify(L))},A=function(E){var v=E.url,r=E.query,f=E.variables,g=E.operationName,O=E.headers,L=E.fetch,S=E.fetchOptions;return h(void 0,void 0,void 0,function(){var U;return i(this,function(R){switch(R.label){case 0:return U=s.default(r,f,g,S.jsonSerializer),[4,L(v,a({method:"POST",headers:a(a({},typeof U=="string"?{"Content-Type":"application/json"}:{}),O),body:U},S))];case 1:return[2,R.sent()]}})})},D=function(E){var v=E.url,r=E.query,f=E.variables,g=E.operationName,O=E.headers,L=E.fetch,S=E.fetchOptions;return h(void 0,void 0,void 0,function(){var U;return i(this,function(R){switch(R.label){case 0:return U=N({query:r,variables:f,operationName:g,jsonSerializer:S.jsonSerializer}),[4,L(v+"?"+U,a({method:"GET",headers:O},S))];case 1:return[2,R.sent()]}})})},C=function(){function E(v,r){this.url=v,this.options=r||{}}return E.prototype.rawRequest=function(v,r,f){return h(this,void 0,void 0,function(){var g,O,L,S,U,R,$,j,Q,H;return i(this,function(z){return g=re.parseRawRequestArgs(v,r,f),O=this.options,L=O.headers,S=O.fetch,U=S===void 0?e.default:S,R=O.method,$=R===void 0?"POST":R,j=d(O,["headers","fetch","method"]),Q=this.url,g.signal!==void 0&&(j.signal=g.signal),H=w(g.query).operationName,[2,P({url:Q,query:g.query,variables:g.variables,headers:a(a({},p(l(L))),p(g.requestHeaders)),operationName:H,fetch:U,method:$,fetchOptions:j})]})})},E.prototype.request=function(v,r,f){return h(this,void 0,void 0,function(){var g,O,L,S,U,R,$,j,Q,H,z,ee,X;return i(this,function(Z){switch(Z.label){case 0:return g=re.parseRequestArgs(v,r,f),O=this.options,L=O.headers,S=O.fetch,U=S===void 0?e.default:S,R=O.method,$=R===void 0?"POST":R,j=d(O,["headers","fetch","method"]),Q=this.url,g.signal!==void 0&&(j.signal=g.signal),H=w(g.document),z=H.query,ee=H.operationName,[4,P({url:Q,query:z,variables:g.variables,headers:a(a({},p(l(L))),p(g.requestHeaders)),operationName:ee,fetch:U,method:$,fetchOptions:j})];case 1:return X=Z.sent().data,[2,X]}})})},E.prototype.batchRequests=function(v,r){return h(this,void 0,void 0,function(){var f,g,O,L,S,U,R,$,j,Q,H,z;return i(this,function(ee){switch(ee.label){case 0:return f=re.parseBatchRequestArgs(v,r),g=this.options,O=g.headers,L=g.fetch,S=L===void 0?e.default:L,U=g.method,R=U===void 0?"POST":U,$=d(g,["headers","fetch","method"]),j=this.url,f.signal!==void 0&&($.signal=f.signal),Q=f.documents.map(function(X){var Z=X.document;return w(Z).query}),H=f.documents.map(function(X){var Z=X.variables;return Z}),[4,P({url:j,query:Q,variables:H,headers:a(a({},p(l(O))),p(f.requestHeaders)),operationName:void 0,fetch:S,method:R,fetchOptions:$})];case 1:return z=ee.sent().data,[2,z]}})})},E.prototype.setHeaders=function(v){return this.options.headers=v,this},E.prototype.setHeader=function(v,r){var f,g=this.options.headers;return g?g[v]=r:this.options.headers=(f={},f[v]=r,f),this},E.prototype.setEndpoint=function(v){return this.url=v,this},E}();n.GraphQLClient=C;function P(E){var v=E.url,r=E.query,f=E.variables,g=E.headers,O=E.operationName,L=E.fetch,S=E.method,U=S===void 0?"POST":S,R=E.fetchOptions;return h(this,void 0,void 0,function(){var $,j,Q,H,z,ee,X,Z,de,oe,fe;return i(this,function(ae){switch(ae.label){case 0:return $=U.toUpperCase()==="POST"?A:D,j=Array.isArray(r),[4,$({url:v,query:r,variables:f,operationName:O,headers:g,fetch:L,fetchOptions:R})];case 1:return Q=ae.sent(),[4,b(Q,R.jsonSerializer)];case 2:if(H=ae.sent(),z=j&&Array.isArray(H)?!H.some(function(we){var Ae=we.data;return!Ae}):!!H.data,ee=!H.errors||R.errorPolicy==="all"||R.errorPolicy==="ignore",Q.ok&&ee&&z)return X=Q.headers,Z=Q.status,de=d(H,["errors"]),oe=R.errorPolicy==="ignore"?de:H,[2,a(a({},j?{data:oe}:oe),{headers:X,status:Z})];throw fe=typeof H=="string"?{error:H}:H,new se.ClientError(a(a({},fe),{status:Q.status,headers:Q.headers}),{query:r,variables:f})}})})}function G(E,v,r,f){return h(this,void 0,void 0,function(){var g,O;return i(this,function(L){return g=re.parseRawRequestExtendedArgs(E,v,r,f),O=new C(g.url),[2,O.rawRequest(a({},g))]})})}n.rawRequest=G;function x(E,v,r,f){return h(this,void 0,void 0,function(){var g,O;return i(this,function(L){return g=re.parseRequestExtendedArgs(E,v,r,f),O=new C(g.url),[2,O.request(a({},g))]})})}n.request=x;function u(E,v,r){return h(this,void 0,void 0,function(){var f,g;return i(this,function(O){return f=re.parseBatchRequestsExtendedArgs(E,v,r),g=new C(f.url),[2,g.batchRequests(a({},f))]})})}n.batchRequests=u,n.default=x;function b(E,v){return v===void 0&&(v=ke.defaultJsonSerializer),h(this,void 0,void 0,function(){var r,f,g;return i(this,function(O){switch(O.label){case 0:return E.headers.forEach(function(L,S){S.toLowerCase()==="content-type"&&(r=L)}),r&&r.toLowerCase().startsWith("application/json")?(g=(f=v).parse,[4,E.text()]):[3,2];case 1:return[2,g.apply(f,[O.sent()])];case 2:return[2,E.text()]}})})}function T(E){var v,r=void 0,f=E.definitions.filter(function(g){return g.kind==="OperationDefinition"});return f.length===1&&(r=(v=f[0].name)===null||v===void 0?void 0:v.value),r}function w(E){if(typeof E=="string"){var v=void 0;try{var r=Fe.parse(E);v=T(r)}catch{}return{query:E,operationName:v}}var f=T(E);return{query:Ue.print(E),operationName:f}}n.resolveRequestDocument=w;function l(E){return typeof E=="function"?E():E}function k(E){for(var v=[],r=1;r<arguments.length;r++)v[r-1]=arguments[r];return E.reduce(function(f,g,O){return""+f+g+(O in v?v[O]:"")},"")}n.gql=k;function K(E){var v={};return E.forEach(function(r,f){v[f]=r}),v}Object.defineProperty(n,"GraphQLWebSocketClient",{enumerable:!0,get:function(){return Ye.GraphQLWebSocketClient}})});class ue{static getQueryParams(n){const a=new Map,o=/[?&]?([^=]+)=([^&]*)/g;let m;for(n=window.unescape(n),n=n.split("+").join(" ");m=o.exec(n);)a.set(window.decodeURIComponent(m[1]),m[2]);return a.set("urlBase",this.getUrlBase()),window.moduleID&&window.URIServiceBroker&&(a.set("moduleID",window.moduleID),a.set("URIServiceBroker",window.URIServiceBroker)),a}static getUrlBase(){return window.mock_url?window.mock_url:`${location.protocol}//${location.hostname}${location.port?":"+location.port:""}`}static getResourceIdFromUrlToken(n){try{const a=n.split("/");if(!a[1])return null;const o=a[1];return atob(o)}catch(a){throw new Error("Erro ao obter resourceId:"+a)}}static getPkObjectFromUrlToken(n){try{let a=n.split("/")[2];return a?a.indexOf("&")>-1?JSON.parse(atob(a.split("&")[0])):JSON.parse(atob(a)):null}catch(a){throw new Error("Erro ao obter a PK do objeto:"+a)}}}class We{constructor(n,a,o){this.req=n,this.resolve=a,this.reject=o}putVariable(n,a){this.req.values[n]=a}reCall(){return F.get().callGraphQL(this.req).then(this.resolve,this.reject)}putTXPro(n,a){if(!this.req||!this.req.values)return;(this.req.values.changes||[]).length&&this.req.values.changes[0].fields.push({dataType:Re.TEXT,fieldName:`${xe.DATA_UNIT_TRANSIENT_PREFIX_NAME}${n}`,value:a})}}class ze{constructor(n,a,o,m){this.serviceName=n,this.requestBody=a,this.successCallback=o,this.errorCallback=m}reCall(n){return n&&(this.requestBody=n),F.get().callServiceBroker(this.serviceName,this.requestBody).then(this.successCallback,this.errorCallback)}}var be=function(B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=B[Symbol.asyncIterator],a;return n?n.call(B):(B=typeof __values=="function"?__values(B):B[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(c){a[c]=B[c]&&function(h){return new Promise(function(i,d){h=B[c](h),m(i,d,h.done,h.value)})}}function m(c,h,i,d){Promise.resolve(d).then(function(y){c({value:y,done:i})},h)}};class F{constructor(){this.ready=!0,this.watingRequestsById=new Map}static get(){if(!F.instance){F.instance=new F;const n=document.querySelector(this.appTagName);n===null?F.instance.resume():(pe.getContextValue("__SNK__APPLICATION__LOADING__")===!0&&F.instance.pause(),n.addEventListener("applicationLoading",()=>F.instance.pause()),n.addEventListener("applicationLoaded",()=>F.instance.resume()))}return this.instance.application=pe.getContextValue("__SNK__APPLICATION__"),this.instance}static getGraphQLPath(){return ne.isEmpty(this.instance.graphqlPath)&&this.instance.application!=null&&(this.instance.graphqlPath=`/${this.instance.application.getModuleName()}/graphql`),this.instance.graphqlPath}static addRequestListener(n){F.requestListener.indexOf(n)<0&&F.requestListener.push(n)}static removeRequestListener(n){const a=F.requestListener.indexOf(n);a>-1&&F.requestListener.splice(a,1)}processGraphQlErrorInfo(n){var a,o;const c="Falha detectada",h=n[0];if(h.length>0){const i=h[0],d=i!=null&&i.message?i==null?void 0:i.message:"Não há mensagem de erro",y=!((a=i==null?void 0:i.extensions)===null||a===void 0)&&a.level?"WARNING":"ERROR",e=!((o=i==null?void 0:i.extensions)===null||o===void 0)&&o.code?i.extensions.code:"";switch(y){case"WARNING":return new ce(c,d,e);default:return new te(c,d,e)}}else return new te(c,"Não há informações sobre o erro")}processServiceBrokerErrorInfo(n){const a="Falha detectada";let{statusMessage:o,tsError:m}=n||{};o||(o="Não há informações sobre o erro");let c,h;return m&&(c=m.tsErrorCode,h="WARNING"),h==="WARNING"?new ce(a,o,c):new te(a,o,c)}isDevMode(){return window==null?void 0:window.hasOwnProperty("wksdata")}async callGraphQL(n,a=!1){var o;this.ready&&(this.pause(),window.requestAnimationFrame(()=>this.resume()));const m=this.getReqKey(n);if(n.queryID=m,n.values.queryID=m,F.clientEventsByID){n.values.registeredEventListeners=[];for(let[c]of F.clientEventsByID)n.values.registeredEventListeners.push(c)}return this.ready?new Promise(async(c,h)=>{let i=this.getQueryTemplate(n);const d=await this.fecthGraphQL([{document:i,variables:n.values}],a);if(d.errors.length>0){if(!await this.proccesGraphQLClientEvents(d==null?void 0:d.extensions,n,c,h)){const y=this.processGraphQlErrorInfo(d.errors);h(y)}}else c(d.data[0][m]),await this.proccesGraphQLClientEvents(d==null?void 0:d.extensions,n,c,h)}):(this.watingRequestsById.has(m)||this.watingRequestsById.set(m,new Xe(n,a)),(o=this.watingRequestsById.get(m))===null||o===void 0?void 0:o.promise)}resolveURL(){return ue.getUrlBase()}async proccesGraphQLClientEvents(n,a,o,m){if(n==null)return!1;for(const c in n){const{clientEvents:h}=n[c];if(!h)return!1;for(const i in h){if(!F.hasClientEvent(i))throw console.warn(`Client event ${i} not registered`),new ce("ClientEvent não registrado",`Ocorreu o client event ${i} porém não há client event registrado na aplicação.`);F.clientEventsByID.get(i).forEach(async y=>{await y({id:i,content:JSON.parse(h[i])},new We(a,o,m))})}return Object.keys(h).length>0}return!1}async processServiceBrokerClientEvents(n){var a,o,m,c,h,i,d,y;const{clientEvents:e,serviceName:t,payloadJson:s,accept:p,reject:I}=n;if(!(e!=null&&e.length))return;const N=new ze(t,s,p,I);try{for(var A=!0,D=be(e),C;C=await D.next(),a=C.done,!a;){c=C.value,A=!1;try{const u=c;if(F.hasClientEvent(u.id)){const b=F.clientEventsByID.get(u.id),T={id:u.id,content:u};try{for(var P=!0,G=(i=void 0,be(b)),x;x=await G.next(),h=x.done,!h;){y=x.value,P=!1;try{await y(T,N)}finally{P=!0}}}catch(w){i={error:w}}finally{try{!P&&!h&&(d=G.return)&&await d.call(G)}finally{if(i)throw i.error}}}}finally{A=!0}}}catch(u){o={error:u}}finally{try{!A&&!a&&(m=D.return)&&await m.call(D)}finally{if(o)throw o.error}}}async processPrinting(n){(n==null?void 0:n.pendingPrinting)==="true"&&await ye.getInstance().processPendingPrinting(n==null?void 0:n.transactionId),"localPrintings"in n&&ye.getInstance().processLocalPrinting(n==null?void 0:n.localPrintings)}getContext(n){var a;const o=ue.getQueryParams(location.search);return{baseUrl:`${this.resolveURL()}/${n}/service.sbr`,appName:window.APPLICATION_NAME||"SankhyaBlocks",mgeSession:`${window.mgeSession||o.get("mgeSession")}`,globalID:window.GLOBALID||ne.generateUUID(),resourceID:window.resourceID||((a=window.workspace)===null||a===void 0?void 0:a.resourceID)}}async callServiceBroker(n,a,o){return new Promise(async(m,c)=>{const h=n.split("@"),[i,d]=h.length===2?h:["mge",n],y=this.getContext(i);let e=`${y.baseUrl}?serviceName=${d}&counter=21&application=${y.appName}&outputType=json&preventTransform=false&mgeSession=${y.mgeSession}&resourceID=${y.resourceID}&globalID=${y.globalID}&allowConcurrentCalls=true`;e=await this.addUrlParams(o,e),this.isDevMode()&&(document.cookie=`JSESSIONID=${y.mgeSession};`);const t=new XMLHttpRequest;var s={};typeof a=="string"&&(a=he.stringToObject(a)),a.hasOwnProperty("requestBody")?s=a:s.requestBody=a;for(let[I]of F.clientEventsByID)s.requestBody.hasOwnProperty("clientEventList")||(s.requestBody.clientEventList={clientEvent:[]}),s.requestBody.clientEventList.clientEvent.push({$:I});const p=ne.generateUUID();F.requestListener.forEach(I=>I.onRequestStart({url:e,requestBody:a,requestId:p})),t.open("POST",e,!0),t.withCredentials=!0,t.send(he.objectToString(s)),t.onreadystatechange=async()=>{var I;if(t.readyState==4&&t.status==200)try{const N=JSON.parse(t.responseText);await this.processPrinting(N),this.isServiceBrokerError(N)?c(this.processServiceBrokerErrorInfo(N)):N.status==F.SERVICE_BROKER_STATUS.SERVICE_CANCELED?N.statusMessage&&console.debug(`[DataFetcher] ${N.statusMessage}`):(m(N.responseBody),N.status==F.SERVICE_BROKER_STATUS.INFO&&((I=this.application)===null||I===void 0||I.info(N.statusMessage))),this.processServiceBrokerClientEvents({clientEvents:N==null?void 0:N.clientEvents,serviceName:n,payloadJson:s,accept:m,reject:c})}catch(N){console.warn(`Erro ao executar serviço: ${N}`),c(new te("Erro ao executar serviço",N))}else t.readyState==4&&t.status!=200&&c(new te(`Erro ao executar serviço: ${n}`,t.responseText));F.requestListener.forEach(N=>N.onRequestEnd({url:e,requestBody:a,requestId:p}))}})}async addUrlParams(n,a){var o;const m=(n==null?void 0:n.urlParams)||{},c=await((o=this.application)===null||o===void 0?void 0:o.getAttributeFromHTMLWrapper("VSS"));if(ne.isEmpty(c)||(m.vss=c),Object.keys(m).length===0)return a;a.indexOf("?")===-1&&(a+="?");for(const i in m)a+=`&${i}=${m[i]}`;return a}isServiceBrokerError(n){return!n.hasOwnProperty("status")||n.status==F.SERVICE_BROKER_STATUS.ERROR||n.status==F.SERVICE_BROKER_STATUS.TIMEOUT}getReqKey(n){return window.btoa(ne.hashCode(`${n.query}${JSON.stringify(n.values||"")}`)).replace(/=/g,"")}getQueryTemplate(n){return(n.query||"").replaceAll("$queryAlias$",n.queryID)}pause(){this.ready=!1}async resume(){if(this.ready=!0,this.watingRequestsById.size>0){const n=this.watingRequestsById;this.watingRequestsById=new Map,this.executePendingRequest(n)}}async executePendingRequest(n){var a,o;const m=[];let c=!0;n.forEach(e=>{const t=this.getQueryTemplate(e.request);m.push({document:t,variables:Object.assign({},e.request.values)}),c=c&&e.quietMode});const h=await this.fecthGraphQL(m,c),{data:i,errors:d,extensions:y}=h;for(const e of d){const t=Object.values(e);for(const s of t){const p=n.get(s.request.variables[s.index].queryID),I=await this.proccesGraphQLClientEvents(y,p.request,p.resolve,p.reject),N=await Promise.race([p.promise,new Promise(A=>{A(!1)})]);(!I||N===!1)&&(Object.keys(e[0].extensions).includes("SERVICE_CANCELED")||Object.keys(y).includes("isServiceCancelled")?(((a=n.get(s.request.variables[s.index].queryID))===null||a===void 0?void 0:a.reject)||Promise.reject)(new Se("Service canceled",s.message)):(((o=n.get(s.request.variables[s.index].queryID))===null||o===void 0?void 0:o.reject)||Promise.reject)(new te("Falha detectada",s.message)))}}for(const e of i){const t=Object.entries(e);for(const[s,p]of t){const I=n.get(s);await this.proccesGraphQLClientEvents(y,I.request,I.resolve,I.reject),((I==null?void 0:I.resolve)||Promise.resolve)(p)}}}buildGraphQlURL(n){const a=ue.getQueryParams(location.search),o=`${window.mgeSession||a.get("mgeSession")}`;let m=`${this.resolveURL()+F.getGraphQLPath()}`;return o&&(m+=`?mgeSession=${o}`),n&&(m+=`${m.indexOf("?")>-1?"&":"?"}quietMode=true`),m}async fecthGraphQL(n,a){const o=[],m=[],c=[],h=this.buildGraphQlURL(a),i=ne.generateUUID();F.requestListener.forEach(d=>d.onRequestStart({url:h,requestBody:n,requestId:i}));try{(await Ie.batchRequests(h,n,{"Content-Type":"application/json; charset=UTF-8"})).forEach((y,e)=>{var t;((t=y==null?void 0:y.errors)===null||t===void 0?void 0:t.length)>0?m.push(y.errors.map(s=>this.normalizeErrorResponse(s,n,e))):o.push(y.data),y.extensions&&c.push(y.extensions)})}catch(d){if(this.isHttpError(d))throw F.requestListener.forEach(y=>y.onRequestEnd({url:h,requestBody:n,requestId:i})),new te("Falha de comunicação",d.message);{const y=d.response,e=d.request;Object.entries(y).forEach(([t,s])=>{s.errors?m.push(s.errors.map(p=>(p.request=e,p.index=Number(t),p))):s.data&&o.push(s.data)})}}return F.requestListener.forEach(d=>d.onRequestEnd({url:h,requestBody:n,requestId:i})),{data:o,errors:m,extensions:c}}isHttpError(n){var a;return!n.response&&!n.request||((a=n==null?void 0:n.response)===null||a===void 0?void 0:a.status)>=300}normalizeErrorResponse(n,a,o){const m=Object.assign({},a[o]),{variables:c}=m;return m.variables=[],m.variables[o]=c,n.request=m,n.index=Number(o),n}static addClientEvent(n,a){let o=F.clientEventsByID.get(n);if(o!=null){if(o.some(c=>c.toString()===a.toString()))return;o.push(a)}else F.clientEventsByID.set(n,[a])}static hasClientEvent(n){return F.clientEventsByID.has(n)}static removeClientEvent(n){return F.clientEventsByID.delete(n)}}F.appTagName="snk-application";F.requestListener=[];F.SERVICE_BROKER_STATUS={ERROR:0,INFO:2,OK:1,TIMEOUT:3,SERVICE_CANCELED:4};F.clientEventsByID=new Map;class Xe{constructor(n,a){this._resolve=()=>{},this._reject=()=>{},this._request=void 0,this._request=n,this._promisse=new Promise((o,m)=>{this._resolve=o,this._reject=m}),this._quietMode=a}get resolve(){return this._resolve}get reject(){return this._reject}get promise(){return this._promisse}get request(){return this._request}get quietMode(){return this._quietMode}}export{F as D,ue as U,ce as W,Ie as d};
//# sourceMappingURL=DataFetcher-db08cad0-B7lG84WQ.js.map

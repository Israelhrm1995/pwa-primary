import{D as l,U as i}from"./dataUnitInMemoryLoader-CwDmnNwL.js";import{T as o,G as d,D as v}from"./constants-7b422de0-BRz2gykn.js";const T=new Map([[i.DATE,"calendar"],[i.DATETIME,"calendar-clock"],[i.ELAPSEDTIME,"timer-outline"],[i.TIME,"timer-outline"],[i.DECIMALNUMBER,"number"],[i.INTEGERNUMBER,"number"],[i.FILE,"zip"],[i.IMAGE,"pdf"],[i.HTML,"tag_code"],[i.SEARCH,"search"],[i.SEARCHPLUS,"search"],[i.OPTIONSELECTOR,"list"],[i.CHECKBOX,"list"],[i.SWITCH,"boolean"],[i.PASSWORD,"eye-off"]]),B="container-available-fields";var c;(function(e){e.FROM="from",e.TO="to"})(c||(c={}));function R(e,n,t,u){var a;const r=(a=e==null?void 0:e[n])===null||a===void 0?void 0:a.children;return r?Array.from(r).map(({fieldConfig:s})=>Object.assign(Object.assign({},s),{group:t,tab:u})):[]}function V(e,n){return e.map(t=>Object.assign(Object.assign({},t),{fields:t.fields.map(u=>Object.assign(Object.assign({},u),{tab:n}))}))}function U(e,n,t){var u;if(e==null||!n||!t)return;const a=(u=n.getField(t))===null||u===void 0?void 0:u.dataType;if(a==null||(e==null?void 0:e.waitmessage)!==void 0)return;const s=a!==l.OBJECT&&a!==l.DATE&&typeof e=="object"?e.value:e;return a===l.OBJECT?JSON.stringify(s):s}function D(e,n,t){if(!t)return!0;const u=t.properties||{},a=t[e]!==!0;return u.hasOwnProperty(n)?u[n]!=="S":a}function H(e,n,t){return n&&n[e]===!0?!0:t}function k(e){return T.get(e)||"text"}function q(e){var n,t;const u=(t=(n=e.filter(a=>a.name.includes(o.newGuide)))===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0;return u===0?o.newGuide:`${o.newGuide} (${u})`}function x(e){const n=[];return e.forEach(t=>{t.forEach(({fields:u})=>{u==null||u.forEach(a=>{n.push(_(a))})})}),n}function J(e,n,t,u){const a=E(e),r=h(n);if(a!=null&&a.length){for(let s of r.keys()){const p=A(a,s,u),f=S(p,t,u),m=I(f);r.set(s,m)}return r}}function W(e,n){let t=e.tabs?[...e.tabs]:j(e==null?void 0:e.fields);return t=b(t),t=g(t),O(t,n)}function E(e){return e.map(n=>{const t=n.tab;return Object.assign(Object.assign({},n),{tab:!t||t===o.general?o.main:n.tab})})}function g(e){return e.map(n=>Object.assign(Object.assign({},n),{name:n.name?n.name:n.label}))}function O(e,n){const t={name:o.main,label:n,visible:!0};return e.some(a=>a.name===o.main)?e=e.map(a=>a.name===o.main?t:a):e.unshift(t),e}function b(e){return[...e.filter(n=>n.label!==o.general)]}function h(e){const n=new Map;return b(e).forEach(u=>{n.set(u.name,[])}),n}function G(e,n){e.label||(e.label=n.label)}function M(e,n){e.tab||(e.tab=n)}function F(e){e.group||(e.group=d.noGroup)}function y(e){var n;return((n=e==null?void 0:e.properties)===null||n===void 0?void 0:n.visibleOnConfig)===!0&&(e==null?void 0:e.visible)===!1}function S(e,n,t){const u=new Map;u.set(d.noGroup,[]);for(let a of e){const r=n.getField(a.name);!(r!=null&&r.visible)&&!y(r)||(G(a,r),M(a,t),F(a),u.has(a.group)?u.get(a.group).push(a):u.set(a.group,[a]))}return u}function A(e,n,t){return e.filter(u=>N(u.tab,t)===n)}function N(e,n){var t;return typeof e=="string"?e:(t=e==null?void 0:e.label)!==null&&t!==void 0?t:n}function I(e){const n=[];for(let t of e.keys())n.push({name:t,fields:e.get(t)});return n}function L(e,n){return e&&!n.map(t=>t.name).includes(e)}function j(e){const n=[];let t=1;return e==null||e.forEach(u=>{const a=u.tab;L(a,n)&&(n.push({name:a,label:a,visible:!0,order:t}),t=t+1)}),n}function _(e){const n={cleanOnCopy:e.cleanOnCopy||!1,group:e.group===d.noGroup?void 0:e.group,label:e.label,name:e.name,required:e.required,readOnly:e.readOnly,tab:e.tab};return e.defaultValue!=null&&(e.defaultValue.type==null?n.defaultValue={type:v.fixed,value:e.defaultValue}:n.defaultValue=e.defaultValue),n}export{B as I,c as S,J as a,W as b,q as c,R as d,U as e,H as f,x as g,D as h,k as i,V as u};

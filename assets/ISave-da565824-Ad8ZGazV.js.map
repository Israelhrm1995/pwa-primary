{"version":3,"file":"ISave-da565824-Ad8ZGazV.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/ISave-da565824.js"],"sourcesContent":["import { UserInterface, DataType, ApplicationContext, ErrorException } from '@sankhyalabs/core';\nimport { d as dist, D as DataFetcher } from './DataFetcher-db08cad0.js';\n\nfunction buildGridMetadata(rawValue) {\n  const fieldsMetadata = buildFieldsMetadata(rawValue.fieldsMetadata);\n  const duName = rawValue.descriptionField;\n  const duLabel = rawValue.entityDescription;\n  return {\n    label: duLabel,\n    name: duName,\n    fields: fieldsMetadata,\n  };\n}\nfunction buildFieldsMetadata(rawMetadata) {\n  if (!rawMetadata || !rawMetadata.length)\n    return [];\n  return rawMetadata.map(field => {\n    return {\n      name: field['fieldName'],\n      label: field['description'],\n      dataType: buildDataType(field['type']),\n      userInterface: buildUserInterface(field),\n      properties: bildProperties(field)\n    };\n  });\n}\nfunction bildProperties(field) {\n  const properties = {};\n  properties['options'] = buildOptions(field);\n  properties['mask'] = buildMask(field);\n  return properties;\n}\nfunction buildMask(field) {\n  const fieldUI = field['uiType'];\n  return fieldUI ? String(fieldUI).toLowerCase() : undefined;\n}\nfunction buildOptions(field) {\n  const optionsJson = field.options;\n  if (!optionsJson)\n    return undefined;\n  const options = [];\n  Object.keys(optionsJson).forEach(key => {\n    options.push({\n      label: key,\n      value: optionsJson[key]\n    });\n  });\n  return options;\n}\nfunction buildUserInterface(field) {\n  const options = field.options;\n  if (options && Object.keys(options).length > 0)\n    return UserInterface.OPTIONSELECTOR;\n  if (field['type'] === 'D')\n    return UserInterface.DATE;\n  if (field['type'] === 'H')\n    return UserInterface.DATETIME;\n  if (field['type'] === 'T')\n    return UserInterface.TIME;\n  if (field['type'] === 'I')\n    return UserInterface.INTEGERNUMBER;\n  return undefined;\n}\nfunction buildDataType(rawType) {\n  switch (rawType) {\n    case 'F':\n      return DataType.NUMBER;\n    case 'D':\n    case 'H':\n      return DataType.DATE;\n    case 'B':\n      return DataType.OBJECT;\n    case 'I':\n      return DataType.NUMBER;\n    default:\n      return DataType.TEXT;\n  }\n}\nfunction parseLegacyTree(legacy) {\n  var _a, _b;\n  const structure = (_b = (_a = legacy.arvore) === null || _a === void 0 ? void 0 : _a.no) !== null && _b !== void 0 ? _b : [];\n  return structure.map(parseLegacyItem);\n}\nfunction parseLegacyItem(node) {\n  return Object.assign({ id: node.codigo, label: `${node.caminho} - ${node.descricao}`, bold: node.analitico === \"N\", props: { analitico: node.analitico === 'S' } }, (node.no && { children: node.no.map(parseLegacyItem) }));\n}\nfunction parseGridConfig(rawConfig) {\n  var _a, _b;\n  const columns = [];\n  const fields = (_b = (_a = rawConfig === null || rawConfig === void 0 ? void 0 : rawConfig.gridConfig) === null || _a === void 0 ? void 0 : _a.field) !== null && _b !== void 0 ? _b : {};\n  Object.keys(fields).forEach(key => columns.push(fields[key]));\n  if (!columns.length)\n    return undefined;\n  return { columns };\n}\nvar PESQUISA_VIEW_MODE;\n(function (PESQUISA_VIEW_MODE) {\n  PESQUISA_VIEW_MODE[PESQUISA_VIEW_MODE[\"GRID\"] = 0] = \"GRID\";\n  PESQUISA_VIEW_MODE[PESQUISA_VIEW_MODE[\"CARDS\"] = 1] = \"CARDS\";\n  PESQUISA_VIEW_MODE[PESQUISA_VIEW_MODE[\"TREE\"] = 2] = \"TREE\";\n})(PESQUISA_VIEW_MODE || (PESQUISA_VIEW_MODE = {}));\n\nclass PesquisaFetcher {\n  constructor() {\n    this._defaultPageSize = 100;\n    this._templateByQuery = new Map();\n    this._searchListenersByDataUnit = new Map();\n    this.buldTemplates();\n  }\n  buldTemplates() {\n    this._templateByQuery.set(\"search\", dist.gql `query($entityName: String! $argument: String $criteria: InputSearchCriteria $options: InputSearchOptions) {\n                $queryAlias$: search(entityName: $entityName argument: $argument criteria: $criteria options: $options){\n                    value\n                    label\n                }\n            }`);\n  }\n  loadSearchOptions(entityName, argument, criteria, options) {\n    var _a;\n    const cleanText = (argument === null || argument === void 0 ? void 0 : argument.toString().trim()) || undefined;\n    argument = isNaN(Number(cleanText)) && cleanText ? `%${cleanText}` : cleanText;\n    criteria === null || criteria === void 0 ? void 0 : criteria.params.forEach(param => {\n      if (param.dataType === DataType.OBJECT) {\n        param.value = JSON.stringify(param.value);\n      }\n    });\n    const listenerResult = this.applySearchListener(SearchListenerType.beforeSearch, entityName, argument, criteria, options);\n    const values = {\n      argument: (listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.argument) || argument,\n      entityName,\n      criteria: (listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.criteria) || criteria,\n      options: (listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.searchOptions) || options,\n    };\n    if (values.options) {\n      (_a = values.options) === null || _a === void 0 ? true : delete _a.dataUnitId;\n    }\n    return new Promise((resolve, reject) => {\n      DataFetcher.get()\n        .callGraphQL({\n        values,\n        query: this._templateByQuery.get(\"search\"),\n      })\n        .then((result) => {\n        resolve(result);\n      })\n        .catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  buildDescriptionCacheKey(entityName, codeValue) {\n    return `${entityName}__${codeValue}`;\n  }\n  async loadByCode(entityName, codeValue, criteria, searchOptions) {\n    const cacheKey = this.buildDescriptionCacheKey(entityName, codeValue);\n    const cachedValue = PesquisaFetcher.DESCRIPTIONS_BY_CODE[cacheKey];\n    if (cachedValue) {\n      return Promise.resolve(cachedValue);\n    }\n    const result = await this.loadAdvancedSearch(entityName, undefined, criteria, searchOptions, codeValue);\n    PesquisaFetcher.DESCRIPTIONS_BY_CODE[cacheKey] = result;\n    return result;\n  }\n  loadAdvancedSearch(entityName, argument, criteria, searchOptions, codeValue) {\n    var _a, _b, _c, _d, _e;\n    const listenerResult = this.applySearchListener(SearchListenerType.beforeSearch, entityName, argument, criteria, searchOptions);\n    const values = {\n      argument: (listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.argument) || argument,\n      criteria: (listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.criteria) || criteria,\n      searchOptions: Object.assign(Object.assign({}, searchOptions), listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.searchOptions),\n    };\n    const serviceName = \"PesquisaSP.getSuggestion\";\n    const externalCriteria = {\n      query: {\n        $: (_a = values.criteria) === null || _a === void 0 ? void 0 : _a.expression\n      }\n    };\n    if (((_c = (_b = values.criteria) === null || _b === void 0 ? void 0 : _b.params) === null || _c === void 0 ? void 0 : _c.length) > 0) {\n      externalCriteria.params = {\n        param: values.criteria.params.map(param => {\n          let value = param.value;\n          if (typeof value === \"string\") {\n            const match = /CTX\\{([^}]+)\\}/.exec(value);\n            if (match) {\n              value = ApplicationContext.getContextValue(`__SNK__APPLICATION__FILTER__CONTEXT(${match[1]})__`);\n            }\n          }\n          if (param.dataType === DataType.NUMBER && value === undefined) {\n            throw new ErrorException(\"Falha detectada\", `O campo ${param.name} deve ser informado.`);\n          }\n          let type = param.dataType;\n          if (type === DataType.OBJECT) {\n            value = value.value;\n            type = \"S\";\n          }\n          else {\n            type = convertParamType(param.dataType);\n          }\n          return { $: value, type };\n        })\n      };\n    }\n    const options = searchOptions != undefined\n      ? Object.assign(Object.assign({}, values === null || values === void 0 ? void 0 : values.searchOptions), { \"pkFieldName\": searchOptions.codeFieldName, \"label\": searchOptions.descriptionFieldName, \"fieldName\": searchOptions.codeFieldName, \"useDescriptionOptions\": false, \"enableRowsCounter\": true }) : undefined;\n    const reqBody = {\n      \"serviceName\": serviceName,\n      \"requestBody\": {\n        \"criteria\": Object.assign({ \"entityName\": entityName, \"compacted\": false, \"ignoreEntityCriteria\": (_d = options === null || options === void 0 ? void 0 : options.ignoreEntityCriteria) !== null && _d !== void 0 ? _d : false, \"limit\": this._defaultPageSize, \"orderByDesc\": false, \"externalCriteria\": externalCriteria, \"localEntityName\": (_e = values.searchOptions) === null || _e === void 0 ? void 0 : _e.rootEntity }, { options }),\n        \"clientEventList\": {\n          \"clientEvent\": []\n        }\n      }\n    };\n    if (codeValue == undefined) {\n      reqBody.requestBody.criteria.query = {\n        \"$\": argument\n      };\n    }\n    else {\n      reqBody.requestBody.criteria.pk = {\n        \"$\": codeValue\n      };\n    }\n    const urlOptions = {\n      urlParams: {\n        \"quietMode\": true\n      }\n    };\n    return new Promise((resolve, reject) => {\n      DataFetcher.get()\n        .callServiceBroker(\"PesquisaSP.getSuggestion\", JSON.stringify(reqBody), urlOptions)\n        .then(result => resolve(result))\n        .catch(error => reject(error));\n    });\n  }\n  addSearchListener(entityName, dataUnitID, listener) {\n    var _a;\n    const dataUnitSearchListeners = this._searchListenersByDataUnit.get(dataUnitID) || [];\n    const entityListener = dataUnitSearchListeners.find(currentListener => currentListener.entity === entityName);\n    if (!entityListener) {\n      this._searchListenersByDataUnit.set(dataUnitID, [...dataUnitSearchListeners, { entity: entityName, listener }]);\n    }\n    else {\n      for (const type of Object.keys(listener)) {\n        if (type in entityListener.listener) {\n          const listenerFunctionIsEquals = ((_a = entityListener.listener[type]) === null || _a === void 0 ? void 0 : _a.toString()) === listener[type].toString();\n          if (listenerFunctionIsEquals)\n            continue;\n          entityListener.listener[type] = listener[type];\n        }\n      }\n    }\n    return () => {\n      const newListeners = dataUnitSearchListeners.filter(currentListener => currentListener.entity !== entityName);\n      if (!newListeners.length) {\n        this._searchListenersByDataUnit.delete(dataUnitID);\n        return;\n      }\n      this._searchListenersByDataUnit.set(dataUnitID, newListeners);\n    };\n  }\n  applySearchListener(listenerType, entityName, argument, criteria, searchOptions) {\n    var _a;\n    const dataUnitId = searchOptions === null || searchOptions === void 0 ? void 0 : searchOptions.dataUnitId;\n    if (!dataUnitId)\n      return;\n    const entityListener = (_a = this._searchListenersByDataUnit.get(dataUnitId)) === null || _a === void 0 ? void 0 : _a.find(({ entity }) => entity === entityName);\n    if (!entityListener)\n      return;\n    const { listener } = entityListener;\n    if (!(listenerType in listener))\n      return;\n    return listener[listenerType]({ argument, criteria, searchOptions });\n  }\n  async loadPresentationConfig(entityName) {\n    var _a, _b;\n    let payload = buildLoadConfig(entityName);\n    const response = await DataFetcher.get().callServiceBroker(\"SystemUtilsSP.getConf\", JSON.stringify(payload));\n    return (_b = (_a = response === null || response === void 0 ? void 0 : response.config) === null || _a === void 0 ? void 0 : _a.lastUsedMode) !== null && _b !== void 0 ? _b : 'list';\n  }\n  async savePresentationConfig(entityName, lastUsedMode) {\n    let payload = buildSaveConfig(entityName, lastUsedMode);\n    await DataFetcher.get().callServiceBroker(\"SystemUtilsSP.saveConf\", JSON.stringify(payload));\n  }\n  async loadPesquisaGridConfig(entityName) {\n    const payload = buildLoadGridConfigPayload(entityName);\n    const response = await DataFetcher.get().callServiceBroker(\"GridConfig.getGridConfigFromJson\", JSON.stringify(payload));\n    return parseGridConfig(response);\n  }\n  async savePesquisaGridConfig(entityName, columns) {\n    const payload = buildSaveGridConfigPayload(entityName, columns);\n    await DataFetcher.get().callServiceBroker(\"GridConfig.saveGridConfigFromJSON\", JSON.stringify(payload));\n  }\n  async loadTree(entityName, argument, criteria, searchOptions) {\n    const requestBody = this.buildLoadTreeRequestBody(entityName, argument, criteria, searchOptions);\n    const response = await DataFetcher.get().callServiceBroker(\"Pesquisa.getStructuredData\", JSON.stringify(requestBody));\n    return parseLegacyTree(response);\n  }\n  buildLoadTreeRequestBody(entityName, argument, criteria, searchOptions) {\n    var _a, _b;\n    const listenerResult = this.applySearchListener(SearchListenerType.beforeSearch, entityName, argument, criteria, searchOptions);\n    const incomeSearchOptions = (_a = listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.searchOptions) !== null && _a !== void 0 ? _a : searchOptions;\n    const rootEntity = incomeSearchOptions === null || incomeSearchOptions === void 0 ? void 0 : incomeSearchOptions.rootEntity;\n    const codeFieldName = incomeSearchOptions === null || incomeSearchOptions === void 0 ? void 0 : incomeSearchOptions.codeFieldName;\n    const expression = (_b = listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.criteria) === null || _b === void 0 ? void 0 : _b.expression;\n    const params = this.buildParams(listenerResult);\n    const instancia = {\n      'nome': entityName,\n      'nomeInstanciaLocal': rootEntity,\n      'codeFieldName': codeFieldName,\n    };\n    if (expression) {\n      instancia['criterioLiteral'] = {\n        'expressao': {\n          '$': expression,\n        },\n        'parametro': params,\n      };\n    }\n    return {\n      'instancia': instancia,\n    };\n  }\n  buildParams(listenerResult) {\n    var _a, _b;\n    let params = (_b = (_a = listenerResult === null || listenerResult === void 0 ? void 0 : listenerResult.criteria) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : [];\n    params = params.map(param => {\n      return Object.assign(Object.assign({}, param), { tipo: convertParamType(param.dataType), $: param.value });\n    });\n    return params;\n  }\n}\nPesquisaFetcher.DESCRIPTIONS_BY_CODE = {};\nfunction buildLoadGridConfigPayload(entityName) {\n  return {\n    'gridConfig': {\n      'configName': `GrdCfgHtml5:grdcfg.dynaform.pesquisa.${entityName}`,\n    },\n  };\n}\nfunction buildSaveGridConfigPayload(entityName, columns) {\n  const field = {};\n  columns === null || columns === void 0 ? void 0 : columns.forEach((col, index) => field[`field${index}`] = col);\n  return {\n    'gridConfig': {\n      'compactMode': true,\n      'configName': `GrdCfgHtml5:grdcfg.dynaform.pesquisa.${entityName}`,\n      field,\n    },\n  };\n}\nfunction buildLoadConfig(entityName) {\n  return {\n    'config': {\n      'chave': `PesquisaContent:${entityName}`,\n      'tipo': 'T',\n    },\n  };\n}\nfunction buildSaveConfig(entityName, lastUsedMode) {\n  return {\n    'config': {\n      lastUsedMode,\n      'chave': `PesquisaContent:${entityName}`,\n      'tipo': 'T',\n    }\n  };\n}\nfunction convertParamType(dataType) {\n  // Alerta: Cuidado para não contaminar o DataType com a implementação atual da pesquisa!\n  // Em geral, somente inteiros, data (com ou sem hora) e string são realmente relevantes.\n  switch (dataType) {\n    case DataType.NUMBER:\n      return \"I\";\n    case DataType.DATE:\n      return \"D\";\n    default:\n      return \"S\";\n  }\n}\nvar SearchListenerType;\n(function (SearchListenerType) {\n  SearchListenerType[\"beforeSearch\"] = \"beforeSearch\";\n})(SearchListenerType || (SearchListenerType = {}));\n\nvar SaveErrorsEnum;\n(function (SaveErrorsEnum) {\n  SaveErrorsEnum[\"LINK_AND_FILE_AT_THE_SAME_TIME\"] = \"LINK_AND_FILE_AT_THE_SAME_TIME\";\n  SaveErrorsEnum[\"ANY_LINK_OR_FILE_FILLED\"] = \"ANY_LINK_OR_FILE_FILLED\";\n  SaveErrorsEnum[\"UNKNOWN\"] = \"UNKNOWN\";\n  SaveErrorsEnum[\"DESCRIPTION_CANNOT_BE_CHANGED\"] = \"DESCRIPTION_CANNOT_BE_CHANGED\";\n})(SaveErrorsEnum || (SaveErrorsEnum = {}));\n\nexport { PesquisaFetcher as P, SaveErrorsEnum as S, PESQUISA_VIEW_MODE as a, buildGridMetadata as b };\n"],"names":["buildGridMetadata","rawValue","fieldsMetadata","buildFieldsMetadata","duName","rawMetadata","field","buildDataType","buildUserInterface","bildProperties","properties","buildOptions","buildMask","fieldUI","optionsJson","options","key","UserInterface","rawType","DataType","parseLegacyTree","legacy","_a","_b","parseLegacyItem","node","parseGridConfig","rawConfig","columns","fields","PESQUISA_VIEW_MODE","PesquisaFetcher","dist","entityName","argument","criteria","cleanText","param","listenerResult","SearchListenerType","values","resolve","reject","DataFetcher","result","error","codeValue","searchOptions","cacheKey","cachedValue","_c","_d","_e","serviceName","externalCriteria","value","match","ApplicationContext","ErrorException","type","convertParamType","reqBody","urlOptions","dataUnitID","listener","dataUnitSearchListeners","entityListener","currentListener","newListeners","listenerType","dataUnitId","entity","payload","buildLoadConfig","response","lastUsedMode","buildSaveConfig","buildLoadGridConfigPayload","buildSaveGridConfigPayload","requestBody","incomeSearchOptions","rootEntity","codeFieldName","expression","params","instancia","col","index","dataType","SaveErrorsEnum"],"mappings":"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","x_google_ignoreList":[0]}
let W;const ht=new Uint8Array(16);function ft(){if(!W&&(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(ht)}const k=[];for(let r=0;r<256;++r)k.push((r+256).toString(16).slice(1));function yt(r,e=0){return k[r[e+0]]+k[r[e+1]]+k[r[e+2]]+k[r[e+3]]+"-"+k[r[e+4]]+k[r[e+5]]+"-"+k[r[e+6]]+k[r[e+7]]+"-"+k[r[e+8]]+k[r[e+9]]+"-"+k[r[e+10]]+k[r[e+11]]+k[r[e+12]]+k[r[e+13]]+k[r[e+14]]+k[r[e+15]]}const pt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Re={randomUUID:pt};function _e(r,e,t){if(Re.randomUUID&&!r)return Re.randomUUID();r=r||{};const i=r.random||(r.rng||ft)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,yt(i)}const _t=/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/;class A{static round(e,t=2){const i=Math.pow(10,t);return Math.round(e*i)/i}static compare(e,t){return e===void 0?t===void 0?0:1:t===void 0?-1:e===null?t===null?0:1:t===null?-1:e>t?1:e<t?-1:0}}A.stringToNumber=r=>{if(r===""||r===null||r===void 0)return NaN;if(r){r=r.toString();const e=r.charAt(0)==="-";if(_t.test(r)?r=r.replace(/^-/g,""):r=r.replace(/[^\d.,]/g,""),r==="")return NaN;const t=r.indexOf(","),i=r.indexOf(".");i>t?r=r.replace(",",""):i<t&&(r=r.replace(/\./g,"@").replace(",",".").replace(/@/g,"")),e&&(r="-"+r)}return Number(r)};A.format=(r,e,t=NaN,i="NaN")=>{if(r===""||r===void 0||r==="NaN")return i;const n=A.stringToNumber(r);if(isNaN(n))return i;if(e<0||Math.abs(Math.round(e*1)/1)!==e)return A.changeFormat(n.toString());let s=0;isNaN(t)||Math.abs(Math.round(t*1)/1)!==t?s=e:s=t;let o;o=(Math.round(n*Math.pow(10,e))/Math.pow(10,e)).toLocaleString("pt-br",{minimumFractionDigits:e});const a=e-s;if(a>0)for(let c=0;c<a;c++)o.substring(o.length-1)=="0"&&e>0&&(o=o.substring(0,o.length-1));return(o.substring(o.length-1)=="."||o.substring(o.length-1)==",")&&(o=o.substring(0,o.length-1)),o};A.safeFormat=(r,e,t=NaN)=>A.format(r,e,t,"0,00");A.keepOnlyDecimalSeparator=(r,e="pt-BR")=>(e=e.toUpperCase(),e==="EN-US"?r=r.replace(/,/g,""):r=r.replace(/\./g,""),r);A.changeFormat=r=>r.replace(/\./g,"_").replace(/,/g,".").replace(/_/g,",");A.getValueOrDefault=(r,e)=>(r=p.isEmpty(r)?void 0:r,r=Number(r),isNaN(r)?Number(e):r);A.getValueOrZero=r=>A.getValueOrDefault(r,0);class v{static copy(e){return this.stringToObject(this.objectToString(e))}static objectToString(e){return JSON.stringify(e)}static stringToObject(e){return JSON.parse(e)}static sortByProperty(e,t){return Object.keys(e).sort(function(i,n){const s=e[i][t],o=e[n][t];return s<o?-1:s>o?1:0}).reduce((i,n)=>(i[n]=e[n],i),{})}static removeEmptyValues(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null).map(([t,i])=>[t,i===Object(i)?v.removeEmptyValues(i):i]))}static equals(e,t){return v.objectToString(e)===v.objectToString(t)}static hasEquivalentProps(e,t,i="value"){return this.getComparableProp(e,i)==this.getComparableProp(t,i)}static getComparableProp(e,t="value"){return typeof e=="object"&&e!==null&&t in e?e[t]:e}static isEmpty(e){return Object.keys(e).length===0&&e.constructor===Object}static isEmptySafetyCheck(e){return e==null?!0:Object.keys(e).length===0&&e.constructor===Object}static isNotEmpty(e){return!this.isEmpty(e)}static isNotEmptySafetyCheck(e){return!this.isEmptySafetyCheck(e)}static getProp(e,t){return t.split(".").reduce((i,n)=>i==null?void 0:i[n],e)}}class K{static applyStringFilter(e,t,i=!0,n="label"){if(!e)return t;const s=K.normalizeSearchString(e),o=t.filter(a=>K.normalizeSearchString(a[n]).includes(s));return i?K.sortAlphabetically(o,n):o}static normalizeSearchString(e){return p.replaceAccentuatedCharsKeepSymbols(String(e).toUpperCase())}static sortAlphabetically(e,t="label"){return e.sort((i,n)=>{const s=i[t],o=n[t],a=A.stringToNumber(s),c=A.stringToNumber(o);return isNaN(a)||isNaN(c)?p.compare(s,o):A.compare(a,c)})}static find(e,t){if(e){for(let i=0,n=e.length;i<n;i++)if(t(e[i],i,e))return e[i]}else return}static indexOf(e,t){let i=-1;return Array.isArray(e)&&K.find(e,(n,s)=>(i=s,v.equals(t,n))),i}static removeAtIndex(e,t){if(t>=0&&t<e.length)return e.splice(t,1)[0]}static removeReference(e,t){let i=K.indexOf(e,t);return K.removeAtIndex(e,i)}static isIn(e,t){return K.indexOf(e,t)>-1}}class Et{static isHiddenElement(e){const t=e.getBoundingClientRect();return!(t.top>0||t.left>0||t.right>0)}static debounce(e,t=300){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,n)},t)}}static debounceLeading(e,t=300,i){let n;return(...s)=>{n||e.apply(i||this,s),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}static isEllipsisActive(e){if(e==null)return!1;if(e.clientWidth<e.scrollWidth){const t=e.currentStyle||window.getComputedStyle(e);return(t==null?void 0:t.textOverflow)==="ellipsis"}return!1}static isBase64(e){if(e=(e||"").replaceAll(`
`,""),e===""||e.trim()==="")return!1;try{return window.btoa(window.atob(e))==e}catch{return!1}}static generateUUID(){return _e()}static replaceHtmlEntities(e){return e==null?e:String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}class p{static isEmpty(e){return e==null||e===null||(e=e.toString(),e=e.trim(),e.length===0)}static isString(e){return typeof e=="string"||e instanceof String}static replaceAccentuatedCharsUpper(e){return this.isString(e)?e.replace(/[ÀÁÂÃÄÅÆ]/g,"A").replace(/[ÈÉÊË]/g,"E").replace(/[ÌÍÎÏ]/g,"I").replace(/[ÒÓÔÕÖØ]/g,"O").replace(/[ÙÚÛÜ]/g,"U").replace(/[ÝŸ]/g,"Y").replace(/[Ñ]/g,"N").replace(/[Ç]/g,"C"):e}static decodeHtmlEntities(e){if(!e)return e;const t=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']];for(const i of t)e=e.replace(new RegExp(`&${i[0]};`),i[1]);return e}static replaceAccentuatedCharsLower(e){return this.isString(e)?e.replace(/[àáâãäåæ]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõöø]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[ç]/g,"c"):e}static replaceAccentuatedChars(e,t=!0){return this.isString(e)&&(e=p.replaceAccentuatedCharsLower(e),e=p.replaceAccentuatedCharsUpper(e),t&&(e=e.replace(/[^a-z0-9]/gi,""))),e}static replaceAccentuatedCharsKeepSymbols(e){return this.isString(e)?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase():e}static hashCode(e){let t=0,i,n;if(e.length===0)return t.toString();for(i=0;i<e.length;i++)n=e.charCodeAt(i),t=(t<<5)-t+n,t|=0;return t.toString()}static getBooleanValue(e,t=!1){return[!0,"true","S"].includes(e)?!0:[!1,"false","N"].includes(e)?!1:t}static padStart(e,t,i=" "){for(e=e??"";e.length<t;)e=i+e;return e}static padEnd(e,t,i=" "){for(e=e??"";e.length<t;)e=e+i;return e}static compare(e,t){return e===void 0?t===void 0?0:1:t===void 0?-1:e===null?t===null?0:1:t===null?-1:e.localeCompare(t)}static toCamelCase(e){return e?e.match(/^[a-z]+[A-Z]/)||e.includes(".")?e:e.toLowerCase().replace(/^([A-Z])|[\s-_](\w)/g,(t,i,n)=>(n==null?void 0:n.toUpperCase())||i.toLowerCase()):""}static toPascalCase(e){return(e||"").toLowerCase().replace(/(?:^|\s)\w/g,t=>t.toUpperCase()).replace(/[\s-_]/g,"")}static toSnakeCase(e){return(e||"").toLowerCase().replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`).replace(/[\s-]/g,"_").replace(/^_/,"")}static toKebabCase(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}static replaceBlankCharacters(e){return(e||"").replace(/ /g,"")}static formatBytes(e){const t=["B","KB","MB","GB"];if(e<1024)return`${e==null?void 0:e.toString()}B`;const i=Math.log(e)/Math.log(1024),n=Math.floor(i);if(n>=t.length)return`${e==null?void 0:e.toString()}B`;const s=this.prettyPrecision(Math.pow(1024,i-n).toFixed(2).toString()),o=t[n];return`${s}${o}`}static prettyPrecision(e){const t=e.split(".");if(t.length>1){const i=t.length-1;let n=t[i];for(;n.length>0&&n[n.length-1]==="0";)n=n.slice(0,n.length-1);n?t[i]=n:t.pop()}return t.join(".")}static generateUUID(){return _e()}static isCaseable(e){if(e==null)return!1;const t=e.toUpperCase(),i=e.toLowerCase();return e!==t||e!==i}static isLowerCase(e){if(e==null)return!1;const t=e.toUpperCase();return this.isCaseable(e)&&t!==e}static getOppositeCase(e){return e==null?"":this.isLowerCase(e)?e.toUpperCase():e.toLowerCase()}static replaceToSpace(e,t=[]){return e==null||t.forEach(i=>{const n=new RegExp(i,"g");let s="";for(let o=0;o<i.length;o++)s+=" ";e=String(e).replace(n,s)}),e}static replaceAccentuatedCharsHtmlEntities(e){const t="AEIOU_AO_AEIOU_AEIOU_U_C_aeiou_ao_aeiou_aeiou_u_c";if(e==null)return e;const i=["&amp;","&lt;","&gt;","&quot;"];return p.replaceToSpace(e,i).replace(/[^\w ]/g,s=>{let o=t.indexOf(s);return o>-1&&(s=t.charAt(o)),s||""})}static getSpecialCharacters(e){const t=/[[.\-\$\+\*,_\&\(\)%\/\\#@!:\|\=\'\"]/gmi;let i,n=[];for(;i=t.exec(e);)n.push(e[i.index]);return n}static replaceAll(e,t,i){let n=(e??"").indexOf(t);for(;n>-1;)e=e.replace(t,i),n=e.indexOf(t);return e}static removeSpecialCharacters(e){return p.getSpecialCharacters(e).forEach(i=>{e=p.replaceAll(e,i,"")}),e}static getArgumentNumber(e){return Number(e||void 0)}static highlightValue(e,t,i,n,s){const o="<span class='card-item__highlight'>",a="</span>";let c=Et.replaceHtmlEntities(i);if(e&&(s||K.isIn(t,n.fieldName))){const d=p.getArgumentNumber(e);let u=(isNaN(d)?e:d.toString()).split(/%|,|\s+/),h=0,m=p.replaceAccentuatedCharsHtmlEntities(c);u.forEach(_=>{if(_){_=p.replaceAccentuatedCharsHtmlEntities(_);let M=p.getSpecialCharacters(_);M!=null&&M.length>0&&(_=p.removeSpecialCharacters(_)),(n.mask||n.uiType==="CGC_CPF"||n.uiType==="Phone")&&(_=_.split("").join("\\.?\\-?\\/?\\(?\\)?"));let ke=new RegExp(_,"ig");ke.lastIndex=h;let z=ke.exec(m);if(z&&z.length>0){h=z.index;let De=z[0].length,$=c.substring(h,h+De),we=$!=null&&$.trim()?o+$+a:"",lt=c.substring(0,h),ut=c.substring(h+De);c=lt+we+ut,h=h+we.length,m=p.replaceAccentuatedCharsHtmlEntities(c)}}})}return c}static escapeString(e){return e.replace(/[\u0000-\u001F\u007F-\uFFFF<>=&"']/g,t=>"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0"))}}class y{set mask(e){this._mask=e,this.updateInternalMask()}get mask(){return this._mask}constructor(e){this._mask="",this._maskChars=new Array,this.placeholder=" ",this.mask=e}applyMask(e){if(this.mask===y.DEFAULT_MASKS.cor_rgb){e=e.replace("#","");const o=this.format(e.replace(/\s/g,""));return e===o?e:e.length>=6?this.format(e):e}const t=this.format(e.replace(/\s/g,""));if(e===t)return e;const i=this.mask.match(/[UAL#?*']/g)||[],n=i.length,s=e.split("").filter((o,a)=>{const c=i[a];if(!c)return!1;switch(c){case y.DIGIT_KEY:return/\d/.test(o);case y.UPPERCASE_KEY:return/[a-zA-Z]/.test(o);case y.LOWERCASE_KEY:return/[a-zA-Z]/.test(o);case y.ALPHA_NUMERIC_KEY:return/[a-zA-Z0-9]/.test(o);case y.CHARACTER_KEY:return/[a-zA-Z]/.test(o);case y.ANYTHING_KEY:return!0;case y.LITERAL_KEY:const d=this.mask.charAt(a);return o===d;default:return!1}});return s.length>=n?this.format(s.join("")):s.join("")}removeMask(e){const i=this.mask.replace("#","").split("");let n=e;return i.forEach(s=>{n=n.replace(s,"")}),n}format(e,t=!1){t&&(e=e.trim());let i="";const n=[0];let s=0;const o=this._maskChars.length;for(;s<o;)i=this._maskChars[s].append(i,e,n),s++;return i}updateInternalMask(){if(this._maskChars.length=0,this.mask!=null){let e=0;const t=this.mask.length;for(;e<t;){let i=this.mask.charAt(e);switch(i){case y.DIGIT_KEY:this._maskChars.push(new y.DigitMaskCharacter(this,i));break;case y.LITERAL_KEY:++e<t&&(i=this.mask.charAt(e),this._maskChars.push(new y.LiteralCharacter(this,i)));break;case y.UPPERCASE_KEY:this._maskChars.push(new y.UpperCaseCharacter(this,i));break;case y.LOWERCASE_KEY:this._maskChars.push(new y.LowerCaseCharacter(this,i));break;case y.ALPHA_NUMERIC_KEY:this._maskChars.push(new y.AlphaNumericCharacter(this,i));break;case y.CHARACTER_KEY:this._maskChars.push(new y.CharCharacter(this,i));break;case y.ANYTHING_KEY:this._maskChars.push(new y.MaskCharacter(this,i));break;default:this._maskChars.push(new y.LiteralCharacter(this,i));break}e++}}}}y.DIGIT_KEY="#";y.LITERAL_KEY="'";y.UPPERCASE_KEY="U";y.LOWERCASE_KEY="L";y.ALPHA_NUMERIC_KEY="A";y.CHARACTER_KEY="?";y.ANYTHING_KEY="*";y.DEFAULT_MASKS={cnpj:"##.###.###/####-##",cpf:"###.###.###-##",phone:"(##) ####-####",cep:"##.###-###",cor_rgb:"'#AAAAAA"};y.MaskCharacter=class{constructor(r,e){this.maskFormatter=r,this.type=e}isLiteral(){return!1}isValidCharacter(r){return this.isLiteral()?this.getChar(r)==r:(r=this.getChar(r),!0)}getChar(r){return r}append(r,e,t){const n=t[0]<e.length?e.charAt(t[0]):"";if(this.isLiteral()){const s=this.getChar(n);r+=s,s===n&&(t[0]=t[0]+1)}else if(t[0]>=e.length)r+=this.maskFormatter.placeholder,t[0]=t[0]+1;else if(this.isValidCharacter(n))r+=this.getChar(n),t[0]=t[0]+1;else throw new Error(`Valor inválido: "${n}". Na posição ${t[0]+1} espera-se ${this.getFormatMessage()}.`);return r}getFormatMessage(){let r;switch(this.type){case y.UPPERCASE_KEY:case y.LOWERCASE_KEY:case y.CHARACTER_KEY:r="uma letra";break;case y.DIGIT_KEY:r="um número";break;case y.ALPHA_NUMERIC_KEY:r="uma letra ou um número";break;default:r=""}return r}};y.LiteralCharacter=class extends y.MaskCharacter{constructor(r,e){super(r,e),this._fixedChar=e}isLiteral(){return!0}getChar(r){return this._fixedChar}};y.DigitMaskCharacter=class extends y.MaskCharacter{isValidCharacter(r){return this.isDigit(r)&&super.isValidCharacter(r)}isDigit(r){return r>="0"&&r<="9"}};y.UpperCaseCharacter=class extends y.MaskCharacter{isValidCharacter(r){return/[a-z]/i.test(r)&&super.isValidCharacter(r)}getChar(r){return r.toUpperCase()}};y.LowerCaseCharacter=class extends y.MaskCharacter{isValidCharacter(r){return/[a-z]/i.test(r)&&super.isValidCharacter(r)}getChar(r){return r.toLocaleLowerCase()}};y.AlphaNumericCharacter=class extends y.MaskCharacter{isValidCharacter(r){return/[a-z0-9]/i.test(r)&&super.isValidCharacter(r)}};y.CharCharacter=class extends y.MaskCharacter{isValidCharacter(r){return/[a-z]/i.test(r)&&super.isValidCharacter(r)}};class gt{constructor(e,t,i){try{this.weakRefParent=new WeakRef(e),this.weakRefContent=new WeakRef(t)}catch{this.strongRefParent=e,this.strongRefContent=t}this.options=i}get parent(){return this.weakRefParent?this.weakRefParent.deref():this.strongRefParent}get content(){return this.weakRefContent?this.weakRefContent.deref():this.strongRefContent}}class f{static init(){f.entries=[],document.addEventListener("mousedown",f.handleDocumentEvent),document.addEventListener("keydown",f.handleKeyboardEvent),f.initialized=!0}static innerClick(e,t){return!!(e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t))}static doClose(e,t,i,n){if(!i||t.options.autoClose){const s=t.parent,o=t.content;if(s&&o){const a=t.options.innerClickTest?t.options.innerClickTest:f.innerClick,c=t.options.backClickListener?t.options.backClickListener:()=>{};(!i||!a(o,i,n))&&(o.remove(),delete f.entries[e],c())}else delete f.entries[e]}f.hideOverlay()}static handleDocumentEvent(e){f.entries.forEach((t,i)=>{f.doClose(i,t,e.composedPath()[0],e)})}static handleKeyboardEvent(e){if(e.key==="Escape"){for(let t=f.entries.length;t>=0;t--)if(f.entries[t]){f.close(t);break}}}static applyStyle(e,t,i){i&&e.style.setProperty(t,i)}static getFloatIndex(e,t){for(let i=0;i<f.entries.length;i++){const n=f.entries[i];if(n&&e===n.content&&t===n.parent)return i}return-1}static isFloating(e){return f.entries[e]!==void 0}static float(e,t,i={autoClose:!0}){f.initialized||f.init();const n=f.getFloatIndex(e,t);return n>-1?n:(e.style.position=i.isFixed?"fixed":"absolute",requestAnimationFrame(()=>{f.applyStyle(e,"top",i.top),f.applyStyle(e,"left",i.left),f.applyStyle(e,"right",i.right),f.applyStyle(e,"bottom",i.bottom)}),f.showOverlay(i),t.appendChild(e),f.entries.push(new gt(t,e,i)),f.entries.length-1)}static showOverlay(e){e.useOverlay&&(this.createOrUpdatOverlay(e.overlayClassName).style.display="block")}static hideOverlay(){if(f.entries.filter(i=>i.options.useOverlay).length>0)return;const e=document.querySelector(`div#${f.MODAL_ELEMENT_ID}`);e!=null&&(e.style.display="none");const t=document.querySelector("body");t&&(t.style.overflow="")}static createOrUpdatOverlay(e=f.MODAL_DEFAULT_CLASSNAME){let t=document.querySelector(`div#${f.MODAL_ELEMENT_ID}`);const i=document.querySelector("body");return t||(t=document.createElement("div"),t.id=f.MODAL_ELEMENT_ID,i&&i.appendChild(t)),e===f.MODAL_DEFAULT_CLASSNAME?f.createStyleElement():t.classList.remove(f.MODAL_DEFAULT_CLASSNAME),i&&(i.style.overflow="hidden"),t.className=e,t}static createStyleElement(){let e=document.querySelector(`style#${f.STYLE_ELEMENT_ID}`);if(e==null){e=document.createElement("style"),e.id=f.STYLE_ELEMENT_ID,e.appendChild(document.createTextNode(`
            .${f.MODAL_DEFAULT_CLASSNAME} {
                position: fixed;
                z-index: 2;
                padding: 0;
                top: 0px;
                left: 0px;
                width: 100%;
                height: 100vh;
                box-sizing: border-box;
                background: rgba(0, 0, 0, 0.1);
            }`));const t=document.querySelector("head");t&&t.appendChild(e)}}static updateFloatPosition(e,t,i={autoClose:!0}){f.getFloatIndex(e,t)>-1&&(f.applyStyle(e,"top",i.top),f.applyStyle(e,"left",i.left),f.applyStyle(e,"right",i.right),f.applyStyle(e,"bottom",i.bottom))}static close(e){f.entries[e]&&f.doClose(e,f.entries[e],void 0)}static closeAll(){f.entries!=null&&f.entries.forEach((e,t)=>{f.doClose(t,e,void 0)})}static subscribeOverlayControl(e){if(!e)return;const t=this.getCSSPropertyValue(e,"z-index")||"",i=isNaN(+t)?0:+t;e.setAttribute(f.DATA_OLD_ZINDEX_ATTRIBUTE_NAME,String(i));const n=this.getHighestZIndex();return e.style.zIndex=String(n?n+1:+i),this.overlayElements.push(e)}static unsubscribeOverlayControl(e){if(!e)return;const t=e instanceof HTMLElement?e:this.overlayElements[e-1],i=t.getAttribute(f.DATA_OLD_ZINDEX_ATTRIBUTE_NAME)||"";t.setAttribute(f.DATA_OLD_ZINDEX_ATTRIBUTE_NAME,i),this.overlayElements=this.overlayElements.filter(n=>n!==t)}static getCSSPropertyValue(e,t){return window.getComputedStyle(e).getPropertyValue(t)}static getHighestZIndex(){return this.overlayElements.reduce((e,t)=>e+Number(this.getCSSPropertyValue(t,"z-index")||""),0)}}f.MODAL_DEFAULT_CLASSNAME="FloatingManager__modal";f.MODAL_ELEMENT_ID="FloatingManager__overlay";f.STYLE_ELEMENT_ID="FloatingManager__style";f.DATA_OLD_ZINDEX_ATTRIBUTE_NAME="data-old-zindex";f.overlayElements=[];class D{static clearTime(e,t=!0){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);return t?D.adjustDLST(i):i}static formatDate(e,t){return typeof e=="string"?e:e?new Intl.DateTimeFormat("pt-BR",t??{}).format(e):""}static formatTime(e,t=!1){if(e==null)return"";const i={hour:"2-digit",minute:"2-digit",second:t?"2-digit":void 0};return new Intl.DateTimeFormat("pt-BR",i).format(e)}static formatDateTime(e,t=!1){return`${D.formatDate(e)} ${D.formatTime(e,t)}`}static strToDate(e,t=!0,i=!1){let n;if(i?n=/^(1[0-2]|0[1-9]|[1-9])[^\d]?(\d{2}|\d{4})(?:\s(\d{1,2}):(\d{1,2}):?(\d{0,2}))?$/.exec(e):n=/^(3[01]|[1-2]\d|0[1-9]|[1-9])[^\d]?(1[0-2]|0[1-9]|[1-9])[^\d]?(\d{2}|\d{4})(?:\s(\d{1,2}):(\d{1,2}):?(\d{0,2}))?$/.exec(e),!n)return;const s=i?1:Number(n[1]),o=Number(n[i?1:2]);let a=Number(n[i?2:3]);const c=Number(n[i?3:4]||0),d=Number(n[i?4:5]||0),u=Number(n[i?5:6]||0);a<100&&(a+=a<30?2e3:1900);let h=new Date(a,o-1,s,c,d,u,0);return t===!0&&!i&&c==0&&(h=D.adjustDLST(h)),h}static getToday(e=!1){const t=new Date;return e?t:D.clearTime(t)}static validateDate(e,t=!1){return e instanceof Date&&!isNaN(e.valueOf())?t?e:D.clearTime(e):void 0}static adjustDLST(e){return e.getHours()==23?new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,1,0,0,0):e}static pad(e){return e<10?"0"+e:e}static timezoneOffset(e){let t;return e===0?"Z":(t=e>0?"-":"+",e=Math.abs(e),t+this.pad(Math.floor(e/60))+":"+this.pad(e%60))}static formatRfc3339(e){return e.getFullYear()+"-"+this.pad(e.getMonth()+1)+"-"+this.pad(e.getDate())+"T"+this.pad(e.getHours())+":"+this.pad(e.getMinutes())+":"+this.pad(e.getSeconds())+this.timezoneOffset(e.getTimezoneOffset())}}class Ye{static prepareValue(e,t){if(e&&e.length>0&&e!="NaN"){let i=e.replace(/:/g,"");if(t){if(this._maskFormatter.mask="##:##:##",i.length<6)for(;i.length<6;)i="0".concat(i)}else if(this._maskFormatter.mask="##:##",i.length<4)for(;i.length<4;)i="0".concat(i);if(this._maskFormatter)try{return e=this._maskFormatter.format(i),e}catch(n){throw new Error(n.message)}}return""}static validateTime(e,t){let i=!0;if(e){const n=e.replace(/:/g,"");t?(["1","2","0"].includes(n[0])||(i=!1),["0","1","2","3","4","5"].includes(n[2])||(i=!1),["0","1","2","3","4","5"].includes(n[4])||(i=!1),n[0]=="2"&&!["0","1","2","3"].includes(n[1])&&(i=!1)):(["1","2","0"].includes(n[0])||(i=!1),["0","1","2","3","4","5"].includes(n[2])||(i=!1),n[0]=="2"&&!["0","1","2","3"].includes(n[1])&&(i=!1))}else i=!1;return i}}Ye._maskFormatter=new y("##:##");var Ne;(function(r){r[r.GET=0]="GET",r[r.PUT=1]="PUT",r[r.POST=2]="POST",r[r.DELETE=3]="DELETE"})(Ne||(Ne={}));var ae;(function(r){r.ASC="ASC",r.DESC="DESC"})(ae||(ae={}));var Se;(function(r){r.SEARCHING="SEARCHING",r.REQUIREMENT="REQUIREMENT",r.VISIBILITY="REQUIREMENT"})(Se||(Se={}));var R;(function(r){r.FILE="FILE",r.IMAGE="IMAGE",r.DATE="DATE",r.DATETIME="DATETIME",r.TIME="TIME",r.ELAPSEDTIME="ELAPSEDTIME",r.CHECKBOX="CHECKBOX",r.SWITCH="SWITCH",r.OPTIONSELECTOR="OPTIONSELECTOR",r.DECIMALNUMBER="DECIMALNUMBER",r.INTEGERNUMBER="INTEGERNUMBER",r.SEARCH="SEARCH",r.SEARCHPLUS="SEARCHPLUS",r.SHORTTEXT="SHORTTEXT",r.PASSWORD="PASSWORD",r.MASKEDTEXT="MASKEDTEXT",r.LONGTEXT="LONGTEXT",r.HTML="HTML"})(R||(R={}));var Te;(function(r){r.DATA_UNIT_TRANSIENT_PREFIX_NAME="transient."})(Te||(Te={}));const ce=(r,e)=>{if((e==null?void 0:e.userInterface)===R.FILE)return Dt(r);if((e==null?void 0:e.dataType)===C.OBJECT)return r&&Object.hasOwn(r,"value")?mt(r,e):r==null?"":r.toString();if((e==null?void 0:e.userInterface)===R.OPTIONSELECTOR)return At(r,e);if((e==null?void 0:e.dataType)===C.BOOLEAN)return r?"Sim":"Não";if((e==null?void 0:e.dataType)===C.NUMBER)return Ct(r,e);if((e==null?void 0:e.userInterface)===R.DATE)return D.formatDate(r);if((e==null?void 0:e.userInterface)===R.TIME)return D.formatTime(r);if((e==null?void 0:e.userInterface)===R.ELAPSEDTIME)return Ye.prepareValue(r,!0);if((e==null?void 0:e.userInterface)===R.DATETIME)return D.formatDateTime(r);const t=kt(r,e);if(t!=null)try{return new y(t).format(r,!0)}catch(i){console.warn(`Erro ao formatar valor: ${r}. Mascara: ${t}. Erro: ${i}`)}return ze(e==null?void 0:e.dataType,r)},Ct=(r,e)=>{var t,i;if(r==null)return"";if(e.userInterface===R.INTEGERNUMBER)return r;const n=Number(((t=e.properties)===null||t===void 0?void 0:t.precision)||2),s=Number(((i=e.properties)===null||i===void 0?void 0:i.prettyPrecision)||n);return A.format(r,n,s)},mt=(r,e)=>{const{value:t,label:i}=r;return e.userInterface===R.SEARCH?i?`${t} - ${i}`:t:e.userInterface===R.SEARCHPLUS?t:i||t},At=(r,e)=>{var t;const i=(t=e.properties)===null||t===void 0?void 0:t.options;let n;return typeof i=="string"?n=JSON.parse(i):(n={},i!=null&&i.forEach(s=>n[s.label]=s.value)),r&&typeof r=="object"&&(r=r.value),n&&Object.hasOwn(n,r)?n[r]:r??""},kt=(r,e)=>{var t;if(e==null)return;const i=(t=e.properties)===null||t===void 0?void 0:t.mask;if(!(i==null||!r))return i==="cgc_cpf"?r.length===11?y.DEFAULT_MASKS.cpf:y.DEFAULT_MASKS.cnpj:Object.hasOwn(y.DEFAULT_MASKS,i)?y.DEFAULT_MASKS[i]:i},Dt=r=>r==null?"":!r||!Array.isArray(r)?r:r.length===1?r[0].name:`${r.length} arquivos`;var C;(function(r){r.NUMBER="NUMBER",r.DATE="DATE",r.TEXT="TEXT",r.BOOLEAN="BOOLEAN",r.OBJECT="OBJECT"})(C||(C={}));const Ie=(r,e)=>e==null?e:(typeof e=="object"&&r!==C.OBJECT&&"value"in e&&(e=e.value),de(r,e)),de=(r,e)=>{switch(r){case C.NUMBER:return e===""||isNaN(Number(e))?null:Number(e);case C.OBJECT:if(typeof e=="string")try{return JSON.parse(e)}catch{console.warn(`Erro ao fazer parse do valor ${e} para objeto, dataType: ${r}`)}return e;case C.BOOLEAN:return typeof e=="string"?e==="true":!!e;case C.DATE:if(e==null||typeof e!="string")return D.validateDate(e,!0);const t=D.validateDate(new Date(e),!0);return t??e;default:return e}},ze=(r,e)=>{if(e==null)return e;if(r)return r===C.OBJECT?(typeof e!="object"&&(e={label:"",value:e}),JSON.stringify(e)):r===C.DATE?typeof e=="string"&&(e=D.strToDate(e),e==null)?e:D.formatRfc3339(e):e.toString();if(typeof e=="string")return e;if(e instanceof Date)return D.formatRfc3339(e);try{return JSON.stringify(e)}catch{e=e.toString()}return e},wt=r=>r===R.SEARCH||r===R.SEARCHPLUS,Rt=(r,e,t,i=!1)=>{if(Nt(t))return ce(r,t).localeCompare(ce(e,t));const{dataType:n,userInterface:s}=t;if(wt(s)||s===R.OPTIONSELECTOR){const c=(i?r==null?void 0:r.label:r==null?void 0:r.value)||r,d=(i?e==null?void 0:e.label:e==null?void 0:e.value)||e;return isNaN(c)||isNaN(d)?c.localeCompare(d):A.compare(Number(c),Number(d))}if(n===C.OBJECT)return 0;const o=de(n,r),a=de(n,e);return n===C.NUMBER?A.compare(o,a):n===C.DATE?A.compare(o.getTime(),a.getTime()):0},Nt=r=>r.dataType===C.BOOLEAN||r.dataType===C.TEXT;class St{constructor(e,t){this._type=e,this._payload=t}get type(){return this._type}get payload(){return this._payload}}var l;(function(r){r.MULTIPLE_EDITION_CHANGED="multipleEditionChanged",r.LOADING_METADATA="loadingMetadata",r.METADATA_LOADED="metadataLoaded",r.LOADING_DATA="loadingData",r.DATA_LOADED="dataLoaded",r.PAGINATION_UPDATED="paginationUpdated",r.SAVING_DATA="savingData",r.DATA_SAVED="dataSaved",r.SAVING_ERROR="savingError",r.SAVING_CANCELED="savingCanceled",r.REMOVING_RECORDS="removingRecords",r.RECORDS_REMOVED="recordsRemoved",r.RECORDS_ADDED="recordsAdded",r.RECORDS_COPIED="recordsCopied",r.CHANGING_DATA="changingData",r.WAITING_CHANGE_CANCELED="waitingChangeCanceled",r.DATA_CHANGED="dataChanged",r.DATA_RESOLVED="dataResolved",r.EDITION_CANCELED="editionCanceled",r.CHANGE_UNDONE="changeUndone",r.CHANGE_REDONE="changeRedone",r.SELECTION_CHANGED="selectionChanged",r.NEXT_SELECTED="nextSelected",r.PREVIOUS_SELECTED="previousSelected",r.STATE_CHANGED="stateChanged",r.LOADING_RECORD="loadingRecord",r.RECORD_LOADED="recordLoaded",r.CHILD_CHANGED="childChanged",r.FIELD_INVALIDATED="fieldInvalidated",r.INVALIDATE_CLEAN="invalidateClean",r.LOADING_PROPERTY_ADDED="loadingPropertyAdded",r.LOADING_PROPERTIES_CLEANED="loadingPropertiesCleaned"})(l||(l={}));class Tt{constructor(e){this._past=[],this._future=[],this._present={},this._nonHist={},this._histClean=!1,this._reducers=e}process(e){const t=this._present;let i=!1;this._histClean=!1,this._reducers.forEach(n=>{const s=n.sliceName,o=this.isHistoric(s),a=this.getSlice(s,o),c=n.reduce(this,a,e);c!==a&&(this.updateSlice(s,c,o),i||(i=o))}),i&&!this._histClean&&(this._past.push(t),this._future=[],document.dispatchEvent(new CustomEvent("undoableAction",{detail:this})))}select(e,t){const i=this.isHistoric(e);return t(this.getSlice(e,i))}isHistoric(e){return e.startsWith("hist::")}updateSlice(e,t,i){i?(this._present=Object.assign(Object.assign({},this._present),{[e]:t}),t===void 0&&delete this._present[e]):(this._nonHist=Object.assign(Object.assign({},this._nonHist),{[e]:t}),t===void 0&&delete this._nonHist[e])}getSlice(e,t){return t?this._present[e]:this._nonHist[e]}canUndo(){return this._past.length>0}canRedo(){return this._future.length>0}undo(){this.canUndo()&&(this._future.push(this._present),this._present=this._past.pop())}redo(){this.canRedo()&&(this._past.push(this._present),this._present=this._future.pop())}clearUndo(){this._histClean=!0,this._past=[],this._future=[]}persist(){}}class V extends Error{constructor(e,t,i=""){super(t),this.name="",this.title=e,this.message=t,this.errorCode=i}}class It extends Error{constructor(e,t){super(t),this.title=e,this.name="",this.message=t}}class Kt{constructor(){this.sliceName="hist::addedRecords"}reduce(e,t,i){switch(i.type){case l.RECORDS_ADDED:case l.RECORDS_COPIED:return(t||[]).concat(i.payload);case l.DATA_SAVED:case l.EDITION_CANCELED:return}return t}}const $e=new Kt,S=r=>r.select($e.sliceName,e=>e),Ot=(r,e)=>{const t=S(e);return t==null||t.length===0?!1:t.some(i=>i.__record__id__===r)},vt=(r,e,t)=>{let i=(S(r)||[]).length;return e.map(n=>Object.assign(Object.assign(Object.assign({},n),{__record__id__:`NEW_${i++}`}),t&&{__parent__record__id__:t}))},Lt=(r,e,t)=>{let i=(S(r)||[]).length;return e.map(n=>Object.assign(Object.assign(Object.assign(Object.assign({},n),{__record__id__:"NEW_"+i++}),t&&{__parent__record__id__:t}),{__record__source__id__:n.__record__id__,__copy__:!0}))};class bt{constructor(){this.sliceName="hist::removedRecords"}reduce(e,t,i){switch(i.type){case l.RECORDS_REMOVED:const{records:n,buffered:s}=i.payload;return s?(t||[]).concat(n):t;case l.EDITION_CANCELED:case l.DATA_SAVED:return}return t}}const We=new bt,J=r=>r.select(We.sliceName,e=>e);class Pt{constructor(){this.sliceName="records"}reduce(e,t,i){switch(i.type){case l.DATA_LOADED:return i.payload?i.payload.records:[];case l.RECORDS_REMOVED:const{records:n,buffered:s}=i.payload;return s?t:t.filter(u=>!n.includes(u.__record__id__));case l.DATA_SAVED:const o=new Map,a=Q(e);if(a.length){const u=J(e)||[];a.forEach(h=>{u.includes(h.__record__id__)||o.set(h.__record__id__,h)})}const c=[];return i.payload.records.forEach(u=>{const h=u.__old__id__||u.__record__id__,m=Object.assign({},u);delete m.__old__id__,o.has(h)?o.set(h,m):c.push(m)}),Array.from(o.values()).concat(c);case l.RECORD_LOADED:i.payload.forEach(u=>{for(let h=0;h<t.length;h++)t[h].__record__id__===u.__record__id__&&(t[h]=u)})}return t}}const qe=new Pt,Q=r=>{var e;return(e=r.select(qe.sliceName,t=>t))!==null&&e!==void 0?e:[]};class Mt{constructor(){this.sliceName="snapshot"}reduce(e,t){return Bt(t,e)}}const Ze=new Mt,Xe=r=>r.select(Ze.sliceName,e=>e),b=r=>{const e=Xe(r);return e?e.records:new Map},Ee=r=>{const e=Xe(r);return e?Array.from(e.selectionRecords.values()):void 0},Ft=r=>{const e=b(r);if(!e)return;const t=B(r),i=S(r);if(!t&&!i)return;let n=t?Array.from(t.keys()):[];return i&&(n=n.concat(i.map(s=>s.__record__id__))),Array.from(e.values()).filter(s=>n.includes(s.__record__id__))},Je=r=>{const e=Ee(r);return e==null?void 0:e[0]},Ut=(r,e)=>{const t=Je(r);return t==null?void 0:Qt(e,t,r)};function Bt(r,e){let t=Q(e)||[];const i=S(e);i&&(t=t.concat(i));const n=J(e);n&&(t=t.filter(d=>!n.includes(d.__record__id__)));const s=B(e),o=new Map(t.map(d=>[d.__record__id__,Object.assign(Object.assign({},d),s==null?void 0:s.get(d.__record__id__))])),a=new Map(r==null?void 0:r.selectionRecords),c=x(e);return c&&c.length>0&&c.forEach(d=>{const u=o.has(d)?o.get(d):r==null?void 0:r.records.get(d);u&&a.set(d,u)}),Array.from(a.keys()).forEach(d=>{c.includes(d)||a.delete(d)}),{records:o,selectionRecords:a}}var N;(function(r){r.INSERT="INSERT",r.COPY="COPY",r.UPDATE="UPDATE",r.DELETE="DELETE"})(N||(N={}));var O;(function(r){r.ALL_RECORDS="ALL_RECORDS",r.SOME_RECORDS="SOME_RECORDS"})(O||(O={}));class Ke{constructor(e,t=O.SOME_RECORDS,i,n,s){this._records=e,this._total=i,this.mode=t,this.filters=n,this.sort=s}get records(){if(this.isAllRecords()){if(this.getAllRecords!=null)return this.getAllRecords();throw new Error("Erro interno: Impossível retornar os registros selecionados numa seleção virtual.")}return this._records}get recordIds(){const e=this.records;if(e!=null)return e.map(t=>t.__record__id__)}get length(){return this.isAllRecords()?this._total||0:this.records==null?0:this.records.length}isAllRecords(){return this.mode===O.ALL_RECORDS}isEmpty(){return this.length===0}}class Vt{constructor(){this.sliceName="loadingControl"}reduce(e,t,i){var n;switch(i.type){case l.LOADING_DATA:return Object.assign(Object.assign({},t),{lastRequest:i.payload});case l.DATA_LOADED:return Object.assign(Object.assign({},t),{paginationInfo:(n=i.payload)===null||n===void 0?void 0:n.paginationInfo});case l.PAGINATION_UPDATED:return Object.assign(Object.assign({},t),{paginationInfo:i.payload});case l.DATA_SAVED:return Object.assign(Object.assign({},t),{paginationInfo:jt(e,i.payload)})}return t}}const ge=new Vt,P=r=>{const e=r.select(ge.sliceName,t=>t);return e?e.paginationInfo:void 0},G=r=>{const e=r.select(ge.sliceName,t=>t);return e?e.lastRequest:void 0},Oe=r=>{const e=P(r);return e?e.currentPage:0},Gt=(r,e)=>{const t=P(r);return t?Math.ceil((t.total||t.count||0)/e):0},ve=r=>{const e=P(r);return!!(e&&e.hasMore)},Le=r=>{const e=P(r);return e?e.currentPage>0:!1},jt=(r,e)=>{const t=P(r);let{records:i,changes:n}=e;if(!i||!n||!t||!Ht(n))return t;const{count:s,firstRecord:o,lastRecord:a,total:c}=t;return Object.assign(Object.assign({},t),{count:(s??0)+i.length,firstRecord:o===0&&i.length>0?1:o,lastRecord:a+i.length,total:(c??0)+i.length})},Ht=r=>r.every(e=>xt(e._operation)),xt=r=>["INSERT","COPY"].includes(r);class Yt{constructor(){this.sliceName="hist::selection"}reduce(e,t,i){var n;switch(i.type){case l.DATA_LOADED:return!((n=i.payload)===null||n===void 0)&&n.keepSelection?t:void 0;case l.RECORDS_ADDED:case l.RECORDS_COPIED:const s=(t==null?void 0:t.currentSelection)||[];return{currentSelection:i.payload.map(u=>u.__record__id__),lastSelection:s};case l.DATA_SAVED:return{currentSelection:$t(e,i.payload.records)};case l.RECORDS_REMOVED:return{currentSelection:i.payload.selectionAfterRemove||[]};case l.NEXT_SELECTED:case l.PREVIOUS_SELECTED:const o=b(e),a=t==null?void 0:t.currentSelection;if(o&&o.size>0){let u;if(!t||a.length===0?u=i.type===l.PREVIOUS_SELECTED?0:Math.min(0,o.size):u=Ce(a[0],o)+(i.type===l.PREVIOUS_SELECTED?-1:1),u<o.size&&u>=0)return{currentSelection:[Array.from(o.values())[u].__record__id__]}}return;case l.SELECTION_CHANGED:const{type:c,selection:d}=i.payload;if(d===O.ALL_RECORDS)return{currentSelection:[],mode:O.ALL_RECORDS};if(d&&c==="index"){const u=b(e);if(u){const h=Array.from(u.values()),m=[];return d.forEach(_=>{_>=0&&_<u.size&&m.push(h[_].__record__id__)}),{currentSelection:m}}}return{currentSelection:d};case l.EDITION_CANCELED:return t!=null&&t.lastSelection?{currentSelection:t.lastSelection}:{currentSelection:(t==null?void 0:t.currentSelection)||[]}}return t}}const Qe=new Yt,et=r=>r.select(Qe.sliceName,e=>e),x=r=>{const e=me(r);return!e||e.length===0?[]:e},zt=r=>{const e=et(r),t=G(r);if(e&&e.mode===O.ALL_RECORDS){const i=P(r);return new Ke([],O.ALL_RECORDS,(i==null?void 0:i.total)||0,t==null?void 0:t.filters,t==null?void 0:t.sort)}return new Ke(Ee(r)||[],O.SOME_RECORDS,void 0,void 0,t==null?void 0:t.sort)},be=r=>{const e=b(r);if(e){const t=me(r);return!t||t.length===0?e.size>0:e.size>Ce(t[0],e)+1}return!1},Pe=r=>{const e=b(r);if(e){const t=me(r);return!t||t.length===0?!1:Ce(t[0],e)>0}return!1};function Ce(r,e){return Array.from(e.keys()).indexOf(r)}function $t(r,e){const t=x(r);if(t){const i=[];return t.forEach(n=>{const s=e.find(o=>o.__old__id__===n);s?i.push(s.__record__id__):i.push(n)}),i}return t}function me(r){const e=et(r);return e?e.currentSelection:void 0}class ie{constructor(e,t,i,n,s){this.dataUnit=e,this.record=t,this.sourceId=s,this.updatingFields=i,this._operation=n}get operation(){return this._operation.toString()}isInsert(){return this._operation===N.INSERT}isCopy(){return this._operation===N.COPY}isDelete(){return this._operation===N.DELETE}isUpdate(){return this._operation===N.UPDATE}}class Wt{constructor(){this.sliceName="waitingChanges"}reduce(e,t,i){let n;switch(i.type){case l.CHANGING_DATA:return n=new Map(t),Object.entries(i.payload).forEach(([s,o])=>{n.set(s,o)}),n;case l.WAITING_CHANGE_CANCELED:return n=new Map(t),n.delete(i.payload.fieldName),n.size===0?void 0:n;case l.DATA_CHANGED:return n=new Map(t),Object.entries(i.payload).forEach(([s])=>{n.delete(s)}),n.size===0?void 0:n;case l.DATA_SAVED:case l.EDITION_CANCELED:return}return t}}const tt=new Wt,Y=r=>r.select(tt.sliceName,e=>e),qt=(r,e)=>{const t=Y(r);return t?t.has(e):!1},Zt=r=>{const e=Y(r);if(e)return new Map(Array.from(e.entries()).filter(t=>t[1].blocking).map(t=>[t[0],t[1]]))},Xt=r=>{const e=Y(r);if(e)return Array.from(e.values()).filter(t=>!t.blocking).map(t=>t.promise)};class Jt{constructor(){this.sliceName="hist::changes"}reduce(e,t,i){switch(i.type){case l.RECORDS_COPIED:const n=i.payload,s=new Map(B(e));return n.forEach(a=>{const c=Object.assign(Object.assign({},s.get(a.__record__id__)),a);delete c.__old__id__,delete c.__record__id__,delete c.__parent__record__id__,delete c.__record__source__id__,delete c.__record__label__,delete c.__copy__,delete c.__owner__dataunit__name__,s.set(a.__record__id__,c)}),s;case l.DATA_CHANGED:const o=i.payload.records||x(e);if(o){const a=new Map(t);return o.forEach(c=>{const d=Object.assign(Object.assign({},a.get(c)),i.payload);delete d.records,a.set(c,d)}),a}return t;case l.DATA_SAVED:case l.EDITION_CANCELED:return}return t}}const it=new Jt,B=r=>r.select(it.sliceName,e=>e),re=r=>S(r)!==void 0||J(r)!==void 0?!0:rt(r),rt=r=>Y(r)!==void 0?!0:B(r)!==void 0,Qt=(r,e,t)=>{const i=B(t);if(i){const n=i.get(e.__record__id__);if(n&&Object.hasOwn(n,r))return n[r]}return e[r]},Me=(r,e)=>{const t=B(e),i=Ee(e)||[],n=new Map(Q(e).concat(i.filter(d=>!Ot(d.__record__id__,e))).map(d=>[d.__record__id__,d])),s=[];t!=null&&Array.from(t.entries()).forEach(([d,u])=>{const h=n.get(d);h!=null&&s.push(new ie(r,h,u,N.UPDATE,h.__record__source__id__))});const o=S(e);o&&o.forEach(d=>{const u=d.__copy__?N.COPY:N.INSERT,h=Object.assign({},t==null?void 0:t.get(d.__record__id__));u===N.INSERT&&Object.keys(d).forEach(m=>{var _;!m.startsWith("__")&&!(!((_=Object.keys(h))===null||_===void 0)&&_.includes(m))&&(h[m]=d[m])}),s.push(new ie(r,d,h,u,d.__record__source__id__))});const a=J(e),c={};return n==null||n.forEach(d=>c[d.__record__id__]=d),a&&a.forEach(d=>{s.push(new ie(r,c[d],void 0,N.DELETE))}),s};class ei{constructor(){this.sliceName="unitMetadata"}reduce(e,t,i){return i.type===l.METADATA_LOADED?i.payload:t}}const nt=new ei,st=r=>r.select(nt.sliceName,e=>e),ti=(r,e)=>{const t=st(r);return t?t.fields.find(i=>i.name===e):void 0};class ii{constructor(){this.sliceName=""}reduce(e,t,i){switch(i.type){case l.DATA_SAVED:case l.EDITION_CANCELED:e.clearUndo();break;case l.CHANGE_UNDONE:e.undo();break;case l.CHANGE_REDONE:e.redo();break}}}const ri=new ii,ni=r=>r.canUndo(),si=r=>r.canRedo();class j{static get(e){const t=this.keyMap.get(e);if(t)return this.dataUnitMap.get(t)}static put(e){const t={key:e.name};this.dataUnitMap.set(t,e),this.keyMap.set(e.name,t)}static remove(e){const t=typeof e=="string"?this.keyMap.get(e):this.keyMap.get(e.name),i=typeof e=="string"?e:e.name;t&&(this.dataUnitMap.delete(t),this.keyMap.delete(i))}}j.dataUnitMap=new WeakMap;j.keyMap=new Map;class oi{constructor(){this.sliceName="hist::invalidFields"}reduce(e,t,i){switch(i.type){case l.FIELD_INVALIDATED:return li(t,i.payload);case l.INVALIDATE_CLEAN:return di(t,i.payload);case l.EDITION_CANCELED:return}return t}}const ot=new oi,ai=r=>r.select(ot.sliceName,e=>e),ci=(r,e,t)=>{const i=ai(r);if(i){const n=i.get(t);if(n)return n.get(e)}},di=(r,e)=>{const{recordId:t,fieldName:i}=e;if(t!=null&&r){const n=r.get(t);if(n){const s=new Map(r);if(i==null)s.delete(t);else{const o=new Map(n);return o.delete(i),o.size>0?s.set(t,o):s.delete(t),s}}return r}},li=(r,e)=>{const{recordId:t,message:i,fieldName:n}=e,s=new Map(r==null?void 0:r.get(t));s.set(n,i);const o=new Map(r);return o.set(t,s),o};class ui{constructor(){this.sliceName="loadingProperties"}reduce(e,t,i){switch(i.type){case l.LOADING_PROPERTY_ADDED:return fi(t,i.payload);case l.LOADING_PROPERTIES_CLEANED:return}return t}}const at=new ui,hi=r=>r.select(at.sliceName,e=>e);function fi(r,e){const t=new Map(r);if(e!=null)for(const[i,n]of Object.entries(e))typeof i=="string"&&typeof n=="string"&&t.set(i,n);return t}class ee{static compare(e,t,i,n=!0,s=!1){const o=(n?t:i)[e.name],a=(n?i:t)[e.name];return ee.compareValues(e,o,a,s)}static compareValues(e,t,i,n=!1){const s=this.compareUndefined(t==null,i==null);return s??Rt(t,i,e,n)}static compareUndefined(e,t){if(!(!e&&!t))return e&&t?0:e?-1:1}}class le{static getSortingFunction(e,t){if(!(t==null||t.length==0))return(i,n)=>{var s;for(const o of t)if(o.field){let a=e.getField(o.field),c=!1;if(!a){const u=(s=e.getSourceFieldValue(o.field))!==null&&s!==void 0?s:"";a=e.getField(u),c=!0}const d=ee.compare(a,i,n,o.mode===ae.ASC,c);if(d!=0)return d}return 0}}}class yi extends Error{constructor(e,t,i=""){super(t),this.name="Service Canceled",this.title=e,this.message=t,this.errorCode=i}}class pi extends Error{constructor(e="",t="",i=""){super(t),this.name="SilentException",this.title=e,this.message=t,this.errorCode=i}}var E=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function c(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):n(u.value).then(a,c)}d((i=i.apply(r,e||[])).next())})};class L{constructor(e=L.DEFAULT_DATAUNIT_NAME,t){var i;this._childByName=new Map,this._savingLockers=[],this._waitingToReload=!1,this._cancelPagination=!1,this._isMultipleEdition=!1,this._fieldSourceValue=new Map,this.onDataUnitParentEvent=n=>{var s;switch(n.type){case l.SELECTION_CHANGED:case l.NEXT_SELECTED:case l.PREVIOUS_SELECTED:case l.DATA_LOADED:case l.RECORDS_ADDED:case l.EDITION_CANCELED:this.clearDataUnit();const o=(s=this._parentDataUnit)===null||s===void 0?void 0:s.getSelectedRecord();o!=null&&!this.isNewRecord(o.__record__id__)&&this.loadData();break}},this._uuid=_e(),this._name=`${e}?uuid=${this._uuid}`,this._pageSize=0,this._stateManager=new Tt([ri,at,nt,ge,qe,We,$e,Qe,it,tt,ot,Ze]),this._observers=new Map,this._filterProviders=new Map,this._sortingProvider=void 0,this._defaultSorting=[],this._allowReleaseCallbacks=!0,this._interceptors=new Map,this._parentDataUnit=t,(i=this._parentDataUnit)===null||i===void 0||i.subscribe(this.onDataUnitParentEvent),this._loadingLockers=[],j.put(this)}release(){j.remove(this._name),this._parentDataUnit&&(this._parentDataUnit.unsubscribe(this.onDataUnitParentEvent),this._parentDataUnit.removeChildDataunit(this._name)),this.releaseCallbacks()}releaseCallbacks(){this._allowReleaseCallbacks&&(this._observers=new Map,this._filterProviders=new Map,this._sortingProvider=void 0,this._interceptors=new Map)}addGlobalLoaderProp(e,t){this.dispatchAction(l.LOADING_PROPERTY_ADDED,{[e]:t})}getGlobalLoaderProps(){return hi(this._stateManager)||new Map}get dataUnitId(){return this._uuid}isWaitingToReload(){return this._waitingToReload}setWaitingToReload(e){this._waitingToReload=e}get cancelPagination(){return this._cancelPagination}set cancelPagination(e){this._cancelPagination=e}get isMultipleEdition(){return this._isMultipleEdition}set isMultipleEdition(e){this._isMultipleEdition=e,this.dispatchAction(l.MULTIPLE_EDITION_CHANGED,{isMultipleEdition:e})}get name(){return this._name}validateAndTypeValue(e,t){const i=this.getField(e);return i?Ie(i.dataType,t):t}getFielterProviderKey(e){return e.getKey?e.getKey():p.hashCode(e.getFilter.toString())}executeLoadData(e,t,i,n){if(i&&this.isSameRequest(e)){const s=this.getPaginationInfo();if(s){const o={records:Q(this._stateManager),paginationInfo:s};return n&&this.requestSelectFirst(t),Promise.resolve(o)}}return new Promise((s,o)=>E(this,void 0,void 0,function*(){(yield this.dispatchAction(l.LOADING_DATA,e,t))&&this.dataLoader&&this.dataLoader(this,e).then(a=>E(this,void 0,void 0,function*(){yield this.dispatchAction(l.DATA_LOADED,Object.assign(Object.assign({},a),{keepSelection:e.keepSelection,filters:e.filters,selectFirstRecord:n}),t),yield this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),n&&this.requestSelectFirst(t),s(a)})).catch(a=>{console.error(a);const{errorCode:c}=a;this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),o(new V("Erro ao carregar registros",a,c))})}))}requestSelectFirst(e){window.requestAnimationFrame(()=>{this.selectFirst(e)})}isSameRequest(e){const t=G(this._stateManager);return v.objectToString(e)===v.objectToString(t||{})}loadMetadata(e){return E(this,void 0,void 0,function*(){if(yield this.dispatchAction(l.LOADING_METADATA,void 0,e))return new Promise((t,i)=>{this.metadataLoader&&this.metadataLoader(this).then(n=>{this.metadata=n,t(this.metadata)}).catch(n=>{const{errorCode:s}=n;i(new V("Erro ao carregar metadados",n,s))})})})}loadDataWithParams({source:e,keepSelection:t,selectFirstRecord:i,executionCtx:n,checkLastFilter:s,quickFilter:o}){return E(this,void 0,void 0,function*(){return yield this.loadData(o,n,s,e,i,t)})}loadData(e,t,i,n,s,o){return E(this,void 0,void 0,function*(){if(yield this.processLoadingLockers(),this._parentDataUnit){const c=this._parentDataUnit.getSelectedRecord();if(c==null||this._parentDataUnit.isNewRecord(c.__record__id__))return this.records&&this.clearDataUnit(),Promise.resolve({records:[]})}const a=this.getLoadDataRequest(e,n,o);return this.executeLoadData(a,t,i,s)})}gotoPage(e,t){return E(this,void 0,void 0,function*(){if(this._pageSize===0)return;let i=G(this._stateManager);if(i||(i={filters:this.getFilters(),sort:this.getSort()}),e>=0&&e<=Gt(this._stateManager,this._pageSize))return this.executeLoadData(Object.assign(Object.assign({},i),{limit:this._pageSize,offset:e*this._pageSize,keepSelection:!0,source:L.CHANGING_PAGE_LOADING_SOURCE}),t)})}nextPage(e){return E(this,void 0,void 0,function*(){return this.gotoPage(Oe(this._stateManager)+1,e)})}previousPage(e){return E(this,void 0,void 0,function*(){return this.gotoPage(Oe(this._stateManager)-1,e)})}getLoadDataRequest(e,t,i){const n={filters:e!=null&&e.filter?[e.filter]:this.getFilters(),sort:this.getSort(),parentRecordId:this.getParentRecordId(),source:t,keepSelection:i};return e&&(n.quickFilter=e),this._pageSize>0&&(n.limit=this._pageSize,n.offset=0),n}notifySavingData(e){return E(this,void 0,void 0,function*(){const t=[];return Array.from(this._childByName.values()).forEach(i=>t.push(i.notifySavingData(e))),re(this._stateManager)&&t.push(this.dispatchAction(l.SAVING_DATA,void 0,e)),new Promise(i=>Promise.all(t).then(n=>{i(n.reduce((s,o)=>s&&o,!0))}))})}getBeforeSavePromisses(){let e=Xt(this._stateManager)||[];return e=e.concat(this._savingLockers),e}saveData(e){return E(this,void 0,void 0,function*(){const t=Zt(this._stateManager);if(t&&t.size>0){const i=t.entries().next().value;if(i){const[n,s]=i;return Promise.reject(new It("Aguardando alteração de campo",s.waitmessage))}}else if(this.isDirty()&&(yield this.notifySavingData(e))){const i=this.getBeforeSavePromisses();return new Promise((n,s)=>{Promise.all(i).then(()=>{if(this._savingLockers=[],this.saveLoader){const o=this.getAllChangesToSave();this.saveLoader(this,o).then(a=>{this.dispatchAction(l.LOADING_PROPERTIES_CLEANED);const c=this.getRecordsByDataUnit(a),d=[];for(const[u,h]of c){const m=j.get(u),_=o.filter(M=>M.dataUnit===u);m&&d.push(m.dispatchAction(l.DATA_SAVED,{changes:_,records:h},e))}Promise.all(d).then(()=>n())}).catch(a=>{const{errorCode:c}=a;if(this.dispatchAction(l.SAVING_ERROR),this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),a instanceof yi&&(console.debug("Service canceled: "+a.message),n()),a instanceof pi){s(a);return}s(new V("Erro ao salvar alterações",a,c))})}else this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),n()})})}return Promise.resolve()})}buildChangesToSave(){return Me(this._name,this._stateManager)}buildChangesToSaveFromChild(e,t){t._childByName.forEach(i=>{i.isDirty()&&(e.push(...Me(i.name,i._stateManager)),this.buildChangesToSaveFromChild(e,i))})}getAllChangesToSave(){const e=[];return e.push(...this.buildChangesToSave()),this.buildChangesToSaveFromChild(e,this),e}removeSelectedRecords(e=!1,t=!1){return E(this,void 0,void 0,function*(){const i=this.getSelectionInfo();if(i.isAllRecords())throw new Error("Exclusão remota não implementada.");if(!i.records||!i.records.length)return Promise.resolve([]);const n=i.records,s=i.recordIds;return this.removeRecords(s,n,e,void 0,t)})}removeRecords(e,t,i=!1,n,s=!1){return E(this,void 0,void 0,function*(){if(e){if(i||!this.removeLoader)this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),this.dispatchAction(l.RECORDS_REMOVED,{records:e,cachedRecords:t,buffered:!0},n);else if(yield this.dispatchAction(l.REMOVING_RECORDS,{silent:s},n))return new Promise((o,a)=>{this.removeLoader&&this.removeLoader(this,e).then(c=>{const d=Array.from(b(this._stateManager).keys()),u=e.map(_=>d.indexOf(_)).filter(_=>_>-1).sort((_,M)=>_-M),h=Math.min(u.slice(-1)[0]+1,d.length),m=d[h]?[d[h]]:[];this.dispatchAction(l.RECORDS_REMOVED,{records:c,cachedRecords:t,removedIndex:u,buffered:!1,selectionAfterRemove:m},n),this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),o(c)}).catch(c=>{this.dispatchAction(l.LOADING_PROPERTIES_CLEANED);const{errorCode:d}=c;a(new V("Erro ao remover registros",c,d))})})}return Promise.resolve(e)})}valueFromString(e,t){const i=this.getField(e);return i?Ie(i.dataType,t):t}valueToString(e,t){const i=this.getField(e);return ze(i==null?void 0:i.dataType,t)}getFormattedValue(e,t){const i=this.getField(e);return t==null?t=this.getFieldValue(e):typeof t=="string"&&(i==null?void 0:i.dataType)!=C.TEXT&&(t=this.valueFromString(e,t)),t==null?"":ce(t,i)}addInterceptor(e){this._interceptors.set(e.interceptAction.toString(),e)}removeInterceptor(e){this._interceptors.delete(e.interceptAction.toString())}addFilterProvider(e){this._filterProviders.set(this.getFielterProviderKey(e),e)}removeFilterProvider(e){return this._filterProviders.delete(this.getFielterProviderKey(e))}getPaginationInfo(){return P(this._stateManager)}updatePagination(e){return this.dispatchAction(l.PAGINATION_UPDATED,e,void 0)}set sortingProvider(e){this._sortingProvider=e}set defaultSorting(e){this._defaultSorting=e}set metadata(e){this.dispatchAction(l.METADATA_LOADED,e,void 0)}get metadata(){return st(this._stateManager)}getChildInfo(e){var t;const i=(t=this.metadata)===null||t===void 0?void 0:t.children;if(i!=null)return i.find(n=>n.name===e)}set records(e){const t=this.getPaginationInfo();this.dispatchAction(l.DATA_LOADED,{records:e,paginationInfo:t},void 0)}get records(){const e=b(this._stateManager);return e?Array.from(e.values()):[]}set pageSize(e){this._pageSize=e}get pageSize(){return this._pageSize}getModifiedRecords(){return Ft(this._stateManager)||[]}getAddedRecords(){return S(this._stateManager)}getField(e){return ti(this._stateManager,e)}addRecord(e){return E(this,void 0,void 0,function*(){return this.dispatchAction(l.RECORDS_ADDED,vt(this._stateManager,[{}],this.getParentRecordId()),e)})}copySelected(e){const t=this.getSelectionInfo();if(t.isAllRecords())throw new Error("Erro interno: Impossível copiar os registros selecionados pois a seleção atual é virtual.");const i=t.records;i.length&&this.dispatchAction(l.RECORDS_COPIED,Lt(this._stateManager,i,this.getParentRecordId()),e)}getRecordsByDataUnit(e){const t=new Map;return e.forEach(i=>{let{__owner__dataunit__name__:n}=i;n||(n=this.name);let s=t.get(n);s||(s=[],t.set(n,s)),s.push(i)}),t}getParentRecordId(){var e;const t=(e=this._parentDataUnit)===null||e===void 0?void 0:e.getSelectedRecord();return t==null?void 0:t.__record__id__}waitingForChange(e){return qt(this._stateManager,e)}getFieldValue(e){return Ut(this._stateManager,e)}setFieldValue(e,t,i,n){return E(this,void 0,void 0,function*(){const s=!this.hasNewRecord()&&!this.getSelectedRecord(),o=n==null?void 0:n.suppressCreateNewRecord;if(s&&o)return Promise.resolve(!1);s&&(yield this.addRecord());const a=this.validateAndTypeValue(e,t),c=this.getFieldValue(e);if(this.areEquivalentValues(t,c,a))return Promise.resolve(!1);if(t instanceof Promise){const d=new Promise(u=>{t.then(h=>{this.dispatchAction(l.DATA_RESOLVED,{[e]:h,records:i},void 0),u(this.setFieldValue(e,h,i,n))})});return this._savingLockers.push(d),d}if(this.isMultipleEdition||c!==a){const d=this.dispatchAction(l.DATA_CHANGED,{[e]:a,records:i},void 0,n);return this._savingLockers.push(d),d}return Promise.resolve(!1)})}areEquivalentValues(e,t,i){return!(e instanceof Promise)&&v.hasEquivalentProps(t,i)&&!this.isMultipleEdition}setInvalidField(e,t,i){this.dispatchAction(l.FIELD_INVALIDATED,{fieldName:e,message:t,recordId:i},void 0)}savingCanceled(e,t){this.dispatchAction(l.SAVING_CANCELED,{fields:e,recordId:t},void 0)}clearInvalid(e,t){this.dispatchAction(l.INVALIDATE_CLEAN,{fieldName:t,recordId:e},void 0)}getInvalidMessage(e,t){return ci(this._stateManager,t,e)}startChange(e,t){this.dispatchAction(l.CHANGING_DATA,{[e]:t},void 0)}cancelWaitingChange(e){this.dispatchAction(l.WAITING_CHANGE_CANCELED,{fieldName:e},void 0)}hasWaitingChanges(){const e=Y(this._stateManager);return e?!!e.size:!1}selectFirst(e){this.records.length>0&&this.setSelectionByIndex([0],e)}selectLast(e){this.records.length>0&&this.setSelectionByIndex([this.records.length-1],e)}setSelectionByIndex(e,t){this.dispatchAction(l.SELECTION_CHANGED,{type:"index",selection:e},t)}setSelection(e,t){return new Promise(i=>{this.dispatchAction(l.SELECTION_CHANGED,{type:"id",selection:e},t).then(()=>i(this.getSelectionInfo()))})}clearSelection(e){this.setSelection([],e)}updatePageSelection(e,t){return e?new Promise(i=>{const n=new Set(e);this.dispatchAction(l.SELECTION_CHANGED,{type:"id",selection:Array.from(n)},t).then(()=>i(this.getSelectionInfo()))}):Promise.resolve(this.getSelectionInfo())}updatePageSelectionAll(e){return new Promise(t=>{const i=new Set;x(this._stateManager).forEach(o=>i.add(o)),this.records.map(o=>o.__record__id__).forEach(o=>e?i.add(o):i.delete(o)),this.dispatchAction(l.SELECTION_CHANGED,{type:"id",selection:Array.from(i)}).then(()=>t(this.getSelectionInfo()))})}selectAllRecords(){return this.updatePageSelectionAll(!0)}unSelectAllRecords(){return this.updatePageSelectionAll(!1)}getSelectionInfo(){const e=zt(this._stateManager);if(e.getAllRecords=()=>{var t,i;let n=(i=(t=this.allRecordsLoader)===null||t===void 0?void 0:t.call(this,this))!==null&&i!==void 0?i:[];if(e.sort!=null&&e.sort.length>0){const s=le.getSortingFunction(this,e.sort);n=[...n].sort(s)}return n},e.sort!=null&&e.sort.length>0){const t=le.getSortingFunction(this,e.sort);e.records.sort(t)}return e}getSelectedRecord(){return Je(this._stateManager)}getParentDataUnit(){return this._parentDataUnit}clearDataUnit(){this.records=[]}nextRecord(e){return E(this,void 0,void 0,function*(){be(this._stateManager)?this.dispatchAction(l.NEXT_SELECTED,void 0,e):ve(this._stateManager)&&(yield this.nextPage({before:t=>(e&&e.before&&(t=e.before(t)),t),after:()=>{this.selectFirst(e)}}))})}previousRecord(e){return E(this,void 0,void 0,function*(){Pe(this._stateManager)?this.dispatchAction(l.PREVIOUS_SELECTED,void 0,e):Le(this._stateManager)&&(yield this.previousPage({before:t=>(e&&e.before&&(t=e.before(t)),t),after:()=>{this.selectLast(e)}}))})}cancelEdition(e,t,i=!1){return E(this,void 0,void 0,function*(){const n=yield this.dispatchAction(l.EDITION_CANCELED,{fromParent:t,silent:i},e);for(const[,s]of this._childByName)s.isDirty()&&s.cancelEdition(void 0,!0,i);return Promise.resolve(n)})}isDirty(e){return e?re(this._stateManager):re(this._stateManager)||this.childrenIsDirty()}isParentDirty(){return this._parentDataUnit?this._parentDataUnit.isDirty(!0):!1}childrenIsDirty(){for(let[e,t]of this._childByName)if(t.isDirty())return!0;return!1}hasDirtyRecords(){return rt(this._stateManager)}hasNext(){let e=be(this._stateManager);return e||(e=ve(this._stateManager)),e}hasPrevious(){let e=Pe(this._stateManager);return e||(e=Le(this._stateManager)),e}isNewRecord(e){const t=S(this._stateManager);return t&&t.length>0?t.find(n=>n.__record__id__===e)!=null:!1}hasNewRecord(){const e=S(this._stateManager);return e&&e.length>0}hasCopiedRecord(){const e=S(this._stateManager);if(e==null)return!1;for(let t of e)if(t.__record__source__id__!=null)return!0;return!1}canUndo(){return ni(this._stateManager)}canRedo(){return si(this._stateManager)}undo(e){this.dispatchAction(l.CHANGE_UNDONE,void 0,e)}redo(e){this.dispatchAction(l.CHANGE_REDONE,void 0,e)}toString(){return this.name}dispatchAction(e,t,i,n){return E(this,void 0,void 0,function*(){return new Promise(s=>E(this,void 0,void 0,function*(){let o=new St(e,t);i&&i.before&&(o=i.before(o)),o&&this._interceptors&&this._interceptors.size>0&&(o=yield this.intercept(o,this._interceptors.values())),o?(this.doDispatchAction(o,n),i&&i.after&&i.after(o),s(!0)):s(!1)}))})}intercept(e,t){return E(this,void 0,void 0,function*(){return new Promise(i=>E(this,void 0,void 0,function*(){let n;for(;e&&!(n=t.next()).done;)e=yield n.value.interceptAction(e);i(e)}))})}doDispatchAction(e,t={}){var i;this._stateManager.process(e),(i=this===null||this===void 0?void 0:this._parentDataUnit)===null||i===void 0||i.dispatchAction(l.CHILD_CHANGED,{srcAction:e,srcDataUnit:this}),this._observers.forEach(n=>{try{n(e,t)}catch(s){console.warn("[DataUnit] error while call observer",s)}})}getChildDataunit(e){const t=new L(e,this);return this._childByName.set(e,t),t}removeChildDataunit(e){this._childByName.delete(e)}subscribe(e,t){return t?this._observers.set(t,e):(t=p.generateUUID(),this._observers.set(t,e)),t}unsubscribe(e,t){t?this._observers.delete(t):this._observers.forEach((i,n)=>{i==e&&this._observers.delete(n)})}reloadCurrentRecord(){return new Promise((e,t)=>E(this,void 0,void 0,function*(){const i=x(this._stateManager);if(yield this.dispatchAction(l.LOADING_RECORD,i),!this.recordLoader||!this.dataLoader){yield this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),e([]);return}this.recordLoader(this,i).then(n=>E(this,void 0,void 0,function*(){yield this.dispatchAction(l.RECORD_LOADED,n),yield this.dispatchAction(l.LOADING_PROPERTIES_CLEANED),e(n)})).catch(n=>E(this,void 0,void 0,function*(){yield this.dispatchAction(l.LOADING_PROPERTIES_CLEANED);const{errorCode:s}=n;t(new V("Erro ao recarregar registro",n,s))}))}))}getSort(){return this._sortingProvider?this._sortingProvider.getSort(this._name,this._defaultSorting):this._defaultSorting}getFilters(){let e;return this._filterProviders.forEach(t=>{const i=t.getFilter(this.name);i&&(e=(e||[]).concat(i))}),e}getLastLoadRequest(){return G(this._stateManager)}getAppliedFilters(){const{filters:e}=G(this._stateManager)||{};return e}enableField(e){const t=this.getField(e);t&&t.readOnly&&(t.readOnly=!1,this.metadata=Object.assign({},this.metadata))}disableField(e){const t=this.getField(e);t&&(t.readOnly||(t.readOnly=!0,this.metadata=Object.assign({},this.metadata)))}hideField(e,t){const i=this.getField(e);i&&i.visible&&(i.visible=!1,t&&(i.properties=Object.assign(Object.assign({},i.properties),{visibleOnConfig:t.visibleOnConfig})),this.metadata=Object.assign({},this.metadata))}showField(e){const t=this.getField(e);t&&(t.visible||(t.visible=!0,this.metadata=Object.assign({},this.metadata)))}getSelectedRecords(){console.warn("DataUnit: O método `getSelectedRecords` foi descontinuado. Use o método `getSelectionInfo`.");const e=this.getSelectionInfo();if(e!=null&&e.isAllRecords())throw new Error("Erro interno: Impossível retornar os registros selecionados. A seleção atual é virtual. Use o método `getSelectionInfo`.");if(e)return e.records}getSelection(){console.warn("DataUnit: O método `getSelection` foi descontinuado. Use o método `getSelectionInfo`.");const e=this.getSelectionInfo();if(e==null)return[];if(e.isAllRecords())throw new Error("Erro interno: Impossível retornar os registros selecionados. A seleção atual é virtual. Use o método `getSelectionInfo`.");return e==null?void 0:e.recordIds}addStandAloneField(){console.warn("metodo depreciado, para adicionar um campo standAlone, utilizar o metodo addField")}addField(e){const t=Object.assign(Object.assign({},e),{standAlone:!0});this.metadata=Object.assign(Object.assign({},this.metadata),{fields:[...this.metadata.fields,t]})}addLoadingLocker(){let e=()=>{};return this._loadingLockers.push(new Promise(t=>{e=t})),e}set allowReleaseCallbacks(e){this._allowReleaseCallbacks=e}addSourceFieldValue(e,t){this._fieldSourceValue.set(e,t)}getSourceFieldValue(e){return this._fieldSourceValue.get(e)}processLoadingLockers(){return E(this,void 0,void 0,function*(){this._loadingLockers.length&&(yield Promise.all(this._loadingLockers),this._loadingLockers=[])})}}L.CHANGING_PAGE_LOADING_SOURCE="CHANGING_PAGE_LOADING_SOURCE";L.ALL_RECORDS_SELECTION_SOURCE="ALL_RECORDS_SELECTION_SOURCE";L.DEFAULT_DATAUNIT_NAME="dataunit";class w{static addIDInfo(e,t,i){try{let n=this.getDataElementID(e,t,i);return n=p.replaceAccentuatedChars(n,!1),n=this.addPrefix(i,n),e.setAttribute(w.DATA_ELEMENT_ID_ATTRIBUTE_NAME,n),n}catch(n){console.warn(`Erro ao gerar data-element-id: ${e.tagName}`,n)}return""}static addIDInfoIfNotExists(e,t,i){try{let n=e.getAttribute(w.DATA_ELEMENT_ID_ATTRIBUTE_NAME);return n==null&&(n=w.addIDInfo(e,t,i)),n}catch(n){console.warn(`Erro ao gerar data-element-id: ${e.tagName}`,n)}return""}static getInternalIDInfo(e){return`${w.INTERNAL_INPUT_NAME}_${e}`}static getDataElementID(e,t,i){const n=w.getDataElementIDAttribute(e);if(n!=null)return this.addSuffix(p.toCamelCase(n),t,e);const s=this.getAttributeValid(e,i);if(s)return this.addSuffix(s,t,e);if(t)return String(t);const o=p.toCamelCase(e.tagName);return e.setAttribute(w.DATA_ELEMENT_ID_ATTRIBUTE_NAME,o),o}static getAttributeValid(e,t){return t!=null&&t.id?this.formatDescription(t==null?void 0:t.id):e.hasAttribute("data-field-name")?p.toCamelCase(e.getAttribute("data-field-name")):e!=null&&e.id?p.toCamelCase(e==null?void 0:e.id):e.hasAttribute("name")?this.formatDescription(e.getAttribute("name")):e.hasAttribute("label")?this.formatDescription(e.getAttribute("label")):e.hasAttribute("title")?this.formatDescription(e.getAttribute("title")):null}static addSuffix(e,t,i){return t?`${e}_${p.toCamelCase(t)}`:p.isEmpty(e)?`${p.toCamelCase(i.tagName)}`:`${e}_${p.toCamelCase(i.tagName)}`}static addPrefix(e,t){var i;let n=((i=e==null?void 0:e.dataUnit)===null||i===void 0?void 0:i.name)||"";return n=this.parseDataUnitName(n),e!=null&&e.dataUnit&&!(t!=null&&t.startsWith(n))&&(t=`${p.toCamelCase(n)}_${t}`),t}static formatDescription(e){return e?(e=p.replaceAccentuatedChars(e,!1),p.toCamelCase(e.replace(/[^\w\sÀ-ÖØ-öø-ÿ]/gi," ").replace(/\s+/g," ").trim())):""}static getDataElementIDAttribute(e){return e[w.DATA_ELEMENT_ID_ATTRIBUTE_NAME]||e.hasAttribute(w.DATA_ELEMENT_ID_ATTRIBUTE_NAME)?e[w.DATA_ELEMENT_ID_ATTRIBUTE_NAME]||e.getAttribute(w.DATA_ELEMENT_ID_ATTRIBUTE_NAME):null}static parseDataUnitName(e){var t;if(p.isEmpty(e))return e;const i=this.REGEX_DATAUNIT_NAME.exec(e);return(t=i==null?void 0:i[1])!==null&&t!==void 0?t:e}}w.DATA_ELEMENT_ID_ATTRIBUTE_NAME="data-element-id";w.INTERNAL_INPUT_NAME="embedded";w.REGEX_DATAUNIT_NAME=/dd:\/\/(.+?)\//;class H{constructor(){}static getInstance(){return this.instance==null&&(this.instance=new H),this.instance}init(e,t){return e&&(this.injectScript(e),this.register(t)),Promise.resolve()}injectScript(e){if(window.document.head.querySelector(`script#${H.USER_GUIDE_TAG_ID}`))return;const t=document.createElement("script");t.setAttribute("id",H.USER_GUIDE_TAG_ID),t.innerText=`(function(g,u,i,d,e,s){g[e]=g[e]||[];var f=u.getElementsByTagName(i)[0];var k=u.createElement(i);k.async=true;k.src='https://static.userguiding.com/media/user-guiding-'+s+'-embedded.js';f.parentNode.insertBefore(k,f);if(g[d])return;var ug=g[d]={q:[]};ug.c=function(n){return function(){ug.q.push([n,arguments])};};var m=['previewGuide','finishPreview','track','identify','hideChecklist','launchChecklist'];for(var j=0;j<m.length;j+=1){ug[m[j]]=ug.c(m[j]);}})(window,document,'script','userGuiding','userGuidingLayer','${e}');`,window.document.head.appendChild(t)}register(e){window.userGuiding.identify(`${encodeURIComponent(e.userID)}-${encodeURIComponent(e.userName)}-${encodeURIComponent(e.clientGaId)}`,e)}}H.USER_GUIDE_TAG_ID="userGuideSnippet";const ue=(r,e)=>e.some(t=>r instanceof t);let Fe,Ue;function _i(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ei(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const he=new WeakMap,ne=new WeakMap,te=new WeakMap;function gi(r){const e=new Promise((t,i)=>{const n=()=>{r.removeEventListener("success",s),r.removeEventListener("error",o)},s=()=>{t(Z(r.result)),n()},o=()=>{i(r.error),n()};r.addEventListener("success",s),r.addEventListener("error",o)});return te.set(e,r),e}function Ci(r){if(he.has(r))return;const e=new Promise((t,i)=>{const n=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",o),r.removeEventListener("abort",o)},s=()=>{t(),n()},o=()=>{i(r.error||new DOMException("AbortError","AbortError")),n()};r.addEventListener("complete",s),r.addEventListener("error",o),r.addEventListener("abort",o)});he.set(r,e)}let fe={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return he.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Z(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ct(r){fe=r(fe)}function mi(r){return Ei().includes(r)?function(...e){return r.apply(ye(this),e),Z(this.request)}:function(...e){return Z(r.apply(ye(this),e))}}function Ai(r){return typeof r=="function"?mi(r):(r instanceof IDBTransaction&&Ci(r),ue(r,_i())?new Proxy(r,fe):r)}function Z(r){if(r instanceof IDBRequest)return gi(r);if(ne.has(r))return ne.get(r);const e=Ai(r);return e!==r&&(ne.set(r,e),te.set(e,r)),e}const ye=r=>te.get(r),ki=["get","getKey","getAll","getAllKeys","count"],Di=["put","add","delete","clear"],se=new Map;function Be(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(se.get(e))return se.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,n=Di.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(n||ki.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,n?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),n&&c.done]))[0]};return se.set(e,s),s}ct(r=>({...r,get:(e,t,i)=>Be(e,t)||r.get(e,t,i),has:(e,t)=>!!Be(e,t)||r.has(e,t)}));const wi=["continue","continuePrimaryKey","advance"],Ve={},pe=new WeakMap,dt=new WeakMap,Ri={get(r,e){if(!wi.includes(e))return r[e];let t=Ve[e];return t||(t=Ve[e]=function(...i){pe.set(this,dt.get(this)[e](...i))}),t}};async function*Ni(...r){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...r)),!e)return;e=e;const t=new Proxy(e,Ri);for(dt.set(t,e),te.set(t,ye(e));e;)yield t,e=await(pe.get(t)||e.continue()),pe.delete(t)}function Ge(r,e){return e===Symbol.asyncIterator&&ue(r,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ue(r,[IDBIndex,IDBObjectStore])}ct(r=>({...r,get(e,t,i){return Ge(e,t)?Ni:r.get(e,t,i)},has(e,t){return Ge(e,t)||r.has(e,t)}}));const I={0:{key:"Unidentified",keyCode:0,which:0,code:"Unidentified",location:0,description:"These keys do not have a key code"},3:{key:"Cancel",keyCode:3,which:3,code:"Pause",location:0,altKey:!1,ctrlKey:!0,metaKey:!1,shiftKey:!1,description:"break"},8:{key:"Backspace",keyCode:8,which:8,code:"Backspace",location:0,description:"backspace / delete",unicode:"⌫"},9:{key:"Tab",keyCode:9,which:9,code:"Tab",location:0,description:"tab",unicode:"↹"},12:{key:"Clear",keyCode:12,which:12,code:"NumLock",location:0,description:"clear",unicode:"⌧"},13:{key:"Enter",keyCode:13,which:13,code:"Enter",location:0,description:"Enter / Return",unicode:"↵"},16:{key:"Shift",keyCode:16,which:16,code:"ShiftLeft",location:1,description:"shift",unicode:"⇧",shiftKey:!0,altKey:!1},17:{key:"Control",keyCode:17,which:17,code:"ControlLeft",location:1,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0,description:"ctrl",unicode:"^"},18:{key:"Alt",keyCode:18,which:18,code:"AltLeft",location:1,altKey:!0,ctrlKey:!1,metaKey:!0,shiftKey:!1,description:"Alt / Option",unicode:"⎇ / ⌥"},19:{key:"Pause",keyCode:19,which:19,code:"Pause",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"pause/break"},20:{key:"CapsLock",keyCode:20,which:20,code:"CapsLock",location:0,description:"caps lock",unicode:"⇪"},21:{key:"Unidentified",keyCode:21,which:21,code:"Lang1",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"hangul"},25:{key:"Unidentified",keyCode:25,which:25,code:"Lang2",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"hanja"},27:{key:"Escape",keyCode:27,which:27,code:"Escape",location:0,description:"escape",unicode:"⎋"},28:{key:"henkan",description:"conversion",keyCode:28,which:28},29:{key:"muhenkan",description:"non-conversion",keyCode:29,which:29},32:{key:" ",keyCode:32,which:32,code:"Space",location:0,description:"spacebar"},33:{key:"PageUp",keyCode:33,which:33,code:"Numpad9",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"page up",unicode:"⇞"},34:{key:"PageDown",keyCode:34,which:34,code:"Numpad3",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"page down",unicode:"⇟"},35:{key:"End",keyCode:35,which:35,code:"Numpad1",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"end"},36:{key:"Home",keyCode:36,which:36,code:"Numpad7",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"home",unicode:"⌂"},37:{key:"ArrowLeft",keyCode:37,which:37,code:"ArrowLeft",location:0,description:"left arrow",unicode:"←"},38:{key:"ArrowUp",keyCode:38,which:38,code:"ArrowUp",location:0,description:"up arrow",unicode:"↑"},39:{key:"ArrowRight",keyCode:39,which:39,code:"ArrowRight",location:0,description:"right arrow",unicode:"→"},40:{key:"ArrowDown",keyCode:40,which:40,code:"ArrowDown",location:0,description:"down arrow",unicode:"↓"},41:{key:"Select",description:"select",keyCode:41,which:41},42:{key:"Print",description:"print",keyCode:42,which:42},43:{key:"Execute",description:"execute",keyCode:43,which:43},44:{key:"F13",keyCode:44,which:44,code:"F13",location:0,description:"Print Screen / F13 (firefox)",unicode:"⎙"},45:{key:"Insert",keyCode:45,which:45,code:"Numpad0",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"insert",unicode:"x"},46:{key:"Delete",keyCode:46,which:46,code:"NumpadDecimal",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"delete",unicode:"⌦"},47:{key:"Help",description:"help",keyCode:47,which:47,unicode:"⍰"},48:{key:"0",keyCode:48,which:48,code:"Digit0",location:0,description:"0",unicode:"⓪"},49:{key:"1",keyCode:49,which:49,code:"Digit1",location:0,description:"1 Key",unicode:"①"},50:{key:"2",keyCode:50,which:50,code:"Digit2",location:0,description:"2 Key",unicode:"②"},51:{key:"3",keyCode:51,which:51,code:"Digit3",location:0,description:"3 Key",unicode:"③"},52:{key:"4",keyCode:52,which:52,code:"Digit4",location:0,description:"4 Key",unicode:"④"},53:{key:"5",keyCode:53,which:53,code:"Digit5",location:0,description:"5 Key",unicode:"⑤"},54:{key:"6",keyCode:54,which:54,code:"Digit6",location:0,description:"6 Key",unicode:"⑥"},55:{key:"7",keyCode:55,which:55,code:"Digit7",location:0,description:"7 Key",unicode:"⑦"},56:{key:"8",keyCode:56,which:56,code:"Digit8",location:0,description:"8 Key",unicode:"⑧"},57:{key:"9",keyCode:57,which:57,code:"Digit9",location:0,description:"9 Key",unicode:"⑨"},58:{key:":",keyCode:58,which:58,code:"Period",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:":"},59:{key:";",keyCode:59,which:59,code:"Semicolon",location:0,description:"semicolon (firefox), equals"},60:{key:"<",keyCode:60,which:60,code:"Backquote",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"<"},61:{key:"=",keyCode:61,which:61,code:"Equal",location:0,description:"equals (firefox)"},63:{key:"ß",keyCode:63,which:63,code:"Minus",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"ß / ?"},64:{key:"@",description:"@ (firefox)",keyCode:64,which:64},65:{key:"a",keyCode:65,which:65,code:"KeyA",location:0,description:"a"},66:{key:"b",keyCode:66,which:66,code:"KeyB",location:0,description:"b"},67:{key:"c",keyCode:67,which:67,code:"KeyC",location:0,description:"c"},68:{key:"d",keyCode:68,which:68,code:"KeyD",location:0,description:"d"},69:{key:"e",keyCode:69,which:69,code:"KeyE",location:0,description:"e"},70:{key:"f",keyCode:70,which:70,code:"KeyF",location:0,description:"f"},71:{key:"g",keyCode:71,which:71,code:"KeyG",location:0,description:"g"},72:{key:"h",keyCode:72,which:72,code:"KeyH",location:0,description:"h"},73:{key:"i",keyCode:73,which:73,code:"KeyI",location:0,description:"i"},74:{key:"j",keyCode:74,which:74,code:"KeyJ",location:0,description:"j"},75:{key:"k",keyCode:75,which:75,code:"KeyK",location:0,altKey:!0,ctrlKey:!1,metaKey:!0,shiftKey:!1,description:"k"},76:{key:"l",keyCode:76,which:76,code:"KeyL",location:0,altKey:!0,ctrlKey:!1,metaKey:!0,shiftKey:!1,description:"l"},77:{key:"m",keyCode:77,which:77,code:"KeyM",location:0,description:"m"},78:{key:"n",keyCode:78,which:78,code:"KeyN",location:0,description:"n"},79:{key:"o",keyCode:79,which:79,code:"KeyO",location:0,description:"o"},80:{key:"p",keyCode:80,which:80,code:"KeyP",location:0,description:"p"},81:{key:"q",keyCode:81,which:81,code:"KeyQ",location:0,description:"q"},82:{key:"r",keyCode:82,which:82,code:"KeyR",location:0,description:"r"},83:{key:"s",keyCode:83,which:83,code:"KeyS",location:0,description:"s"},84:{key:"t",keyCode:84,which:84,code:"KeyT",location:0,description:"t"},85:{key:"u",keyCode:85,which:85,code:"KeyU",location:0,description:"u"},86:{key:"v",keyCode:86,which:86,code:"KeyV",location:0,description:"v"},87:{key:"w",keyCode:87,which:87,code:"KeyW",location:0,description:"w"},88:{key:"x",keyCode:88,which:88,code:"KeyX",location:0,description:"x"},89:{key:"y",keyCode:89,which:89,code:"KeyY",location:0,description:"y"},90:{key:"z",keyCode:90,which:90,code:"KeyZ",location:0,description:"z",unicode:""},91:{key:"Meta",keyCode:91,which:91,code:"MetaLeft",location:1,altKey:!1,ctrlKey:!1,metaKey:!0,shiftKey:!1,description:"Windows Key / Left ⌘ / Chromebook Search key",unicode:"⌘ ⊞"},92:{key:"Meta",keyCode:92,which:92,code:"MetaRight",location:2,altKey:!1,ctrlKey:!1,metaKey:!0,shiftKey:!0,description:"Right Windows",unicode:"⌘ ⊞"},93:{key:"ContextMenu",keyCode:93,which:93,code:"ContextMenu",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"Windows Menu / Right ⌘",unicode:"▤"},95:{key:"Standby",description:"sleep",keyCode:95,which:95,unicode:"☾"},96:{key:"0",keyCode:96,which:96,code:"Numpad0",location:3,description:"Number Pad 0",unicode:"⓪"},97:{key:"1",keyCode:97,which:97,code:"Numpad1",location:3,description:"Number Pad 1",unicode:"①"},98:{key:"2",keyCode:98,which:98,code:"Numpad2",location:3,description:"Number Pad 2",unicode:"②"},99:{key:"3",keyCode:99,which:99,code:"Numpad3",location:3,description:"Number Pad 3",unicode:"③"},100:{key:"4",keyCode:100,which:100,code:"Numpad4",location:3,description:"Number Pad 4",unicode:"④"},101:{key:"5",keyCode:101,which:101,code:"Numpad5",location:3,description:"Number Pad 5",unicode:"⑤"},102:{key:"6",keyCode:102,which:102,code:"Numpad6",location:3,description:"Number Pad 6",unicode:"⑥"},103:{key:"7",keyCode:103,which:103,code:"Numpad7",location:3,description:"Number Pad 7",unicode:"⑦"},104:{key:"8",keyCode:104,which:104,code:"Numpad8",location:3,description:"Number Pad 8",unicode:"⑧"},105:{key:"9",keyCode:105,which:105,code:"Numpad9",location:3,description:"Number Pad 9",unicode:"⑨"},106:{key:"*",keyCode:106,which:106,code:"NumpadMultiply",location:3,description:"multiply",unicode:"×"},107:{key:"+",keyCode:107,which:107,code:"NumpadAdd",location:3,description:"add"},108:{key:",",keyCode:108,which:108,code:"NumpadDecimal",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"numpad period (firefox)"},109:{key:"-",keyCode:109,which:109,code:"NumpadSubtract",location:3,description:"subtract"},110:{key:".",keyCode:110,which:110,code:"NumpadDecimal",location:3,description:"decimal point"},111:{key:"/",keyCode:111,which:111,code:"NumpadDivide",location:3,description:"divide",unicode:"÷"},112:{key:"F1",keyCode:112,which:112,code:"F1",location:0,description:"f1"},113:{key:"F2",keyCode:113,which:113,code:"F2",location:0,description:"f2"},114:{key:"F3",keyCode:114,which:114,code:"F3",location:0,description:"f3"},115:{key:"F4",keyCode:115,which:115,code:"F4",location:0,description:"f4"},116:{key:"F5",keyCode:116,which:116,code:"F5",location:0,description:"f5"},117:{key:"F6",keyCode:117,which:117,code:"F6",location:0,description:"f6"},118:{key:"F7",keyCode:118,which:118,code:"F7",location:0,description:"f7"},119:{key:"F8",keyCode:119,which:119,code:"F8",location:0,description:"f8"},120:{key:"F9",keyCode:120,which:120,code:"F9",location:0,description:"f9"},121:{key:"F10",keyCode:121,which:121,code:"F10",location:0,description:"f10"},122:{key:"F11",keyCode:122,which:122,code:"F11",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f11"},123:{key:"F12",keyCode:123,which:123,code:"F12",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f12"},124:{key:"F13",keyCode:124,which:124,code:"F13",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f13"},125:{key:"F14",keyCode:125,which:125,code:"F14",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!0,description:"f14"},126:{key:"F15",keyCode:126,which:126,code:"F15",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!0,description:"f15"},127:{key:"F16",keyCode:127,which:127,code:"F16",location:0,description:"f16"},128:{key:"F17",keyCode:128,which:128,code:"F17",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f17"},129:{key:"F18",keyCode:129,which:129,code:"F18",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f18"},130:{key:"F19",keyCode:130,which:130,code:"F19",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"f19"},131:{key:"F20",code:"F20",description:"F20",keyCode:131,which:131},132:{key:"F21",code:"F21",description:"F21",keyCode:132,which:132},133:{key:"F22",code:"F22",description:"F22",keyCode:133,which:133},134:{key:"F23",code:"F23",description:"F23",keyCode:134,which:134},135:{key:"F24",code:"F24",description:"F24",keyCode:135,which:135},136:{key:"F25",code:"F25",description:"F25",keyCode:136,which:136},137:{key:"F26",code:"F26",description:"F26",keyCode:137,which:137},138:{key:"F27",code:"F27",description:"F27",keyCode:138,which:138},139:{key:"F28",code:"F28",description:"F28",keyCode:139,which:139},140:{key:"F29",code:"F29",description:"F29",keyCode:140,which:140},141:{key:"F30",code:"F30",description:"F30",keyCode:141,which:141},142:{key:"F31",code:"F31",description:"F31",keyCode:142,which:142},143:{key:"F32",code:"F32",description:"F32",keyCode:143,which:143},144:{key:"NumLock",keyCode:144,which:144,code:"NumLock",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"num lock",unicode:"⇭"},145:{key:"ScrollLock",keyCode:145,which:145,code:"ScrollLock",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"scroll lock",unicode:"⤓"},151:{key:"",description:"airplane mode",keyCode:151,which:151},160:{key:"^",keyCode:160,which:160,code:"BracketLeft",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"^"},161:{key:"Dead",keyCode:161,which:161,code:"BracketRight",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"!"},162:{key:"",description:'؛ (arabic semicolon) / " / ¢',keyCode:162,which:162},163:{key:"#",keyCode:163,which:163,code:"Backquote",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"#"},164:{key:"$",keyCode:164,which:164,code:"Backslash",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"$"},165:{key:"^ù",keyCode:165,which:165,code:"Quote",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"ù"},166:{key:"BrowserBack",description:"browser page backward",keyCode:166,which:166},167:{key:"BrowserForward",description:"browser page forward",keyCode:167,which:167},168:{key:"BrowserRefresh",description:"browser refresh",keyCode:168,which:168},169:{key:")",keyCode:169,which:169,code:"Minus",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"closing paren (AZERTY)"},170:{key:"*",keyCode:170,which:170,code:"Backslash",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"*"},171:{key:"+",keyCode:171,which:171,code:"BracketRight",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"~ + * key"},172:{key:"|",keyCode:172,which:172,description:"home key, pipe key"},173:{key:"-",keyCode:173,which:173,code:"Minus",location:0,description:"minus (firefox), mute/unmute"},174:{key:"AudioVolumeDown",keyCode:174,which:174,code:"",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"decrease volume level"},175:{key:"AudioVolumeUp",keyCode:175,which:175,code:"",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"increase volume level"},176:{key:"MediaTrackNext",keyCode:176,which:176,code:"MediaTrackNext",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"next"},177:{key:"MediaTrackPrevious",keyCode:177,which:177,code:"MediaTrackPrevious",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"previous"},178:{key:"MediaStop",description:"stop",keyCode:178,which:178,unicode:""},179:{key:"MediaPlayPause",keyCode:179,which:179,code:"",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"play/pause"},180:{key:"LaunchMail",keyCode:180,which:180,code:"",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"e-mail",unicode:"✉"},181:{key:"AudioVolumeMute",keyCode:181,which:181,code:"VolumeMute",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"mute/unmute (firefox)"},182:{key:"AudioVolumeDown",keyCode:182,which:182,code:"VolumeDown",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"decrease volume level (firefox)"},183:{key:"AudioVolumeUp",keyCode:183,which:183,code:"VolumeUp",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,unicode:"",description:"increase volume level (firefox)"},186:{key:";",keyCode:186,which:186,code:"Semicolon",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"semi-colon / ñ"},187:{key:"=",keyCode:187,which:187,code:"Equal",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"equal sign"},188:{key:",",keyCode:188,which:188,code:"Comma",location:0,description:"comma"},189:{key:"-",keyCode:189,which:189,code:"Minus",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"dash"},190:{key:".",keyCode:190,which:190,code:"Period",location:0,description:"period"},191:{key:"/",keyCode:191,which:191,code:"Slash",location:0,description:"forward slash / ç"},192:{key:"`",keyCode:192,which:192,code:"Backquote",location:0,description:"Backtick / grave accent / ñ / æ / ö / § / ±"},193:{key:"/",keyCode:193,which:193,code:"IntlRo",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"?, / or °"},194:{key:".",keyCode:194,which:194,code:"NumpadComma",location:3,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"numpad period (chrome)"},219:{key:"[",keyCode:219,which:219,code:"BracketLeft",location:0,description:"open bracket"},220:{key:"\\",keyCode:220,which:220,code:"Backslash",location:0,description:"back slash"},221:{key:"]",keyCode:221,which:221,code:"BracketRight",location:0,description:"close bracket / å"},222:{key:"'",keyCode:222,which:222,code:"Quote",location:0,description:"single quote / ø / ä"},223:{key:"`",keyCode:223,which:223,code:"Backquote",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"`"},224:{key:"Meta",keyCode:224,which:224,code:"OSLeft",metaKey:!0,location:1,description:"left or right ⌘ key (firefox)",unicode:"⌘"},225:{key:"AltGraph",keyCode:225,which:225,code:"AltRight",location:2,altKey:!0,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"altgr",unicode:"⎇ or ⌥"},226:{key:"\\",keyCode:226,which:226,code:"IntlBackslash",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"< /git >, left back slash"},229:{key:"Dead",keyCode:229,which:229,code:"Backquote",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},230:{key:"",description:"GNOME Compose Key",keyCode:230,which:230},231:{key:"",description:"ç",keyCode:231,which:231},233:{key:"",description:"XF86Forward / é",keyCode:233,which:233},234:{key:"",description:"XF86Back / ê",keyCode:234,which:234},235:{key:"",description:"non-conversion / ë",keyCode:235,which:235},240:{key:"Alphanumeric",description:"alphanumeric / ð",keyCode:240,which:240},242:{key:"HiraganaKatakana",description:"hiragana/katakana / ò",keyCode:242,which:242},243:{key:"ZenkakuHankaku",description:"half-width/full-width / ó",keyCode:243,which:243},244:{key:"KanjiMode",description:"kanji / ô",keyCode:244,which:244},251:{key:"",description:"unlock track pad (Chrome/Edge) / û",keyCode:251,which:251},255:{key:"WakeUp",keyCode:255,which:255,code:"WakeUp",location:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,description:"WakeUp"}},Si=[Object.assign(Object.assign({},I[69]),{key:"Dead"}),Object.assign(Object.assign({},I[85]),{key:"Dead"}),Object.assign(Object.assign({},I[73]),{key:"Dead"}),Object.assign(Object.assign({},I[192]),{key:"Dead",code:"IntlBackslash"}),Object.assign(Object.assign({},I[78]),{key:"Dead"})],Ti=[Object.assign(Object.assign({},I[16]),{location:2,code:"ShiftRight"}),Object.assign(Object.assign({},I[17]),{location:2,code:"ControlRight"}),Object.assign(Object.assign({},I[18]),{location:2,code:"AltRight"})],Ii={'"':{keyCode:222,shiftKey:!0},">":{keyCode:190,shiftKey:!0},"?":{keyCode:191,shiftKey:!0},"!":{keyCode:49,shiftKey:!0},"#":{keyCode:51,shiftKey:!0},"%":{keyCode:53,shiftKey:!0},"(":{keyCode:57,shiftKey:!0},"^":{keyCode:73,altKey:!0},"@":{keyCode:50,shiftKey:!0},"&":{keyCode:55,shiftKey:!0},"}":{keyCode:221,shiftKey:!0},"{":{keyCode:219,shiftKey:!0},"±":{keyCode:187,shiftKey:!0},"§":{keyCode:54,shiftKey:!0},"¡":{keyCode:49,altKey:!0},"²":{keyCode:50,altKey:!0},"³":{keyCode:51,altKey:!0},"¤":{keyCode:52,altKey:!0},"€":{keyCode:53,altKey:!0},"¼":{keyCode:54,altKey:!0},"½":{keyCode:55,altKey:!0},"¾":{keyCode:56,altKey:!0},"‘":{keyCode:57,altKey:!0},"’":{keyCode:48,altKey:!0},"¥":{keyCode:89,altKey:!0},"×":{keyCode:187,altKey:!0},ä:{keyCode:81,altKey:!0},å:{keyCode:87,altKey:!0},é:{keyCode:69,altKey:!0},"®":{keyCode:82,altKey:!0},þ:{keyCode:84,altKey:!0},ü:{keyCode:89,altKey:!0},ú:{keyCode:85,altKey:!0},í:{keyCode:73,altKey:!0},ó:{keyCode:79,altKey:!0},ö:{keyCode:80,altKey:!0},"«":{keyCode:219,altKey:!0},"»":{keyCode:221,altKey:!0},á:{keyCode:65,altKey:!0},ß:{keyCode:83,altKey:!0},ð:{keyCode:68,altKey:!0},ø:{keyCode:76,altKey:!0},"¶":{keyCode:186,altKey:!0},"´":{keyCode:222,altKey:!0},"¬":{keyCode:220,altKey:!0},æ:{keyCode:90,altKey:!0},"©":{keyCode:67,altKey:!0},ñ:{keyCode:78,altKey:!0},µ:{keyCode:77,altKey:!0},ç:{keyCode:188,altKey:!0},"¿":{keyCode:191,altKey:!0},Ω:{keyCode:90,altKey:!0},"≈":{keyCode:88,altKey:!0},œ:{keyCode:81,altKey:!0},Σ:{keyCode:87,altKey:!0},"†":{keyCode:84,altKey:!0},"¨":{keyCode:85,altKey:!0},π:{keyCode:80,altKey:!0},ƒ:{keyCode:70,altKey:!0},"˙":{keyCode:72,altKey:!0},"∆":{keyCode:74,altKey:!0},"°":{keyCode:75,altKey:!0},"√":{keyCode:86,altKey:!0},"∫":{keyCode:66,altKey:!0},"~":{keyCode:78,altKey:!0},"™":{keyCode:50,altKey:!0},"£":{keyCode:51,altKey:!0},"¢":{keyCode:52,altKey:!0},"∞":{keyCode:53,altKey:!0},"…":{keyCode:186,altKey:!0},"•":{keyCode:56,altKey:!0},º:{keyCode:48,altKey:!0},"–":{keyCode:189,altKey:!0},"≠":{keyCode:187,altKey:!0},"≤":{keyCode:190,altKey:!0},"≥":{keyCode:188,altKey:!0},"÷":{keyCode:191,altKey:!0},"”":{keyCode:219,altKey:!0},ª:{keyCode:57,altKey:!0},"˚":{keyCode:72,altKey:!0},"∂":{keyCode:68,altKey:!0},"∑":{keyCode:87,altKey:!0},"“":{keyCode:219,altKey:!0},_:{keyCode:189,shiftKey:!0}},Ki=Object.entries(Ii).map(([r,e])=>Object.assign(Object.assign(Object.assign({},I[e.keyCode]),e),{key:r,unicode:r})),bi=[...Object.values(I),...Ti,...Si,...Ki];var T;(function(r){r.IN_MEMORY_CACHE="inMemoryCache",r.SESSION_STORAGE="sessionStorage",r.LOCAL_STORAGE="localStorage"})(T||(T={}));var Oi=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function c(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):n(u.value).then(a,c)}d((i=i.apply(r,e||[])).next())})};class Ae{static getOrSet(e,t,i=T.IN_MEMORY_CACHE){return Oi(this,void 0,void 0,function*(){const n=this.getCache(i);if(n[e])return n[e].data;const s=yield t();return n[e]={data:s},this.saveCache(n,i),s})}static clear(e,t=T.IN_MEMORY_CACHE){const i=this.getCache(t);delete i[e],this.saveCache(i,t)}static clearAll(e=T.IN_MEMORY_CACHE){e===T.IN_MEMORY_CACHE?this.inMemoryCache.clear():this.getStorage(e).removeItem(this.storageKey)}static getCache(e){if(e===T.IN_MEMORY_CACHE)return Object.fromEntries(this.inMemoryCache);const i=this.getStorage(e).getItem(this.storageKey);return i?JSON.parse(i):{}}static saveCache(e,t){t===T.IN_MEMORY_CACHE?this.inMemoryCache=new Map(Object.entries(e)):this.getStorage(t).setItem(this.storageKey,JSON.stringify(e))}static getStorage(e){return e===T.LOCAL_STORAGE?localStorage:sessionStorage}}Ae.storageKey="cacheManager";Ae.inMemoryCache=new Map;var vi=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function c(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):n(u.value).then(a,c)}d((i=i.apply(r,e||[])).next())})};class Pi{static useCacheWithService(e,t,i=T.IN_MEMORY_CACHE){return vi(this,void 0,void 0,function*(){const n=`${e}`;return Ae.getOrSet(n,t,i)})}}var je;(function(r){r[r.VERTICAL=0]="VERTICAL",r[r.HORIZONTAL=1]="HORIZONTAL"})(je||(je={}));var oe=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function c(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):n(u.value).then(a,c)}d((i=i.apply(r,e||[])).next())})},He;(function(r){r.TASKBAR_CLICK="taskbar_click",r.APP_LOADING="app_loading"})(He||(He={}));class g{static buildContextID(){return p.generateUUID()}static buildLockerID(e,t){if(e==null)return;let i=e;if(!(i instanceof HTMLElement&&(i=e.getAttribute(g.ATTRIBUTE_NAME),!i)))return`${i}_${t}`}static addLockManagerCtxId(e){var t;try{if(!e)return console.error("Elemento inicial não fornecido."),"";const i=(t=g.findExistingCtxId(e))!==null&&t!==void 0?t:g.buildContextID();let n=e;return g.traverseAndAddAttr(n,i),i}catch(i){return console.warn(`Erro ao registrar locks para o elemento: ${e==null?void 0:e.tagName}`,i),""}}static resetLocks(e,t){return oe(this,void 0,void 0,function*(){const i=this.buildLockerID(e,t);if(!i)return;const n=this._locks.get(i);n!=null&&n.length&&(yield Promise.all(n.map(s=>{var o;return s.done=!0,(o=s.resolve)===null||o===void 0||o.call(s),s.promise})),this._locks.delete(i))})}static lock(e,t){var i;const n=g.buildLockerID(e,t);if(!n)return()=>{};const s={done:!1},o=new Promise(c=>s.resolve=c);s.promise=o;const a=(i=g._locks.get(n))!==null&&i!==void 0?i:[];return a.push(s),g._locks.set(n,a),()=>{var c;s.done=!0,(c=s.resolve)===null||c===void 0||c.call(s)}}static whenResolve(e,t,i,n){var s,o;return oe(this,void 0,void 0,function*(){const a=g.buildLockerID(e,t);if(!a)return;i&&(yield new Promise(d=>setTimeout(d,i)));const c=Date.now();for(;!((s=g._locks.get(a))===null||s===void 0)&&s.length;){if(n&&Date.now()-c>=n){yield this.resetLocks(e,t);return}const d=(o=g._locks.get(a))!==null&&o!==void 0?o:[];yield Promise.all(d.map(u=>u.promise)),yield new Promise(u=>setTimeout(u,i||200)),g._locks.set(a,d.filter(u=>!u.done))}})}static whenHasLock(e,t,i){var n;return oe(this,void 0,void 0,function*(){const s=g.buildLockerID(e,t);if(!s)return;const o=Date.now();for(;!(!((n=g._locks.get(s))===null||n===void 0)&&n.length);){if(i&&Date.now()-o>=i){yield this.resetLocks(e,t);return}yield new Promise(a=>setTimeout(a,200))}})}}g._locks=new Map;g.ATTRIBUTE_NAME="data-locker-manger-context-id";g.findExistingCtxId=r=>{let e=r;for(;e;){if(e.hasAttribute(g.ATTRIBUTE_NAME))return e.getAttribute(g.ATTRIBUTE_NAME);const t=Array.from(e.children).find(i=>i instanceof HTMLElement&&i.hasAttribute(g.ATTRIBUTE_NAME));if(t)return t.getAttribute(g.ATTRIBUTE_NAME);e=e.parentElement}return null};g.traverseAndAddAttr=(r,e)=>{(r.tagName.startsWith("EZ-")||r.tagName.startsWith("SNK-"))&&r.setAttribute(g.ATTRIBUTE_NAME,e),Array.from(r.children).forEach(t=>{t instanceof HTMLElement&&g.traverseAndAddAttr(t,e)})};var X;(function(r){r.DD_MM_YYYY="DD/MM/YYYY",r.ISO="ISO"})(X||(X={}));const Li=/FILTRO_COLUNA_(.+)/;let xe=class q{static getColumnFilters(e,t){const i=new Map;return e!=null&&e.length&&e.forEach(n=>{const s=Li.exec(n.name);s&&t!==s[1]&&i.set(n.name,Object.assign({columnName:s[1]},n))}),i}static getFilterFunction(e,t){if(t!=null&&t.length)return i=>{for(const n of t)if(!q.recordMatchesFilter(e,i,n))return!1;return!0}}static recordMatchesFilter(e,t,i){const n=e.getField(i.columnName);if(!i.params||!n)return!1;const s=t[i.columnName];for(let o of i.params){const a=e.valueFromString(i.columnName,o.value);if(ee.compareValues(n,s,a)===0)return!0}return!1}static compileDistinct(e,t){const i=t.getLastLoadRequest();let n=t.records;return this.doCompileDistinct(i,e,t,n)}static compileDistinctFromArray(e,t,i){const n=t.getLastLoadRequest();return this.doCompileDistinct(n,e,t,i)}static doCompileDistinct(e,t,i,n){var s;if(e!=null){const a=Array.from(q.getColumnFilters((s=e==null?void 0:e.filters)!==null&&s!==void 0?s:[],t).values()),c=q.getFilterFunction(i,a);c!=null&&(n=n.filter(c))}const o=new Map(n.map(a=>{const c=a[t];if(c==null)return[null,{label:null,value:null,check:!0}];const d={label:i.getFormattedValue(t,c),value:c,check:!0};return[d.label,d]}));return Array.from(o.values())}};class F{static applyFilter(e,t,i){const n=xe.getColumnFilters(i,"");if(!(n!=null&&n.size))return e;const s=xe.getFilterFunction(t,Array.from(n.values()));return s?e.filter(s):e}static buildLoadDataResponse(e,t,i){var n,s;let o=e?[...e]:[];o=F.applyFilter(o,t,(n=i==null?void 0:i.filters)!==null&&n!==void 0?n:[]),o=F.applySorting(o,t,(s=i==null?void 0:i.sort)!==null&&s!==void 0?s:[]);const{offset:a,limit:c}=i,d={recordsLength:o.length,offset:a,recordsPerPage:c};return Promise.resolve({records:F.getPagesByRecords(o,a,c),paginationInfo:t.pageSize?F.buildPaginationInfo(d):void 0})}static applySorting(e,t,i){if(i==null||i.length==0)return e;const n=le.getSortingFunction(t,i);return n==null?e:e.sort(n)}static getPagesByRecords(e,t=0,i=0){return!e||!e.length||!this.hasValidLimitAndOffset(t,i)?[]:i===0&&t===0?e:e.slice(t,t+i)}static hasValidLimitAndOffset(e,t){return e>=0&&t>=0}static buildPaginationInfo({recordsLength:e=0,offset:t=0,recordsPerPage:i=0}){if(!e)return{currentPage:0,firstRecord:0,lastRecord:0,total:0,hasMore:!1};const n=t+i,s=n?Math.min(n,e):e;return{currentPage:i===0?0:Math.ceil(t/i),firstRecord:t+1,lastRecord:s,total:e,hasMore:s<e}}}class U{constructor(e,t,i){var n,s;this._initialRecords=[],this.metadata=e,this.recordDateFormat=(n=i==null?void 0:i.recordDateFormat)!==null&&n!==void 0?n:X.DD_MM_YYYY,this.records=t??[],this._dataUnit=new L(U.IN_MEMORY_DATA_UNIT_NAME),this._dataUnit.pageSize=(s=i==null?void 0:i.pageSize)!==null&&s!==void 0?s:U.DEFAULT_PAGE_SIZE,this._dataUnit.metadataLoader=()=>this.metadaLoader(),this._dataUnit.dataLoader=(o,a)=>this.inMemoryLoader(o,a,this.getRecordsToLoad()),this._dataUnit.saveLoader=(o,a)=>this.saveLoader(o,a),this._dataUnit.removeLoader=(o,a)=>this.removeLoader(o,a),this.dataUnit.loadMetadata().then(()=>{(i==null?void 0:i.autoLoad)!==!1&&this.dataUnit.loadData()})}getRecordsToLoad(){this._initialRecords==null&&this.dataUnit.records.length>0&&(this._initialRecords=this.dataUnit.records);const e=this.dataUnit.getAddedRecords();return e?[...this._initialRecords,...e]:this._initialRecords}get dataUnit(){return this._dataUnit}get records(){return this.dataUnit.records}set records(e){const t=this.buildColumns();this._initialRecords=this.buildInitialRecords(e,t),this._dataUnit&&this._dataUnit.loadData()}static getConvertedValue(e,t,i){return e?e.dataType===C.BOOLEAN?t==="S":e.dataType===C.NUMBER?Number(t):e.dataType===C.OBJECT?JSON.parse(t):e.dataType===C.DATE?i===X.ISO?D.validateDate(new Date(t),!0):D.strToDate(t,!0):t:t}buildColumns(){return this._metadata?new Map(this._metadata.fields.map(e=>[e.name,e])):void 0}buildInitialRecords(e,t){return e==null?void 0:e.map(n=>{if(n.__record__id__||(n.__record__id__=this.generateUniqueId()),!t)return n;for(const s in n){const o=n[s],a=t.get(s);typeof o=="string"&&a&&(n[s]=U.getConvertedValue(a,o,this.recordDateFormat))}return n})}get metadata(){return this._metadata}set metadata(e){this._metadata=e,this._dataUnit&&(this._dataUnit.metadata=e)}generateUniqueId(){return p.generateUUID()}inMemoryLoader(e,t,i){return F.buildLoadDataResponse(i,e,t)}metadaLoader(){return Promise.resolve(this._metadata)}saveLoader(e,t){return new Promise(i=>{let n=[];t.forEach(s=>{let{record:o,updatingFields:a,operation:c}=s;const d=Object.assign(Object.assign({},o),a);if(c===N.INSERT||c===N.COPY)d.__old__id__=o.__record__id__,d.__record__id__=this.generateUniqueId(),this.records.push(d);else{const u=this.records.findIndex(h=>h.__record__id__==d.__record__id__);this.records[u]=d}n.push(d)}),i(n)})}removeLoader(e,t){return new Promise(i=>i(t))}}U.IN_MEMORY_DATA_UNIT_NAME="InMemoryDataUnit";U.DEFAULT_PAGE_SIZE=150;export{l as A,Ie as B,xe as C,C as D,w as E,f as F,Et as J,g as L,y as M,A as N,v as O,p as S,Ye as T,R as U,It as W,O as a,He as b,pi as c,je as d,V as e,D as f,K as g,L as h,F as i,Pi as j,T as k,de as l,St as m,ae as n,ee as o,yi as p,Te as q,bi as r,U as s,ze as t,j as u,N as v,le as w,H as x,Se as y,_e as z};
//# sourceMappingURL=dataUnitInMemoryLoader-CwDmnNwL.js.map

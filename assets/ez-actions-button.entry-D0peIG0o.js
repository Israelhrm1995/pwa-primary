import{b as l,d as r,e as o,k as d,i as u}from"./index-BCuik2gT.js";import{F as a,E as h}from"./dataUnitInMemoryLoader-CwDmnNwL.js";import"./ApplicationUtils-eaf91331-DedxIlrs.js";import{C as b}from"./CSSVarsUtils-acba92d7-BCgqr3Ak.js";import"./DialogType-54a62731-BI65OFfy.js";import"./CheckMode-bdb2ec19-B2adzS2d.js";import"./FormLayout-071d324c-B21b_KW2.js";const _=":host{--ez-actions-button__actions-list--border-radius:var(--border--radius-medium, 12px);--ez-actions-button__actions-list--box-shadow:var(--shadow, 0px 0px 16px 0px #000);--ez-actions-button__actions-list--background-color:var(--background--xlight, #fff);--ez-actions-button__actions-list--padding:var(--space--small, 6px);--ez-actions-button__actions-list--top-margin:var(--space-small, 6px);--ez-actions-button__actions-list--z-index:var(--ez-elevation--8, 8);--ez-actions-button__actions-max-height:415px;--ez-actions-button__btn-action--min-width:'auto';--ez-actions-button__btn-action--background-color:var(--background--xlight, #fff);display:flex;flex-direction:column;height:fit-content;user-select:none}.ez-actions-button__actions-list{display:flex;flex-direction:column;position:fixed;width:fit-content;height:fit-content;overflow-y:auto;scrollbar-width:thin;z-index:var(--ez-actions-button__actions-list--z-index);padding:var(--ez-actions-button__actions-list--padding);margin-top:var(--ez-actions-button__actions-list--top-margin);background-color:var(--ez-actions-button__actions-list--background-color);border-radius:var(--ez-actions-button__actions-list--border-radius);box-shadow:var(--ez-actions-button__actions-list--box-shadow)}.ez-actions-button__actions-list--max-height{max-height:var(--ez-actions-button__actions-max-height)}.ez-actions-button__actions-list--lowered{margin-top:calc(var(--ez-actions-button__actions-list--top-margin) + 6px)}.ez-actions-button__btn-action{--ez-button--justify-content:flex-start;--ez-button--width:100%;--ez-button--min-width:var(--ez-actions-button__btn-action--min-width);--ez-button--background-color:var(--ez-actions-button__btn-action--background-color);--ez-button--font-weight:var(--text-weight--medium, 400);--ez-button--padding-left:var(--space--medium, 12px);--ez-button--padding-right:var(--space--medium, 12px);--ez-button--border:none}.ez-actions-button__btn-action--spaced{--ez-button--padding-left:calc(var(--space--medium, 12px) + 24px)}.ez-actions-button__icon-right{margin-left:var(--space--small, 6px)}.ez-actions-button__icon-check,.ez-actions-button__icon-item{position:absolute;left:var(--space--medium, 12px)}.ez-actions-button__icon-check{color:var(--ez-button--hover-color)}.ez-actions-button__arrow{position:absolute;border-left:10px solid transparent;border-right:10px solid transparent;width:0;height:0;z-index:calc(var(--ez-actions-button__actions-list--z-index) + 1);border-bottom:15px solid var(--ez-actions-button__btn-action--background-color)}.ez-actions-button__arrow--upped{margin-top:calc((var(--ez-actions-button__actions-list--top-margin) + 2px) * -1)}.ez-actions-button__arrow--small{margin-left:6px}.ez-actions-button__arrow--medium{margin-left:11px}.ez-actions-button__arrow--large{margin-left:13px}.ez-actions-button__arrow:only-child{display:none}.ez-actions-button__btn-transparent{--ez-button--background-color:transparent;--ez-button--hover--background-color:transparent;--ez-button--active--background-color:transparent;--ez-button--focus--border:none;--ez-button--border:none}.ez-actions-button__btn-label{--ez-button--padding-left:var(--space--medium, 12px);--ez-button--padding-right:var(--space--medium, 12px)}.ez-actions-button__list-container{position:relative}.ez-actions-button--bottom-padding{padding-bottom:var(--space--small, 6px)}",p=class{constructor(t){l(this,t),this.ezAction=r(this,"ezAction"),this.ezPopoverOpen=r(this,"ezPopoverOpen"),this.ezDisconnectedActionButtons=r(this,"ezDisconnectedActionButtons"),this._arrowOffset=5,this.innerClickCheck=(i,n)=>{var e;if(n&&i){if(n===i)return!0;const s=i.children;for(let c=0;c<s.length;c++)if(!((e=s[c].shadowRoot)===null||e===void 0)&&e.contains(n))return!0;do{if(i.contains(n))return!0;n=n.offsetParent}while(n!=null&&n!=document.getRootNode())}return!1},this._selectedAction=void 0,this.enabled=!0,this.actions=void 0,this.size="medium",this.showLabel=!1,this.displayIcon=void 0,this.checkOption=!1,this.value=void 0,this.isTransparent=!1,this.arrowActive=!1}async hideActions(){this._floatingID!=null&&a.close(this._floatingID),this._floatingID=void 0}async showActions(){if(!this.enabled)return;const t=this.getFloatOptions();this._floatingID=a.float(this._actionsList,this._listContainer,t);const i=this.getSideLimit();i!=null&&(t.left=i,a.updateFloatPosition(this._actionsList,this._listContainer,t)),window.requestAnimationFrame(()=>{this._actionsList.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}),this.ezPopoverOpen.emit(this._actionsList)}async isOpened(){return this._floatingID!=null}getFloatOptions(){return{autoClose:!0,innerClickTest:this.innerClickCheck,isFixed:!0,top:this.getPositionTop(),left:this.getPositionLeft(),backClickListener:()=>this._floatingID=void 0}}getSideLimit(){var t;const i=document.body.clientWidth,n=(t=this._actionsList)===null||t===void 0?void 0:t.getBoundingClientRect(),e=i-this._button.getBoundingClientRect().right;if((n==null?void 0:n.right)>=i||(n==null?void 0:n.right)===i-e)return i-n.width-e+"px"}updatePosition(){if(!this.enabled||this._floatingID==null)return;const t=this.getFloatOptions(),i=this.getSideLimit();i!=null&&(t.left=i),a.updateFloatPosition(this._actionsList,this._listContainer,t)}getPositionTop(){var t;const i=(t=this._element)===null||t===void 0?void 0:t.getBoundingClientRect();return i==null?null:i.y+i.height+"px"}getBoundingLeft(){var t;const i=(t=this._element)===null||t===void 0?void 0:t.getBoundingClientRect();if(i==null)return null;const n=this.arrowActive?this._arrowOffset:0;return i.x-n+"px"}getPositionLeft(){const t=this.getBoundingLeft();return t||(this.arrowActive?`-${this._arrowOffset}px`:null)}hasLabelOrCheckOption(){var t;return(this.showLabel||this.checkOption)&&((t=this.actions)===null||t===void 0?void 0:t.length)>0}hasIconName(){var t;return(t=this.actions)===null||t===void 0?void 0:t.some(i=>i.iconName!=null)}controlScrollPage(){window.removeEventListener("scroll",this.updatePosition.bind(this)),window.addEventListener("scroll",this.updatePosition.bind(this))}handlerButtonClick(){this.showActions()}actionClick(t){this._selectedAction=t,this.hideActions(),this.ezAction.emit(t)}componentWillLoad(){if(this.actions==null){this.actions=[];const t=this._element.querySelectorAll("action");t&&t.forEach(i=>{let n=i.innerText,e=i.getAttribute("value"),s=i.getAttribute("enabled")!=="false";e||(e=n),this.actions.push({label:n,value:e,enabled:s}),i.hidden=!0})}}disconnectedCallback(){this.ezDisconnectedActionButtons.emit()}componentDidLoad(){b.applyVarsButton(this._element,this._button),h.addIDInfo(this._element),this.controlScrollPage()}componentDidRender(){var t;this._floatingID==null&&((t=this._actionsList)===null||t===void 0||t.remove()),this.hasLabelOrCheckOption()&&(this.value?this._selectedAction=this.actions.find(i=>i.value===this.value):this._selectedAction||(this._selectedAction=this.actions[0]))}buildActionElement(t){var i;if(t){if(t.itemBuilder!=null){const n=t.itemBuilder(this._element,t);return typeof n=="string"?o("div",{class:"ez-actions-button__btn-action",innerHTML:n}):n}return o("ez-button",{size:"small",label:t.label,onClick:()=>this.actionClick(t),enabled:t.enabled,class:"ez-actions-button__btn-action"+(this.checkOption||this.hasIconName()?" ez-actions-button__btn-action--spaced":"")},this.checkOption&&((i=this._selectedAction)===null||i===void 0?void 0:i.value)===t.value&&o("ez-icon",{class:"ez-actions-button__icon-check",slot:"leftIcon",size:"small",iconName:"check"}),!this.checkOption&&t.iconName&&o("ez-icon",{class:"ez-actions-button__icon-item",slot:"leftIcon",size:"small",iconName:t.iconName}))}}render(){var t;return o(d,null,o("ez-button",{ref:i=>this._button=i,class:(this.isTransparent?"ez-actions-button__btn-transparent":"")+(this.showLabel?" ez-actions-button__btn-label":""),label:this.showLabel&&((t=this._selectedAction)===null||t===void 0?void 0:t.label),enabled:this.enabled,mode:this.showLabel?void 0:"icon",iconName:this.showLabel?"":this.displayIcon||"dots-vertical",size:this.size,onClick:()=>this.handlerButtonClick()},this.showLabel&&o("ez-icon",{class:"ez-actions-button__icon-right",slot:"rightIcon",iconName:this.displayIcon||"dots-vertical"})),o("section",{class:"ez-actions-button__list-container",ref:i=>this._listContainer=i},this.arrowActive&&o("div",{class:"ez-actions-button__arrow ez-actions-button__arrow--"+(this.size||"small")+(this.isTransparent?" ez-actions-button__arrow--upped":"")}),o("div",{ref:i=>this._actionsList=i,class:"ez-actions-button__actions-list ez-actions-button__actions-list--max-height"+(this.arrowActive&&!this.isTransparent?" ez-actions-button__actions-list--lowered":"")},this.actions.map(i=>this.buildActionElement(i)))))}get _element(){return u(this)}};p.style=_;export{p as ez_actions_button};
//# sourceMappingURL=ez-actions-button.entry-D0peIG0o.js.map

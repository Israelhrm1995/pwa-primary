import{b as E,d as f,e as d,i as g}from"./index-BH6w_YlO.js";import{O as p,E as a,J as w}from"./dataUnitInMemoryLoader-CwDmnNwL.js";const v=t=>{const{items:e,selectedItem:o,itemsHidden:i,showDropdown:l,handleShowDropdown:n,collapseConfigPosition:r,ellipsesPositionedEnd:c}=t,m=()=>i.map(s=>Object.assign(Object.assign({},s),{type:"item",children:null,iconName:s.iconName||null,subAction:null,group:null})),_=s=>{s.stopPropagation(),n(!l)},b=s=>d("li",Object.assign({class:"breadcrumb__item",onClick:h=>_(h)},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:a.getInternalIDInfo("ezBreadcrumbItem_ellipsis")}),c&&d("ez-icon",Object.assign({class:"breadcrumb__item--chevron",size:"small",iconName:"chevron-right"},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:`${a.getInternalIDInfo(`iconPath${s.id}`)}`})),d("span",{class:"ellipses__item"},"..."),c||d("ez-icon",Object.assign({class:"breadcrumb__item--chevron",size:"small",iconName:"chevron-right"},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:`${a.getInternalIDInfo(`iconPath${s.id}`)}`})),l&&d("ez-dropdown",Object.assign({class:"dropdown-ellipsis",items:m(),onEzClick:h=>o.emit(h.detail)},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:`${a.getInternalIDInfo("dropdown")}`})));return d("div",{class:"breadcrumb__items"},e.map((s,h)=>{const I=h===e.length-1;return d("div",{class:"breadcrumb__group"},r===h&&b(s),d("li",Object.assign({class:"breadcrumb__item",id:s.id},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:a.getInternalIDInfo(`ezBreadcrumb_item_${s.id}_${s.label}`)}),s.iconName&&d("ez-icon",Object.assign({class:`breadcrumb__item--icon ${I&&!c?"active-icon":""}`,size:"small",iconName:s.iconName},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:`${a.getInternalIDInfo(`iconItem${s.id}`)}`})),d("p",{class:`breadcrumb__item--label ${I&&!c?"active":""}`,onClick:c||!I?()=>o.emit(s):void 0},s.label),!I&&d("ez-icon",Object.assign({class:"breadcrumb__item--chevron",size:"small",iconName:"chevron-right"},{[a.DATA_ELEMENT_ID_ATTRIBUTE_NAME]:`${a.getInternalIDInfo(`iconPath${s.id}`)}`}))),r-1===h&&c&&b(s))}))},T=`:host{--breadcrumb__item--label--color--title-primary:var(--color--title-primary, #2B3A54);--breadcrumb__item--label--color--active:var(--color--primary, '#008561');--breadcrumb__item--label--font-weight:var(--text-weight--large, 600);display:block;font-size:var(--text--medium, 14px);font-family:var(--font-pattern, "Roboto");font-weight:var(--text-weight--medium, 400)}.breadcrumb{display:flex}.breadcrumb__group{display:flex}.breadcrumb__list{list-style-type:none;display:inline-block;margin:0;padding:0;overflow:hidden;white-space:nowrap}.breadcrumb__item{display:inline-flex;align-items:center;cursor:pointer}.breadcrumb__item--label{color:var(--breadcrumb__item--label--color--title-primary);margin:0px}.breadcrumb__item--icon{padding-right:3px;color:var(--breadcrumb__item--label--color--title-primary)}.breadcrumb__item--chevron{padding:0px 6px;cursor:default}.active{color:var(--breadcrumb__item--label--color--active);font-weight:var(--breadcrumb__item--label--font-weight);cursor:default}.active-icon{--icon--color:var(--breadcrumb__item--label--color--active);cursor:default}.breadcrumb__items{display:flex}`,D=class{constructor(t){E(this,t),this.selectedItem=f(this,"selectedItem"),this._ellipsesPositionedEnd=!1,this._renderSecond=!1,this.INDEX_ITEM_TO_REMOVE=1,this.CHEVRON_SIZE=28,this.handleShowDropdown=e=>{this.showDropdown=e},this.items=[],this.fillMode="auto",this.maxItems=4,this.positionEllipsis=1,this.visibleItems=void 0,this.hiddenItems=[],this.showDropdown=!1,this.collapseConfigPosition=-1}watchPropHandler(t,e){p.objectToString(t||[])!==p.objectToString(e||[])&&this.loadItems(),this.fillMode==="auto"&&this.handleResize()}watchPropHiddenItems(){this.fillMode==="auto"&&(this.collapseConfigPosition=this.hiddenItems.length>0?1:-1)}componentDidUpdate(){this.positionDropdown(),this.setEvents()}componentWillLoad(){this.loadItems()}loadItems(){this.visibleItems=[...this.items],this.hiddenItems=[],this.fillMode==="regular"?this.configModeRegular():this.fillMode==="auto"&&this.startResize(),this.setEvents()}closeDropdown(t){const e=t==null?void 0:t.target;e!=null&&e!==this._element.shadowRoot.querySelector(".ellipses__item")&&(this.showDropdown=!1)}setEvents(){document.removeEventListener("click",this.closeDropdown.bind(this)),document.addEventListener("click",this.closeDropdown.bind(this)),document.removeEventListener("scroll",this.positionDropdown.bind(this)),document.addEventListener("scroll",this.positionDropdown.bind(this))}componentDidLoad(){a.addIDInfo(this._element)}componentDidRender(){this.fillMode==="auto"&&this.configResize()}configResize(){this._resizeObserver!=null&&this._resizeObserver.unobserve(this._element.parentElement),this._resizeObserver=new ResizeObserver(w.debounce(this.handleResize.bind(this),200)),this._resizeObserver.observe(this._element.parentElement)}handleResize(){if(!this._renderSecond){this._renderSecond=!0;return}if(this._element.parentElement==null)return;let{offsetWidth:e}=this._element.parentElement,o=0;this.visibleItems.forEach(l=>o+=l.width);const i=this.collapseConfigPosition>-1?39:0;e<o+i?this.handleCollapse(e,o):e>=o+i&&this.handleExpand(e)}handleCollapse(t,e){if(this.visibleItems.length<=2)return;let i=[...this.visibleItems],l=[...this.hiddenItems],n=i[this.INDEX_ITEM_TO_REMOVE],r=!1;for(;i.length>2&&n!=null&&e>t;)r=!0,i=i.filter((c,m)=>m!==this.INDEX_ITEM_TO_REMOVE),l=[...l,n],e-=n.width,n=i[this.INDEX_ITEM_TO_REMOVE];r&&(this.visibleItems=i,this.hiddenItems=l,this.showDropdown=!1)}handleExpand(t){if(!this.hiddenItems.length)return;let e=Math.abs(this._elBreadcrumbList.offsetWidth-t),o=[...this.visibleItems],i=[...this.hiddenItems],l=i[i.length-1],n=!1;for(;l&&e>=l.width;)e-=l.width,i.pop(),o.splice(this.INDEX_ITEM_TO_REMOVE,0,l),l=i[i.length-1],n=!0;n&&(this.visibleItems=o,this.hiddenItems=i,this.showDropdown=!1)}configModeRegular(){if(this.visibleItems.length>this.maxItems){const t=Math.abs(this.visibleItems.length-this.maxItems);if(this.positionEllipsis===0){const e=this.visibleItems.slice(0,t);this.hiddenItems.push(...e),this.visibleItems.splice(0,t)}else if(this.positionEllipsis>=this.maxItems){const e=this.visibleItems.slice(this.maxItems);this.hiddenItems.push(...e),this.visibleItems.splice(this.maxItems),this._ellipsesPositionedEnd=!0}else{const e=this.visibleItems.splice(this.positionEllipsis,t);this.hiddenItems.push(...e)}this.collapseConfigPosition=this.positionEllipsis}}positionDropdown(){var t;const e=(t=this._element.shadowRoot.querySelector(".ellipses__item"))===null||t===void 0?void 0:t.getBoundingClientRect(),o=this._element.shadowRoot.querySelector(".dropdown-ellipsis");e==null||o==null||(o.style.top=e.y+e.height+5+"px",o.style.left=e.x+"px")}async startResize(){const t=this._element.parentElement.offsetWidth,e=10,o=async(n,r)=>(n.width=await this.measureSizeHTMLElement(n),r===this.visibleItems.length-1&&(n.width-=this.CHEVRON_SIZE),n),i=await Promise.all(this.visibleItems.map(o));if(i.reduce((n,r)=>n+r.width,0)>t){const n=[],r=[...i],c=r.shift(),m=r.pop();m.width+=e,n.push(c,m);let _=n.reduce((s,h)=>s+h.width,0),b=Math.abs(_-t);r.reverse().forEach(s=>{if(s.width<b){const h=r.shift();n.splice(1,0,h),_=n.reduce((I,u)=>I+u.width,0),b=Math.abs(_-t)}}),this.visibleItems=[...n],this.hiddenItems=[...r.reverse()]}}measureSizeHTMLElement(t){return new Promise(e=>{this.waitFontLoad().then(()=>{this._textMesurement===void 0&&(this._textMesurement=this._element.shadowRoot.ownerDocument.createElement("canvas"));const i=this._textMesurement.getContext("2d");i.font="14px Roboto, Algerian",e((t.iconName?19:0)+this.CHEVRON_SIZE+i.measureText(t.label).width)})})}waitFontLoad(){return new Promise(t=>{document.fonts.load("14px Roboto").then(()=>t(),t())})}getItemContent(){return d("nav",{class:"breadcrumb"},d("ol",{class:"breadcrumb__list",ref:t=>this._elBreadcrumbList=t},d(v,{items:this.visibleItems,selectedItem:this.selectedItem,itemsHidden:this.hiddenItems,showDropdown:this.showDropdown,handleShowDropdown:this.handleShowDropdown,collapseConfigPosition:this.collapseConfigPosition,ellipsesPositionedEnd:this._ellipsesPositionedEnd})))}render(){return this.getItemContent()}get _element(){return g(this)}static get watchers(){return{items:["watchPropHandler"],hiddenItems:["watchPropHiddenItems"]}}};D.style=T;export{D as ez_breadcrumb};
//# sourceMappingURL=ez-breadcrumb.entry-CSr77kca.js.map

import{b as _,d as f,e as o,k as w,i as p}from"./index-CHxCopeG.js";import{U as r,E as g,O as y,S as I}from"./dataUnitInMemoryLoader-CwDmnNwL.js";import{R as S}from"./constants-b036528f-ZVp9Yw9B.js";import{C as E}from"./CheckMode-bdb2ec19-B2adzS2d.js";const T=e=>v(e.name,e.label,e.readOnly,e.contextName,!0),R=e=>v(e.name,e.label,e.readOnly,e.contextName,!1);function v(e,t,n,s,i){return o("div",{class:"ez-col ez-col--sd-12 ez-align--middle ez-padding-bottom--large"},o("ez-check",{enabled:!n,label:t,mode:i?E.SWITCH:E.REGULAR,"data-field-name":e,"data-context-name":s,key:e}))}const A=({name:e,label:t,readOnly:n,required:s,props:i,contextName:a,canShowError:l})=>{const c=i==null?void 0:i.options;let m;if(typeof c=="string"){const u=JSON.parse(c);m=Object.keys(u).map(h=>({value:h,label:u[h]}))}else m=c;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-combo-box",{class:"ez-input__no-margin",enabled:!n,suppressEmptyOption:s,label:t,"data-field-name":e,"data-context-name":a,key:e,options:m,canShowError:l}))},x=({name:e,label:t,readOnly:n,canShowError:s})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-date-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:s})),N=({name:e,label:t,readOnly:n,canShowError:s,props:i})=>{var a;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:s,"show-seconds":(a=i==null?void 0:i.showSeconds)!==null&&a!==void 0?a:!1}))},C=({name:e,label:t,readOnly:n,canShowError:s})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:s,showSeconds:!0})),F=({name:e,label:t,readOnly:n,contextName:s,canShowError:i})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-date-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,"data-context-name":s,key:e,canShowError:i})),L=({name:e,label:t,readOnly:n,contextName:s,props:i})=>{const a=y.removeEmptyValues({subTitle:i.subTitle,requestHeaders:Object.assign(Object.assign({},i.STORAGESTRATEGY&&{STORAGESTRATEGY:i.STORAGESTRATEGY}),i.INTERNAL_FILENAME&&{INTERNAL_FILENAME:i.INTERNAL_FILENAME})});return o("div",{class:"ez-col ez-col--sd-12"},o("ez-upload",Object.assign({enabled:!n,label:t,"data-field-name":e,"data-context-name":s,key:e},a)))},k=({name:e,label:t,readOnly:n,props:s,contextName:i,canShowError:a})=>{var l,c;const m=Number((l=s==null?void 0:s.precision)!==null&&l!==void 0?l:2),u=Number((c=s==null?void 0:s.prettyPrecision)!==null&&c!==void 0?c:m);return z(e,t,n,m,u,i,a)},O=({name:e,label:t,readOnly:n,contextName:s,canShowError:i})=>z(e,t,n,0,0,s,i);function z(e,t,n,s,i,a,l){return o("div",{class:"ez-col ez-col--sd-12"},o("ez-number-input",{class:"ez-input__no-margin",enabled:!n,label:t,precision:s,prettyPrecision:i,"data-field-name":e,"data-context-name":a,key:e,canShowError:l}))}const M=({name:e,label:t,readOnly:n,contextName:s,rows:i,canShowError:a})=>o("div",{class:"ez-col ez-col--sd-12",key:e},o("ez-text-area",{enabled:!n,label:t,"data-field-name":e,"data-context-name":s,rows:i,canShowError:a})),D=({name:e,label:t,readOnly:n,contextName:s,canShowError:i,props:a})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-text-input",{class:"ez-input__no-margin",label:t,"data-field-name":e,"data-context-name":s,key:e,enabled:!n,canShowError:i,mask:a==null?void 0:a.mask,"clean-value-mask":a==null?void 0:a.cleanValueMask})),G=({name:e,label:t,readOnly:n,contextName:s,canShowError:i,optionLoader:a,props:l})=>{const c=!I.isEmpty(l==null?void 0:l.DESCRIPTIONFIELD);return o("div",{class:"ez-col ez-col--sd-12"},o("ez-search-plus",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,"data-context-name":s,key:e,canShowError:i,optionLoader:a,hideDescriptionInput:!c}))},U=({name:e,label:t,readOnly:n,required:s,contextName:i,canShowError:a,optionLoader:l,props:c})=>{var m;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-search",{class:"ez-input__no-margin",enabled:!n,suppressEmptyOption:s,label:t,"data-field-name":e,"data-context-name":i,key:e,canShowError:a,optionLoader:l,ignoreLimitCharsToSearch:(m=c==null?void 0:c.ignoreLimitCharsToSearch)!==null&&m!==void 0?m:!1}))},P=({name:e,label:t,readOnly:n,contextName:s,rows:i,canShowError:a})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-rich-text",{key:e,enabled:!n,label:t,"data-field-name":e,"data-context-name":s,rows:i,canShowError:a})),d=new Map;d.set(r.CHECKBOX,R);d.set(r.SWITCH,T);d.set(r.OPTIONSELECTOR,A);d.set(r.DATE,x);d.set(r.TIME,N);d.set(r.ELAPSEDTIME,C);d.set(r.DATETIME,F);d.set(r.FILE,L);d.set(r.DECIMALNUMBER,k);d.set(r.INTEGERNUMBER,O);d.set(r.SEARCH,U);d.set(r.SEARCHPLUS,G);d.set(r.LONGTEXT,M);d.set(r.HTML,P);const b=e=>{const t=d.get(e.userInterface)||D,n=e.required?`${e.label}${S}`:e.label,s=t(Object.assign(Object.assign({},e),{label:n}));return s.$attrs$["data-form-item"]=e.name,s};class H{constructor(t){this.elem=t}addRightElement(t){this.removeRightElement(),t.classList.add("ez-padding-left--small"),t.setAttribute("data-custom-item","true"),this.elem.classList.add("ez-col--nowrap"),this.elem.appendChild(t)}removeRightElement(){Array.from(this.elem.querySelectorAll('[data-custom-item="true"]')).forEach(t=>t.remove())}get fieldName(){return this.elem.getAttribute("data-form-item")}}class j{constructor(t,n){this.items=new Map,this.formId=n,t.forEach(s=>{const i=new H(s);this.items.set(i.fieldName,i)})}getItem(t){return this.items.get(t)}get formName(){return this.formId}}const B=".sc-ez-form-view-h{display:flex;flex-wrap:wrap;width:100%;--ez-form-view__item--min-width:220px;--ez-form-view__item--max-width:440px;--ez-form-view__item--width:var(--space--small);--ez-form-view__item--padding:var(--space--small)}.form-view__content.sc-ez-form-view{display:grid;grid-template-columns:repeat(auto-fill, minmax(var(--ez-form-view__item--min-width), 1fr));gap:var(--ez-form-view__item--width);padding-inline:var(--ez-form-view__item--padding);width:100%}.form-view__content--single-column.sc-ez-form-view{grid-template-columns:repeat(1, minmax(var(--ez-form-view__item--min-width), var(--ez-form-view__item--max-width)))}.input-full_width.sc-ez-form-view{grid-column:1 / -1;width:100%}",V=class{constructor(e){_(this,e),this.ezContentReady=f(this,"ezContentReady"),this.formItemsReady=f(this,"formItemsReady"),this._customEditors=new Map,this.fields=void 0,this.selectedRecord=void 0,this.singleColumn=!1}async showUp(){this._element.scrollIntoView({behavior:"smooth",block:"start"})}async addCustomEditor(e,t,n){const s=new Map(this._customEditors);s.set(e,{customEditor:t,detailContext:n}),this._customEditors=s}async setFieldProp(e,t,n){const s=this.fields.map(i=>(i.name===e&&(n||n===0)&&(i.props=i.props||{},i.props[t]=n),i));this.fields=[...s]}groupFields(e){const t=new Map;return e.forEach(n=>{const s=n.group;if(s){let i=t.get(s);i==null&&(i=[],t.set(s,i)),i.push(n)}else t.set(n.name,n)}),t}componentDidRender(){this._formElements=Array.from(this._element.querySelectorAll("[data-field-name]")),this.ezContentReady.emit(this._formElements);const e=new j(Array.from(this._element.querySelectorAll("[data-form-item]")));this.formItemsReady.emit(e)}isItemFullWidth(e){return[r.FILE,r.LONGTEXT,r.HTML].includes(e)}buildFormItemElement(e,t=""){var n;if(this.isItemFullWidth(e.userInterface)&&(t+=" input-full_width"),this._customEditors.has(e.name)){const s=(n=this._formElements.map(a=>({name:a.dataset.fieldName,value:a.value})).find(a=>a.name===e.name))===null||n===void 0?void 0:n.value,i=this._customEditors.get(e.name).customEditor;return o("div",{class:t},o("ez-custom-form-input",{"data-field-name":e.name,customEditor:i,formViewField:e,builderFallback:b,value:s,selectedRecord:this.selectedRecord}))}return o("div",{class:t},b(e))}render(){if(g.addIDInfoIfNotExists(this._element,"ezFormView"),this.fields==null)return;let e=[],t=Array.from(this.groupFields(this.fields).entries()).map(([i,a])=>{if(Array.isArray(a))return o("ez-collapsible-box",{id:`group-${i}`,label:i,"header-size":"large",key:i},o("div",{class:`form-view__content ${this.singleColumn&&"form-view__content--single-column"}`},a.map(l=>this.buildFormItemElement(l))));e.push(a)}),n=e.map(i=>this.buildFormItemElement(i)),s=o("div",{class:`form-view__content ${this.singleColumn&&"form-view__content--single-column"}`},n);return o(w,null,s,t)}get _element(){return p(this)}};V.style=B;export{V as ez_form_view};
//# sourceMappingURL=ez-form-view.entry-B3bGGvQ5.js.map

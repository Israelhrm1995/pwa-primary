import{v as _,w as f,U as r,x as o,E as w,C as p,z as g,I as y,O as I,S}from"./index-C7RI_ets.js";import{C as E}from"./CheckMode-bdb2ec19-B2adzS2d.js";const T=e=>b(e.name,e.label,e.readOnly,e.contextName,!0),A=e=>b(e.name,e.label,e.readOnly,e.contextName,!1);function b(e,t,n,i,s){return o("div",{class:"ez-col ez-col--sd-12 ez-align--middle ez-padding-bottom--large"},o("ez-check",{enabled:!n,label:t,mode:s?E.SWITCH:E.REGULAR,"data-field-name":e,"data-context-name":i,key:e}))}const x=({name:e,label:t,readOnly:n,required:i,props:s,contextName:a,canShowError:l})=>{const c=s==null?void 0:s.options;let m;if(typeof c=="string"){const u=JSON.parse(c);m=Object.keys(u).map(h=>({value:h,label:u[h]}))}else m=c;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-combo-box",{class:"ez-input__no-margin",enabled:!n,suppressEmptyOption:i,label:t,"data-field-name":e,"data-context-name":a,key:e,options:m,canShowError:l}))},R=({name:e,label:t,readOnly:n,canShowError:i})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-date-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:i})),C=({name:e,label:t,readOnly:n,canShowError:i,props:s})=>{var a;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:i,"show-seconds":(a=s==null?void 0:s.showSeconds)!==null&&a!==void 0?a:!1}))},N=({name:e,label:t,readOnly:n,canShowError:i})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,key:e,canShowError:i,showSeconds:!0})),F=({name:e,label:t,readOnly:n,contextName:i,canShowError:s})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-date-time-input",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,"data-context-name":i,key:e,canShowError:s})),L=({name:e,label:t,readOnly:n,contextName:i,props:s})=>{const a=I.removeEmptyValues({subTitle:s.subTitle,requestHeaders:Object.assign(Object.assign({},s.STORAGESTRATEGY&&{STORAGESTRATEGY:s.STORAGESTRATEGY}),s.INTERNAL_FILENAME&&{INTERNAL_FILENAME:s.INTERNAL_FILENAME})});return o("div",{class:"ez-col ez-col--sd-12"},o("ez-upload",Object.assign({enabled:!n,label:t,"data-field-name":e,"data-context-name":i,key:e},a)))},k=({name:e,label:t,readOnly:n,props:i,contextName:s,canShowError:a})=>{var l,c;const m=Number((l=i==null?void 0:i.precision)!==null&&l!==void 0?l:2),u=Number((c=i==null?void 0:i.prettyPrecision)!==null&&c!==void 0?c:m);return z(e,t,n,m,u,s,a)},O=({name:e,label:t,readOnly:n,contextName:i,canShowError:s})=>z(e,t,n,0,0,i,s);function z(e,t,n,i,s,a,l){return o("div",{class:"ez-col ez-col--sd-12"},o("ez-number-input",{class:"ez-input__no-margin",enabled:!n,label:t,precision:i,prettyPrecision:s,"data-field-name":e,"data-context-name":a,key:e,canShowError:l}))}const M=({name:e,label:t,readOnly:n,contextName:i,rows:s,canShowError:a})=>o("div",{class:"ez-col ez-col--sd-12",key:e},o("ez-text-area",{enabled:!n,label:t,"data-field-name":e,"data-context-name":i,rows:s,canShowError:a})),D=({name:e,label:t,readOnly:n,contextName:i,canShowError:s,props:a})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-text-input",{class:"ez-input__no-margin",label:t,"data-field-name":e,"data-context-name":i,key:e,enabled:!n,canShowError:s,mask:a==null?void 0:a.mask,"clean-value-mask":a==null?void 0:a.cleanValueMask})),G=({name:e,label:t,readOnly:n,contextName:i,canShowError:s,optionLoader:a,props:l})=>{const c=!S.isEmpty(l==null?void 0:l.DESCRIPTIONFIELD);return o("div",{class:"ez-col ez-col--sd-12"},o("ez-search-plus",{class:"ez-input__no-margin",enabled:!n,label:t,"data-field-name":e,"data-context-name":i,key:e,canShowError:s,optionLoader:a,hideDescriptionInput:!c}))},P=({name:e,label:t,readOnly:n,required:i,contextName:s,canShowError:a,optionLoader:l,props:c})=>{var m;return o("div",{class:"ez-col ez-col--sd-12"},o("ez-search",{class:"ez-input__no-margin",enabled:!n,suppressEmptyOption:i,label:t,"data-field-name":e,"data-context-name":s,key:e,canShowError:a,optionLoader:l,ignoreLimitCharsToSearch:(m=c==null?void 0:c.ignoreLimitCharsToSearch)!==null&&m!==void 0?m:!1}))},U=({name:e,label:t,readOnly:n,contextName:i,rows:s,canShowError:a})=>o("div",{class:"ez-col ez-col--sd-12"},o("ez-rich-text",{key:e,enabled:!n,label:t,"data-field-name":e,"data-context-name":i,rows:s,canShowError:a})),d=new Map;d.set(r.CHECKBOX,A);d.set(r.SWITCH,T);d.set(r.OPTIONSELECTOR,x);d.set(r.DATE,R);d.set(r.TIME,C);d.set(r.ELAPSEDTIME,N);d.set(r.DATETIME,F);d.set(r.FILE,L);d.set(r.DECIMALNUMBER,k);d.set(r.INTEGERNUMBER,O);d.set(r.SEARCH,P);d.set(r.SEARCHPLUS,G);d.set(r.LONGTEXT,M);d.set(r.HTML,U);const v=e=>{const t=y(),n=d.get(e.userInterface)||D,i=e.required?`${e.label}${t("app.requiredInfo")}`:e.label,s=n(Object.assign(Object.assign({},e),{label:i}));return s.$attrs$["data-form-item"]=e.name,s};class H{constructor(t){this.elem=t}addRightElement(t){this.removeRightElement(),t.classList.add("ez-padding-left--small"),t.setAttribute("data-custom-item","true"),this.elem.classList.add("ez-col--nowrap"),this.elem.appendChild(t)}removeRightElement(){Array.from(this.elem.querySelectorAll('[data-custom-item="true"]')).forEach(t=>t.remove())}get fieldName(){return this.elem.getAttribute("data-form-item")}}class j{constructor(t,n){this.items=new Map,this.formId=n,t.forEach(i=>{const s=new H(i);this.items.set(s.fieldName,s)})}getItem(t){return this.items.get(t)}get formName(){return this.formId}}const B=".sc-ez-form-view-h{display:flex;flex-wrap:wrap;width:100%;--ez-form-view__item--min-width:220px;--ez-form-view__item--max-width:440px;--ez-form-view__item--width:var(--space--small);--ez-form-view__item--padding:var(--space--small)}.form-view__content.sc-ez-form-view{display:grid;grid-template-columns:repeat(auto-fill, minmax(var(--ez-form-view__item--min-width), 1fr));gap:var(--ez-form-view__item--width);padding-inline:var(--ez-form-view__item--padding);width:100%}.form-view__content--single-column.sc-ez-form-view{grid-template-columns:repeat(1, minmax(var(--ez-form-view__item--min-width), var(--ez-form-view__item--max-width)))}.input-full_width.sc-ez-form-view{grid-column:1 / -1;width:100%}",V=class{constructor(e){_(this,e),this.ezContentReady=f(this,"ezContentReady"),this.formItemsReady=f(this,"formItemsReady"),this._customEditors=new Map,this.fields=void 0,this.selectedRecord=void 0,this.singleColumn=!1}async showUp(){this._element.scrollIntoView({behavior:"smooth",block:"start"})}async addCustomEditor(e,t,n){const i=new Map(this._customEditors);i.set(e,{customEditor:t,detailContext:n}),this._customEditors=i}async setFieldProp(e,t,n){const i=this.fields.map(s=>(s.name===e&&(n||n===0)&&(s.props=s.props||{},s.props[t]=n),s));this.fields=[...i]}groupFields(e){const t=new Map;return e.forEach(n=>{const i=n.group;if(i){let s=t.get(i);s==null&&(s=[],t.set(i,s)),s.push(n)}else t.set(n.name,n)}),t}componentDidRender(){this._formElements=Array.from(this._element.querySelectorAll("[data-field-name]")),this.ezContentReady.emit(this._formElements);const e=new j(Array.from(this._element.querySelectorAll("[data-form-item]")));this.formItemsReady.emit(e)}isItemFullWidth(e){return[r.FILE,r.LONGTEXT,r.HTML].includes(e)}buildFormItemElement(e,t=""){var n;if(this.isItemFullWidth(e.userInterface)&&(t+=" input-full_width"),this._customEditors.has(e.name)){const i=(n=this._formElements.map(a=>({name:a.dataset.fieldName,value:a.value})).find(a=>a.name===e.name))===null||n===void 0?void 0:n.value,s=this._customEditors.get(e.name).customEditor;return o("div",{class:t},o("ez-custom-form-input",{"data-field-name":e.name,customEditor:s,formViewField:e,builderFallback:v,value:i,selectedRecord:this.selectedRecord}))}return o("div",{class:t},v(e))}render(){if(w.addIDInfoIfNotExists(this._element,"ezFormView"),this.fields==null)return;let e=[],t=Array.from(this.groupFields(this.fields).entries()).map(([s,a])=>{if(Array.isArray(a))return o("ez-collapsible-box",{id:`group-${s}`,label:s,"header-size":"large",key:s},o("div",{class:`form-view__content ${this.singleColumn&&"form-view__content--single-column"}`},a.map(l=>this.buildFormItemElement(l))));e.push(a)}),n=e.map(s=>this.buildFormItemElement(s)),i=o("div",{class:`form-view__content ${this.singleColumn&&"form-view__content--single-column"}`},n);return o(p,null,i,t)}get _element(){return g(this)}};V.style=B;export{V as ez_form_view};
//# sourceMappingURL=ez-form-view.entry-CkZWNJEA.js.map

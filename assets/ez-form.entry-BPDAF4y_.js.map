{"version":3,"file":"ez-form.entry-BPDAF4y_.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-form.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, f as forceUpdate, H as Host, g as getElement } from './index-5a720e56.js';\nimport { DateUtils, ApplicationContext, Action, StringUtils, KeyboardManager, DataUnit, ElementIDUtils } from '@sankhyalabs/core';\nimport { b as buildFieldMetadata, a as buildFieldSearch, L as LABEL_SEARCH_FIELD, S as SHORTCUT_SEARCH_FIELD, f as focusOnFieldSerch, c as SEARCH_FIELD_FULL_WIDTH, D as DataBinder } from './search-column-1a0fe839.js';\nimport { F as FormLayout } from './FormLayout-071d324c.js';\nimport './ApplicationUtils-72f474e8.js';\nimport './DialogType-54a62731.js';\nimport './CheckMode-bdb2ec19.js';\nimport './index-b623906e.js';\n\nconst DETAIL_PATTERN = /child\\[([^\\]]+)\\]/;\nconst REGEX_DEFAULT_VAR_KEY = /\\$\\{.+\\}/;\nclass FormMetadata {\n  constructor() {\n    this._sheets = new Map();\n    this._requiredFields = [];\n    this._cleanOnCopyFields = [];\n    this._defaultValues = {};\n  }\n  static getDetailName(name) {\n    const result = DETAIL_PATTERN.exec(name);\n    return result ? result[1] : undefined;\n  }\n  getSheet(name) {\n    return this._sheets.get(name);\n  }\n  getAllSheets() {\n    return this._sheets;\n  }\n  addSheet(sheet) {\n    this._sheets.set(sheet.name, sheet);\n  }\n  addRequiredFields(fields) {\n    this._requiredFields = this._requiredFields.concat(fields);\n  }\n  getRequiredFields() {\n    return this._requiredFields;\n  }\n  addCleanOnCopyFields(fields) {\n    this._cleanOnCopyFields = this._cleanOnCopyFields.concat(fields);\n  }\n  getCleanOnCopyFields() {\n    return this._cleanOnCopyFields;\n  }\n  addDefaultValues(defaultValues) {\n    return this._defaultValues = Object.assign(Object.assign({}, this._defaultValues), defaultValues);\n  }\n  getDefaultValues() {\n    const result = {};\n    Object.entries(this._defaultValues).forEach(([key, value]) => {\n      if (typeof value === \"string\") {\n        const result = REGEX_DEFAULT_VAR_KEY.exec(value);\n        if (result) {\n          value = this.getDefaultVar(result[0]);\n        }\n      }\n      result[key] = value;\n    });\n    return result;\n  }\n  getDefaultVar(name) {\n    if (name === \"${data}\") {\n      return DateUtils.getToday();\n    }\n    if (name === \"${datahora}\") {\n      return DateUtils.getToday(true);\n    }\n    return this._defaultVars ? this._defaultVars.get(name) : undefined;\n  }\n  setDefaultVars(vars) {\n    this._defaultVars = vars;\n  }\n}\nconst buildFormConfigFromDataUnit = (dataUnit) => {\n  const unitMD = dataUnit.metadata;\n  let fields;\n  if (unitMD) {\n    fields = unitMD.fields\n      .filter(descriptor => descriptor.visible !== false)\n      .map(descriptor => { return { name: descriptor.name, defaultValue: descriptor.defaultValue }; });\n  }\n  const config = { emptyConfig: false, fields };\n  return config;\n};\nconst buildFormMetadata = (config, dataUnit, includeDetails = false) => {\n  var _a, _b;\n  if (config == undefined || (config === null || config === void 0 ? void 0 : config.emptyConfig) === true) {\n    config = buildFormConfigFromDataUnit(dataUnit);\n  }\n  const sheets = new Map();\n  const hiddenTabs = new Map();\n  const requiredFields = [];\n  const cleanOnCopyFields = [];\n  const defaultValues = {};\n  (_a = config === null || config === void 0 ? void 0 : config.tabs) === null || _a === void 0 ? void 0 : _a.forEach((tab) => {\n    if (!hiddenTabs.has(tab.label) && tab.visible === false) {\n      hiddenTabs.set(tab.label, tab);\n    }\n  });\n  (_b = config === null || config === void 0 ? void 0 : config.fields) === null || _b === void 0 ? void 0 : _b.forEach((field) => {\n    var _a, _b, _c;\n    if (field.visible !== false) {\n      const tabConfig = getTabConfig(field.tab || \"__main\", sheets);\n      if (hiddenTabs.has(tabConfig.label)) {\n        return;\n      }\n      const descriptor = dataUnit.getField(field.name);\n      const fieldVisible = (descriptor === null || descriptor === void 0 ? void 0 : descriptor.visible) == undefined || (descriptor === null || descriptor === void 0 ? void 0 : descriptor.visible) === true;\n      if (descriptor && fieldVisible && tabConfig.visible) {\n        if (!sheets.has(tabConfig)) {\n          sheets.set(tabConfig, []);\n        }\n        const formField = buildFieldMetadata(descriptor, field);\n        sheets.get(tabConfig).push(formField);\n        if (formField.required) {\n          requiredFields.push(field.name);\n        }\n        const cleanOnCopy = field.cleanOnCopy == undefined ? (_a = descriptor.properties) === null || _a === void 0 ? void 0 : _a.cleanOnCopy : field.cleanOnCopy;\n        if (cleanOnCopy || ((_b = descriptor.properties) === null || _b === void 0 ? void 0 : _b.cleanOnCopy)) {\n          cleanOnCopyFields.push(field.name);\n        }\n        let defaultValue = field.defaultValue == undefined ? (_c = descriptor.properties) === null || _c === void 0 ? void 0 : _c.defaultValue : field.defaultValue;\n        if (defaultValue && defaultValue.value != undefined) {\n          const { type, value } = defaultValue;\n          if (type) {\n            if (type === \"V\") {\n              defaultValue = value;\n            }\n            else {\n              try {\n                const parsed = JSON.parse(value);\n                if (parsed && \"value\" in parsed) {\n                  defaultValue = parsed;\n                }\n                else {\n                  defaultValue = value;\n                }\n              }\n              catch (_d) { }\n            }\n          }\n          defaultValues[field.name] = defaultValue;\n        }\n      }\n    }\n  });\n  const metadata = new FormMetadata();\n  metadata.setDefaultVars(config.defaultVars);\n  if (includeDetails) {\n    const unitMD = dataUnit.metadata;\n    if (unitMD != undefined && unitMD.children != undefined) {\n      unitMD.children.forEach(child => {\n        const { label, name, fields } = buildDetailSheet(child);\n        sheets.set({ name, label }, fields);\n      });\n    }\n  }\n  Array.from(sheets.entries())\n    .sort(sortTabs)\n    .forEach(([key, fields]) => {\n    metadata.addSheet({\n      label: (key.label === \"__main\") ? \"Principal\" : key.label,\n      name: key.name || key.label,\n      fields\n    });\n  });\n  metadata.addRequiredFields(requiredFields);\n  metadata.addCleanOnCopyFields(cleanOnCopyFields);\n  metadata.addDefaultValues(defaultValues);\n  return metadata;\n};\nconst getTabConfig = (tab, sheets) => {\n  const tabConfig = (typeof tab === \"string\" ? Array.from(sheets.keys()).find(t => t.label === tab) : tab);\n  return tabConfig || { label: tab, visible: true };\n};\nconst sortTabs = (a, b) => {\n  return a[0].label == '__main' ? -1 : (a[0].order || 10000) - (b[0].order || 10000);\n};\nconst buildDetailSheet = (child) => {\n  return {\n    name: `child[${child.name}]`,\n    label: child.label,\n    fields: []\n  };\n};\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(formatProdErrorMessage(0) );\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(formatProdErrorMessage(1) );\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(formatProdErrorMessage(2) );\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(formatProdErrorMessage(3) );\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(formatProdErrorMessage(4) );\n    }\n\n    if (isDispatching) {\n      throw new Error(formatProdErrorMessage(5) );\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(formatProdErrorMessage(6) );\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(formatProdErrorMessage(7) );\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(formatProdErrorMessage(8) );\n    }\n\n    if (isDispatching) {\n      throw new Error(formatProdErrorMessage(9) );\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(formatProdErrorMessage(10) );\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(formatProdErrorMessage(11) );\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\nconst inicialState = {};\n///////////////////////////////     REDUCERS     ///////////////////////////////\nfunction formReducer(state = inicialState, action) {\n  switch (action.type) {\n    case FormActions.METADATA_LOADED:\n      return Object.assign(Object.assign({}, state), { formMetadata: action.payload, currentSheet: undefined });\n    case FormActions.CHANGE_TAB:\n      return Object.assign(Object.assign({}, state), { currentSheet: action.payload });\n    default:\n      return state;\n  }\n}\n/////////////////////////////// ACTION CREATORS ///////////////////////////////\nfunction loadMetadata(formMetadata) {\n  return {\n    type: FormActions.METADATA_LOADED,\n    payload: formMetadata\n  };\n}\nfunction changeTab(currentSheet) {\n  return {\n    type: FormActions.CHANGE_TAB,\n    payload: typeof currentSheet === \"string\" ? currentSheet : currentSheet.tabKey\n  };\n}\n///////////////////////////////    SELECTORS    ///////////////////////////////\nfunction selectFormMetadata(state) {\n  return state.formMetadata;\n}\nfunction selectCurrentSheetId(state) {\n  return state.currentSheet;\n}\nfunction selectCurrentSheet(state) {\n  const currentSheetId = selectCurrentSheetId(state);\n  return currentSheetId ? state.formMetadata.getSheet(currentSheetId) : Array.from(state.formMetadata.getAllSheets().values())[0];\n}\n///////////////////////////////      TYPES      ///////////////////////////////\nvar FormActions;\n(function (FormActions) {\n  FormActions[\"METADATA_LOADED\"] = \"FORM/METADATA_LOADED\";\n  FormActions[\"CHANGE_TAB\"] = \"FORM/CHANGE_TAB\";\n})(FormActions || (FormActions = {}));\n\nconst ezFormCss = \".sc-ez-form-h{display:flex;flex-direction:column;width:100%}.dynamic-content.sc-ez-form ez-collapsible-box.sc-ez-form{--ez-collapsible-box__header--padding-right:var(--space-small, 6px);--ez-collapsible-box__header--padding-left:var(--space-small, 6px)}\";\n\nconst EzForm = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ezFormRequestClearFieldToFocus = createEvent(this, \"ezFormRequestClearFieldToFocus\", 7);\n    this.ezFormSetFields = createEvent(this, \"ezFormSetFields\", 7);\n    this.ezReady = createEvent(this, \"ezReady\", 7);\n    this.formItemsReady = createEvent(this, \"formItemsReady\", 7);\n    this._customEditors = new Map();\n    this._application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n    this.onDataUnitAction = (action) => {\n      if (action.type === Action.METADATA_LOADED) {\n        this.processMetadata();\n      }\n    };\n    this._fieldsProps = new Map();\n    this._singleColumn = false;\n    this.dataUnit = undefined;\n    this.config = undefined;\n    this.recordsValidator = undefined;\n    this.fieldToFocus = undefined;\n    this.onlyStaticFields = false;\n    this.useSearchField = true;\n    this.elementFocusSearchField = undefined;\n  }\n  /**\n   * Realiza validação no conteúdo de todos os campos.\n   */\n  validate() {\n    return this._dataBinder.validate();\n  }\n  /**\n   * Registra um editor customizado para campos da grade e formulário.\n   */\n  async addCustomEditor(fieldName, customEditor, detailContext) {\n    if (this._formView) {\n      this._formView.addCustomEditor(fieldName, customEditor, detailContext);\n      return;\n    }\n    const newCustomEditors = new Map(this._customEditors);\n    newCustomEditors.set(fieldName, { customEditor, detailContext });\n    this._customEditors = newCustomEditors;\n  }\n  observeConfig() {\n    this.processMetadata();\n  }\n  /**\n   * Altera/adiciona uma propriedade nos metadados do campo.\n   */\n  async setFieldProp(fieldName, propName, value) {\n    const newCustomFieldProps = new Map(this._fieldsProps);\n    const currentProps = this._fieldsProps.get(fieldName);\n    newCustomFieldProps.set(fieldName, Object.assign(Object.assign({}, currentProps), { [propName]: value }));\n    this._fieldsProps = newCustomFieldProps;\n  }\n  getDynamicContent() {\n    var _a;\n    const formMD = selectFormMetadata(this._store.getState());\n    if (!formMD) {\n      return null;\n    }\n    const allSheets = Array.from(formMD.getAllSheets().values());\n    const currentSheet = selectCurrentSheet((_a = this._store) === null || _a === void 0 ? void 0 : _a.getState());\n    let result = [];\n    if (allSheets.length > 1) {\n      const tabs = allSheets.map((sheet, index) => {\n        return { tabKey: sheet.name, label: sheet.label, index };\n      });\n      const idTabSelector = `selector`;\n      result.push(h(\"ez-tabselector\", { tabs: this.buildIdTabSelector(tabs), onEzChange: (evt) => this._store.dispatch(changeTab(evt.detail)), selectedTab: currentSheet.name, \"data-element-id\": idTabSelector }));\n    }\n    result = result.concat(this.buildFormContent(currentSheet));\n    return result;\n  }\n  buildFormContent(currentSheet) {\n    const fields = currentSheet === null || currentSheet === void 0 ? void 0 : currentSheet.fields;\n    if (currentSheet == undefined) {\n      return;\n    }\n    this.ezFormSetFields.emit(fields);\n    const idFormSheet = `${StringUtils.replaceAccentuatedChars(StringUtils.toCamelCase(currentSheet === null || currentSheet === void 0 ? void 0 : currentSheet.label), false)}_selectorContainer`;\n    return (h(\"div\", { class: \"dynamic-content ez-box--no-outline\", \"data-element-id\": idFormSheet, ref: elem => (this._container = elem), tabindex: \"0\" }, h(\"ez-popover\", { ref: elem => (this._ezPopoverSearchField = elem), overlayType: \"none\" }, this.renderFieldColumn()), h(\"ez-form-view\", { ref: (element) => (this._formView = element), class: \"ez-row ez-padding-vertical--small\", fields: fields, singleColumn: this._singleColumn, selectedRecord: this.dataUnit.getSelectedRecord() })));\n  }\n  renderFieldColumn() {\n    if (this._fieldSearch != undefined) {\n      return this._fieldSearch;\n    }\n    this._fieldSearch = buildFieldSearch({\n      value: StringUtils.generateUUID(),\n      label: LABEL_SEARCH_FIELD,\n    }, ({ argument }) => this.fieldsOptionLoader(argument), (option) => this.onSelectField(option));\n    return this._fieldSearch;\n  }\n  getFormFields() {\n    var _a;\n    return (_a = this.config) === null || _a === void 0 ? void 0 : _a.fields;\n  }\n  fieldsOptionLoader(argument) {\n    const searchTerm = argument === null || argument === void 0 ? void 0 : argument.toLowerCase();\n    const allFields = this.getFormFields().map(field => { var _a; return (_a = this.dataUnit) === null || _a === void 0 ? void 0 : _a.getField(field.name); });\n    const filteredFields = allFields.filter(field => {\n      var _a, _b;\n      return ((_a = field.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(searchTerm)) ||\n        ((_b = field.label) === null || _b === void 0 ? void 0 : _b.toLowerCase().includes(searchTerm));\n    });\n    const options = filteredFields.map(field => ({ value: field.name, label: field.label }));\n    return Promise.resolve(options);\n  }\n  onSelectField(option) {\n    if (option == undefined || option.value == undefined) {\n      this.fieldToFocus = \"\";\n      return;\n    }\n    this.fieldToFocus = option.value;\n    this._ezPopoverSearchField.hide();\n  }\n  async initKeyboardManager() {\n    var _a, _b;\n    this._keyboardManager = new KeyboardManager({ propagate: false, element: (_a = this.elementFocusSearchField) !== null && _a !== void 0 ? _a : this._element });\n    if (this.useSearchField) {\n      this._keyboardManager.bind(SHORTCUT_SEARCH_FIELD, async () => {\n        if (!this._container || !this._ezPopoverSearchField)\n          return;\n        const container = this._container.getBoundingClientRect();\n        await focusOnFieldSerch(this._fieldSearch);\n        this._ezPopoverSearchField.showUnder(this._container, { horizontalGap: container.width - (SEARCH_FIELD_FULL_WIDTH), verticalGap: container.height * -1 });\n      }, { description: LABEL_SEARCH_FIELD, element: (_b = this.elementFocusSearchField) !== null && _b !== void 0 ? _b : this._element });\n    }\n  }\n  componentDidLoad() {\n    this.initKeyboardManager();\n  }\n  processMetadata() {\n    if (this.bindFields() && this.dataUnit && this._store) {\n      const metadata = buildFormMetadata(this.config, this.dataUnit);\n      this._store.dispatch(loadMetadata(metadata));\n    }\n  }\n  isStatic() {\n    var _a;\n    return ((_a = this._staticFields) === null || _a === void 0 ? void 0 : _a.length) > 0;\n  }\n  bindFields() {\n    return !this.isStatic() || this.onlyStaticFields === false;\n  }\n  async componentWillLoad() {\n    var _a;\n    if (this.dataUnit === undefined) {\n      this.dataUnit = new DataUnit(\"ez-form\");\n    }\n    this.dataUnit.unsubscribe(this.onDataUnitAction);\n    this.dataUnit.subscribe(this.onDataUnitAction);\n    this._dataBinder = new DataBinder(this.dataUnit);\n    this._store = createStore(formReducer);\n    this._store.subscribe(() => forceUpdate(this));\n    this._staticFields = Array.from(this._element.querySelectorAll(\"[data-field-name]\"));\n    this.processMetadata();\n    const dataInfo = { dataUnit: this.dataUnit };\n    ElementIDUtils.addIDInfo(this._element, null, dataInfo);\n    const layoutFormConfig = await ((_a = this._application) === null || _a === void 0 ? void 0 : _a.getLayoutFormConfig());\n    this.setSingleColumn(layoutFormConfig);\n    this.registerNotifyListeners(layoutFormConfig);\n  }\n  async setSingleColumn(layoutFormConfig) {\n    if (!(layoutFormConfig === null || layoutFormConfig === void 0 ? void 0 : layoutFormConfig.config)) {\n      this._singleColumn = true;\n      return;\n    }\n    this._singleColumn = layoutFormConfig.config === FormLayout.CASCADE ? true : false;\n  }\n  async registerNotifyListeners(layoutFormConfig) {\n    if (!layoutFormConfig)\n      return;\n    layoutFormConfig.onConfigChange((config) => {\n      if (config === FormLayout.CASCADE) {\n        this._singleColumn = true;\n      }\n      else {\n        this._singleColumn = false;\n      }\n    });\n  }\n  componentDidRender() {\n    const metadata = selectFormMetadata(this._store.getState());\n    metadata.addRequiredFields(this._staticFields.filter(f => f.dataset.required).map(f => f.dataset.fieldName));\n    this._dataBinder.bind(Array.from(this._element.querySelectorAll(\"[data-field-name]\")), this.dataUnit.dataUnitId, metadata, this.recordsValidator);\n    this.ezReady.emit();\n    this.handleFieldToFocus();\n    this.setCustomEditors();\n    this.setFieldsProps();\n  }\n  setCustomEditors() {\n    if (!this._formView) {\n      return;\n    }\n    for (const [fieldName, customEditorProps] of this._customEditors) {\n      this._formView.addCustomEditor(fieldName, customEditorProps.customEditor, customEditorProps.detailContext);\n      this._customEditors.delete(fieldName);\n    }\n  }\n  handleFieldToFocus() {\n    var _a;\n    if (this.fieldToFocus == undefined) {\n      return;\n    }\n    const currentSheet = selectCurrentSheet((_a = this._store) === null || _a === void 0 ? void 0 : _a.getState());\n    const fields = currentSheet === null || currentSheet === void 0 ? void 0 : currentSheet.fields;\n    if (!fields.some(item => item.name === this.fieldToFocus)) {\n      return;\n    }\n    requestAnimationFrame(() => {\n      this._dataBinder.setFocus(this.fieldToFocus);\n      this.ezFormRequestClearFieldToFocus.emit();\n      this.fieldToFocus = null;\n    });\n  }\n  setFieldsProps() {\n    if (!this._formView) {\n      return;\n    }\n    for (const [fieldName, props] of this._fieldsProps) {\n      for (const prop in props) {\n        this._formView.setFieldProp(fieldName, prop, props[prop]);\n      }\n      this._fieldsProps.delete(fieldName);\n    }\n  }\n  disconnectedCallback() {\n    var _a;\n    this.dataUnit.unsubscribe(this.onDataUnitAction);\n    this._dataBinder.onDisconnectedCallback();\n    (_a = this._keyboardManager) === null || _a === void 0 ? void 0 : _a.unbindAllShortcutKeys();\n  }\n  buildIdTabSelector(tabs) {\n    if (tabs) {\n      tabs.forEach(tab => tab[ElementIDUtils.DATA_ELEMENT_ID_ATTRIBUTE_NAME] = StringUtils.toCamelCase(tab.label));\n    }\n    return tabs;\n  }\n  render() {\n    return (h(Host, null, this.isStatic() ? null : this.getDynamicContent()));\n  }\n  get _element() { return getElement(this); }\n  static get watchers() { return {\n    \"config\": [\"observeConfig\"]\n  }; }\n};\nEzForm.style = ezFormCss;\n\nexport { EzForm as ez_form };\n"],"names":["DETAIL_PATTERN","REGEX_DEFAULT_VAR_KEY","FormMetadata","name","result","sheet","fields","defaultValues","key","value","DateUtils","vars","buildFormConfigFromDataUnit","dataUnit","unitMD","descriptor","buildFormMetadata","config","includeDetails","_a","_b","sheets","hiddenTabs","requiredFields","cleanOnCopyFields","tab","field","_c","tabConfig","getTabConfig","fieldVisible","formField","buildFieldMetadata","defaultValue","type","parsed","metadata","child","label","buildDetailSheet","sortTabs","t","a","b","formatProdErrorMessage","code","$$observable","randomString","ActionTypes","isPlainObject","obj","proto","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","index","dispatch","action","listeners","i","replaceReducer","nextReducer","observable","_ref","outerSubscribe","observer","observeState","unsubscribe","inicialState","formReducer","state","FormActions","loadMetadata","formMetadata","changeTab","currentSheet","selectFormMetadata","selectCurrentSheetId","selectCurrentSheet","currentSheetId","ezFormCss","EzForm","hostRef","registerInstance","createEvent","ApplicationContext","Action","fieldName","customEditor","detailContext","newCustomEditors","propName","newCustomFieldProps","currentProps","formMD","allSheets","tabs","h","evt","idFormSheet","StringUtils","elem","element","buildFieldSearch","LABEL_SEARCH_FIELD","argument","option","searchTerm","options","KeyboardManager","SHORTCUT_SEARCH_FIELD","container","focusOnFieldSerch","SEARCH_FIELD_FULL_WIDTH","DataUnit","DataBinder","forceUpdate","dataInfo","ElementIDUtils","layoutFormConfig","FormLayout","f","customEditorProps","item","props","prop","Host","getElement"],"mappings":"obASA,MAAMA,EAAiB,oBACjBC,EAAwB,WAC9B,MAAMC,EAAa,CACjB,aAAc,CACZ,KAAK,QAAU,IAAI,IACnB,KAAK,gBAAkB,CAAE,EACzB,KAAK,mBAAqB,CAAE,EAC5B,KAAK,eAAiB,CAAE,CAC5B,CACE,OAAO,cAAcC,EAAM,CACzB,MAAMC,EAASJ,EAAe,KAAKG,CAAI,EACvC,OAAOC,EAASA,EAAO,CAAC,EAAI,MAChC,CACE,SAASD,EAAM,CACb,OAAO,KAAK,QAAQ,IAAIA,CAAI,CAChC,CACE,cAAe,CACb,OAAO,KAAK,OAChB,CACE,SAASE,EAAO,CACd,KAAK,QAAQ,IAAIA,EAAM,KAAMA,CAAK,CACtC,CACE,kBAAkBC,EAAQ,CACxB,KAAK,gBAAkB,KAAK,gBAAgB,OAAOA,CAAM,CAC7D,CACE,mBAAoB,CAClB,OAAO,KAAK,eAChB,CACE,qBAAqBA,EAAQ,CAC3B,KAAK,mBAAqB,KAAK,mBAAmB,OAAOA,CAAM,CACnE,CACE,sBAAuB,CACrB,OAAO,KAAK,kBAChB,CACE,iBAAiBC,EAAe,CAC9B,OAAO,KAAK,eAAiB,OAAO,OAAO,OAAO,OAAO,GAAI,KAAK,cAAc,EAAGA,CAAa,CACpG,CACE,kBAAmB,CACjB,MAAMH,EAAS,CAAE,EACjB,cAAO,QAAQ,KAAK,cAAc,EAAE,QAAQ,CAAC,CAACI,EAAKC,CAAK,IAAM,CAC5D,GAAI,OAAOA,GAAU,SAAU,CAC7B,MAAML,EAASH,EAAsB,KAAKQ,CAAK,EAC3CL,IACFK,EAAQ,KAAK,cAAcL,EAAO,CAAC,CAAC,EAE9C,CACMA,EAAOI,CAAG,EAAIC,CACpB,CAAK,EACML,CACX,CACE,cAAcD,EAAM,CAClB,OAAIA,IAAS,UACJO,EAAU,SAAU,EAEzBP,IAAS,cACJO,EAAU,SAAS,EAAI,EAEzB,KAAK,aAAe,KAAK,aAAa,IAAIP,CAAI,EAAI,MAC7D,CACE,eAAeQ,EAAM,CACnB,KAAK,aAAeA,CACxB,CACA,CACA,MAAMC,GAA+BC,GAAa,CAChD,MAAMC,EAASD,EAAS,SACxB,IAAIP,EACJ,OAAIQ,IACFR,EAASQ,EAAO,OACb,OAAOC,GAAcA,EAAW,UAAY,EAAK,EACjD,IAAIA,IAAuB,CAAE,KAAMA,EAAW,KAAM,aAAcA,EAAW,YAAY,EAAK,GAEpF,CAAE,YAAa,GAAO,OAAAT,CAAQ,CAE/C,EACMU,GAAoB,CAACC,EAAQJ,EAAUK,EAAiB,KAAU,CACtE,IAAIC,EAAIC,GACJH,GAAU,OAAcA,GAAW,KAA4B,OAASA,EAAO,eAAiB,MAClGA,EAASL,GAA4BC,CAAQ,GAE/C,MAAMQ,EAAS,IAAI,IACbC,EAAa,IAAI,IACjBC,EAAiB,CAAE,EACnBC,EAAoB,CAAE,EACtBjB,EAAgB,CAAE,GACvBY,EAAKF,GAAW,KAA4B,OAASA,EAAO,QAAU,MAAQE,IAAO,QAAkBA,EAAG,QAASM,GAAQ,CACtH,CAACH,EAAW,IAAIG,EAAI,KAAK,GAAKA,EAAI,UAAY,IAChDH,EAAW,IAAIG,EAAI,MAAOA,CAAG,CAEnC,CAAG,GACAL,EAAKH,GAAW,KAA4B,OAASA,EAAO,UAAY,MAAQG,IAAO,QAAkBA,EAAG,QAASM,GAAU,CAC9H,IAAIP,EAAIC,EAAIO,EACZ,GAAID,EAAM,UAAY,GAAO,CAC3B,MAAME,EAAYC,GAAaH,EAAM,KAAO,SAAUL,CAAM,EAC5D,GAAIC,EAAW,IAAIM,EAAU,KAAK,EAChC,OAEF,MAAMb,EAAaF,EAAS,SAASa,EAAM,IAAI,EACzCI,GAAgBf,GAAe,KAAgC,OAASA,EAAW,UAAY,OAAcA,GAAe,KAAgC,OAASA,EAAW,WAAa,GACnM,GAAIA,GAAce,GAAgBF,EAAU,QAAS,CAC9CP,EAAO,IAAIO,CAAS,GACvBP,EAAO,IAAIO,EAAW,EAAE,EAE1B,MAAMG,EAAYC,EAAmBjB,EAAYW,CAAK,EACtDL,EAAO,IAAIO,CAAS,EAAE,KAAKG,CAAS,EAChCA,EAAU,UACZR,EAAe,KAAKG,EAAM,IAAI,IAEZA,EAAM,aAAe,MAAaP,EAAKJ,EAAW,cAAgB,MAAQI,IAAO,OAAS,OAASA,EAAG,YAAcO,EAAM,cACzH,GAAAN,EAAKL,EAAW,cAAgB,MAAQK,IAAO,SAAkBA,EAAG,cACvFI,EAAkB,KAAKE,EAAM,IAAI,EAEnC,IAAIO,EAAeP,EAAM,cAAgB,MAAaC,EAAKZ,EAAW,cAAgB,MAAQY,IAAO,OAAS,OAASA,EAAG,aAAeD,EAAM,aAC/I,GAAIO,GAAgBA,EAAa,OAAS,KAAW,CACnD,KAAM,CAAE,KAAAC,EAAM,MAAAzB,CAAK,EAAKwB,EACxB,GAAIC,EACF,GAAIA,IAAS,IACXD,EAAexB,MAGf,IAAI,CACF,MAAM0B,EAAS,KAAK,MAAM1B,CAAK,EAC3B0B,GAAU,UAAWA,EACvBF,EAAeE,EAGfF,EAAexB,CAEjC,MACyB,CAAA,CAGfF,EAAcmB,EAAM,IAAI,EAAIO,CACtC,CACA,CACA,CACA,CAAG,EACD,MAAMG,EAAW,IAAIlC,GAErB,GADAkC,EAAS,eAAenB,EAAO,WAAW,EACtCC,EAAgB,CAClB,MAAMJ,EAASD,EAAS,SACpBC,GAAU,MAAaA,EAAO,UAAY,MAC5CA,EAAO,SAAS,QAAQuB,GAAS,CAC/B,KAAM,CAAE,MAAAC,EAAO,KAAAnC,EAAM,OAAAG,CAAM,EAAKiC,GAAiBF,CAAK,EACtDhB,EAAO,IAAI,CAAE,KAAAlB,EAAM,MAAAmC,CAAK,EAAIhC,CAAM,CAC1C,CAAO,CAEP,CACE,aAAM,KAAKe,EAAO,QAAS,CAAA,EACxB,KAAKmB,EAAQ,EACb,QAAQ,CAAC,CAAChC,EAAKF,CAAM,IAAM,CAC5B8B,EAAS,SAAS,CAChB,MAAQ5B,EAAI,QAAU,SAAY,YAAcA,EAAI,MACpD,KAAMA,EAAI,MAAQA,EAAI,MACtB,OAAAF,CACN,CAAK,CACL,CAAG,EACD8B,EAAS,kBAAkBb,CAAc,EACzCa,EAAS,qBAAqBZ,CAAiB,EAC/CY,EAAS,iBAAiB7B,CAAa,EAChC6B,CACT,EACMP,GAAe,CAACJ,EAAKJ,KACN,OAAOI,GAAQ,SAAW,MAAM,KAAKJ,EAAO,KAAM,CAAA,EAAE,KAAKoB,GAAKA,EAAE,QAAUhB,CAAG,EAAIA,IAChF,CAAE,MAAOA,EAAK,QAAS,EAAM,EAE7Ce,GAAW,CAACE,EAAGC,IACZD,EAAE,CAAC,EAAE,OAAS,SAAW,IAAMA,EAAE,CAAC,EAAE,OAAS,MAAUC,EAAE,CAAC,EAAE,OAAS,KAExEJ,GAAoBF,IACjB,CACL,KAAM,SAASA,EAAM,IAAI,IACzB,MAAOA,EAAM,MACb,OAAQ,CAAA,CACT,GAUH,SAASO,EAAuBC,EAAM,CACpC,MAAO,yBAA2BA,EAAO,4CAA8CA,EAAO,iFAChG,CAGA,IAAIC,EAAgB,UAAY,CAC9B,OAAO,OAAO,QAAW,YAAc,OAAO,YAAc,cAC9D,EAAI,EAQAC,EAAe,UAAwB,CACzC,OAAO,KAAK,OAAM,EAAG,SAAS,EAAE,EAAE,UAAU,CAAC,EAAE,MAAM,EAAE,EAAE,KAAK,GAAG,CACnE,EAEIC,EAAc,CAChB,KAAM,eAAiBD,EAAc,EACrC,QAAS,kBAAoBA,GAI/B,EAMA,SAASE,GAAcC,EAAK,CAC1B,GAAI,OAAOA,GAAQ,UAAYA,IAAQ,KAAM,MAAO,GAGpD,QAFIC,EAAQD,EAEL,OAAO,eAAeC,CAAK,IAAM,MACtCA,EAAQ,OAAO,eAAeA,CAAK,EAGrC,OAAO,OAAO,eAAeD,CAAG,IAAMC,CACxC,CA4BA,SAASC,GAAYC,EAASC,EAAgBC,EAAU,CACtD,IAAIC,EAmBJ,GAAI,OAAOH,GAAY,WACrB,MAAM,IAAI,MAAMT,EAAuB,CAAC,CAAG,EAG7C,IAAIa,EAAiBJ,EACjBK,EAAeJ,EACfK,EAAmB,CAAE,EACrBC,EAAgBD,EAChBE,EAAgB,GASpB,SAASC,GAA+B,CAClCF,IAAkBD,IACpBC,EAAgBD,EAAiB,MAAO,EAE9C,CAQE,SAASI,GAAW,CAClB,GAAIF,EACF,MAAM,IAAI,MAAMjB,EAAuB,CAAC,CAAG,EAG7C,OAAOc,CACX,CA0BE,SAASM,EAAUC,EAAU,CAC3B,GAAI,OAAOA,GAAa,WACtB,MAAM,IAAI,MAAMrB,EAAuB,CAAC,CAAG,EAG7C,GAAIiB,EACF,MAAM,IAAI,MAAMjB,EAAuB,CAAC,CAAG,EAG7C,IAAIsB,EAAe,GACnB,OAAAJ,EAA8B,EAC9BF,EAAc,KAAKK,CAAQ,EACpB,UAAuB,CAC5B,GAAKC,EAIL,IAAIL,EACF,MAAM,IAAI,MAAMjB,EAAuB,CAAC,CAAG,EAG7CsB,EAAe,GACfJ,EAA8B,EAC9B,IAAIK,EAAQP,EAAc,QAAQK,CAAQ,EAC1CL,EAAc,OAAOO,EAAO,CAAC,EAC7BR,EAAmB,KACpB,CACL,CA4BE,SAASS,EAASC,EAAQ,CACxB,GAAI,CAACpB,GAAcoB,CAAM,EACvB,MAAM,IAAI,MAAMzB,EAAuB,CAAC,CAAG,EAG7C,GAAI,OAAOyB,EAAO,KAAS,IACzB,MAAM,IAAI,MAAMzB,EAAuB,CAAC,CAAG,EAG7C,GAAIiB,EACF,MAAM,IAAI,MAAMjB,EAAuB,CAAC,CAAG,EAG7C,GAAI,CACFiB,EAAgB,GAChBH,EAAeD,EAAeC,EAAcW,CAAM,CACxD,QAAc,CACRR,EAAgB,EACtB,CAII,QAFIS,EAAYX,EAAmBC,EAE1BW,EAAI,EAAGA,EAAID,EAAU,OAAQC,IAAK,CACzC,IAAIN,EAAWK,EAAUC,CAAC,EAC1BN,EAAU,CAChB,CAEI,OAAOI,CACX,CAaE,SAASG,EAAeC,EAAa,CACnC,GAAI,OAAOA,GAAgB,WACzB,MAAM,IAAI,MAAM7B,EAAuB,EAAE,CAAG,EAG9Ca,EAAiBgB,EAKjBL,EAAS,CACP,KAAMpB,EAAY,OACxB,CAAK,CACL,CASE,SAAS0B,GAAa,CACpB,IAAIC,EAEAC,EAAiBZ,EACrB,OAAOW,EAAO,CASZ,UAAW,SAAmBE,EAAU,CACtC,GAAI,OAAOA,GAAa,UAAYA,IAAa,KAC/C,MAAM,IAAI,MAAMjC,EAAuB,EAAE,CAAG,EAG9C,SAASkC,GAAe,CAClBD,EAAS,MACXA,EAAS,KAAKd,GAAU,CAEpC,CAEQe,EAAc,EACd,IAAIC,EAAcH,EAAeE,CAAY,EAC7C,MAAO,CACL,YAAaC,CACd,CACT,CACA,EAAOJ,EAAK7B,CAAY,EAAI,UAAY,CAClC,OAAO,IACb,EAAO6B,CACJ,CAKD,OAAAP,EAAS,CACP,KAAMpB,EAAY,IACtB,CAAG,EACMQ,EAAQ,CACb,SAAUY,EACV,UAAWJ,EACX,SAAUD,EACV,eAAgBS,CACjB,EAAEhB,EAAMV,CAAY,EAAI4B,EAAYlB,CACvC,CAEA,MAAMwB,GAAe,CAAE,EAEvB,SAASC,GAAYC,EAAQF,GAAcX,EAAQ,CACjD,OAAQA,EAAO,KAAI,CACjB,KAAKc,EAAY,gBACf,OAAO,OAAO,OAAO,OAAO,OAAO,CAAA,EAAID,CAAK,EAAG,CAAE,aAAcb,EAAO,QAAS,aAAc,MAAS,CAAE,EAC1G,KAAKc,EAAY,WACf,OAAO,OAAO,OAAO,OAAO,OAAO,CAAA,EAAID,CAAK,EAAG,CAAE,aAAcb,EAAO,OAAO,CAAE,EACjF,QACE,OAAOa,CACb,CACA,CAEA,SAASE,GAAaC,EAAc,CAClC,MAAO,CACL,KAAMF,EAAY,gBAClB,QAASE,CACV,CACH,CACA,SAASC,GAAUC,EAAc,CAC/B,MAAO,CACL,KAAMJ,EAAY,WAClB,QAAS,OAAOI,GAAiB,SAAWA,EAAeA,EAAa,MACzE,CACH,CAEA,SAASC,EAAmBN,EAAO,CACjC,OAAOA,EAAM,YACf,CACA,SAASO,GAAqBP,EAAO,CACnC,OAAOA,EAAM,YACf,CACA,SAASQ,EAAmBR,EAAO,CACjC,MAAMS,EAAiBF,GAAqBP,CAAK,EACjD,OAAOS,EAAiBT,EAAM,aAAa,SAASS,CAAc,EAAI,MAAM,KAAKT,EAAM,aAAa,aAAY,EAAG,OAAQ,CAAA,EAAE,CAAC,CAChI,CAEA,IAAIC,GACH,SAAUA,EAAa,CACtBA,EAAY,gBAAqB,uBACjCA,EAAY,WAAgB,iBAC9B,GAAGA,IAAgBA,EAAc,CAAA,EAAG,EAEpC,MAAMS,GAAY,gQAEZC,GAAS,KAAM,CACnB,YAAYC,EAAS,CACnBC,EAAiB,KAAMD,CAAO,EAC9B,KAAK,+BAAiCE,EAAY,KAAM,gCAAmC,EAC3F,KAAK,gBAAkBA,EAAY,KAAM,iBAAoB,EAC7D,KAAK,QAAUA,EAAY,KAAM,SAAY,EAC7C,KAAK,eAAiBA,EAAY,KAAM,gBAAmB,EAC3D,KAAK,eAAiB,IAAI,IAC1B,KAAK,aAAeC,EAAmB,gBAAgB,sBAAsB,EAC7E,KAAK,iBAAoB5B,GAAW,CAC9BA,EAAO,OAAS6B,EAAO,iBACzB,KAAK,gBAAiB,CAEzB,EACD,KAAK,aAAe,IAAI,IACxB,KAAK,cAAgB,GACrB,KAAK,SAAW,OAChB,KAAK,OAAS,OACd,KAAK,iBAAmB,OACxB,KAAK,aAAe,OACpB,KAAK,iBAAmB,GACxB,KAAK,eAAiB,GACtB,KAAK,wBAA0B,MACnC,CAIE,UAAW,CACT,OAAO,KAAK,YAAY,SAAU,CACtC,CAIE,MAAM,gBAAgBC,EAAWC,EAAcC,EAAe,CAC5D,GAAI,KAAK,UAAW,CAClB,KAAK,UAAU,gBAAgBF,EAAWC,EAAcC,CAAa,EACrE,MACN,CACI,MAAMC,EAAmB,IAAI,IAAI,KAAK,cAAc,EACpDA,EAAiB,IAAIH,EAAW,CAAE,aAAAC,EAAc,cAAAC,CAAa,CAAE,EAC/D,KAAK,eAAiBC,CAC1B,CACE,eAAgB,CACd,KAAK,gBAAiB,CAC1B,CAIE,MAAM,aAAaH,EAAWI,EAAU9F,EAAO,CAC7C,MAAM+F,EAAsB,IAAI,IAAI,KAAK,YAAY,EAC/CC,EAAe,KAAK,aAAa,IAAIN,CAAS,EACpDK,EAAoB,IAAIL,EAAW,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEM,CAAY,EAAG,CAAE,CAACF,CAAQ,EAAG9F,CAAO,CAAA,CAAC,EACxG,KAAK,aAAe+F,CACxB,CACE,mBAAoB,CAClB,IAAIrF,EACJ,MAAMuF,EAASlB,EAAmB,KAAK,OAAO,SAAQ,CAAE,EACxD,GAAI,CAACkB,EACH,OAAO,KAET,MAAMC,EAAY,MAAM,KAAKD,EAAO,aAAY,EAAG,QAAQ,EACrDnB,EAAeG,GAAoBvE,EAAK,KAAK,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,SAAQ,CAAE,EAC7G,IAAIf,EAAS,CAAE,EACf,GAAIuG,EAAU,OAAS,EAAG,CACxB,MAAMC,EAAOD,EAAU,IAAI,CAACtG,EAAO8D,KAC1B,CAAE,OAAQ9D,EAAM,KAAM,MAAOA,EAAM,MAAO,MAAA8D,CAAO,EACzD,EAED/D,EAAO,KAAKyG,EAAE,iBAAkB,CAAE,KAAM,KAAK,mBAAmBD,CAAI,EAAG,WAAaE,GAAQ,KAAK,OAAO,SAASxB,GAAUwB,EAAI,MAAM,CAAC,EAAG,YAAavB,EAAa,KAAM,kBADnJ,UACqL,CAAA,CAAC,CAClN,CACI,OAAAnF,EAASA,EAAO,OAAO,KAAK,iBAAiBmF,CAAY,CAAC,EACnDnF,CACX,CACE,iBAAiBmF,EAAc,CAC7B,MAAMjF,EAASiF,GAAiB,KAAkC,OAASA,EAAa,OACxF,GAAIA,GAAgB,KAClB,OAEF,KAAK,gBAAgB,KAAKjF,CAAM,EAChC,MAAMyG,EAAc,GAAGC,EAAY,wBAAwBA,EAAY,YAAYzB,GAAiB,KAAkC,OAASA,EAAa,KAAK,EAAG,EAAK,CAAC,qBAC1K,OAAQsB,EAAE,MAAO,CAAE,MAAO,qCAAsC,kBAAmBE,EAAa,IAAKE,GAAS,KAAK,WAAaA,EAAO,SAAU,GAAG,EAAIJ,EAAE,aAAc,CAAE,IAAKI,GAAS,KAAK,sBAAwBA,EAAO,YAAa,QAAU,KAAK,kBAAiB,CAAE,EAAGJ,EAAE,eAAgB,CAAE,IAAMK,GAAa,KAAK,UAAYA,EAAU,MAAO,oCAAqC,OAAQ5G,EAAQ,aAAc,KAAK,cAAe,eAAgB,KAAK,SAAS,kBAAiB,CAAI,CAAA,CAAC,CACte,CACE,mBAAoB,CAClB,OAAI,KAAK,cAAgB,KAChB,KAAK,cAEd,KAAK,aAAe6G,EAAiB,CACnC,MAAOH,EAAY,aAAc,EACjC,MAAOI,CACR,EAAE,CAAC,CAAE,SAAAC,KAAe,KAAK,mBAAmBA,CAAQ,EAAIC,GAAW,KAAK,cAAcA,CAAM,CAAC,EACvF,KAAK,aAChB,CACE,eAAgB,CACd,IAAInG,EACJ,OAAQA,EAAK,KAAK,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,MACtE,CACE,mBAAmBkG,EAAU,CAC3B,MAAME,EAAaF,GAAa,KAA8B,OAASA,EAAS,YAAa,EAOvFG,EANY,KAAK,gBAAgB,IAAI9F,GAAS,CAAE,IAAIP,EAAI,OAAQA,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,SAASO,EAAM,IAAI,EAAI,EACxH,OAAOA,GAAS,CAC/C,IAAIP,EAAIC,EACR,QAASD,EAAKO,EAAM,QAAU,MAAQP,IAAO,OAAS,OAASA,EAAG,YAAW,EAAG,SAASoG,CAAU,MAC/FnG,EAAKM,EAAM,SAAW,MAAQN,IAAO,OAAS,OAASA,EAAG,YAAW,EAAG,SAASmG,CAAU,EACrG,CAAK,EAC8B,IAAI7F,IAAU,CAAE,MAAOA,EAAM,KAAM,MAAOA,EAAM,KAAO,EAAC,EACvF,OAAO,QAAQ,QAAQ8F,CAAO,CAClC,CACE,cAAcF,EAAQ,CACpB,GAAIA,GAAU,MAAaA,EAAO,OAAS,KAAW,CACpD,KAAK,aAAe,GACpB,MACN,CACI,KAAK,aAAeA,EAAO,MAC3B,KAAK,sBAAsB,KAAM,CACrC,CACE,MAAM,qBAAsB,CAC1B,IAAInG,EAAIC,EACR,KAAK,iBAAmB,IAAIqG,EAAgB,CAAE,UAAW,GAAO,SAAUtG,EAAK,KAAK,2BAA6B,MAAQA,IAAO,OAASA,EAAK,KAAK,SAAU,EACzJ,KAAK,gBACP,KAAK,iBAAiB,KAAKuG,EAAuB,SAAY,CAC5D,GAAI,CAAC,KAAK,YAAc,CAAC,KAAK,sBAC5B,OACF,MAAMC,EAAY,KAAK,WAAW,sBAAuB,EACzD,MAAMC,EAAkB,KAAK,YAAY,EACzC,KAAK,sBAAsB,UAAU,KAAK,WAAY,CAAE,cAAeD,EAAU,MAASE,EAA0B,YAAaF,EAAU,OAAS,EAAE,CAAE,CACzJ,EAAE,CAAE,YAAaP,EAAoB,SAAUhG,EAAK,KAAK,2BAA6B,MAAQA,IAAO,OAASA,EAAK,KAAK,QAAQ,CAAE,CAEzI,CACE,kBAAmB,CACjB,KAAK,oBAAqB,CAC9B,CACE,iBAAkB,CAChB,GAAI,KAAK,WAAY,GAAI,KAAK,UAAY,KAAK,OAAQ,CACrD,MAAMgB,EAAWpB,GAAkB,KAAK,OAAQ,KAAK,QAAQ,EAC7D,KAAK,OAAO,SAASoE,GAAahD,CAAQ,CAAC,CACjD,CACA,CACE,UAAW,CACT,IAAIjB,EACJ,QAASA,EAAK,KAAK,iBAAmB,MAAQA,IAAO,OAAS,OAASA,EAAG,QAAU,CACxF,CACE,YAAa,CACX,MAAO,CAAC,KAAK,SAAU,GAAI,KAAK,mBAAqB,EACzD,CACE,MAAM,mBAAoB,CACxB,IAAIA,EACA,KAAK,WAAa,SACpB,KAAK,SAAW,IAAI2G,EAAS,SAAS,GAExC,KAAK,SAAS,YAAY,KAAK,gBAAgB,EAC/C,KAAK,SAAS,UAAU,KAAK,gBAAgB,EAC7C,KAAK,YAAc,IAAIC,EAAW,KAAK,QAAQ,EAC/C,KAAK,OAAS3E,GAAY6B,EAAW,EACrC,KAAK,OAAO,UAAU,IAAM+C,EAAY,IAAI,CAAC,EAC7C,KAAK,cAAgB,MAAM,KAAK,KAAK,SAAS,iBAAiB,mBAAmB,CAAC,EACnF,KAAK,gBAAiB,EACtB,MAAMC,EAAW,CAAE,SAAU,KAAK,QAAU,EAC5CC,EAAe,UAAU,KAAK,SAAU,KAAMD,CAAQ,EACtD,MAAME,EAAmB,OAAQhH,EAAK,KAAK,gBAAkB,MAAQA,IAAO,OAAS,OAASA,EAAG,oBAAmB,GACpH,KAAK,gBAAgBgH,CAAgB,EACrC,KAAK,wBAAwBA,CAAgB,CACjD,CACE,MAAM,gBAAgBA,EAAkB,CACtC,GAAI,EAAEA,GAAqB,MAA+CA,EAAiB,QAAS,CAClG,KAAK,cAAgB,GACrB,MACN,CACI,KAAK,cAAgBA,EAAiB,SAAWC,EAAW,OAChE,CACE,MAAM,wBAAwBD,EAAkB,CACzCA,GAELA,EAAiB,eAAgBlH,GAAW,CACtCA,IAAWmH,EAAW,QACxB,KAAK,cAAgB,GAGrB,KAAK,cAAgB,EAE7B,CAAK,CACL,CACE,oBAAqB,CACnB,MAAMhG,EAAWoD,EAAmB,KAAK,OAAO,SAAQ,CAAE,EAC1DpD,EAAS,kBAAkB,KAAK,cAAc,OAAOiG,GAAKA,EAAE,QAAQ,QAAQ,EAAE,IAAIA,GAAKA,EAAE,QAAQ,SAAS,CAAC,EAC3G,KAAK,YAAY,KAAK,MAAM,KAAK,KAAK,SAAS,iBAAiB,mBAAmB,CAAC,EAAG,KAAK,SAAS,WAAYjG,EAAU,KAAK,gBAAgB,EAChJ,KAAK,QAAQ,KAAM,EACnB,KAAK,mBAAoB,EACzB,KAAK,iBAAkB,EACvB,KAAK,eAAgB,CACzB,CACE,kBAAmB,CACjB,GAAK,KAAK,UAGV,SAAW,CAAC+D,EAAWmC,CAAiB,IAAK,KAAK,eAChD,KAAK,UAAU,gBAAgBnC,EAAWmC,EAAkB,aAAcA,EAAkB,aAAa,EACzG,KAAK,eAAe,OAAOnC,CAAS,CAE1C,CACE,oBAAqB,CACnB,IAAIhF,EACJ,GAAI,KAAK,cAAgB,KACvB,OAEF,MAAMoE,EAAeG,GAAoBvE,EAAK,KAAK,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,SAAQ,CAAE,GAC9FoE,GAAiB,KAAkC,OAASA,EAAa,QAC5E,KAAKgD,GAAQA,EAAK,OAAS,KAAK,YAAY,GAGxD,sBAAsB,IAAM,CAC1B,KAAK,YAAY,SAAS,KAAK,YAAY,EAC3C,KAAK,+BAA+B,KAAM,EAC1C,KAAK,aAAe,IAC1B,CAAK,CACL,CACE,gBAAiB,CACf,GAAK,KAAK,UAGV,SAAW,CAACpC,EAAWqC,CAAK,IAAK,KAAK,aAAc,CAClD,UAAWC,KAAQD,EACjB,KAAK,UAAU,aAAarC,EAAWsC,EAAMD,EAAMC,CAAI,CAAC,EAE1D,KAAK,aAAa,OAAOtC,CAAS,CACxC,CACA,CACE,sBAAuB,CACrB,IAAIhF,EACJ,KAAK,SAAS,YAAY,KAAK,gBAAgB,EAC/C,KAAK,YAAY,uBAAwB,GACxCA,EAAK,KAAK,oBAAsB,MAAQA,IAAO,QAAkBA,EAAG,sBAAuB,CAChG,CACE,mBAAmByF,EAAM,CACvB,OAAIA,GACFA,EAAK,QAAQnF,GAAOA,EAAIyG,EAAe,8BAA8B,EAAIlB,EAAY,YAAYvF,EAAI,KAAK,CAAC,EAEtGmF,CACX,CACE,QAAS,CACP,OAAQC,EAAE6B,EAAM,KAAM,KAAK,SAAQ,EAAK,KAAO,KAAK,mBAAmB,CAC3E,CACE,IAAI,UAAW,CAAE,OAAOC,EAAW,IAAI,CAAE,CACzC,WAAW,UAAW,CAAE,MAAO,CAC7B,OAAU,CAAC,eAAe,CAC9B,CAAI,CACJ,EACA9C,GAAO,MAAQD","x_google_ignoreList":[0]}
import{b as l,d as h,e as t,k as c,l as p}from"./index-B1vwK5wU.js";import{a,b as o,c as r,R as d}from"./RichToolbarHelper-fd6427df-BbctMkQE.js";const b=".link-builder-container.sc-ez-link-builder{font-family:'Roboto';color:#2b3a54;display:flex;flex-direction:column;gap:10px;justify-content:space-between}.header.sc-ez-link-builder{display:flex;font-weight:500;font-size:16px}.actions.sc-ez-link-builder{display:flex;justify-content:flex-end;gap:12px;margin-top:12px;width:100%}",f=class{constructor(e){l(this,e),this.executeToolbarCommand=h(this,"executeToolbarCommand"),this.textToShow=void 0,this.link=void 0,this.openInNewGuide=!1}async show(e){this._popupElement.opened=!0,e&&(this.textToShow=e)}async hide(){this._popupElement.opened=!1}async handleCancel(){this.clearValues(),this.executeToolbarCommand.emit({command:a.FOCUS}),await this.hide()}clearValues(){this.link="",this.textToShow="",this.openInNewGuide=!1}async handleCreateLink(){const e=`<a href="${this.link}" ${this.openInNewGuide?'target="_blank" rel="noopener noreferrer"':""}>${this.textToShow?this.textToShow:this.link}</a>`;this.executeToolbarCommand.emit({command:a.FORMAT,value:e}),this.clearValues(),await this.hide()}async handleActionPopup(e){if(e.detail==="OK"){await this.handleCreateLink();return}(e.detail==="CANCEL"||e.detail==="CLOSE")&&await this.handleCancel()}getOkButtonStatus(){var e;return!((e=this.link)===null||e===void 0)&&e.trim()?"ENABLED":"DISABLED"}render(){return t("ez-popup",{heightMode:"auto",size:"small",useHeader:!1,ref:e=>this._popupElement=e,onEzClosePopup:()=>this.clearValues()},t("div",null,t("ez-modal-container",{modalTitle:"Adicionar link",modalSubTitle:"Insira um link no texto para abrir novas páginas.",okButtonLabel:"Enviar",cancelButtonLabel:"Cancelar",onEzModalAction:this.handleActionPopup.bind(this),okButtonStatus:this.getOkButtonStatus()},t("div",{class:"link-builder-container"},t("ez-text-input",{id:"link_url_input",label:"Insira a URL destino",value:this.link,onEzChange:e=>this.link=e.detail}),t("ez-text-input",{id:"link_text_input",label:"Insira o texto a ser exibido",value:this.textToShow,onEzChange:e=>this.textToShow=e.detail}),t("ez-check",{label:"Abrir em uma nova página.",value:this.openInNewGuide,onEzChange:e=>this.openInNewGuide=e.detail})))))}};f.style=b;const z=".sc-ez-rich-toolbar-h{display:block;width:100%}.taskbar.sc-ez-rich-toolbar{display:flex;padding:8px;border-radius:4px 4px 0 0}.taskbar-group.sc-ez-rich-toolbar{display:flex;margin-right:15px;padding-right:15px;border-right:1px solid #ddd}.taskbar-group.sc-ez-rich-toolbar:last-child{border-right:none}.preview-btn.sc-ez-rich-toolbar{font-family:Roboto;font-size:14px;background:none;display:flex;align-items:center;padding:0 8px;border-radius:4px;cursor:pointer;color:var(--color--secondary, #383c45);transition:0.3s all ease-in-out;width:110px;justify-content:center}.preview-btn.sc-ez-rich-toolbar:hover{background-color:#f5f5f5}",x=class{constructor(e){l(this,e),this.executeToolbarCommand=h(this,"executeToolbarCommand"),this.showPreview=!0,this.isPreviewMode=!1,this.showConfigs=!0,this.showTextFormat=!0,this.showUndoRedo=!0}handleActionTriggered(e){this.executeToolbarCommand.emit({command:e.detail.command,value:e.detail.value})}handleClickPreview(){this.executeToolbarCommand.emit({command:a.PREVIEW})}renderArrows(){if(this.showUndoRedo)return t("div",{id:"rich-toolbar-undo-redo",class:"taskbar-group"},t("ez-rich-toolbar-arrows",null))}renderLetters(){if(this.showTextFormat)return t("div",{id:"rich-toolbar-text-format",class:"taskbar-group"},t("ez-rich-toolbar-letters",null))}renderConfigs(){if(this.showConfigs)return t("div",{id:"rich-toolbar-options-configs",class:"taskbar-group"},t("ez-rich-toolbar-configs",null))}renderPreview(){if(this.showPreview)return t("div",{class:"taskbar-group"},t("span",{id:"rich-text-preview-btn",class:"preview-btn",title:this.getPreviewTitle(),onClick:this.handleClickPreview.bind(this)},this.isPreviewMode?"Editar":"Pré-visualizar"))}getPreviewTitle(){return this.isPreviewMode?o.EDIT:o.PREVIEW}render(){return t(c,null,t("div",{class:"taskbar"},this.renderPreview(),this.renderArrows(),this.renderLetters(),this.renderConfigs()))}};x.style=z;const v=".sc-ez-rich-toolbar-arrows-h{display:flex;gap:5px}",C=class{constructor(e){l(this,e)}render(){return t(c,null,t("ez-rich-toolbar-item",{icon:r.UNDO,command:a.UNDO,title:o.UNDO}),t("ez-rich-toolbar-item",{icon:r.REDO,command:a.REDO,title:o.REDO}))}};C.style=v;const w=".sc-ez-rich-toolbar-configs-h{display:flex;gap:5px}",E=class{constructor(e){l(this,e)}render(){return t(c,null,t("ez-rich-toolbar-item",{icon:r.LIST,command:a.FORMAT,value:d.LIST,title:o.LIST}),t("ez-rich-toolbar-item",{icon:r.IMAGE,command:a.IMAGE,title:o.IMAGE}),t("ez-rich-toolbar-item",{icon:r.LINK,command:a.LINK,title:o.LINK}))}};E.style=w;const T=".sc-ez-rich-toolbar-letters-h{display:flex;gap:5px}",k=class{constructor(e){l(this,e)}render(){return t(c,null,t("ez-rich-toolbar-item",{icon:r.BOLD,command:a.FORMAT,value:d.BOLD,title:o.BOLD}),t("ez-rich-toolbar-item",{icon:r.ITALIC,command:a.FORMAT,value:d.ITALIC,title:o.ITALIC}),t("ez-rich-toolbar-item",{icon:r.UNDERLINE,command:a.FORMAT,value:d.UNDERLINE,title:o.UNDERLINE}))}};k.style=T;function m(e,i=1){if(e===0)return"0 Bytes";const n=1024,s=i<0?0:i,g=["Bytes","Kilobytes","Megabytes","Gigabytes","Terabytes","Petabytes","Exabytes","Zettabytes","Yottabytes"],u=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,u)).toFixed(s))+" "+g[u]}function y(e){return new Promise((i,n)=>{try{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(e)}catch(s){n(s)}})}const L='.image-uploader-container.sc-ez-simple-image-uploader{font-family:"Roboto";color:#2b3a54;display:flex;flex-direction:column;gap:var(--space--10, 10px);justify-content:space-between;align-items:center;padding-bottom:var(--space--8, 8px)}.header.sc-ez-simple-image-uploader{display:flex;font-weight:500;font-size:var(--font-size--medium, 16px)}.actions.sc-ez-simple-image-uploader{display:flex;justify-content:flex-end;gap:var(--space--12, 12px);margin-top:var(--space--12, 12px);width:100%}.drop-zone-section.sc-ez-simple-image-uploader{width:100%}.drop-zone.sc-ez-simple-image-uploader{display:flex;flex-wrap:wrap;background-color:var(--color--petroleum-70, #F4F6F9);padding:var(--space--6, 6px);width:100%;border-radius:var(--space--12, 12px);box-sizing:border-box;min-height:100px}.clickable.sc-ez-simple-image-uploader{cursor:pointer}.dragging.sc-ez-simple-image-uploader{background-color:var(--color--petroleum-100, #C8CCD3)}.drop-zone-container.sc-ez-simple-image-uploader{width:100%;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;border:2px dashed var(--color-strokes, #DCE0E8);border-radius:6px;box-sizing:border-box}.text-error.sc-ez-simple-image-uploader{font-family:var(--font--pattern, "Roboto");color:var(--color--red-600, #BD0025);font-size:var(--font-size--small, 12px)}.button-close.sc-ez-simple-image-uploader{border:none;background:none;cursor:pointer}',I=class{constructor(e){l(this,e),this.executeToolbarCommand=h(this,"executeToolbarCommand"),this.link=void 0,this.base64=void 0,this.messageError=void 0,this.selectedFile=void 0,this.maxSize=500}async show(){this._popupElement.opened=!0}async hide(){this._popupElement.opened=!1}async handleCancel(){this.removeSelectedFile(),this.executeToolbarCommand.emit({command:a.FOCUS}),await this.hide()}removeSelectedFile(e){e==null||e.stopPropagation(),this.link=void 0,this.base64=void 0,this.selectedFile=void 0,this.messageError=void 0}triggerFileSelect(){this.selectedFile||this._fileInput.click()}async handleImage(e){const i=e&&e[0];i&&(i.size<this.maxSize*1e3?(this.selectedFile=i,this.base64=await y(i)):this.messageError=`A imagem deve ter menos de ${m(this.maxSize)}.`)}getFileList(e){return e instanceof DragEvent?Array.from(e.dataTransfer.files):e.target.files}handleFileChange(e){e.preventDefault(),this.messageError=void 0,this._dropZone.classList.remove("dragging");const i=this.getFileList(e);this.handleImage(i);const n=e.target;n.value=""}handleDragOver(e){e.stopPropagation(),e.preventDefault()}handleDragEnter(e){e.preventDefault(),this._dropZone.classList.add("dragging")}handleDragLeave(e){e.preventDefault(),this._dropZone.contains(e.relatedTarget)||this._dropZone.classList.remove("dragging")}async handleActionPopup(e){e.detail==="OK"?await this.handleCreateImgTag():(e.detail==="CANCEL"||e.detail==="CLOSE")&&await this.handleCancel()}async handleCreateImgTag(){var e;const i=`<img src="${(e=this.base64)!==null&&e!==void 0?e:this.link}" alt="Image" />`;this.executeToolbarCommand.emit({command:a.FORMAT,value:i}),this.removeSelectedFile(),await this.hide()}getOkButtonStatus(){var e;return!this.base64&&!(!((e=this.link)===null||e===void 0)&&e.trim())?"DISABLED":"ENABLED"}render(){return t("ez-popup",{ref:e=>this._popupElement=e,heightMode:"auto",size:"small",useHeader:!1,onEzClosePopup:()=>this.handleCancel()},t("div",null,t("ez-modal-container",{modalTitle:"Upload de imagens",modalSubTitle:"Envie seus arquivos preenchendo apenas 1 campo por vez.",okButtonLabel:"Enviar",cancelButtonLabel:"Cancelar",onEzModalAction:this.handleActionPopup.bind(this),okButtonStatus:this.getOkButtonStatus()},t("div",{class:"image-uploader-container"},t("ez-tooltip",{message:"O arquivo selecionado abaixo será priorizado!",active:!!this.selectedFile},t("ez-text-input",{label:"Insira a URL da imagem",value:this.link,onEzChange:e=>this.link=e.detail,enabled:!this.selectedFile})),t("span",null,"OU"),t("section",{class:"drop-zone-section"},t("div",{ref:e=>this._dropZone=e,class:"drop-zone",onDrop:e=>this.handleFileChange(e),onDragOver:e=>this.handleDragOver(e),onDragEnter:e=>this.handleDragEnter(e),onDragLeave:e=>this.handleDragLeave(e)},t("div",{class:{"drop-zone-container":!0,clickable:!this.selectedFile},onClick:()=>this.triggerFileSelect()},this.selectedFile?t(p,null,t("span",{class:"ez-text ez-text--primary ez-text--medium"},this.selectedFile.name," (",m(this.selectedFile.size),")"),t("button",{class:"button-close",onClick:e=>this.removeSelectedFile(e),title:"Remover arquivo"},t("ez-icon",{iconName:"close"}))):t(p,null,t("ez-icon",{iconName:"anexo"}),t("span",{class:"ez-text ez-text--primary ez-text--medium"},"Arraste e solte ou clique para adicionar arquivos"))),t("input",{ref:e=>this._fileInput=e,type:"file",accept:"image/*",style:{display:"none"},onChange:e=>this.handleFileChange(e)})),!!this.messageError&&t("span",{class:"text-error"},this.messageError))))))}};I.style=L;export{f as ez_link_builder,x as ez_rich_toolbar,C as ez_rich_toolbar_arrows,E as ez_rich_toolbar_configs,k as ez_rich_toolbar_letters,I as ez_simple_image_uploader};

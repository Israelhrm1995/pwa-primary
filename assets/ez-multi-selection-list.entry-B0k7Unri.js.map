{"version":3,"file":"ez-multi-selection-list.entry-B0k7Unri.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-multi-selection-list.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, F as Fragment, H as Host } from './index-5a720e56.js';\nimport { i as initI18n } from './index-b623906e.js';\nimport { ArrayUtils } from '@sankhyalabs/core';\n\nconst ezMultiSelectionListCss = \".sc-ez-multi-selection-list-h{--ez-check--outter-gap:0px;--ez-multi-selection-default-height:322px;display:block;width:304px;height:var(--ez-multi-selection-default-height);min-height:fit-content;max-height:calc(100vh - 350px)}.multi-selection__input.sc-ez-multi-selection-list{margin-bottom:var(--space--2xs, 8px)}.multi-selection__content-options.sc-ez-multi-selection-list{position:relative;left:-4px}.multi-selection__select-all.sc-ez-multi-selection-list{height:var(--space--xl);margin:0 var(--space--small, 6px)}.multi-selection__list.sc-ez-multi-selection-list{max-height:calc(100vh - 435px);overflow-y:auto;overflow-x:clip}.multi-selection__list.sc-ez-multi-selection-list::-webkit-scrollbar{width:var(--space--small);min-width:var(--space--small);max-width:var(--space--small)}\";\n\nvar ViewScenarios;\n(function (ViewScenarios) {\n  ViewScenarios[\"DATASOURCE_RESULTS\"] = \"DATASOURCE_RESULTS\";\n  ViewScenarios[\"DATASOURCE_RESULTS_EMPTY\"] = \"DATASOURCE_RESULTS_EMPTY\";\n  ViewScenarios[\"DATASOURCE_INIT\"] = \"DATASOURCE_INIT\";\n  ViewScenarios[\"OPTIONS_EMPTY\"] = \"OPTIONS_EMPTY\";\n  ViewScenarios[\"OPTIONS\"] = \"OPTIONS\";\n})(ViewScenarios || (ViewScenarios = {}));\nconst EzMuiltiSelectionList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.changeFilteredOptions = createEvent(this, \"changeFilteredOptions\", 7);\n    this.columnName = undefined;\n    this.dataSource = undefined;\n    this.useOptions = false;\n    this.options = undefined;\n    this.isTextSearch = false;\n    this.filteredOptions = undefined;\n    this.displayOptions = undefined;\n    this.viewScenario = undefined;\n    this.displayOptionToCheckAllItems = true;\n  }\n  async componentWillLoad() {\n    this.i18n = await initI18n();\n  }\n  async clearFilteredOptions() {\n    this.setInitialScenario();\n    this.filteredOptions = [];\n    if (this.searchInput) {\n      this.searchInput.value = '';\n    }\n    if (this.filterInput) {\n      this.filterInput.value = '';\n    }\n  }\n  onChangeUseOptions() {\n    this.setInitialScenario();\n  }\n  onChangeOptions() {\n    if (this.options) {\n      this.filteredOptions = this.ordenationByCheckStateAndAlphabetically(this.options);\n    }\n    this.checkInput && this.changeCheckAllValeuFromFilteredOptions();\n    this.setInitialScenario();\n  }\n  onChangeFilteredOptions(optionsListUpdated) {\n    this.displayOptions = this.filteredOptions;\n    this.displayOptionToCheckAllItems = this.filteredOptions.length > 1;\n    this.checkInput && this.changeCheckAllValeuFromFilteredOptions();\n    this.changeFilteredOptions.emit(optionsListUpdated);\n  }\n  componentDidRender() {\n    this.changeCheckAllValeuFromFilteredOptions();\n  }\n  ordenationByCheckStateAndAlphabetically(filteredOptions) {\n    const listWithSelectChecked = [];\n    const listWithNotSelectChecked = [];\n    let emptyElement;\n    filteredOptions.forEach(item => {\n      if (item.value == undefined || item.label === \"\") {\n        emptyElement = Object.assign(Object.assign({}, item), { label: this.i18n(\"ez-multi-selection-list.empty\") });\n      }\n      else {\n        (item.check ? listWithSelectChecked.push(item) : listWithNotSelectChecked.push(item));\n      }\n    });\n    return (emptyElement == undefined ? [] : [emptyElement])\n      .concat(this.dataSource == undefined ? ArrayUtils.sortAlphabetically(listWithSelectChecked) : this.dataSource.sortItems(this.columnName, listWithSelectChecked))\n      .concat(this.dataSource == undefined ? ArrayUtils.sortAlphabetically(listWithNotSelectChecked) : this.dataSource.sortItems(this.columnName, listWithNotSelectChecked));\n  }\n  changeCheckAllValeuFromFilteredOptions() {\n    var _a, _b, _c, _d;\n    const selectAll = (_a = this.filteredOptions) === null || _a === void 0 ? void 0 : _a.every(item => item.check === true);\n    const notSelectAll = (_b = this.filteredOptions) === null || _b === void 0 ? void 0 : _b.every(item => item.check === false);\n    const selectIndeterminated = ((_c = this.filteredOptions) === null || _c === void 0 ? void 0 : _c.some(item => item.check === false)) && ((_d = this.filteredOptions) === null || _d === void 0 ? void 0 : _d.some(item => item.check === true)) && (!selectAll || !notSelectAll);\n    if (this.checkInput && selectAll) {\n      this.checkInput.indeterminate = false;\n      this.checkInput.value = true;\n      return;\n    }\n    if (this.checkInput && selectIndeterminated) {\n      this.checkInput.indeterminate = true;\n      this.checkInput.value = false;\n      return;\n    }\n    if (this.checkInput && notSelectAll) {\n      this.checkInput.indeterminate = false;\n      this.checkInput.value = false;\n      return;\n    }\n  }\n  setInitialScenario() {\n    if (this.useOptions) {\n      this.viewScenario = ViewScenarios.OPTIONS;\n      this.changeCheckAllValeuFromFilteredOptions();\n      return;\n    }\n    this.viewScenario = this.options && this.options.length > 0 ? ViewScenarios.DATASOURCE_RESULTS : ViewScenarios.DATASOURCE_INIT;\n  }\n  async searchWithDataSource(searchArgument, fieldName) {\n    const { argument, mode } = searchArgument;\n    if (mode !== 'PRELOAD' && fieldName) {\n      return this.dataSource.fetchData(argument, fieldName);\n    }\n  }\n  handleSearchOnDataSource(event) {\n    var _a;\n    const optionsToSort = (_a = this.filteredOptions) !== null && _a !== void 0 ? _a : [];\n    if (event.detail && !optionsToSort.some(item => item.value == event.detail.value)) {\n      this.filteredOptions = this.ordenationByCheckStateAndAlphabetically([...optionsToSort, event.detail]);\n    }\n    this.viewScenario = ViewScenarios.DATASOURCE_RESULTS;\n    this.searchInput.value = \"\";\n  }\n  handleRemoveItemFromOptions(item) {\n    this.filteredOptions = this.ordenationByCheckStateAndAlphabetically(this.filteredOptions.filter(i => i.value !== item.value));\n    if (this.filteredOptions.length === 0) {\n      this.viewScenario = ViewScenarios.DATASOURCE_INIT;\n    }\n    if (this.searchInput) {\n      this.searchInput.value = '';\n    }\n  }\n  handleSearchOnOption(event) {\n    if (event.detail) {\n      this.displayOptions = ArrayUtils.applyStringFilter(event.detail, this.filteredOptions, true);\n      this.viewScenario = this.displayOptions.length === 0 ? ViewScenarios.OPTIONS_EMPTY : ViewScenarios.OPTIONS;\n      return;\n    }\n    this.displayOptions = this.filteredOptions;\n    this.viewScenario = ViewScenarios.OPTIONS;\n  }\n  handleChangeSelectAllItems(event) {\n    this.filteredOptions = this.ordenationByCheckStateAndAlphabetically([\n      ...this.filteredOptions.map(item => {\n        item.check = !!event.detail;\n        return item;\n      }),\n    ]);\n  }\n  handleChangeSelectedItem(event) {\n    const { detail: itemCheckSelected } = event;\n    const itemSelected = this.filteredOptions.find(item => item.label === itemCheckSelected.label);\n    itemSelected.check = itemCheckSelected.check;\n  }\n  buildViewList(hasDelete) {\n    return (h(Fragment, null, this.displayOptionToCheckAllItems && (h(\"ez-check\", { ref: (element) => (this.checkInput = element), label: this.i18n(\"ez-multi-selection-list.selectAll\"), class: \"multi-selection__select-all\", onEzChange: this.handleChangeSelectAllItems.bind(this) })), h(\"ez-list\", { class: \"multi-selection__list\", dataSource: this.displayOptions, listMode: \"check\", hoverFeedback: true, onEzCheckChange: this.handleChangeSelectedItem.bind(this), itemSlotBuilder: hasDelete ? this.buildDeleteIconSlot.bind(this) : null })));\n  }\n  buildDeleteIconSlot(item) {\n    return h(\"ez-icon\", { style: { cursor: 'pointer' }, iconName: \"delete\", onClick: () => this.handleRemoveItemFromOptions(item) });\n  }\n  buildInitViewWithDataSource() {\n    return h(\"multi-selection-box-message\", { message: this.i18n(\"ez-multi-selection-list.initMessage\") });\n  }\n  buildViewEmptyResults() {\n    return h(\"multi-selection-box-message\", { message: this.i18n(\"ez-multi-selection-list.emptyResults\") });\n  }\n  scenarioToDisplay(view) {\n    const scenarios = {\n      [ViewScenarios.DATASOURCE_INIT]: () => this.buildInitViewWithDataSource(),\n      [ViewScenarios.DATASOURCE_RESULTS]: () => this.buildViewList(true),\n      [ViewScenarios.DATASOURCE_RESULTS_EMPTY]: () => this.buildViewEmptyResults(),\n      [ViewScenarios.OPTIONS_EMPTY]: () => this.buildViewEmptyResults(),\n      [ViewScenarios.OPTIONS]: () => this.buildViewList(false),\n    };\n    const scenarioBuilder = scenarios[view];\n    return scenarioBuilder ? scenarioBuilder() : undefined;\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: \"multi-selection\" }, this.useOptions ? (h(\"ez-filter-input\", { ref: (element) => (this.filterInput = element), label: this.i18n(\"ez-multi-selection-list.search\"), onEzChange: this.handleSearchOnOption.bind(this) })) : (h(\"ez-search\", { class: \"multi-selection__input\", label: this.i18n(\"ez-multi-selection-list.search\"), ref: (element) => (this.searchInput = element), suppressEmptyOption: true, showOptionValue: false, showSelectedValue: false, optionLoader: (search) => this.searchWithDataSource(search, this.columnName), onEzChange: this.handleSearchOnDataSource.bind(this), isTextSearch: this.isTextSearch })), h(\"ez-scroll\", { class: \"multi-selection__content-options\" }, this.scenarioToDisplay(this.viewScenario)))));\n  }\n  static get watchers() { return {\n    \"useOptions\": [\"onChangeUseOptions\"],\n    \"options\": [\"onChangeOptions\"],\n    \"filteredOptions\": [\"onChangeFilteredOptions\"]\n  }; }\n};\nEzMuiltiSelectionList.style = ezMultiSelectionListCss;\n\nexport { EzMuiltiSelectionList as ez_multi_selection_list };\n"],"names":["ezMultiSelectionListCss","ViewScenarios","EzMuiltiSelectionList","hostRef","registerInstance","createEvent","initI18n","optionsListUpdated","filteredOptions","listWithSelectChecked","listWithNotSelectChecked","emptyElement","item","ArrayUtils","_a","_b","_c","_d","selectAll","notSelectAll","selectIndeterminated","searchArgument","fieldName","argument","mode","event","optionsToSort","i","itemCheckSelected","itemSelected","hasDelete","h","Fragment","element","view","scenarioBuilder","Host","search"],"mappings":"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","x_google_ignoreList":[0]}
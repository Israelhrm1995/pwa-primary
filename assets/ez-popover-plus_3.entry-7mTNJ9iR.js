import{b as n,d as l,e as s,k as d,i as p}from"./index-DA6RLjux.js";import{S as m}from"./dataUnitInMemoryLoader-BjgoPaoq.js";import{a as h,r as c}from"./searchFormatters-8229207e-CYLc1YSr.js";const v=":host{display:none}",u=class{constructor(e){n(this,e),this.ezVisibilityChange=l(this,"ezVisibilityChange"),this.autoClose=!0,this.boxWidth="fit-content",this.opened=!1,this.overlayType="light",this.anchorElement=void 0,this.options={horizontalGap:0,verticalGap:0,fromRight:!1},this.useAnchorSize=!1,this.minWidth=150}async observeOpened(e){e&&!this._popOverCore&&this.renderPopoverCore(),this._popOverCore.opened=e}async updatePosition(e,t){var i;await((i=this._popOverCore)===null||i===void 0?void 0:i.updatePosition(e,t))}async show(e,t){this._popOverCore||this.renderPopoverCore(),await this._popOverCore.show(e,t)}async showUnder(e,t){this._popOverCore||this.renderPopoverCore(),await this._popOverCore.showUnder(e,t)}async hide(){var e;await((e=this._popOverCore)===null||e===void 0?void 0:e.hide())}async setOptions(e){var t;await((t=this._popOverCore)===null||t===void 0?void 0:t.setOptions(e))}async setAnchorElement(e){var t;await((t=this._popOverCore)===null||t===void 0?void 0:t.setAnchorElement(e)),this.anchorElement=e}getFirstElement(e){return Array.isArray(e)&&e.length?e[0]:!Array.isArray(e)&&e.item?e.item(0):null}renderPopoverCore(){var e;this._popOverCore=document.createElement("ez-popover-core"),this._popOverCore.opened=this.opened,this._popOverCore.anchorElement=this.anchorElement,this._popOverCore.autoClose=this.autoClose,this._popOverCore.boxWidth=this.boxWidth,this._popOverCore.overlayType=this.overlayType,this._popOverCore.options=this.options,this._popOverCore.useAnchorSize=this.useAnchorSize,this._popOverCore.minWidth=this.minWidth,this._popOverCore.addEventListener("ezVisibilityChange",({detail:o})=>{this.ezVisibilityChange.emit(o),this.opened=o});const t=this.getFirstElement(this._host.children);t?this._popOverCore.appendChild(t):console.warn("O slot do popover está vazio. Adicione conteúdo ao slot para exibição correta.");const i=document.body.querySelector("#root"),r=this.getFirstElement(document.body.getElementsByTagName("div"));((e=i??r)!==null&&e!==void 0?e:document.body).appendChild(this._popOverCore)}render(){return s(d,null,s("slot",null))}get _host(){return p(this)}static get watchers(){return{opened:["observeOpened"]}}};u.style=v;const g=".multi-selection__message{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;min-height:320px;text-align:center}.multi-selection__text-message{margin-top:-30px;font-family:var(--font-pattern);font-size:var(--text--meduim);padding:var(--space-xs);color:var(--text--primary)}",b=class{constructor(e){n(this,e),this.message=void 0}render(){return s("div",{class:"multi-selection__message"},s("span",{class:"multi-selection__text-message"},this.message))}};b.style=g;const _=":host{--ez-search__list-title--primary:var(--title--primary, #2B3A54);--ez-search__list-text--primary:var(--text--primary, #626e82);--ez-search__list-height:calc(var(--ez-search--font-size) + var(--ez-search--space--medium) + 4px);--ez-search__list-min-width:64px;--ez-search__scrollbar--color-default:var(--scrollbar--default, #626e82);--ez-search__scrollbar--color-background:var(--scrollbar--background, #E5EAF0);--ez-search__scrollbar--color-hover:var(--scrollbar--hover, #2B3A54);--ez-search__scrollbar--color-clicked:var(--scrollbar--clicked, #a2abb9);--ez-search__scrollbar--border-radius:var(--border--radius-small, 6px);--ez-search__scrollbar--width:var(--space--small, 6px);--ez-search--border-radius-small:var(--border--radius-small, 6px);--ez-search--font-size:var(--text--medium, 14px);--ez-search--font-family:var(--font-pattern, Arial);--ez-search--font-weight--large:var(--text-weight--large, 500);--ez-search--font-weight--medium:var(--text-weight--medium, 400);--ez-search--background-medium:var(--background--medium, #f0f3f7);--ez-search--line-height:calc(var(--text--medium, 14px) + 4px)}.list-options{position:relative;z-index:var(--more-visible, 2);margin:var(--space--small) 0px;padding:0px;padding-inline-start:0px;box-sizing:border-box;width:100%;height:100%;max-height:350px;min-width:150px;display:flex;flex-direction:column;scroll-behavior:smooth;overflow-y:auto;overflow-x:hidden;scrollbar-width:thin;scrollbar-color:var(--ez-search__scrollbar--color-clicked) var(--ez-search__scrollbar--color-background)}.list-options::-webkit-scrollbar{background-color:var(--scrollbar--background);width:var(--space--small);max-width:var(--space--small);min-width:var(--space--small);height:var(--space--small);max-height:var(--space--small);min-height:var(--space--small)}.list-options::-webkit-scrollbar-track{background-color:var(--ez-search__scrollbar--color-background);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb{background-color:var(--ez-search__scrollbar--color-default);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb:vertical:hover,.list-options::-webkit-scrollbar-thumb:horizontal:hover{background-color:var(--ez-search__scrollbar--color-hover)}.list-options::-webkit-scrollbar-thumb:vertical:active,.list-options::-webkit-scrollbar-thumb:horizontal:active{background-color:var(--ez-search__scrollbar--color-clicked)}.message{text-align:center;display:flex;justify-content:center;align-items:center;list-style-type:none;margin:var(--space--medium) 0px;min-height:var(--ez-search__list-height)}.message__no-result{color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size)}.message__loading{border-radius:50%;width:14px;height:14px;-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border:3px solid var(--ez-search__list-title--primary);border-top:3px solid transparent}.item__value,.item__label{flex-basis:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size);line-height:var(--ez-search--line-height)}.item__label{font-weight:var(--ez-search--font-weight--medium)}.item__label--bold{font-weight:var(--ez-search--font-weight--large)}.item__value{text-align:center;color:var(--ez-search__list-text--primary);font-weight:var(--ez-search--font-weight--large)}.item__value--hidden{visibility:hidden;position:absolute;white-space:nowrap;z-index:-1;top:0;left:0}.item__label{text-align:left}.item__list>li:hover{background-color:var(--ez-search--background-medium)}.item{display:flex;align-items:center;width:100%;box-sizing:border-box;list-style-type:none;cursor:pointer;border-radius:var(--ez-search--border-radius-small);gap:var(--space--small, 6px)}.preselected{background-color:var(--background--medium)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@supports not (scrollbar-width: thin){.item{padding-right:8px}}",f=class{constructor(e){n(this,e),this.changeValue=l(this,"changeValue"),this.changePreSelection=l(this,"changePreSelection"),this._startHighlightTag="<span class='card-item__highlight'>",this._endHighlightTag="</span>",this.MAX_HEIGHT=350,this.HEADER_MENU_HEIGHT=60,this.showLoading=void 0,this.visibleOptions=[],this.textEmptyList=void 0,this.canShowListOptions=void 0,this.value=void 0,this.showOptionValue=!0,this.preSelection=void 0}async nextOption(){const e=this.preSelection===void 0?0:Math.min(this.preSelection+1,this.visibleOptions.length-1);this.changePreSelection.emit(e),this.scrollToOption(this.visibleOptions[e])}async previousOption(){const e=this.preSelection===void 0?0:Math.max(this.preSelection-1,0);this.changePreSelection.emit(e),this.scrollToOption(this.visibleOptions[e])}selectOption(e){const t=Object.assign(Object.assign({},e),{value:h(e==null?void 0:e.value),label:h(e==null?void 0:e.label)}),i=Object.assign(Object.assign({},t),{value:c(t==null?void 0:t.value),label:c(t==null?void 0:t.label)});this.changeValue.emit(i)}createOption(e){let{key:t,title:i}=e;const r=new RegExp(this._startHighlightTag,"g"),a=new RegExp(this._endHighlightTag,"g");i=m.decodeHtmlEntities(i);const o={value:t==null?void 0:t.replace(r,"").replace(a,""),label:i==null?void 0:i.replace(r,"").replace(a,"")};this.selectOption(o)}scrollToOption(e){window.requestAnimationFrame(()=>{const t=e!=null&&e.value?this._optionsList.querySelector(`div#item_${e.value.replace(/([ #;&,.+*~':"!^$[\]()=<>|/\\])/g,"\\$1")}`):void 0;t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})})}buildItem(e,t){e.label=e.label||e.value;const i={key:e.value,title:e.label,details:e.details};return s("div",{style:{height:"100%"},class:t===this.preSelection?"item preselected":"item",id:`item_${e.value}`,onMouseDown:()=>this.createOption(i),onMouseOver:()=>this.changePreSelection.emit(t)},s("ez-card-item",{item:i,compacted:!0,enableKey:this.showOptionValue}))}componentDidLoad(){this._optionsList&&(this._optionsList.style.maxHeight=`${this.MAX_HEIGHT}px`)}componentDidUpdate(){if(this._optionsList){const e=this._optionsList.getBoundingClientRect();window.innerHeight-e.bottom<0&&this.adjustMaxHeight(e)}}adjustMaxHeight(e){if(this._optionsList){const t=e.top-this.HEADER_MENU_HEIGHT,i=this.MAX_HEIGHT,r=Math.min(t,i);this._optionsList.style.maxHeight=`${r}px`}}cleanEmptyObjectArray(e){return e.filter(t=>Object.values(t).some(i=>i!==void 0))}render(){return s(d,null,s("ul",{class:"list-options",ref:e=>this._optionsList=e},!this.showLoading&&this.cleanEmptyObjectArray(this.visibleOptions).length===0&&s("div",{class:"message"},s("span",{class:"message__no-result"},this.textEmptyList)),this.showLoading&&s("div",{class:"message"},s("div",{class:"message__loading"})),this.canShowListOptions&&this.cleanEmptyObjectArray(this.visibleOptions).map((e,t)=>this.buildItem(e,t))))}};f.style=_;export{u as ez_popover_plus,b as multi_selection_box_message,f as search_list};

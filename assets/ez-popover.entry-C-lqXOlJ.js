import{b as c,d,e as a,k as f,i as p}from"./index-CHxCopeG.js";import{F as h}from"./dataUnitInMemoryLoader-CwDmnNwL.js";const u=":host{--ez-popover__box--border-radius:var(--border--radius-medium, 12px);--ez-popover__box--box-shadow:var(--shadow, 0px 0px 16px 0px #000);--ez-popover__box--background-color:var(--background--xlight, #fff);--ez-popover__box--z-index:var(--most-visible, 3);position:relative;display:flex;user-select:none}.popover__box{z-index:var(--ez-popover__box--z-index);display:flex;flex-direction:column;height:fit-content;background-color:var(--ez-popover__box--background-color);border-radius:var(--ez-popover__box--border-radius);box-shadow:var(--ez-popover__box--box-shadow)}.popover__box--fit-content{width:fit-content}.popover__box--full-width{width:100%}",b=class{constructor(e){c(this,e),this.ezVisibilityChange=d(this,"ezVisibilityChange"),this._firstRender=!0,this.innerClickTest=(t,s,o)=>{const n=[t];this.innerElement&&(typeof this.innerElement=="string"?n.push(document.querySelector(`#${this.innerElement}`)):this.innerElement.forEach(i=>{n.push(document.querySelector(`#${i}`))}));const l=(o==null?void 0:o.composedPath())||[];for(var r=0;r<n.length;r++){let i=n[r];if(i!=null&&(l.includes(i)||i.contains(s)||o&&"nodeType"in(o==null?void 0:o.target)&&i.contains(o.target)||i.shadowRoot&&i.shadowRoot.contains(s)||(i=this._host,i.lastElementChild.shadowRoot?i.lastElementChild.shadowRoot.contains(s):i.contains(s))))return!0}return!1},this.backClickListener=()=>{this.ezVisibilityChange.emit(!1)},this.autoClose=!0,this.boxWidth="fit-content",this.opened=void 0,this.innerElement=void 0,this.overlayType="light"}observeOpened(e,t){e!=t&&(t?this.hide():this.show(),this.ezVisibilityChange.emit(e))}async updatePosition(e,t){const s={autoClose:this.autoClose,top:e,left:t,innerClickTest:this.innerClickTest,backClickListener:this.backClickListener};h.updateFloatPosition(this._box,this._container,s)}async show(e,t){this.float({top:e,left:t})}async showUnder(e,t){if(e&&this._host)this.float(this.calculatePosition(e,Object.assign({verticalGap:0,horizontalGap:0,fromRight:!1},t)));else{const s=t!=null&&t.verticalGap?`${t.verticalGap}px`:void 0,o=t!=null&&t.horizontalGap?`${t.horizontalGap}px`:void 0;this.show(s,o)}}calculatePosition(e,t){const s=this._host.getBoundingClientRect(),o=e.getBoundingClientRect(),n=o.bottom-s.y,l=t.fromRight?s.right-o.right:o.x-s.x,r=`${n+t.verticalGap}px`,i=`${l+t.horizontalGap}px`;return{top:r,left:t.fromRight?"":i,right:t.fromRight?i:""}}float(e){this._box.style.top="",this._box.style.left="",this._box.style.right="";const t=this.overlayType!=="none",s=`ez-scrim ez-scrim--${this.overlayType}`;let o=Object.assign(Object.assign({},e),{autoClose:this.autoClose,innerClickTest:this.innerClickTest,backClickListener:this.backClickListener});t&&(o=Object.assign(Object.assign({},o),{autoClose:!0,useOverlay:t,overlayClassName:s})),this._floatingID=h.float(this._box,this._container,o),this.opened=!0}async hide(){this._floatingID!==void 0&&(h.close(this._floatingID),this._floatingID=void 0,this.opened=!1)}componentDidRender(){this._firstRender&&(this._box.remove(),this._firstRender=!1)}render(){return a(f,null,a("section",{ref:e=>this._container=e},a("div",{class:`popover__box ${this.boxWidth==="fit-content"?"popover__box--fit-content":"popover__box--full-width"}`,ref:e=>this._box=e},a("slot",null))))}get _host(){return p(this)}static get watchers(){return{opened:["observeOpened"]}}};b.style=u;export{b as ez_popover};
//# sourceMappingURL=ez-popover.entry-C-lqXOlJ.js.map

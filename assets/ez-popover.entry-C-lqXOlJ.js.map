{"version":3,"file":"ez-popover.entry-C-lqXOlJ.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-popover.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-baa5e267.js';\nimport { FloatingManager } from '@sankhyalabs/core';\n\nconst ezPopoverCss = \":host{--ez-popover__box--border-radius:var(--border--radius-medium, 12px);--ez-popover__box--box-shadow:var(--shadow, 0px 0px 16px 0px #000);--ez-popover__box--background-color:var(--background--xlight, #fff);--ez-popover__box--z-index:var(--most-visible, 3);position:relative;display:flex;user-select:none}.popover__box{z-index:var(--ez-popover__box--z-index);display:flex;flex-direction:column;height:fit-content;background-color:var(--ez-popover__box--background-color);border-radius:var(--ez-popover__box--border-radius);box-shadow:var(--ez-popover__box--box-shadow)}.popover__box--fit-content{width:fit-content}.popover__box--full-width{width:100%}\";\n\nconst EzPopover = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ezVisibilityChange = createEvent(this, \"ezVisibilityChange\", 7);\n    this._firstRender = true;\n    this.innerClickTest = (_popOvercontainer, node, eventOrigin) => {\n      const innerContainers = [_popOvercontainer];\n      if (this.innerElement) {\n        if (typeof (this.innerElement) == \"string\") {\n          innerContainers.push(document.querySelector(`#${this.innerElement}`));\n        }\n        else {\n          this.innerElement.forEach(comp => {\n            innerContainers.push(document.querySelector(`#${comp}`));\n          });\n        }\n      }\n      const eventPath = (eventOrigin === null || eventOrigin === void 0 ? void 0 : eventOrigin.composedPath()) || [];\n      for (var i = 0; i < innerContainers.length; i++) {\n        let _container = innerContainers[i];\n        if (_container != undefined) {\n          if (eventPath.includes(_container)) {\n            return true;\n          }\n          if (_container.contains(node)) {\n            return true;\n          }\n          if (eventOrigin && \"nodeType\" in (eventOrigin === null || eventOrigin === void 0 ? void 0 : eventOrigin.target) && _container.contains(eventOrigin.target)) {\n            return true;\n          }\n          if (_container.shadowRoot && _container.shadowRoot.contains(node)) {\n            return true;\n          }\n          _container = this._host;\n          if (!_container.lastElementChild.shadowRoot ? _container.contains(node) : _container.lastElementChild.shadowRoot.contains(node)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    this.backClickListener = () => {\n      this.ezVisibilityChange.emit(false);\n    };\n    this.autoClose = true;\n    this.boxWidth = \"fit-content\";\n    this.opened = undefined;\n    this.innerElement = undefined;\n    this.overlayType = \"light\";\n  }\n  observeOpened(newValue, oldValue) {\n    if (newValue != oldValue) {\n      if (oldValue) {\n        this.hide();\n      }\n      else {\n        this.show();\n      }\n      this.ezVisibilityChange.emit(newValue);\n    }\n  }\n  /**\n   * Atualiza a posição do popover.\n   */\n  async updatePosition(top, left) {\n    const floatingOptions = {\n      autoClose: this.autoClose,\n      top,\n      left,\n      innerClickTest: this.innerClickTest,\n      backClickListener: this.backClickListener\n    };\n    FloatingManager.updateFloatPosition(this._box, this._container, floatingOptions);\n  }\n  /**\n   * Exibe o ez-popover.\n   */\n  async show(top, left) {\n    this.float({ top, left });\n  }\n  /**\n   * Ancora a exibição do popOver a um elemento HTML.\n   */\n  async showUnder(element, options) {\n    if (element && this._host) {\n      this.float(this.calculatePosition(element, Object.assign({ verticalGap: 0, horizontalGap: 0, fromRight: false }, options)));\n    }\n    else {\n      const top = (options === null || options === void 0 ? void 0 : options.verticalGap) ? `${options.verticalGap}px` : undefined;\n      const left = (options === null || options === void 0 ? void 0 : options.horizontalGap) ? `${options.horizontalGap}px` : undefined;\n      this.show(top, left);\n    }\n  }\n  calculatePosition(element, options) {\n    const boxRect = this._host.getBoundingClientRect();\n    const anchorRect = element.getBoundingClientRect();\n    const yOffset = anchorRect.bottom - boxRect.y;\n    const xOffset = options.fromRight ? boxRect.right - anchorRect.right : anchorRect.x - boxRect.x;\n    const yProperty = `${yOffset + options.verticalGap}px`;\n    const xProperty = `${xOffset + options.horizontalGap}px`;\n    return {\n      top: yProperty,\n      left: options.fromRight ? \"\" : xProperty,\n      right: options.fromRight ? xProperty : \"\"\n    };\n  }\n  float(position) {\n    this._box.style.top = \"\";\n    this._box.style.left = \"\";\n    this._box.style.right = \"\";\n    const useOverlay = this.overlayType !== \"none\";\n    const overlayClassName = `ez-scrim ez-scrim--${this.overlayType}`;\n    let floatingOptions = Object.assign(Object.assign({}, position), { autoClose: this.autoClose, innerClickTest: this.innerClickTest, backClickListener: this.backClickListener });\n    if (useOverlay) {\n      floatingOptions = Object.assign(Object.assign({}, floatingOptions), { autoClose: true, useOverlay,\n        overlayClassName });\n    }\n    this._floatingID = FloatingManager.float(this._box, this._container, floatingOptions);\n    this.opened = true;\n  }\n  /**\n   * Oculta o ez-popover.\n   */\n  async hide() {\n    if (this._floatingID !== undefined) {\n      FloatingManager.close(this._floatingID);\n      this._floatingID = undefined;\n      this.opened = false;\n    }\n  }\n  componentDidRender() {\n    if (this._firstRender) {\n      this._box.remove();\n      this._firstRender = false;\n    }\n  }\n  render() {\n    return (h(Host, null, h(\"section\", { ref: el => this._container = el }, h(\"div\", { class: `popover__box ${this.boxWidth === \"fit-content\" ? \"popover__box--fit-content\" : \"popover__box--full-width\"}`, ref: el => this._box = el }, h(\"slot\", null)))));\n  }\n  get _host() { return getElement(this); }\n  static get watchers() { return {\n    \"opened\": [\"observeOpened\"]\n  }; }\n};\nEzPopover.style = ezPopoverCss;\n\nexport { EzPopover as ez_popover };\n"],"names":["ezPopoverCss","EzPopover","hostRef","registerInstance","createEvent","_popOvercontainer","node","eventOrigin","innerContainers","comp","eventPath","i","_container","newValue","oldValue","top","left","floatingOptions","FloatingManager","element","options","boxRect","anchorRect","yOffset","xOffset","yProperty","xProperty","position","useOverlay","overlayClassName","h","Host","el","getElement"],"mappings":"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","x_google_ignoreList":[0]}
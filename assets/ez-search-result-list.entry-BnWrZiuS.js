import{b as a,d as l,e as r,k as o}from"./index-BV2D5AMk.js";import{S as n}from"./dataUnitInMemoryLoader-BjgoPaoq.js";const c=":host{--ez-search__list-title--primary:var(--title--primary, #2B3A54);--ez-search__list-text--primary:var(--text--primary, #626e82);--ez-search__list-height:calc(var(--ez-search--font-size) + var(--ez-search--space--medium) + 4px);--ez-search__list-min-width:64px;--ez-search__scrollbar--color-default:var(--scrollbar--default, #626e82);--ez-search__scrollbar--color-background:var(--scrollbar--background, #E5EAF0);--ez-search__scrollbar--color-hover:var(--scrollbar--hover, #2B3A54);--ez-search__scrollbar--color-clicked:var(--scrollbar--clicked, #a2abb9);--ez-search__scrollbar--border-radius:var(--border--radius-small, 6px);--ez-search__scrollbar--width:var(--space--small, 6px);--ez-search--border-radius-small:var(--border--radius-small, 6px);--ez-search--font-size:var(--text--medium, 14px);--ez-search--font-family:var(--font-pattern, Arial);--ez-search--font-weight--large:var(--text-weight--large, 500);--ez-search--font-weight--medium:var(--text-weight--medium, 400);--ez-search--background-medium:var(--background--medium, #f0f3f7);--ez-search--line-height:calc(var(--text--medium, 14px) + 4px)}.list-options{position:relative;z-index:var(--more-visible, 2);margin:var(--space--small) 0px;padding:0px;padding-inline-start:0px;box-sizing:border-box;width:100%;height:100%;max-height:350px;min-width:150px;display:flex;flex-direction:column;scroll-behavior:smooth;overflow-y:auto;overflow-x:hidden;scrollbar-width:thin;scrollbar-color:var(--ez-search__scrollbar--color-clicked) var(--ez-search__scrollbar--color-background)}.list-options::-webkit-scrollbar{background-color:var(--scrollbar--background);width:var(--space--small);max-width:var(--space--small);min-width:var(--space--small);height:var(--space--small);max-height:var(--space--small);min-height:var(--space--small)}.list-options::-webkit-scrollbar-track{background-color:var(--ez-search__scrollbar--color-background);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb{background-color:var(--ez-search__scrollbar--color-default);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb:vertical:hover,.list-options::-webkit-scrollbar-thumb:horizontal:hover{background-color:var(--ez-search__scrollbar--color-hover)}.list-options::-webkit-scrollbar-thumb:vertical:active,.list-options::-webkit-scrollbar-thumb:horizontal:active{background-color:var(--ez-search__scrollbar--color-clicked)}.message{text-align:center;display:flex;justify-content:center;align-items:center;list-style-type:none;margin:var(--space--medium) 0px;min-height:var(--ez-search__list-height)}.message__no-result{color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size)}.loading__container{display:flex;flex-direction:column;margin:var(--space--small)}.item__value,.item__label{flex-basis:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size);line-height:var(--ez-search--line-height)}.item__label{font-weight:var(--ez-search--font-weight--medium)}.item__label--bold{font-weight:var(--ez-search--font-weight--large)}.item__value{text-align:center;color:var(--ez-search__list-text--primary);font-weight:var(--ez-search--font-weight--large)}.item__value--hidden{visibility:hidden;position:absolute;white-space:nowrap;z-index:-1;top:0;left:0}.item__label{text-align:left}.item__list>li:hover{background-color:var(--ez-search--background-medium)}.item{display:flex;align-items:center;width:100%;box-sizing:border-box;list-style-type:none;cursor:pointer;border-radius:var(--ez-search--border-radius-small);gap:var(--space--small, 6px)}.preselected{background-color:var(--background--medium)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@supports not (scrollbar-width: thin){.item{padding-right:8px}}",h=class{constructor(e){a(this,e),this.changeValue=l(this,"changeValue"),this._textEmptyList="Nenhum resultado encontrado",this._startHighlightTag="<span class='card-item__highlight'>",this._endHighlightTag="</span>",this.showLoading=void 0,this.visibleOptions=[],this.value=void 0,this.showOptionValue=!0,this._preSelection=void 0}observerVisivleOptions(e){e.length&&this.preSelectItemByIndex(0)}async nextOption(){const e=this._preSelection===void 0?0:Math.min(this._preSelection+1,this.visibleOptions.length-1);this.preSelectItemByIndex(e)}async previousOption(){const e=this._preSelection===void 0?0:Math.max(this._preSelection-1,0);this.preSelectItemByIndex(e)}preSelectItemByIndex(e){this._preSelection=e;const t=this.visibleOptions[e];this.scrollToOption(t)}selectOption(e){const t=Object.assign(Object.assign({},e),{value:e==null?void 0:e.value,label:e==null?void 0:e.label}),i=Object.assign(Object.assign({},t),{value:this.removeHighLight(t==null?void 0:t.value),label:this.removeHighLight(t==null?void 0:t.label)});this.changeValue.emit(i)}removeHighLight(e){if(!e||typeof e!="string")return e;const t=new RegExp(this._startHighlightTag,"g"),i=new RegExp(this._endHighlightTag,"g");return e.replace(t,"").replace(i,"")}createAndSelectOption(e){let{key:t,title:i}=e;t=String(t??""),i=n.decodeHtmlEntities(i);const s={value:this.removeHighLight(t),label:this.removeHighLight(i)};this.selectOption(s)}scrollToOption(e){!(e!=null&&e.value)||!this._optionsList||window.requestAnimationFrame(()=>{var t;const i=String((t=e==null?void 0:e.value)!==null&&t!==void 0?t:""),s=i?this._optionsList.querySelector(`div#item_${i.replace(/([ #;&,.+*~':"!^$[\]()=<>|/\\])/g,"\\$1")}`):void 0;s&&s.scrollIntoView({behavior:"smooth",block:"nearest"})})}buildItem(e,t){var i;e.label=e.label||e.value;const s={key:String((i=e.presentationValue)!==null&&i!==void 0?i:""),title:e.presentationLabel,details:e.details};return r("div",{style:{height:"100%"},class:t===this._preSelection?"item preselected":"item",id:`item_${e.value}`,onMouseDown:()=>this.createAndSelectOption(s),onMouseOver:()=>{this._preSelection=t}},r("ez-card-item",{item:s,compacted:!0,enableKey:this.showOptionValue}))}async selectCurrentItem(){this.selectOption(this.visibleOptions[this._preSelection])}async cancelSelection(){this.cancelPreselection()}cancelPreselection(){this._preSelection=void 0}canShowListOptions(){return!this.showLoading&&this.visibleOptions.length>0}render(){return r(o,null,r("ul",{class:"list-options",ref:e=>this._optionsList=e},!this.showLoading&&this.visibleOptions.length===0&&r("div",{class:"message"},r("span",{class:"message__no-result"},this._textEmptyList)),this.showLoading&&r("div",{class:"loading__container"},r("ez-skeleton",{count:4,height:"20px"})),this.canShowListOptions()&&this.visibleOptions.map((e,t)=>this.buildItem(e,t))))}static get watchers(){return{visibleOptions:["observerVisivleOptions"]}}};h.style=c;export{h as ez_search_result_list};

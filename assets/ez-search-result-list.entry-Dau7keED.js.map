{"version":3,"file":"ez-search-result-list.entry-Dau7keED.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-search-result-list.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host } from './index-baa5e267.js';\nimport { StringUtils } from '@sankhyalabs/core';\n\nconst ezSearchResultListCss = \":host{--ez-search__list-title--primary:var(--title--primary, #2B3A54);--ez-search__list-text--primary:var(--text--primary, #626e82);--ez-search__list-height:calc(var(--ez-search--font-size) + var(--ez-search--space--medium) + 4px);--ez-search__list-min-width:64px;--ez-search__scrollbar--color-default:var(--scrollbar--default, #626e82);--ez-search__scrollbar--color-background:var(--scrollbar--background, #E5EAF0);--ez-search__scrollbar--color-hover:var(--scrollbar--hover, #2B3A54);--ez-search__scrollbar--color-clicked:var(--scrollbar--clicked, #a2abb9);--ez-search__scrollbar--border-radius:var(--border--radius-small, 6px);--ez-search__scrollbar--width:var(--space--small, 6px);--ez-search--border-radius-small:var(--border--radius-small, 6px);--ez-search--font-size:var(--text--medium, 14px);--ez-search--font-family:var(--font-pattern, Arial);--ez-search--font-weight--large:var(--text-weight--large, 500);--ez-search--font-weight--medium:var(--text-weight--medium, 400);--ez-search--background-medium:var(--background--medium, #f0f3f7);--ez-search--line-height:calc(var(--text--medium, 14px) + 4px)}.list-options{position:relative;z-index:var(--more-visible, 2);margin:var(--space--small) 0px;padding:0px;padding-inline-start:0px;box-sizing:border-box;width:100%;height:100%;max-height:350px;min-width:150px;display:flex;flex-direction:column;scroll-behavior:smooth;overflow-y:auto;overflow-x:hidden;scrollbar-width:thin;scrollbar-color:var(--ez-search__scrollbar--color-clicked) var(--ez-search__scrollbar--color-background)}.list-options::-webkit-scrollbar{background-color:var(--scrollbar--background);width:var(--space--small);max-width:var(--space--small);min-width:var(--space--small);height:var(--space--small);max-height:var(--space--small);min-height:var(--space--small)}.list-options::-webkit-scrollbar-track{background-color:var(--ez-search__scrollbar--color-background);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb{background-color:var(--ez-search__scrollbar--color-default);border-radius:var(--ez-search__scrollbar--border-radius)}.list-options::-webkit-scrollbar-thumb:vertical:hover,.list-options::-webkit-scrollbar-thumb:horizontal:hover{background-color:var(--ez-search__scrollbar--color-hover)}.list-options::-webkit-scrollbar-thumb:vertical:active,.list-options::-webkit-scrollbar-thumb:horizontal:active{background-color:var(--ez-search__scrollbar--color-clicked)}.message{text-align:center;display:flex;justify-content:center;align-items:center;list-style-type:none;margin:var(--space--medium) 0px;min-height:var(--ez-search__list-height)}.message__no-result{color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size)}.loading__container{display:flex;flex-direction:column;margin:var(--space--small)}.item__value,.item__label{flex-basis:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ez-search__list-title--primary);font-family:var(--ez-search--font-family);font-size:var(--ez-search--font-size);line-height:var(--ez-search--line-height)}.item__label{font-weight:var(--ez-search--font-weight--medium)}.item__label--bold{font-weight:var(--ez-search--font-weight--large)}.item__value{text-align:center;color:var(--ez-search__list-text--primary);font-weight:var(--ez-search--font-weight--large)}.item__value--hidden{visibility:hidden;position:absolute;white-space:nowrap;z-index:-1;top:0;left:0}.item__label{text-align:left}.item__list>li:hover{background-color:var(--ez-search--background-medium)}.item{display:flex;align-items:center;width:100%;box-sizing:border-box;list-style-type:none;cursor:pointer;border-radius:var(--ez-search--border-radius-small);gap:var(--space--small, 6px)}.preselected{background-color:var(--background--medium)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@supports not (scrollbar-width: thin){.item{padding-right:8px}}\";\n\nconst EzSearchResultList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.changeValue = createEvent(this, \"changeValue\", 7);\n    this._textEmptyList = \"Nenhum resultado encontrado\";\n    this._startHighlightTag = \"<span class='card-item__highlight'>\";\n    this._endHighlightTag = \"</span>\";\n    this.showLoading = undefined;\n    this.visibleOptions = [];\n    this.value = undefined;\n    this.showOptionValue = true;\n    this._preSelection = undefined;\n  }\n  observerVisivleOptions(newValue) {\n    if (newValue.length) {\n      this.preSelectItemByIndex(0);\n    }\n  }\n  async nextOption() {\n    const newPreSelection = this._preSelection === undefined ? 0 : Math.min(this._preSelection + 1, this.visibleOptions.length - 1);\n    this.preSelectItemByIndex(newPreSelection);\n  }\n  async previousOption() {\n    const newPreSelection = this._preSelection === undefined ? 0 : Math.max(this._preSelection - 1, 0);\n    this.preSelectItemByIndex(newPreSelection);\n  }\n  preSelectItemByIndex(newIndex) {\n    this._preSelection = newIndex;\n    const option = this.visibleOptions[newIndex];\n    this.scrollToOption(option);\n  }\n  selectOption(newOption) {\n    const newOptionsReplaced = Object.assign(Object.assign({}, newOption), { value: newOption === null || newOption === void 0 ? void 0 : newOption.value, label: newOption === null || newOption === void 0 ? void 0 : newOption.label });\n    const newOptionsFormatted = Object.assign(Object.assign({}, newOptionsReplaced), { value: this.removeHighLight(newOptionsReplaced === null || newOptionsReplaced === void 0 ? void 0 : newOptionsReplaced.value), label: this.removeHighLight(newOptionsReplaced === null || newOptionsReplaced === void 0 ? void 0 : newOptionsReplaced.label) });\n    this.changeValue.emit(newOptionsFormatted);\n  }\n  removeHighLight(text) {\n    if (!text || typeof text !== 'string') {\n      return text;\n    }\n    const startHighlight = new RegExp(this._startHighlightTag, 'g');\n    const endHighlight = new RegExp(this._endHighlightTag, 'g');\n    return text.replace(startHighlight, '').replace(endHighlight, '');\n  }\n  createAndSelectOption(detail) {\n    let { key, title } = detail;\n    key = String(key !== null && key !== void 0 ? key : \"\");\n    title = StringUtils.decodeHtmlEntities(title);\n    const option = {\n      value: this.removeHighLight(key),\n      label: this.removeHighLight(title)\n    };\n    this.selectOption(option);\n  }\n  scrollToOption(opt) {\n    if (!(opt === null || opt === void 0 ? void 0 : opt.value) || !this._optionsList)\n      return;\n    window.requestAnimationFrame(() => {\n      var _a;\n      const currentValue = String((_a = opt === null || opt === void 0 ? void 0 : opt.value) !== null && _a !== void 0 ? _a : \"\");\n      const liElem = currentValue\n        ? this._optionsList.querySelector(`div#item_${currentValue.replace(/([ #;&,.+*~':\"!^$[\\]()=<>|/\\\\])/g, '\\\\$1')}`)\n        : undefined;\n      if (liElem) {\n        liElem.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n      }\n    });\n  }\n  buildItem(opt, index) {\n    var _a;\n    opt.label = opt.label || opt.value;\n    const card = {\n      key: String((_a = opt.presentationValue) !== null && _a !== void 0 ? _a : \"\"),\n      title: opt.presentationLabel,\n      details: opt.details\n    };\n    return h(\"div\", { style: { \"height\": \"100%\" }, class: index === this._preSelection ? \"item preselected\" : \"item\", id: `item_${opt.value}`, onMouseDown: () => this.createAndSelectOption(card), onMouseOver: () => { this._preSelection = index; } }, h(\"ez-card-item\", { item: card, compacted: true, enableKey: this.showOptionValue }));\n  }\n  async selectCurrentItem() {\n    this.selectOption(this.visibleOptions[this._preSelection]);\n  }\n  async cancelSelection() {\n    this.cancelPreselection();\n  }\n  cancelPreselection() {\n    this._preSelection = undefined;\n  }\n  canShowListOptions() {\n    return !this.showLoading && this.visibleOptions.length > 0;\n  }\n  render() {\n    return (h(Host, null, h(\"ul\", { class: \"list-options\", ref: elem => this._optionsList = elem }, !this.showLoading\n      && this.visibleOptions.length === 0\n      && h(\"div\", { class: \"message\" }, h(\"span\", { class: \"message__no-result\" }, this._textEmptyList)), this.showLoading && (h(\"div\", { class: \"loading__container\" }, h(\"ez-skeleton\", { count: 4, height: '20px' }))), this.canShowListOptions() && this.visibleOptions.map((opt, index) => this.buildItem(opt, index)))));\n  }\n  static get watchers() { return {\n    \"visibleOptions\": [\"observerVisivleOptions\"]\n  }; }\n};\nEzSearchResultList.style = ezSearchResultListCss;\n\nexport { EzSearchResultList as ez_search_result_list };\n"],"names":["ezSearchResultListCss","EzSearchResultList","hostRef","registerInstance","createEvent","newValue","newPreSelection","newIndex","option","newOption","newOptionsReplaced","newOptionsFormatted","text","startHighlight","endHighlight","detail","key","title","StringUtils","opt","_a","currentValue","liElem","index","card","h","Host","elem"],"mappings":"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","x_google_ignoreList":[0]}
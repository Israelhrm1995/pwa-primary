import{b as u,d as x,e as r,k as _,i as v}from"./index-BH6w_YlO.js";import{E as l}from"./dataUnitInMemoryLoader-CwDmnNwL.js";const f=":host{--text-area--width:100%;--text-area--border-radius:var(--border--radius-medium, 12px);--text-area--font-size:var(--text--medium, 14px);--text-area--font-family:var(--font-pattern, Arial);--text-area--font-weight:var(--text-weight--medium, 400);--text-area--color:var(--title--primary, #2B3A54);--text-area__input--background-color:var(--background--light, #FFFFFF);--text-area__input--border:var(--border--medium, 2px solid);--text-area__input--border-color:var(--color--strokes, #DCE0E8);--text-area__input--focus--border-color:var(--color--primary, #008561);--text-area__input--disabled--background-color:var(--background--medium, #F0F3F7);--text-area__input--disabled--color:var(--text--primary, #626E82);--text-area__input--disabled--border--color:var(--color--strokes, #DCE0E8);--text-area__input--error--border-color:var(--color-alert--error-800, #BD0025);--text-area__message_box--font-size:var(--text--small, 12px);--text-area__message_box--info--color:var(--color--success, #22085d);--text-area__message_box--error--color:var(--color-alert--error-800, #BD0025);--text-area__label--floating--top:6px;--text-area__label--padding-top:12px;--text-area__label--padding-left:14px;--text-area__label--padding-right:12px;--text-area__scrollbar--color-default:var(--scrollbar--default, #626e82);--text-area__scrollbar--color-background:var(--scrollbar--background, #E5EAF0);--text-area__scrollbar--color-hover:var(--scrollbar--hover, #2B3A54);--text-area__scrollbar--color-clicked:var(--scrollbar--clicked, #a2abb9);--text-area__scrollbar--border-radius:var(--border--radius-small, 6px);--text-area__scrollbar--width:var(--space--small, 6px);--ez-text-area__tooltip-icon--spacing:var(--space--large);--ez-text-area__tooltip-icon---width:var(--space--large);--ez-text-area__tooltip-icon---horizontal-margin:var(--space--medium, 12px);--ez-text-area__tooltip-icon---vertical-margin:10px;--ez-text-area__tooltip_icon--error--color:var(--color-alert--error-800, #BD0025);display:flex;flex-wrap:wrap;position:relative;width:var(--text-area--width)}textarea{display:flex;flex-direction:column;height:calc(100% - 16px);box-sizing:border-box;border:none;resize:none;width:100%;padding:0;background:none;min-height:42px;font-weight:var(--text-area--font-weight);font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);color:var(--text-area--color);margin-top:calc(var(--space--medium, 12px) + 4px);scrollbar-width:thin;scrollbar-color:var(--text-area__scrollbar--color-clicked) var(--text-area__scrollbar--color-background)}textarea:focus{outline:none}textarea:disabled{background-color:transparent;color:var(--text-area__input--disabled--color);border:var(--text-area__input--disabled--border);cursor:not-allowed}textarea::-webkit-scrollbar{background-color:var(--text-area__scrollbar--color-background);width:var(--text-area__scrollbar--width);max-width:var(--text-area__scrollbar--width);min-width:var(--text-area__scrollbar--width)}textarea::-webkit-scrollbar-thumb{background-color:var(--text-area__scrollbar--color-default);border-radius:var(--text-area__scrollbar--border-radius)}textarea::-webkit-scrollbar-track{background-color:var(--text-area__scrollbar--color-background);border-radius:var(--text-area__scrollbar--border-radius)}textarea::-webkit-scrollbar-thumb:vertical:hover,textarea::-webkit-scrollbar-thumb:horizontal:hover{background-color:var(--text-area__scrollbar--color-hover)}textarea::-webkit-scrollbar-thumb:vertical:active,textarea::-webkit-scrollbar-thumb:horizontal:active{background-color:var(--text-area__scrollbar--color-clicked)}.textarea{width:100%;min-height:42px;max-width:100%;box-sizing:border-box;padding-left:var(--space--medium);padding-right:var(--space--extra-small);border-radius:var(--text-area--border-radius);border:var(--text-area__input--border);border-color:var(--text-area__input--border-color);background-color:var(--text-area__input--background-color)}.textarea--disabled{border-radius:var(--text-area--border-radius);border:var(--text-area__input--border);border-color:var(--text-area__input--disabled--border--color);background-color:var(--text-area__input--disabled--background-color);cursor:not-allowed}.textarea--focus{border-color:var(--text-area__input--focus--border-color)}.textarea.hasError{color:var(--text-area--color);border-color:var(--text-area__input--error--border-color)}.message-box{min-height:16px;min-width:100%;margin-top:3px;line-height:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:var(--text-area--font-family);font-size:var(--text-area__message_box--font-size);color:var(--text-area__message_box--info--color)}.hasError{color:var(--text-area__message_box--error--color)}.textarea__label{box-sizing:border-box;position:absolute;z-index:var(--visible);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-transition:font-size .05s, top .05s;transition:font-size .05s, top .05s;width:calc(100% - var(--text-area__label--padding-right));left:var(--text-area--space--medium);font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color);top:var(--text-area__label--padding-top);left:var(--text-area__label--padding-left);padding-right:var(--text-area__label--padding-right)}.textarea__label--floated{font-family:var(--text-area--font-family);font-size:var(--text--extra-small);color:var(--text--primary);top:var(--text-area__label--floating--top)}.textarea__label--disabled{color:var(--text-area__input--disabled--color);cursor:not-allowed}.textarea--slim{margin-top:var(--space--small, 6px)}.textarea--slim::-webkit-input-placeholder{font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color)}.textarea--slim:-moz-placeholder{font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color)}.textarea--slim::-moz-placeholder{font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color)}.textarea--slim:-ms-input-placeholder{font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color)}.textarea--slim::placeholder{font-family:var(--text-area--font-family);font-size:var(--text-area--font-size);font-weight:var(--text-area--font-weight);color:var(--text-area--color)}.textarea--slim:disabled::-webkit-input-placeholder,.textarea--slim:disabled:-moz-placeholder,.textarea--slim:disabled::-moz-placeholder,.textarea--slim:disabled:-ms-input-placeholder,.textarea--slim:disabled::placeholder{color:var(--text-area__input--disabled--color);cursor:not-allowed}ez-icon.tooltip-icon.hasError{--ez-icon--color:var(--ez-text-area__tooltip_icon--error--color)}.input-container{display:flex;align-items:center}.textarea--resizable{resize:vertical;overflow:auto;min-height:42px}",m=class{constructor(e){u(this,e),this.ezChange=x(this,"ezChange"),this.LINE_HEIGHT=24,this.HEIGHT_RATIO=1.4,this.label=void 0,this.value=void 0,this.enabled=!0,this.errorMessage=void 0,this.rows=4,this.canShowError=!0,this.mode="regular",this.enableResize=!0,this.autoRows=!1,this.autoFocus=!1,this.alternativePlaceholder=void 0,this.forceLabelFloat=!1}observeErrorMessage(){var e,t,a,o;typeof this.errorMessage=="string"&&this.errorMessage!==""?((e=this._container)===null||e===void 0||e.classList.add("hasError"),(t=this._messageBoxElem)===null||t===void 0||t.classList.add("hasError")):((a=this._container)===null||a===void 0||a.classList.remove("hasError"),(o=this._messageBoxElem)===null||o===void 0||o.classList.remove("hasError"))}observeValue(e,t){this._inputElem&&e!=t&&(this.canChangeValue()&&(this._inputElem.value=this.value||""),this.adjustFloatingLabel(),this.errorMessage="",this.ezChange.emit(this.value))}observeMode(){this._initialRows==null&&(this._initialRows=this.rows>0?this.rows:void 0);const e=this._initialRows>0?this._initialRows:this.mode!="slim"?4:2;e!==this.rows&&(this.rows=e)}observeRows(){const e=this.rows>0?this.rows:this.mode!="slim"?4:2;e!==this.rows&&this.updateRows(e)}observeAutoRows(){var e,t;this.autoRows?((e=this._resizeObserver)===null||e===void 0||e.disconnect(),this.initializeResizeObserver()):(t=this._resizeObserver)===null||t===void 0||t.disconnect()}observeAlternativePlaceholder(e){this.forceLabelFloat=!!e}async appendTextToSelection(e){var t,a,o,i;const s=this._inputElem.selectionStart,n=this._inputElem.selectionEnd,d=(a=(t=this.value)===null||t===void 0?void 0:t.substring(0,s))!==null&&a!==void 0?a:"",h=(i=(o=this.value)===null||o===void 0?void 0:o.substring(n))!==null&&i!==void 0?i:"";this.value=`${d}${e}${h}`;const c=s+e.length,b=s===n?c:s;this._inputElem.setSelectionRange(b,c),await this.setFocus()}async setFocus(){this._inputElem.focus()}async setBlur(){this._inputElem.blur()}async isInvalid(){return typeof this.errorMessage=="string"&&this.errorMessage.trim()!==""}canChangeValue(){return this._inputElem&&(this.value||"")!==this._inputElem.value}adjustFloatingLabel(){if(!this.forceLabelFloat&&this.label&&this._labelElem){const e=this.value&&this.value.toString().length>0,t=this._labelElem.classList.contains("textarea__label--floated");e||this.isFocused()?t||this._labelElem.classList.add("textarea__label--floated"):t&&this._labelElem.classList.remove("textarea__label--floated")}}isFocused(){return this._hostElement.shadowRoot.activeElement!==null}updateRows(e){this.rows=e,this._initialRows=e}calculateMaxRows(){const e=this._hostElement.parentElement;if(!e)return;const t=Math.max((e==null?void 0:e.clientHeight)||0,this.LINE_HEIGHT);if(t>0){const a=Math.floor(t/this.LINE_HEIGHT*this.HEIGHT_RATIO);a!==this.rows&&this.updateRows(a)}}initializeResizeObserver(){if(!this.autoRows)return;const e=this._hostElement.parentElement;if(e){try{this._resizeObserver!=null&&this._resizeObserver.unobserve(e),this._resizeObserver=new ResizeObserver(this.calculateMaxRows.bind(this)),this._resizeObserver.observe(e)}catch(t){console.warn(t)}this.calculateMaxRows()}}handleFocusout(){this.adjustFloatingLabel(),this._container&&this._container.classList.contains("textarea--focus")&&this._container.classList.remove("textarea--focus")}handleChange(){this.canChangeValue()&&(this.value=this._inputElem.value)}handleFocus(){this.label&&this._labelElem&&!this._labelElem.classList.contains("textarea__label--floated")&&this._labelElem.classList.add("textarea__label--floated"),this._container&&!this._container.classList.contains("textarea--focus")&&this._container.classList.add("textarea--focus")}connectedCallback(){this.initializeResizeObserver()}disconnectedCallback(){var e;(e=this._resizeObserver)===null||e===void 0||e.disconnect()}buildPlaceholder(){return this.alternativePlaceholder?this.alternativePlaceholder:this.mode==="slim"&&this.label?this.label:""}buildLabelClass(){let e=this.enabled?"textarea__label":"textarea__label textarea__label--disabled";return this.errorMessage&&(e=e+" hasError"),this.forceLabelFloat&&(e=e+" textarea__label--floated"),e}renderErrorTooltip(){if(!(!this.canShowError||this.mode=="slim"||!this.errorMessage))return r("div",{class:"tooltip-container"},r("ez-tooltip",{type:"error",message:this.errorMessage},r("ez-icon",{class:`tooltip-icon ${this.errorMessage?"hasError":""}`,"data-element-id":l.getInternalIDInfo("tooltip-icon"),iconName:"alert-circle"})))}renderLabel(){return!this.label||this.mode=="slim"?null:r("label",{ref:e=>this._labelElem=e,class:this.buildLabelClass(),onClick:()=>this._inputElem.focus(),title:this.label},this.label)}renderTextArea(){return r("textarea",{onFocus:()=>this.handleFocus(),"data-element-id":l.getInternalIDInfo("input"),ref:e=>this._inputElem=e,value:this.value,disabled:!this.enabled,class:{"textarea--slim":this.mode==="slim"},placeholder:this.buildPlaceholder(),onInput:()=>this.handleChange(),onFocusout:()=>this.handleFocusout(),rows:this.rows})}componentDidLoad(){this.observeErrorMessage(),this.adjustFloatingLabel(),this.observeMode(),this.autoFocus&&requestAnimationFrame(()=>{this.setFocus()})}render(){return l.addIDInfoIfNotExists(this._hostElement,"input"),r(_,null,r("div",{class:`textarea ${this.enabled?"":"textarea--disabled"}`,ref:e=>this._container=e},this.renderLabel(),r("div",{class:`input-container ${this.enableResize?"textarea--resizable":""}`},this.renderTextArea(),this.renderErrorTooltip())))}get _hostElement(){return v(this)}static get watchers(){return{errorMessage:["observeErrorMessage"],value:["observeValue"],mode:["observeMode"],rows:["observeRows"],autoRows:["observeAutoRows"],alternativePlaceholder:["observeAlternativePlaceholder"]}}};m.style=f;export{m as ez_text_area};
//# sourceMappingURL=ez-text-area.entry-XfJwymw3.js.map

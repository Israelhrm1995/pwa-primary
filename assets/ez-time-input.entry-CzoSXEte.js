import{v as o,w as i,T as r,M as d,N as n,y as p,E as l,x as a,C as c,z as v}from"./index-C7RI_ets.js";import{C as m}from"./CSSVarsUtils-acba92d7-BCgqr3Ak.js";const _=":host{display:flex;flex-wrap:wrap;position:relative;width:100%}.time__input{height:100%}",g=class{constructor(e){o(this,e),this.ezChange=i(this,"ezChange"),this.ezStartChange=i(this,"ezStartChange"),this.ezCancelWaitingChange=i(this,"ezCancelWaitingChange"),this.label=void 0,this.value=void 0,this.enabled=!0,this.errorMessage=void 0,this.showSeconds=!1,this.mode="regular",this.canShowError=!0,this.autoFocus=!1,this.alternativePlaceholder=void 0}observeErrorMessage(){var e;this._textInput&&(this._textInput.errorMessage=this.errorMessage,!((e=this.errorMessage)===null||e===void 0)&&e.trim()||(this.prepareValue(this._viewValue),(this._textInput.value||"")!==this._viewValue&&(this._textInput.value=this._viewValue)))}observeShowSeconds(){this.showSeconds?this.prepareMask("##:##:##"):this.prepareMask("##:##")}observeValue(e,s){if(this._textInput&&e!=s){let t=this.validateValue(e);const h=this.validateValue(s);if(t!=h){this._viewValue=t==null?"":t.toString(),this.prepareValue(this._viewValue),this._viewValue&&!r.validateTime(this._viewValue,this.showSeconds)?(this.setError(this.i18n("ez-time-input.invalidTime")),t=void 0):this.setError("");const u=t===null?void 0:t;this.ezChange.emit(u)}}}prepareMask(e){this._maskFormatter==null?this._maskFormatter=new d(e):this._maskFormatter.mask=e}validateValue(e){return isNaN(e)||e===void 0?null:e}setError(e){this.errorMessage=e,this._textInput&&(e!=null&&e.trim())&&this.ezCancelWaitingChange.emit()}getViewValue(){return this._viewValue}prepareValue(e){try{this._viewValue=r.prepareValue(e,this.showSeconds),this._textInput&&this._textInput.value!==this._viewValue&&(this._textInput.value=this._viewValue)}catch(s){this.setError(s.message)}}async setFocus({selectText:e}){this._textInput.setFocus({selectText:e})}async setBlur(){this._textInput.setBlur()}async isInvalid(){return typeof this.errorMessage=="string"&&this.errorMessage.trim()!==""}handleBlur(){if(this._textInput){this._viewValue=this._textInput.value,this.prepareValue(this._viewValue);const e=n.stringToNumber(this._viewValue.replace(/\D/g,""));this.value=["string","number"].includes(typeof e)?e:null}}handleInput(){const e=this._textInput.value;if(!["string","number"].includes(typeof e))return;n.stringToNumber(e.replace(/\D/g,""))!==this.value&&this.ezStartChange.emit({waitmessage:"",blocking:!1})}async componentWillLoad(){this.i18n=await p(),this.observeShowSeconds(),this.value?this.prepareValue(this.value.toString()):this._viewValue&&this.prepareValue(this._viewValue)}componentDidLoad(){m.applyVarsTextInput(this._elem,this._textInput),this.autoFocus&&requestAnimationFrame(()=>{this.setFocus({selectText:!0})})}render(){return l.addIDInfoIfNotExists(this._elem,"input"),a(c,null,a("ez-text-input",{class:"time__input","data-element-id":l.getInternalIDInfo("textInput"),ref:e=>this._textInput=e,"data-slave-mode":"true",value:this._viewValue,enabled:this.enabled,label:this.label,restrict:"0123456789:",onBlur:()=>this.handleBlur(),onInput:()=>this.handleInput(),errorMessage:this.errorMessage,mode:this.mode,canShowError:this.canShowError,alternativePlaceholder:this.alternativePlaceholder},a("ez-icon",{slot:"leftIcon",iconName:"timer-outline"})))}static get assetsDirs(){return["../assets"]}get _elem(){return v(this)}static get watchers(){return{errorMessage:["observeErrorMessage"],showSeconds:["observeShowSeconds"],value:["observeValue"]}}};g.style=_;export{g as ez_time_input};
//# sourceMappingURL=ez-time-input.entry-CzoSXEte.js.map

{"version":3,"file":"ez-tooltip.entry-pARHEJlZ.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-tooltip.entry.js"],"sourcesContent":["import { r as registerInstance, h, H as Host, g as getElement } from './index-baa5e267.js';\nimport { c as computePosition, o as offset, f as flip, s as shift, a as arrow } from './floating-ui.dom.esm-5d3da819.js';\nimport { ElementIDUtils } from '@sankhyalabs/core';\n\nconst ezTooltipCss = \":host{--triangle-size:8px;width:100%}.tooltip{position:absolute;z-index:var(--elevation--24);padding:var(--space--extra-small, 3px) var(--space--small, 6px);border-radius:var(--border--radius-small);box-sizing:border-box;font-family:var(--font-pattern\\t, 'Roboto', sans-serif);font-size:var(--text--small, 12px);font-weight:var(--text-weight--medium, 400);text-align:center;width:max-content;display:none}.arrow{position:absolute;width:var(--triangle-size);height:var(--triangle-size);transform:rotate(45deg)}.default-tooltip{background:var(--title--primary, #2b3a54);color:var(--color--inverted)}.default-tooltip .arrow{background:var(--title--primary, #2b3a54)}.error-tooltip{background:var(--color-alert--error-800, #BD0025);color:var(--color--error-200, #F7E0E5)}.error-tooltip .arrow{background:var(--color-alert--error-800, #BD0025)}.success-tooltip{background:var(--color--success, #00cb94);color:var(--color--success-200, #EBFFFA)}.success-tooltip .arrow{background:var(--color--success, #00cb94)}.warning-tooltip{background:var(--color--warning, #f2d410);color:var(--color--warning-200, #FDF8D8)}.warning-tooltip .arrow{background:var(--color--warning, #f2d410)}\";\n\nconst EzTooltip = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this._opened = false;\n    this.message = undefined;\n    this.anchoringElement = undefined;\n    this.placement = 'bottom';\n    this.gapOptions = { horizontalGap: 0, verticalGap: 0 };\n    this.type = 'default';\n    this.debouncingTime = 500;\n    this.active = true;\n    this.maxWidth = 200;\n    this.useAnchorSize = false;\n  }\n  watchAnchoringElement(newValue, oldValue) {\n    if (newValue) {\n      this.setEvents(newValue);\n      this.removeEvents(oldValue);\n    }\n  }\n  watchMessage(newValue) {\n    if (!newValue) {\n      this.closeTooltip();\n      return;\n    }\n    this.updatePosition();\n  }\n  openTooltip() {\n    if (this.message && this.active) {\n      if (this._debouncingTimeout) {\n        clearTimeout(this._debouncingTimeout);\n      }\n      this._debouncingTimeout = setTimeout(() => {\n        this._opened = true;\n        this._tooltipElement.style.display = 'block';\n        this.updatePosition();\n      }, this.debouncingTime);\n    }\n  }\n  closeTooltip() {\n    clearTimeout(this._debouncingTimeout);\n    this._tooltipElement.style.display = 'none';\n    this._opened = false;\n  }\n  async updatePosition(element = this.anchoringElement) {\n    if (!element || !this._opened) {\n      return;\n    }\n    if (this.useAnchorSize) {\n      const anchorSize = element.getBoundingClientRect().width;\n      this._tooltipElement.style.width = `${anchorSize}px`;\n    }\n    await computePosition(element, this._tooltipElement, {\n      placement: this.placement,\n      middleware: [\n        offset(5),\n        flip(),\n        shift(),\n        arrow({ element: this._arrowElement })\n      ],\n    }).then(({ x, y, placement, middlewareData }) => {\n      const newTop = placement.includes(\"bottom\") ? y + this.gapOptions.verticalGap : y - this.gapOptions.verticalGap;\n      const newLeft = placement.includes(\"start\") ? x + this.gapOptions.horizontalGap : x - this.gapOptions.horizontalGap;\n      Object.assign(this._tooltipElement.style, {\n        top: `${newTop}px`,\n        left: `${newLeft}px`,\n      });\n      if (middlewareData.arrow) {\n        const { x } = middlewareData.arrow;\n        const onBottom = placement.includes(\"bottom\");\n        Object.assign(this._arrowElement.style, {\n          left: `${x}px`,\n          top: onBottom ? `${-this._arrowElement.offsetHeight / 2}px` : '',\n          bottom: !onBottom ? `${-this._arrowElement.offsetHeight / 2}px` : '',\n        });\n      }\n    });\n  }\n  handleSlotChange(ev) {\n    const slot = ev.target;\n    const content = slot.assignedElements()[0];\n    this.anchoringElement = content;\n  }\n  setEvents(element = this.anchoringElement) {\n    if (!element) {\n      return;\n    }\n    element.addEventListener('mouseenter', () => {\n      this.openTooltip();\n    });\n    element.addEventListener('mouseleave', () => {\n      this.closeTooltip();\n    });\n  }\n  removeEvents(element = this.anchoringElement) {\n    if (!element) {\n      return;\n    }\n    element.removeEventListener('mouseenter', () => {\n      this.openTooltip();\n    });\n    element.removeEventListener('mouseleave', () => {\n      this.closeTooltip();\n    });\n  }\n  componentDidLoad() {\n    this.setEvents();\n  }\n  render() {\n    return (h(Host, null, h(\"div\", Object.assign({ ref: ref => this._tooltipElement = ref }, { inert: true }, { class: {\n        \"tooltip\": true,\n        [`${this.type}-tooltip`]: true,\n      }, style: {\n        maxWidth: (this.maxWidth && !this.useAnchorSize) ? `${this.maxWidth}px` : undefined,\n      }, role: \"tooltip\", \"data-element-id\": ElementIDUtils.getInternalIDInfo(\"tooltip\") }), this.message, h(\"div\", { ref: ref => this._arrowElement = ref, class: \"arrow\" })), h(\"slot\", { onSlotchange: (ev) => { this.handleSlotChange(ev); } })));\n  }\n  get _element() { return getElement(this); }\n  static get watchers() { return {\n    \"anchoringElement\": [\"watchAnchoringElement\"],\n    \"message\": [\"watchMessage\"]\n  }; }\n};\nEzTooltip.style = ezTooltipCss;\n\nexport { EzTooltip as ez_tooltip };\n"],"names":["ezTooltipCss","EzTooltip","hostRef","registerInstance","newValue","oldValue","element","anchorSize","computePosition","offset","flip","shift","arrow","x","y","placement","middlewareData","newTop","newLeft","onBottom","ev","content","h","Host","ref","ElementIDUtils","getElement"],"mappings":"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","x_google_ignoreList":[0]}
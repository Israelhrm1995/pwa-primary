{"version":3,"file":"ez-upload.entry-Ci89bqXp.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ez-upload.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, f as forceUpdate, h, g as getElement } from './index-baa5e267.js';\nimport { A as ApplicationUtils } from './ApplicationUtils-eaf91331.js';\nimport { ElementIDUtils } from '@sankhyalabs/core';\nimport './DialogType-54a62731.js';\n\nclass RemoteFile {\n  constructor(file) {\n    this.file = file;\n    this.size = file.size;\n    this.name = file.name;\n  }\n  abortUpload() {\n    if (this._uploadingXhr) {\n      this._aborted = true;\n      this._uploadingXhr.abort();\n      this._uploadingXhr = undefined;\n    }\n  }\n  isUploading() {\n    return this._uploadingXhr !== undefined;\n  }\n  async upload(server, headers, updateCallBack) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      this._uploadingXhr = xhr;\n      this._aborted = false;\n      this.progress = 0;\n      xhr.upload.onprogress = (e) => {\n        const loaded = e.loaded;\n        const total = e.total;\n        this.progress = ~~((loaded / total) * 100);\n        updateCallBack(this, loaded, total);\n      };\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState == 4) {\n          this._uploadingXhr = undefined;\n          const status = xhr.status;\n          if (!this._aborted) {\n            if (status === 0) {\n              reject(\"Servidor indisponível\");\n            }\n            else if (status >= 500) {\n              reject(\"Erro inesperado no servidor\");\n            }\n            else if (status >= 400) {\n              reject(\"Operação não permitida\");\n            }\n          }\n          const response = xhr.response;\n          if (response) {\n            try {\n              resolve(JSON.parse(response));\n            }\n            catch (error) {\n              reject(`Servidor não retornou um objeto válido: ${response}.\\n${error}`);\n            }\n          }\n        }\n      };\n      xhr.ontimeout = () => {\n        reject(\"Tempo limite de transferência atingido.\");\n      };\n      const formData = new FormData();\n      formData.append(\"ARQUIVO\", this.file, this.file.name);\n      xhr.open(\"POST\", server, true);\n      if (headers) {\n        headers.forEach((value, key) => xhr.setRequestHeader(key, value));\n      }\n      xhr.send(formData);\n    });\n  }\n  async delete(item, server, headers) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState == 4) {\n          if (xhr.status === 0) {\n            reject(\"Servidor indisponível\");\n          }\n          else if (xhr.status >= 500) {\n            reject(\"Erro inesperado no servidor\");\n          }\n          else if (xhr.status >= 400) {\n            reject(\"Operação não permitida\");\n          }\n          resolve(true);\n        }\n      };\n      xhr.ontimeout = () => {\n        reject(\"Tempo limite de remoção atingido.\");\n      };\n      xhr.open(\"DELETE\", server, true);\n      if (headers) {\n        headers.forEach((value, key) => xhr.setRequestHeader(key, value));\n      }\n      xhr.send(JSON.stringify(item));\n    });\n  }\n}\n\nconst ezUploadCss = \":host{--ez-upload--height:42px;--ez-upload--width:100%;--ez-upload__icon--width:48px;--ez-upload__container--background-color:var(--background--medium, #d2dce9);--ez-upload__color--primary:var(--color--primary, #008561);--ez-upload--padding--extra-small:var(--space--extra-small, 3px);--ez-upload--padding--small:var(--space--small, 6px);--ez-upload--padding--medium:var(--space--medium, 12px);--ez-upload--padding--large:var(--space--large, 24px);--ez-upload__border--color:var(--color-strokes, #DCE0E8);--ez-upload--text-shadow:var(--text-shadow, 0 0 0 #353535, 0 0 1px transparent);--ez-upload--text--primary:var(--text-primary, #626e82);--ez-upload--text--secondary:var(--text-secondary, #a2abb9);--ez-upload--font-size:var(--text--medium, 14px);--ez-upload--font-family:var(--font-pattern, Arial);--ez-upload--font-weight:var(--text-weight--large, 500);--ez-upload__btn__cancel-image:url('data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.1\\\" height=\\\"8x\\\" width=\\\"8px\\\"><path d=\\\"M 8,0.8 7.2,0 4,3.2 0.8,0 0,0.8 3.2,4 0,7.2 0.8,8 4,4.8 7.2,8 8,7.2 4.8,4 Z\\\"/></svg>');--ez-upload__file-icon-image:url('data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.1\\\" height=\\\"11x\\\" width=\\\"9px\\\"><path d=\\\"M 1.2272719,8.4999999 V 2.75 c 0,-1.1045695 1.4652499,-2 3.2727273,-2 1.8074777,0 3.2727281,0.8954305 3.2727281,2 V 8.9999999 C 7.7727273,9.690356 6.8569456,10.25 5.7272719,10.25 4.5975985,10.25 3.6818174,9.690356 3.6818174,8.9999999 V 3.75 c 0,-0.2761425 0.3663125,-0.5 0.8181818,-0.5 0.4518694,0 0.8181818,0.2238575 0.8181818,0.5 V 8.4999999 H 6.5454537 V 3.75 C 6.5454537,3.059644 5.6296725,2.5 4.4999992,2.5 3.3703258,2.5 2.4545446,3.059644 2.4545446,3.75 V 8.9999999 C 2.4545446,10.10457 3.9197945,11 5.7272719,11 7.5347496,11 9,10.10457 9,8.9999999 V 2.75 C 9,1.231217 6.9852809,0 4.4999992,0 2.0147181,5e-7 0,1.231217 0,2.75 v 5.7499999 z\\\"/></svg>');display:flex;flex-wrap:wrap;position:relative;padding-bottom:16px;font-family:var(--ez-upload--font-family);font-size:var(--ez-upload--font-size);width:var(--ez-upload--width);font-weight:var(--ez-upload--font-weight)}.iu{display:flex;flex-wrap:wrap;background-color:var(--ez-upload__container--background-color);padding:var(--ez-upload--padding--small);width:100%;border-radius:12px;box-sizing:border-box}.iu__container{width:100%;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;border:2px dashed var(--ez-upload__border--color);border-radius:6px;box-sizing:border-box}.iu__footer{display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;padding:0 var(--ez-upload--padding--medium) var(--ez-upload--padding--medium) var(--ez-upload--padding--medium);box-sizing:border-box}.iu__item{display:flex;width:100%;justify-content:flex-start;align-items:center;align-self:center;padding-bottom:var(--ez-upload--padding--extra-small);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iu__item-label{display:flex;max-width:80%;align-self:stretch;align-items:center}.file__name{font-weight:200}.box__content{width:100%;justify-content:center;align-items:center;height:100%;border:1px dashed var(--ez-upload__border--color);border-radius:6px;box-sizing:border-box}.box__container{display:flex;flex-wrap:wrap;background-color:var(--ez-upload__container--background-color);padding:6px;width:100%;border-radius:12px}a:-webkit-any-link{color:#008561;fill:#008561;cursor:pointer;text-decoration:none}progress[value]{display:flex;width:100%;appearance:none;border:1px solid var(--ez-upload__border--color);height:12px;justify-content:flex-start;align-items:center;border-radius:3px;position:relative}progress[value]::-webkit-progress-bar{display:flex;-webkit-appearance:none;width:100%;background-color:rgb(255, 255, 255);border-radius:2px;padding:2px}progress[value]::-webkit-progress-value{display:flex;width:100%;background-color:var(--ez-upload__color--primary)}.text--center{text-align:center}.align--middle{align-self:center;align-items:center}.padding-large{padding:var(--ez-upload--padding--large) 0px}.padding-extra-small{padding:var(--ez-upload--padding--extra-small) 0px}.text{font-family:var(--font-pattern, \\\"Roboto\\\");text-shadow:0 0 0 #353535, 0 0 1px transparent}.text--primary{color:var(--ez-upload--text--primary);text-shadow:var(--ez-upload--text-shadow)}.text--secondary{color:var(--ez-upload--text--secondary);text-shadow:var(--ez-upload--text-shadow)}.text--ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text--medium{font-size:14px}.text--small{font-size:12px}.btn-cancel{outline:none;border:none;background-color:unset;cursor:pointer}.btn-cancel::after{content:'';display:flex;background-color:var(--text--primary, #008561);width:8px;height:8px;-webkit-mask-image:var(--ez-upload__btn__cancel-image);mask-image:var(--ez-upload__btn__cancel-image)}.iu_header{display:flex;flex-direction:column;width:100%}.iu__label{padding:var(--space--small);box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:var(--ez-upload--font-family);font-size:var(--text--extra-small);font-weight:var(--ez-upload--font-weight);color:var(--ez-upload--text--primary);text-shadow:var(--ez-upload--text-shadow)}.iu__file-icon{outline:none;border:none;background-color:unset;cursor:pointer}.iu__file-icon:disabled{cursor:unset}.iu__file-icon::after{content:'';display:flex;background-color:var(--text--primary, #626e82);width:9px;height:11px;-webkit-mask-image:var(--ez-upload__file-icon-image);mask-image:var(--ez-upload__file-icon-image)}.iu__file-icon:disabled::after{background-color:var(--text--disable, #AFB6C0)}.iu__icon-label{justify-content:center;display:flex;cursor:pointer;box-sizing:border-box}.background--disabled{background-color:var(--color--disable-secondary, #F2F5F8)}.text--disabled{color:var(--text--disable, #AFB6C0)}.mouse-pointer--disabled{cursor:unset}.appearanceNone{width:0px;height:0px}.row{width:100%;display:flex;flex-wrap:wrap}.col{display:flex;flex-wrap:wrap;align-self:flex-start;box-sizing:border-box}.col--stretch{align-self:stretch}.col--undefined{width:unset}.col--nowrap{flex-wrap:nowrap}@media screen and (min-width: 320px){.col--sd-1{width:8.33333%}.col--sd-2{width:16.66667%}.col--sd-3{width:25%}.col--sd-4{width:33.33333%}.col--sd-5{width:41.66667%}.col--sd-6{width:50%}.col--sd-7{width:58.33333%}.col--sd-8{width:66.66667%}.col--sd-9{width:75%}.col--sd-10{width:83.33333%}.col--sd-11{width:91.66667%}.col--sd-12{width:100%}}@media screen and (min-width: 480px){.col--pn-1{width:8.33333%}.col--pn-2{width:16.66667%}.col--pn-3{width:25%}.col--pn-4{width:33.33333%}.col--pn-5{width:41.66667%}.col--pn-6{width:50%}.col--pn-7{width:58.33333%}.col--pn-8{width:66.66667%}.col--pn-9{width:75%}.col--pn-10{width:83.33333%}.col--pn-11{width:91.66667%}.col--pn-12{width:100%}}@media screen and (min-width: 768px){.col--tb-1{width:8.33333%}.col--tb-2{width:16.66667%}.col--tb-3{width:25%}.col--tb-4{width:33.33333%}.col--tb-5{width:41.66667%}.col--tb-6{width:50%}.col--tb-7{width:58.33333%}.col--tb-8{width:66.66667%}.col--tb-9{width:75%}.col--tb-10{width:83.33333%}.col--tb-11{width:91.66667%}.col--tb-12{width:100%}}@media screen and (min-width: 992px){.col--md-1{width:8.33333%}.col--md-2{width:16.66667%}.col--md-3{width:25%}.col--md-4{width:33.33333%}.col--md-5{width:41.66667%}.col--md-6{width:50%}.col--md-7{width:58.33333%}.col--md-8{width:66.66667%}.col--md-9{width:75%}.col--md-10{width:83.33333%}.col--md-11{width:91.66667%}.col--md-12{width:100%}}@media screen and (min-width: 1200px){.col--ld-1{width:8.33333%}.col--ld-2{width:16.66667%}.col--ld-3{width:25%}.col--ld-4{width:33.33333%}.col--ld-5{width:41.66667%}.col--ld-6{width:50%}.col--ld-7{width:58.33333%}.col--ld-8{width:66.66667%}.col--ld-9{width:75%}.col--ld-10{width:83.33333%}.col--ld-11{width:91.66667%}.col--ld-12{width:100%}}\";\n\nconst EzUpload = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ezChange = createEvent(this, \"ezChange\", 7);\n    this.ezStartChange = createEvent(this, \"ezStartChange\", 7);\n    this.ezCancelWaitingChange = createEvent(this, \"ezCancelWaitingChange\", 7);\n    this._filePointers = new Map();\n    this.label = undefined;\n    this.subtitle = undefined;\n    this.enabled = true;\n    this.maxFileSize = undefined;\n    this.maxFiles = undefined;\n    this.requestHeaders = undefined;\n    this.urlUpload = undefined;\n    this.urlDelete = undefined;\n    this.value = undefined;\n  }\n  observeValue(newValue, oldValue) {\n    //Observamos o mundo externo, se um novo valor foi atribuído,\n    //precisamos cancelar a alteração anterior, isso envolve, percorrer\n    //a lista de ponteiros e cancelar todos os uploads em andamento.\n    if (newValue !== this._updatingValue || (newValue == undefined && oldValue != undefined)) {\n      this._filePointers.forEach(f => {\n        if (this.isRemoteFile(f)) {\n          f.abortUpload();\n        }\n      });\n      this._filePointers = new Map();\n      this.updateFilePointers();\n      this._updatingValue = undefined;\n    }\n  }\n  updateFilePointers() {\n    if (Array.isArray(this.value)) {\n      this.value.forEach(ezFile => this._filePointers.set(ezFile.name, ezFile));\n    }\n  }\n  observeRequestHeaders() {\n    this._requestHeaders = new Map();\n    if (typeof this.requestHeaders == \"string\") {\n      try {\n        this.requestHeaders = JSON.parse(this.requestHeaders);\n      }\n      catch (e) {\n        this.requestHeaders = undefined;\n      }\n    }\n    for (var key in this.requestHeaders) {\n      this._requestHeaders.set(key, this.requestHeaders[key]);\n    }\n  }\n  /**\n   * Adiciona arquivos.\n   */\n  async addFiles(files) {\n    if (this.maxFiles > 0) {\n      let countDistinctFiles = this._filePointers.size;\n      files.forEach(file => {\n        if (!this._filePointers.has(file.name)) {\n          countDistinctFiles++;\n        }\n      });\n      if (countDistinctFiles > this.maxFiles) {\n        this.showError(`A quantidade máxima de arquivos é ${this.maxFiles}.`);\n        return;\n      }\n    }\n    Array.prototype.forEach.call(files, this.addFile.bind(this));\n  }\n  /**\n   * Aplica o foco no campo.\n   */\n  async setFocus() {\n    this._fileInput.focus();\n  }\n  /**\n   * Remove o foco do campo.\n   */\n  async setBlur() {\n    this._fileInput.blur();\n  }\n  async addFile(file) {\n    const oldFile = this._filePointers.get(file.name);\n    if (oldFile) {\n      ApplicationUtils.confirm(\"Substituir arquivo\", `Já existe um arquivo chamado \"${file.name}\". Deseja substituí-lo?`)\n        .then(ok => {\n        if (ok) {\n          if (this.isRemoteFile(oldFile)) {\n            oldFile.abortUpload();\n          }\n          this.doAddFile(file);\n        }\n      });\n    }\n    else {\n      this.doAddFile(file);\n    }\n  }\n  async doAddFile(file) {\n    try {\n      if (this.validateFile(file)) {\n        this.ezStartChange.emit({ waitmessage: \"Há arquivos sendo enviados. Por favor aguarde a conclusão ou cancele o envio.\", blocking: true });\n        const uploadingFile = new RemoteFile(file);\n        const oldPointer = this._filePointers.get(file.name);\n        if (oldPointer && this.isRemoteFile(oldPointer)) {\n          oldPointer.abortUpload();\n        }\n        this._filePointers.set(file.name, uploadingFile);\n        uploadingFile.upload(this.urlUpload, this._requestHeaders, (file) => this.updateFeedback(file))\n          .then((files) => files.forEach(ezFile => this.finishUpload(uploadingFile.name, ezFile)))\n          .catch(msg => {\n          this.ezCancelWaitingChange.emit();\n          this.showError(msg);\n        });\n        forceUpdate(this);\n      }\n    }\n    catch (error) {\n      this.ezCancelWaitingChange.emit();\n      throw error;\n    }\n  }\n  finishUpload(key, ezFile) {\n    this._filePointers.set(key, ezFile);\n    this.updateValue();\n  }\n  updateValue() {\n    this._updatingValue = [];\n    this._filePointers.forEach(f => {\n      if (!this.isRemoteFile(f)) {\n        this._updatingValue.push(f);\n      }\n    });\n    if (this._filePointers.size === this._updatingValue.length) {\n      this.value = this._updatingValue;\n      this.ezChange.emit(this.value);\n    }\n  }\n  buildProgressId(uploading) {\n    let sanitizedName = uploading.name.replace(/[^a-z0-9_]/gi, \"_\");\n    return `PROGRESS_${sanitizedName}_${uploading.file.lastModified}`;\n  }\n  updateFeedback(uf) {\n    window.requestAnimationFrame(() => {\n      if (this._host) {\n        const progress = this._host.shadowRoot.querySelector(\"#\" + this.buildProgressId(uf));\n        if (progress) {\n          progress.value = uf.progress;\n        }\n      }\n    });\n  }\n  validateFile(file) {\n    if (!this._filePointers.has(file.name) && this.maxFiles > 0 && this._filePointers.size >= this.maxFiles) {\n      this.showError(`A quantidade máxima de arquivos é ${this.maxFiles}.`);\n      return false;\n    }\n    if (file.size === 0) {\n      this.showError(`Erro de permissão: O arquivo \"${file.name}\" não pode ser enviado.`);\n      return false;\n    }\n    if (!this.urlUpload) {\n      this.showError(\"Endereço de upload não informado\");\n      return false;\n    }\n    if (this.maxFileSize >= 0 && file.size > this.maxFileSize) {\n      this.showError(\"O tamanho máximo dos arquivos é de \" + this.formatBytes(this.maxFileSize));\n      return false;\n    }\n    return true;\n  }\n  showError(message) {\n    ApplicationUtils.alert(\"Enviando arquivo\", message);\n  }\n  formatBytes(bytes, decimals = 1) {\n    if (bytes === 0)\n      return \"0 Bytes\";\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n  }\n  onFileInputChange(event) {\n    const input = event.target;\n    this.addFiles(Array.from(input.files));\n    this._fileInput.value = \"\";\n  }\n  isRemoteFile(item) {\n    return \"file\" in item;\n  }\n  removeFromList(name) {\n    this._filePointers.delete(name);\n    this.updateValue();\n  }\n  removeFile(name) {\n    const item = this._filePointers.get(name);\n    if (this.isRemoteFile(item)) {\n      item.abortUpload();\n      this.removeFromList(name);\n    }\n    else {\n      if (this.urlDelete) {\n        const uploadingFile = new RemoteFile(null);\n        this._filePointers.set(item.name, uploadingFile);\n        uploadingFile.delete(item, this.urlDelete, null)\n          .then(_ok => this.removeFromList(name))\n          .catch(msg => this.showError(msg));\n      }\n      else {\n        this.removeFromList(name);\n      }\n    }\n  }\n  openFilesDialog() {\n    if (this.enabled) {\n      this._fileInput.click();\n    }\n  }\n  componentDidLoad() {\n    if (this.enabled && this._dropZone && window.FileList && window.File) {\n      this._dropZone.addEventListener(\"dragover\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        event.dataTransfer.dropEffect = \"copy\";\n        this._dropZone.style.background = \"#c2dbff\";\n      });\n      this._dropZone.addEventListener(\"drop\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        this.addFiles(Array.from(event.dataTransfer.files));\n        this._dropZone.style.background = \"\";\n      });\n      this._dropZone.addEventListener(\"dragleave\", _event => {\n        this._dropZone.style.background = \"\";\n      });\n    }\n    if (this._host) {\n      ElementIDUtils.addIDInfo(this._host, 'input');\n    }\n    this.observeRequestHeaders();\n  }\n  componentWillRender() {\n    if (this.value) {\n      if (this._filePointers.size < this.value.length) {\n        this.updateFilePointers();\n      }\n    }\n  }\n  render() {\n    return (h(\"div\", { ref: (el) => this._dropZone = el, class: this.evalDisabledClass(\"iu\", \"background--disabled\") }, h(\"div\", { class: \"iu__container\", onClick: () => this.openFilesDialog() }, h(\"div\", { class: \"iu_header\" }, this.label ? h(\"label\", { class: this.evalDisabledClass(\"iu__label\", \"text--disabled\"), title: this.label }, this.label) : null, h(\"div\", { class: \"padding-large\" }, h(\"div\", { class: this.evalDisabledClass(\"iu__icon-label\", \"mouse-pointer--disabled\") }, h(\"button\", { class: \"iu__file-icon\", disabled: !this.enabled }), h(\"div\", { class: this.evalDisabledClass(\"text text--center text--medium text--primary\", \"text--disabled\") }, this.enabled ? \"Arraste e solte ou clique para adicionar arquivos\" : \"Somente leitura\")), this.subtitle &&\n      h(\"div\", { class: this.evalDisabledClass(\"padding-extra-small text text--center text--small text--secondary\", \"text--disabled\") }, this.subtitle))), this.buildFooter()), h(\"input\", { ref: (el) => this._fileInput = el, onChange: (ev) => this.onFileInputChange(ev), type: \"file\", multiple: true, class: \"appearanceNone\" })));\n  }\n  buildFooter() {\n    if (this._filePointers.size === 0) {\n      return null;\n    }\n    const items = [];\n    this._filePointers.forEach(item => items.push(this.buildFileItem(item)));\n    return (h(\"div\", { class: \"iu__footer\" }, items));\n  }\n  buildFileItem(item) {\n    const fileName = item.name;\n    const progress = Number(item[\"progress\"]);\n    const downloadURL = item[\"downloadURL\"];\n    const size = item.size > 0 ? `(${this.formatBytes(item.size)})` : '';\n    const label = `${fileName} ${size}`;\n    return (h(\"div\", { class: \"iu__item\", key: fileName, onClick: evt => evt.stopPropagation() }, h(\"div\", { class: \"iu__item-label modificador\" }, h(\"div\", { title: label, class: \"col--stretch align--middle file__name text text--primary text--small text--ellipsis align--middle\" }, downloadURL ? h(\"a\", { href: downloadURL, download: true }, label) : label)), isNaN(progress)\n      ?\n        null\n      :\n        h(\"div\", { class: \"col col--sd-4 col--stretch align--middle\" }, h(\"progress\", { id: this.buildProgressId(item), value: progress, max: \"100\" })), this.enabled\n      ?\n        h(\"div\", { class: \"col col--stretch align--middle\" }, h(\"button\", { class: \"btn-cancel \", onClick: () => this.removeFile(fileName) }))\n      :\n        null));\n  }\n  evalDisabledClass(regularClasses, disabledClass) {\n    return this.enabled ? regularClasses : `${regularClasses} ${disabledClass}`;\n  }\n  get _host() { return getElement(this); }\n  static get watchers() { return {\n    \"value\": [\"observeValue\"],\n    \"requestHeaders\": [\"observeRequestHeaders\"]\n  }; }\n};\nEzUpload.style = ezUploadCss;\n\nexport { EzUpload as ez_upload };\n"],"names":["RemoteFile","file","server","headers","updateCallBack","resolve","reject","xhr","e","loaded","total","status","response","error","formData","value","key","item","ezUploadCss","EzUpload","hostRef","registerInstance","createEvent","newValue","oldValue","f","ezFile","files","countDistinctFiles","oldFile","ApplicationUtils","ok","uploadingFile","oldPointer","msg","forceUpdate","uploading","uf","progress","message","bytes","decimals","k","dm","sizes","i","event","input","name","_ok","_event","ElementIDUtils","h","el","ev","items","fileName","downloadURL","size","label","evt","regularClasses","disabledClass","getElement"],"mappings":"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","x_google_ignoreList":[0]}
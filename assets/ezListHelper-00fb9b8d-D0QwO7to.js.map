{"version":3,"file":"ezListHelper-00fb9b8d-D0QwO7to.js","sources":["../../node_modules/@sankhyalabs/ezui/dist/esm/ezListHelper-00fb9b8d.js"],"sourcesContent":["/**\n * O dragElement é posicionado ANTERIORMENTE ao targetIndex.\n * Ex: no array: [\"A\", \"B\", \"C\", \"D\", \"E\"]\n * se o dragItem for \"B\" e o targetIndex 3 (referente à \"D\"),\n * \"B\" será posicionado logo antes de \"D\".\n * O resultado será: [\"A\", \"C\", \"B\", \"D\", \"E\"]\n *\n * @param configs\n */\nfunction processListOnDrop(configs) {\n  let newList;\n  if (hasToMoveMultipleItems(configs)) {\n    newList = processMoveMultipleItems(configs);\n  }\n  else {\n    newList = processMoveSingleItem(configs);\n    configs.clearSelection();\n  }\n  return newList;\n}\nfunction hasToMoveMultipleItems(configs) {\n  const { enableMultipleSelection, listItems, dragItem, moveToFinal, targetIndex } = configs;\n  if (!enableMultipleSelection)\n    return false;\n  const selectedItemsIndexes = getSelectedIndices(listItems);\n  if (selectedItemsIndexes.length <= 1)\n    return false;\n  if (!selectedItemsIndexes.includes(dragItem.index))\n    return false;\n  if (!isContinuousSequence(selectedItemsIndexes))\n    return false;\n  if (moveToFinal)\n    return true;\n  return !selectedItemsIndexes.includes(targetIndex);\n}\nfunction processMoveSingleItem(configs) {\n  const { listItems, dragItem, targetIndex, moveToFinal } = configs;\n  const newList = [...listItems];\n  newList.splice(dragItem.index, 1);\n  if (moveToFinal) {\n    newList.push(dragItem.item);\n  }\n  else {\n    const adjustedIndex = (targetIndex > dragItem.index) ? Math.max(0, targetIndex - 1) : targetIndex;\n    newList.splice(adjustedIndex, 0, dragItem.item);\n  }\n  return newList;\n}\nfunction processMoveMultipleItems(configs) {\n  const { listItems, moveToFinal, targetIndex } = configs;\n  const selectedItems = listItems.filter(item => item.selected);\n  const selectedItemsIndexes = getSelectedIndices(listItems);\n  const minorIndex = Math.min(...selectedItemsIndexes);\n  const majorIndex = Math.max(...selectedItemsIndexes);\n  const qtdToMove = selectedItems.length;\n  const newList = [...listItems];\n  newList.splice(minorIndex, qtdToMove);\n  if (moveToFinal) {\n    newList.push(...selectedItems);\n  }\n  else {\n    let adjustedIndex = (targetIndex > majorIndex) ? Math.max(0, targetIndex - qtdToMove) : targetIndex;\n    newList.splice(adjustedIndex, 0, ...selectedItems);\n  }\n  return newList;\n}\nfunction isContinuousSequence(numbers) {\n  if (numbers.length === 0)\n    return false;\n  const sortedNumbers = [...numbers].sort((a, b) => a - b);\n  for (let i = 1; i < sortedNumbers.length; i++) {\n    if (sortedNumbers[i] !== sortedNumbers[i - 1] + 1) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getSelectedIndices(listItems) {\n  return listItems.reduce((indices, item, index) => {\n    if (item.selected) {\n      indices.push(index);\n    }\n    return indices;\n  }, []);\n}\n\nexport { isContinuousSequence as i, processListOnDrop as p };\n"],"names":["processListOnDrop","configs","newList","hasToMoveMultipleItems","processMoveMultipleItems","processMoveSingleItem","enableMultipleSelection","listItems","dragItem","moveToFinal","targetIndex","selectedItemsIndexes","getSelectedIndices","isContinuousSequence","adjustedIndex","selectedItems","item","minorIndex","majorIndex","qtdToMove","numbers","sortedNumbers","a","b","i","indices","index"],"mappings":"AASA,SAASA,EAAkBC,EAAS,CAClC,IAAIC,EACJ,OAAIC,EAAuBF,CAAO,EAChCC,EAAUE,EAAyBH,CAAO,GAG1CC,EAAUG,EAAsBJ,CAAO,EACvCA,EAAQ,eAAgB,GAEnBC,CACT,CACA,SAASC,EAAuBF,EAAS,CACvC,KAAM,CAAE,wBAAAK,EAAyB,UAAAC,EAAW,SAAAC,EAAU,YAAAC,EAAa,YAAAC,CAAW,EAAKT,EACnF,GAAI,CAACK,EACH,MAAO,GACT,MAAMK,EAAuBC,EAAmBL,CAAS,EAKzD,OAJII,EAAqB,QAAU,GAE/B,CAACA,EAAqB,SAASH,EAAS,KAAK,GAE7C,CAACK,EAAqBF,CAAoB,EACrC,GACLF,EACK,GACF,CAACE,EAAqB,SAASD,CAAW,CACnD,CACA,SAASL,EAAsBJ,EAAS,CACtC,KAAM,CAAE,UAAAM,EAAW,SAAAC,EAAU,YAAAE,EAAa,YAAAD,CAAa,EAAGR,EACpDC,EAAU,CAAC,GAAGK,CAAS,EAE7B,GADAL,EAAQ,OAAOM,EAAS,MAAO,CAAC,EAC5BC,EACFP,EAAQ,KAAKM,EAAS,IAAI,MAEvB,CACH,MAAMM,EAAiBJ,EAAcF,EAAS,MAAS,KAAK,IAAI,EAAGE,EAAc,CAAC,EAAIA,EACtFR,EAAQ,OAAOY,EAAe,EAAGN,EAAS,IAAI,CAClD,CACE,OAAON,CACT,CACA,SAASE,EAAyBH,EAAS,CACzC,KAAM,CAAE,UAAAM,EAAW,YAAAE,EAAa,YAAAC,CAAa,EAAGT,EAC1Cc,EAAgBR,EAAU,OAAOS,GAAQA,EAAK,QAAQ,EACtDL,EAAuBC,EAAmBL,CAAS,EACnDU,EAAa,KAAK,IAAI,GAAGN,CAAoB,EAC7CO,EAAa,KAAK,IAAI,GAAGP,CAAoB,EAC7CQ,EAAYJ,EAAc,OAC1Bb,EAAU,CAAC,GAAGK,CAAS,EAE7B,GADAL,EAAQ,OAAOe,EAAYE,CAAS,EAChCV,EACFP,EAAQ,KAAK,GAAGa,CAAa,MAE1B,CACH,IAAID,EAAiBJ,EAAcQ,EAAc,KAAK,IAAI,EAAGR,EAAcS,CAAS,EAAIT,EACxFR,EAAQ,OAAOY,EAAe,EAAG,GAAGC,CAAa,CACrD,CACE,OAAOb,CACT,CACA,SAASW,EAAqBO,EAAS,CACrC,GAAIA,EAAQ,SAAW,EACrB,MAAO,GACT,MAAMC,EAAgB,CAAC,GAAGD,CAAO,EAAE,KAAK,CAACE,EAAGC,IAAMD,EAAIC,CAAC,EACvD,QAASC,EAAI,EAAGA,EAAIH,EAAc,OAAQG,IACxC,GAAIH,EAAcG,CAAC,IAAMH,EAAcG,EAAI,CAAC,EAAI,EAC9C,MAAO,GAGX,MAAO,EACT,CACA,SAASZ,EAAmBL,EAAW,CACrC,OAAOA,EAAU,OAAO,CAACkB,EAAST,EAAMU,KAClCV,EAAK,UACPS,EAAQ,KAAKC,CAAK,EAEbD,GACN,EAAE,CACP","x_google_ignoreList":[0]}
{"version":3,"file":"fields-selector.entry-qBsj3Jn4.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/fields-selector.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-479e1293.js';\nimport { S as Sortable } from './sortable.esm-842f85a3.js';\nimport { I as ID_AVAILABLE_FIELDS } from './FormConfigHelper-49fe72ca.js';\nimport { ArrayUtils } from '@sankhyalabs/core';\nimport './constants-7b422de0.js';\n\nconst fieldsSelectorCss = \".sc-fields-selector-h{width:33.33333%;display:flex;box-shadow:var(--shadow--small, 0 0 16px rgba(0, 38, 111, 0.07));border-radius:var(--border--radius-medium, 6px);height:var(--snk-form-config-container-height);max-width:260px}.fields-label.sc-fields-selector{display:block;font-size:16px;font-weight:500;width:100%}.fields-count.sc-fields-selector{display:block;color:#AFB6C0;font-size:14px;padding:12px 0;font-weight:400;width:100%}.fields-container.sc-fields-selector{display:flex;flex-direction:column;gap:12px;height:calc(100vh - 220px);width:100%}.ghost.sc-fields-selector{opacity:.5;background:#c8fbe2}.filter-input.sc-fields-selector{padding-right:var(--space--2xs, 8px)}\";\n\nconst FieldsSelector = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.fieldListChanged = createEvent(this, \"fieldListChanged\", 7);\n    this.availableFields = [];\n    this.dataUnit = undefined;\n    this.filterTerm = '';\n  }\n  onAddField(evt) {\n    const newIndex = evt.newIndex;\n    const item = evt.item;\n    const fieldConfig = item.fieldConfig;\n    const updatedFields = this.addItemInPosition(newIndex, fieldConfig);\n    this.fieldListChanged.emit(updatedFields);\n  }\n  addItemInPosition(newIndex, fieldConfig) {\n    return [\n      ...this.availableFields.slice(0, newIndex),\n      fieldConfig,\n      ...this.availableFields.slice(newIndex),\n    ];\n  }\n  onRemoveField(evt) {\n    const item = evt.item;\n    const fieldName = item.fieldConfig.name;\n    const updatedFields = [...this.availableFields.filter(f => f.name !== fieldName)];\n    this.fieldListChanged.emit(updatedFields);\n    requestAnimationFrame(() => item.remove());\n    return;\n  }\n  renderFields() {\n    const fieldsToShow = ArrayUtils.applyStringFilter(this.filterTerm, this.availableFields);\n    return fieldsToShow.map(field => (h(\"field-item\", { key: field.name, dataUnit: this.dataUnit, fieldConfig: field })));\n  }\n  getCountText() {\n    if (!this.availableFields.length)\n      return 'Nenhum campo disponível';\n    if (this.availableFields.length === 1)\n      return '1 campo disponível';\n    return `${this.availableFields.length} campos disponíveis`;\n  }\n  initializeDraggableContainer() {\n    new Sortable(this.el.querySelector(`#${ID_AVAILABLE_FIELDS}`), {\n      group: 'fields',\n      direction: 'vertical',\n      ghostClass: 'ghost',\n      animation: 15,\n      onAdd: (evt) => this.onAddField(evt),\n      onRemove: (evt) => this.onRemoveField(evt),\n    });\n  }\n  componentDidRender() {\n    this.initializeDraggableContainer();\n  }\n  render() {\n    return (h(Host, { class: 'ez-col ez-col--sd-4 ez-col--tb-4 ez-padding--medium' }, h(\"span\", { class: 'fields-label ez-padding-bottom--small' }, \"Campos dispon\\u00EDveis\"), h(\"ez-filter-input\", { class: 'filter-input', slot: \"content\", mode: \"slim\", label: \"Buscar campo\", onEzChange: evt => this.filterTerm = evt.detail }), h(\"span\", { class: 'fields-count' }, this.getCountText()), h(\"ez-scroller\", { direction: 'vertical', activeShadow: true }, h(\"div\", { id: ID_AVAILABLE_FIELDS, class: 'fields-container' }, this.renderFields()))));\n  }\n  get el() { return getElement(this); }\n};\nFieldsSelector.style = fieldsSelectorCss;\n\nexport { FieldsSelector as fields_selector };\n"],"names":["fieldsSelectorCss","FieldsSelector","hostRef","registerInstance","createEvent","evt","newIndex","fieldConfig","updatedFields","item","fieldName","f","ArrayUtils","field","h","Sortable","ID_AVAILABLE_FIELDS","Host","getElement"],"mappings":"0RAMA,MAAMA,EAAoB,0qBAEpBC,EAAiB,KAAM,CAC3B,YAAYC,EAAS,CACnBC,EAAiB,KAAMD,CAAO,EAC9B,KAAK,iBAAmBE,EAAY,KAAM,mBAAoB,CAAC,EAC/D,KAAK,gBAAkB,CAAE,EACzB,KAAK,SAAW,OAChB,KAAK,WAAa,EACtB,CACE,WAAWC,EAAK,CACd,MAAMC,EAAWD,EAAI,SAEfE,EADOF,EAAI,KACQ,YACnBG,EAAgB,KAAK,kBAAkBF,EAAUC,CAAW,EAClE,KAAK,iBAAiB,KAAKC,CAAa,CAC5C,CACE,kBAAkBF,EAAUC,EAAa,CACvC,MAAO,CACL,GAAG,KAAK,gBAAgB,MAAM,EAAGD,CAAQ,EACzCC,EACA,GAAG,KAAK,gBAAgB,MAAMD,CAAQ,CACvC,CACL,CACE,cAAcD,EAAK,CACjB,MAAMI,EAAOJ,EAAI,KACXK,EAAYD,EAAK,YAAY,KAC7BD,EAAgB,CAAC,GAAG,KAAK,gBAAgB,OAAOG,GAAKA,EAAE,OAASD,CAAS,CAAC,EAChF,KAAK,iBAAiB,KAAKF,CAAa,EACxC,sBAAsB,IAAMC,EAAK,QAAQ,CAE7C,CACE,cAAe,CAEb,OADqBG,EAAW,kBAAkB,KAAK,WAAY,KAAK,eAAe,EACnE,IAAIC,GAAUC,EAAE,aAAc,CAAE,IAAKD,EAAM,KAAM,SAAU,KAAK,SAAU,YAAaA,CAAO,CAAA,CAAE,CACxH,CACE,cAAe,CACb,OAAK,KAAK,gBAAgB,OAEtB,KAAK,gBAAgB,SAAW,EAC3B,qBACF,GAAG,KAAK,gBAAgB,MAAM,sBAH5B,yBAIb,CACE,8BAA+B,CAC7B,IAAIE,EAAS,KAAK,GAAG,cAAc,IAAIC,CAAmB,EAAE,EAAG,CAC7D,MAAO,SACP,UAAW,WACX,WAAY,QACZ,UAAW,GACX,MAAQX,GAAQ,KAAK,WAAWA,CAAG,EACnC,SAAWA,GAAQ,KAAK,cAAcA,CAAG,CAC/C,CAAK,CACL,CACE,oBAAqB,CACnB,KAAK,6BAA8B,CACvC,CACE,QAAS,CACP,OAAQS,EAAEG,EAAM,CAAE,MAAO,qDAAqD,EAAIH,EAAE,OAAQ,CAAE,MAAO,yCAA2C,oBAAyB,EAAGA,EAAE,kBAAmB,CAAE,MAAO,eAAgB,KAAM,UAAW,KAAM,OAAQ,MAAO,eAAgB,WAAYT,GAAO,KAAK,WAAaA,EAAI,MAAM,CAAE,EAAGS,EAAE,OAAQ,CAAE,MAAO,cAAc,EAAI,KAAK,aAAY,CAAE,EAAGA,EAAE,cAAe,CAAE,UAAW,WAAY,aAAc,EAAM,EAAEA,EAAE,MAAO,CAAE,GAAIE,EAAqB,MAAO,kBAAoB,EAAE,KAAK,aAAY,CAAE,CAAC,CAAC,CACzhB,CACE,IAAI,IAAK,CAAE,OAAOE,EAAW,IAAI,CAAE,CACrC,EACAjB,EAAe,MAAQD","x_google_ignoreList":[0]}
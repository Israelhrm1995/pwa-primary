import{r as g,c as r,O as h,m,h as a,g as p}from"./index-C7RI_ets.js";import{S as u}from"./sortable.esm-842f85a3-C83syoBY.js";import{A as c}from"./FormLayout-DBl2yXij.js";import{T as l}from"./constants-7b422de0-BRz2gykn.js";const b='.ezSidebarNavigator.sc-guides-configurator{--ez-sidebar-navigator--height:calc(100vh - 118px)}.navigator-container.sc-guides-configurator{height:calc(100vh - 175px);display:flex;flex-direction:column;justify-content:space-between}.collapsible-container.sc-guides-configurator{display:flex;flex-direction:column;gap:12px;flex-grow:1;max-height:calc(100vh - 240px);overflow:auto}.collapsible-item.sc-guides-configurator{padding:6px;border-radius:6px;border:1px solid #dce0e8}.add-button-container.sc-guides-configurator{display:flex;align-items:center;border-top:1px solid #dce0e8;padding-top:22px;gap:6px;cursor:pointer;justify-content:center}.add-button-container.sc-guides-configurator span.sc-guides-configurator{display:block}.guide-list.sc-guides-configurator{display:flex;flex-direction:column;width:100%;min-height:10px}.guide-list.hidden-empty-content.sc-guides-configurator::before{content:"Nenhuma guia oculta";display:block;font-size:16px;font-weight:400;color:#AFB6C0;margin:auto;padding:8px}.guide-list.visible-empty-content.sc-guides-configurator::before{content:"Nenhuma guia visível";display:block;font-size:16px;font-weight:400;color:#AFB6C0;margin:auto;padding:8px}.item-label.sc-guides-configurator{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}.guide-item.sc-guides-configurator{margin:0 3px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:5px 10px;border-radius:6px;transition:all 0.2s ease-in-out;height:32px}.guide-item.sc-guides-configurator .actions.sc-guides-configurator{display:flex;gap:8px;transition:0.2s ease-in-out;visibility:hidden;opacity:0}.guide-item.sc-guides-configurator:hover .actions.sc-guides-configurator{visibility:visible;opacity:1}ez-button.sc-guides-configurator{width:24px;align-items:center;justify-content:center;display:flex}.ghost.sc-guides-configurator{opacity:.5;background:#e2eaf4}.main-guide.sc-guides-configurator{padding:12px;margin:12px 0;border:1px solid #dce0e8;border-radius:6px;transition:all 0.2s ease-in-out}.guide-item.selected.sc-guides-configurator,.main-guide.selected.sc-guides-configurator{background:#E2F4EF}.guide-item.sc-guides-configurator:hover,.main-guide.sc-guides-configurator:hover{background:#f5fcfa}',f=class{constructor(e){g(this,e),this.guideSelected=r(this,"guideSelected",7),this.guideListChanged=r(this,"guideListChanged",7),this.guideDeleted=r(this,"guideDeleted",7),this.createNewGuide=r(this,"createNewGuide",7),this.ID_VISIBLE_GUIDES="container-visible-guides",this.ID_HIDDEN_GUIDES="container-hidden-guides",this.sortLogic=(i,t)=>{var s,n;const d=(s=i.order)!==null&&s!==void 0?s:Number.MAX_VALUE,o=(n=t.order)!==null&&n!==void 0?n:Number.MAX_VALUE;return d-o},this.mainGuide=void 0,this.filterTerm="",this.visibleGuides=[],this.hiddenGuides=[],this.guidesList=[],this.selectedGuide=void 0,this.messagesBuilder=void 0}observeVisibleGuides(e){this.initGuidesConfig(e)}observeSelectedGuide(e){this.guideSelected.emit(e)}getMessage(e,i){return this.messagesBuilder.getMessage(e,i)}initGuidesConfig(e){const i=[...e.filter(s=>s.visible&&s.name!==l.main)],t=[...e.filter(s=>!s.visible&&s.name!==l.main)];this.visibleGuides=[...i.sort(this.sortLogic)],this.hiddenGuides=[...t.sort(this.sortLogic)],this.mainGuide=e.find(s=>s.name===l.main)}handleAddGuide(){this.createNewGuide.emit()}handleSelectGuide(e,i){i.stopPropagation(),this.selectedGuide=e}toggleGuideVisibility(e,i){i.stopPropagation();const t=Object.assign(Object.assign({},e),{visible:!e.visible});let s,n;e.visible?(s=[...this.visibleGuides.filter(o=>o.name!==e.name)],n=[...this.hiddenGuides,t]):(s=[...this.visibleGuides,t],n=[...this.hiddenGuides.filter(o=>o.name!==e.name)]);const d=[...s,...n];this.applyGuidesUpdate(d)}adjustListOrder(e){return e.map((i,t)=>Object.assign(Object.assign({},i),{order:t}))}applyGuidesUpdate(e){let i=this.adjustListOrder(e);i=[this.mainGuide,...i],h.equals(i,this.guidesList)||this.guideListChanged.emit(i)}async handleDeleteGuide(e,i){i.stopPropagation();const t=this.getMessage("snkFormConfig.confirm.title"),s=this.getMessage("snkFormConfig.confirm.deleteGuide").replace("{0}",e.label);if(!await c.confirm(t,s))return;this.guideDeleted.emit(e);const d=this.getMessage("snkFormConfig.info.successfullyGuideDeleted").replace("{0}",e.label);c.info(d)}renderItems(e){return m.applyStringFilter(this.filterTerm,e).map(t=>{var s;return a("div",{key:t.name,"data-guide-name":t.name,title:t.label,class:`guide-item ${((s=this.selectedGuide)===null||s===void 0?void 0:s.label)===t.label?"selected":""} ${this.filterTerm.length?"disable-sort":""}`,onClick:n=>this.handleSelectGuide(t,n)},a("span",null,a("ez-icon",{iconName:"drag-indicator",class:"ez-margin-right--small"})),a("span",{class:"item-label"},t.label),a("div",{class:"actions"},a("ez-button",{mode:"icon",class:"ez-button--tertiary",onClick:n=>this.toggleGuideVisibility(t,n),size:"medium",iconName:t.visible?"eye-off":"eye",title:t.visible?"Ocultar":"Tornar visível"}),a("ez-button",{mode:"icon",class:"ez-button--tertiary",onClick:n=>this.handleDeleteGuide(t,n),size:"medium",iconName:"delete",title:"Excluir"})))})}getContainerElement(e){return this.el.querySelector(`[id="${e}"]`)}handleSortGuide(){const e=[...this.getGuidesFromStatus(!0),...this.getGuidesFromStatus(!1)];this.applyGuidesUpdate(e)}getGuidesFromStatus(e){let i=[];return this.getOrderedGuideNames(e?this.ID_VISIBLE_GUIDES:this.ID_HIDDEN_GUIDES).forEach(s=>{const n=this.guidesList.find(d=>d.name===s);n&&i.push(Object.assign(Object.assign({},n),{visible:e}))}),i}getOrderedGuideNames(e){var i;const t=(i=this.getContainerElement(e))===null||i===void 0?void 0:i.children;return Array.from(t).map(s=>s.getAttribute("data-guide-name"))}initializeDraggableContainers(){this._sortableVisibleGuides=new u(this.getContainerElement(this.ID_VISIBLE_GUIDES),{group:"guides",ghostClass:"ghost",direction:"vertical",filter:".disable-sort",animation:15,onSort:()=>this.handleSortGuide()}),this._sortableInvisibleGuides=new u(this.getContainerElement(this.ID_HIDDEN_GUIDES),{group:"guides",ghostClass:"ghost",animation:15,filter:".disable-sort",onSort:()=>this.handleSortGuide()})}handleSelectMainGuide(){this.guideSelected.emit(this.mainGuide)}componentDidLoad(){this.initializeDraggableContainers(),this.initGuidesConfig(this.guidesList)}render(){var e,i,t;return a("ez-sidebar-navigator",{class:"ezSidebarNavigator",type:"fixed",size:"md",titleMenu:"Guias"},a("div",{class:"navigator-container"},a("ez-filter-input",{slot:"content",mode:"slim",label:"Buscar guia",onEzChange:s=>this.filterTerm=s.detail}),a("div",{onClick:this.handleSelectMainGuide.bind(this),class:`main-guide ${((e=this.selectedGuide)===null||e===void 0?void 0:e.name)===((i=this.mainGuide)===null||i===void 0?void 0:i.name)?"selected":""}`},a("span",null,(t=this.mainGuide)===null||t===void 0?void 0:t.label)),a("div",{class:"collapsible-container"},a("div",{class:"collapsible-item"},a("ez-collapsible-box",{label:"Guias visíveis",headerSize:"large"},a("div",{id:this.ID_VISIBLE_GUIDES,class:`guide-list ${this.visibleGuides.length?"":"visible-empty-content"}`},this.renderItems(this.visibleGuides)))),a("div",{class:"collapsible-item"},a("ez-collapsible-box",{label:"Guias ocultas",headerSize:"large"},a("div",{id:this.ID_HIDDEN_GUIDES,class:`guide-list ${this.hiddenGuides.length?"":"hidden-empty-content"}`},this.renderItems(this.hiddenGuides))))),a("div",{class:"add-button-container",onClick:this.handleAddGuide.bind(this)},a("ez-icon",{slot:"leftIcon",iconName:"plus"}),a("span",null,"Criar nova guia"))))}get el(){return p(this)}static get watchers(){return{guidesList:["observeVisibleGuides"],selectedGuide:["observeSelectedGuide"]}}};f.style=b;export{f as guides_configurator};
//# sourceMappingURL=guides-configurator.entry-B-yBJOD7.js.map

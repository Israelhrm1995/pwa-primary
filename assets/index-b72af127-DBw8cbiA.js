import{a,f as p}from"./index-BCuik2gT.js";const M=(e,o,s)=>{const c=e.get(o);c?c.includes(s)||c.push(s):e.set(o,[s])},O=(e,o)=>{let s;return(...c)=>{s&&clearTimeout(s),s=setTimeout(()=>{s=0,e(...c)},o)}},_=e=>!("isConnected"in e)||e.isConnected,w=O(e=>{for(let o of e.keys())e.set(o,e.get(o).filter(_))},2e3),P=()=>{if(typeof a!="function")return{};const e=new Map;return{dispose:()=>e.clear(),get:o=>{const s=a();s&&M(e,o,s)},set:o=>{const s=e.get(o);s&&e.set(o,s.filter(p)),w(e)},reset:()=>{e.forEach(o=>o.forEach(p)),w(e)}}},u=e=>typeof e=="function"?e():e,T=(e,o=(s,c)=>s!==c)=>{const s=u(e);let c=new Map(Object.entries(s??{}));const i={dispose:[],get:[],set:[],reset:[]},g=()=>{c=new Map(Object.entries(u(e)??{})),i.reset.forEach(t=>t())},E=()=>{i.dispose.forEach(t=>t()),g()},h=t=>(i.get.forEach(n=>n(t)),c.get(t)),l=(t,n)=>{const r=c.get(t);o(n,r,t)&&(c.set(t,n),i.set.forEach(f=>f(t,n,r)))},x=typeof Proxy>"u"?{}:new Proxy(s,{get(t,n){return h(n)},ownKeys(t){return Array.from(c.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(t,n){return c.has(n)},set(t,n,r){return l(n,r),!0}}),d=(t,n)=>(i[t].push(n),()=>{U(i[t],n)});return{state:x,get:h,set:l,on:d,onChange:(t,n)=>{const r=d("set",(y,C)=>{y===t&&n(C)}),f=d("reset",()=>n(u(e)[t]));return()=>{r(),f()}},use:(...t)=>{const n=t.reduce((r,f)=>(f.set&&r.push(d("set",f.set)),f.get&&r.push(d("get",f.get)),f.reset&&r.push(d("reset",f.reset)),f.dispose&&r.push(d("dispose",f.dispose)),r),[]);return()=>n.forEach(r=>r())},dispose:E,reset:g,forceUpdate:t=>{const n=c.get(t);i.set.forEach(r=>r(t,n,n))}}},U=(e,o)=>{const s=e.indexOf(o);s>=0&&(e[s]=e[e.length-1],e.length--)},R=(e,o)=>{const s=T(e,o);return s.use(P()),s},D=R({exporterProviders:{},filterFieldsDataSource:void 0});export{D as s};
//# sourceMappingURL=index-b72af127-DBw8cbiA.js.map

{"version":3,"file":"snk-configurator.entry-C_1Fehml.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-configurator.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, g as getElement } from './index-479e1293.js';\nimport { ApplicationContext } from '@sankhyalabs/core';\nimport { V as VIEW_MODE } from './constants-7b422de0.js';\nimport { A as AuthorizationConfig } from './AuthorizationConfig-dcbd207a.js';\n\nconst snkConfiguratorCss = \".sc-snk-configurator-h{--snk-configurator__button-close--padding-left:var(--space--medium, 12px);--snk-configurator__title--color:var(--title--primary, #2B3A54);--snk-configurator__title--font-family:var(--font-pattern, \\\"Roboto\\\");--snk-configurator__title--font-size:var(--title--large, 20px);--snk-configurator__title--font-weight:var(--text-weight--extra-large, 700);--snk-configurator__subtitle--color:var(--title--primary, #2B3A54);--snk-configurator__subtitle--font-family:var(--font-pattern, \\\"Roboto\\\");--snk-configurator__subtitle--font-size:var(--text--medium, 14px);--snk-configurator__subtitle--font-weight:var(--text-weight--large, 600);--snk-configurator__scrollbar--color-default:var(--scrollbar--default, #626e82);--snk-configurator__scrollbar--color-background:var(--scrollbar--background, #E5EAF0);--snk-configurator__scrollbar--color-hover:var(--scrollbar--hover, #2B3A54);--snk-configurator__scrollbar--color-clicked:var(--scrollbar--clicked, #a2abb9);--snk-configurator__scrollbar--border-radius:var(--border--radius-small, 6px);--snk-configurator__scrollbar--width:var(--space--small, 6px)}.snk-configurator.sc-snk-configurator{display:grid;grid-template-rows:auto 1fr auto;max-height:100%;width:100%}.snk-configurator__collsable-box-action.sc-snk-configurator{width:100%}.snk-configurator__action-buttons.sc-snk-configurator{display:flex;flex-direction:row;justify-content:flex-end;gap:var(--space--medium)}.snk-configurator__outline.sc-snk-configurator{display:flex;flex-direction:column;gap:var(--space--small);margin-top:var(--space--small);margin-bottom:var(--space--large)}@media screen and (min-width: 480px){.snk-configurator.sc-snk-configurator{width:359px;max-width:359px}}.snk-configurator__button-config.sc-snk-configurator{--ez-button--min-width:100%}.snk-configurator__header.sc-snk-configurator{display:flex;justify-content:space-between;align-items:center;width:100%}.snk-configurator__title.sc-snk-configurator{display:flex;margin:0;line-height:normal;letter-spacing:0em;text-align:left;color:var(--snk-configurator__title--color);font-size:var(--snk-configurator__title--font-size);font-family:var(--snk-configurator__title--font-family);font-weight:var(--snk-configurator__title--font-weight)}.snk-configurator__subtitle.sc-snk-configurator{display:flex;margin:0;padding-top:var(--space--medium);padding-bottom:var(--space--small);color:var(--snk-configurator__subtitle--color);font-size:var(--snk-configurator__subtitle--font-size);font-family:var(--snk-configurator__subtitle--font-family);font-weight:var(--snk-configurator__subtitle--font-weight)}.snk-configurator__button-close.sc-snk-configurator{padding-left:var(--snk-configurator__button-close--padding-left)}.snk-configurator__main.sc-snk-configurator{overflow-y:auto;scrollbar-width:thin;margin:var(--space--medium) 0;scrollbar-color:var(--snk-configurator__scrollbar--color-clicked) var(--snk-configurator__scrollbar--color-background)}.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar{background-color:var(--snk-configurator__scrollbar--color-background);width:var(--snk-configurator__scrollbar--width);max-width:var(--snk-configurator__scrollbar--width);min-width:var(--snk-configurator__scrollbar--width)}.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-track{background-color:var(--snk-configurator__scrollbar--color-background);border-radius:var(--snk-configurator__scrollbar--border-radius)}.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-thumb{background-color:var(--snk-configurator__scrollbar--color-default);border-radius:var(--snk-configurator__scrollbar--border-radius)}.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-thumb:vertical:hover,.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-thumb:horizontal:hover{background-color:var(--snk-configurator__scrollbar--color-hover)}.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-thumb:vertical:active,.snk-configurator__main.sc-snk-configurator::-webkit-scrollbar-thumb:horizontal:active{background-color:var(--snk-configurator__scrollbar--color-clicked)}\";\n\nconst SnkConfigurator = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.configSelected = createEvent(this, \"configSelected\", 7);\n    this.openConfig = createEvent(this, \"openConfig\", 7);\n    this.save = createEvent(this, \"save\", 7);\n    this.cancel = createEvent(this, \"cancel\", 7);\n    this._opened = false;\n    this._permissions = undefined;\n    this.showActionButtons = false;\n    this.configName = undefined;\n    this.resourceID = undefined;\n    this.viewMode = VIEW_MODE.GRID;\n    this.customContainerId = undefined;\n    this.layoutFormConfig = false;\n    this.messagesBuilder = undefined;\n  }\n  /**\n   * Exibe a janela de configuração.\n   */\n  async open() {\n    this._opened = true;\n    this.configSelected.emit(this.getViewModeValue());\n    this.modal.heightMode = 'full';\n  }\n  /**\n   * Fecha a janela de configuração.\n   */\n  async close() {\n    this.closeConfig();\n  }\n  closeConfig() {\n    this._opened = false;\n  }\n  onViewModeChanged(evt) {\n    const value = evt === null || evt === void 0 ? void 0 : evt.detail;\n    this.viewMode = value;\n    this.configSelected.emit(this.viewMode);\n  }\n  onClickOpenConfig() {\n    this.openConfig.emit(this.viewMode);\n  }\n  isAllowed(configName) {\n    if (AuthorizationConfig[configName]) {\n      return this._permissions ? this._permissions.isSup || this._permissions[configName] : false;\n    }\n    return true;\n  }\n  enableModeConfig() {\n    if (!this.isAllowed(AuthorizationConfig.CONFIG_GRID) || !this.isAllowed(AuthorizationConfig.CONFIG)) {\n      return false;\n    }\n    return true;\n  }\n  getViewModeValue() {\n    if (this._permissions != undefined) {\n      if (!this.isAllowed(AuthorizationConfig.CONFIG_GRID)) {\n        this.viewMode = VIEW_MODE.FORM;\n      }\n      else if (!this.isAllowed(AuthorizationConfig.CONFIG)) {\n        this.viewMode = VIEW_MODE.GRID;\n      }\n    }\n    return this.viewMode;\n  }\n  /**\n   * Conforme mecanismo de mensagens, é possível customizar as mensagens dos blocos de construção\n   * através de um pequeno modulo na estrutura da aplicação:\n   * - Criar um arquivo no seguinte caminho: /messages/appmessages.msg.js.\n   * Para conhecer os detalhes do módulo, vide o arquivo neste projeto \"/src/lib/message/resources/snk-configurator.msg.ts\"\n   */\n  getMessage(key) {\n    var _a;\n    return (_a = this.messagesBuilder) === null || _a === void 0 ? void 0 : _a.getMessage(key, {});\n  }\n  handleSave() {\n    if (this.layoutFormConfig) {\n      this._snkLayoutFormConfig.save();\n    }\n    this.save.emit();\n  }\n  componentWillLoad() {\n    this._application = ApplicationContext.getContextValue('__SNK__APPLICATION__');\n    if (this._application) {\n      this._application.getAllAccess(this.resourceID).then(access => (this._permissions = access));\n    }\n    else {\n      this._permissions = {};\n    }\n  }\n  componentDidRender() {\n    if (!this.customContainerId)\n      return;\n    const container = document.querySelector(`#${this.customContainerId}`);\n    const customElements = container === null || container === void 0 ? void 0 : container.querySelector('#SnkConfigContainerSlot');\n    if (!customElements)\n      return;\n    const configuratorCustomElement = customElements.firstElementChild;\n    if (!configuratorCustomElement)\n      return;\n    const insideCustomElementsContainer = this._element.querySelector(\"#slotContainer\");\n    insideCustomElementsContainer === null || insideCustomElementsContainer === void 0 ? void 0 : insideCustomElementsContainer.appendChild(configuratorCustomElement);\n  }\n  render() {\n    return (h(\"ez-modal\", { ref: (element) => (this.modal = element), opened: this._opened, \"close-esc\": false, \"close-outside-click\": false, \"modal-size\": \"small\", scrim: \"light\", onEzCloseModal: () => this.closeConfig() }, h(\"div\", { class: \"snk-configurator\" }, h(\"div\", { class: \"snk-configurator__header\" }, h(\"label\", { class: \"snk-configurator__title\" }, this.getMessage('snkConfigurator.titleConfigurations')), h(\"div\", { class: \"snk-configurator__button-close\" }, h(\"ez-button\", { mode: \"icon\", iconName: \"close\", size: \"medium\", onClick: () => this.closeConfig() }))), h(\"div\", { class: \"snk-configurator__main\" }, h(\"ez-collapsible-box\", { boxBordered: true, label: \"Modo de visualiza\\u00E7\\u00E3o \", headerSize: \"medium\", class: \"snk-configurator__collapsable-box\" }, h(\"ez-radio-button\", { value: this.getViewModeValue().toString(), onEzChange: (evt) => this.onViewModeChanged(evt), enabled: this.enableModeConfig() }, h(\"ez-radio-button-option\", { label: this.getMessage('snkConfigurator.labelGrid'), value: VIEW_MODE.GRID }), h(\"ez-radio-button-option\", { label: this.getMessage('snkConfigurator.labelForm'), value: VIEW_MODE.FORM })), h(\"div\", { class: \"snk-configurator__collsable-box-action\" }, h(\"ez-button\", { label: this.viewMode === VIEW_MODE.GRID ? this.getMessage('snkConfigurator.labelConfigGrid') : this.getMessage('snkConfigurator.labelConfigForm'), class: \"snk-configurator__button-config ez-button--secondary\", onClick: () => this.onClickOpenConfig(), id: \"openConfigurator\" }))), this.layoutFormConfig && h(\"ez-collapsible-box\", { boxBordered: true, value: true, label: \"Layout do formul\\u00E1rio\", headerSize: \"medium\", class: \"snk-configurator__collapsable-box  ez-margin-top--medium\" }, h(\"div\", { class: 'ez-flex ez-flex--column ez-size-width--full' }, h(\"snk-layout-form-config\", { ref: (ref) => this._snkLayoutFormConfig = ref }))), h(\"div\", { id: \"slotContainer\", class: \"snk-configurator__outline\" })), this.showActionButtons && (h(\"div\", { class: \"snk-configurator__action-buttons\" }, h(\"ez-button\", { label: \"Cancelar\", onClick: () => this.cancel.emit() }), h(\"ez-button\", { label: \"Salvar\", onClick: () => this.handleSave(), class: \"ez-button--primary\" }))))));\n  }\n  get _element() { return getElement(this); }\n};\nSnkConfigurator.style = snkConfiguratorCss;\n\nexport { SnkConfigurator as snk_configurator };\n"],"names":["snkConfiguratorCss","SnkConfigurator","hostRef","registerInstance","createEvent","VIEW_MODE","evt","value","configName","AuthorizationConfig","key","_a","ApplicationContext","access","container","customElements","configuratorCustomElement","insideCustomElementsContainer","h","element","ref","getElement"],"mappings":"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","x_google_ignoreList":[0]}
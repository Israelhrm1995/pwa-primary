{"version":3,"file":"snk-data-exporter.entry-BUGuvucG.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-data-exporter.entry.js"],"sourcesContent":["import { r as registerInstance, h, H as Host, g as getElement } from './index-479e1293.js';\nimport { ApplicationContext, ObjectUtils, UserInterface, DataType, ElementIDUtils } from '@sankhyalabs/core';\nimport { ApplicationUtils, DialogType } from '@sankhyalabs/ezui/dist/collection/utils';\nimport { I as IExportType } from './IFetchDataExporterParams-d73bed3d.js';\nimport { D as DataExporterOption, a as DataExporterType, b as DataExporterFormat } from './index-b40568ff.js';\nimport { R as REPORT_LAUNCHER_RESOURCE_ID } from './constants-7b422de0.js';\nimport { D as DataFetcher } from './DataFetcher-db08cad0.js';\nimport { S as SnkDataUnit } from './snk-data-unit-c12986b7.js';\nimport './ISave-da565824.js';\nimport '@sankhyalabs/ezui/dist/collection/utils/constants';\nimport '@sankhyalabs/core/dist/dataunit/metadata/UnitMetadata';\nimport './dataunit-fetcher-1b78797a.js';\nimport './filter-item-type.enum-d45e026f.js';\nimport './form-config-fetcher-e623539b.js';\nimport './PrintUtils-3e4ff0f5.js';\nimport './SnkMessageBuilder-c8b452b6.js';\nimport '@sankhyalabs/core/dist/dataunit/metadata/DataType';\nimport './GetSelectedRecordsIDsInfo-9fa41508.js';\nimport '@sankhyalabs/ezui/dist/collection/components/ez-grid/utils';\nimport '@sankhyalabs/core/dist/utils/SortingUtils';\nimport './ResourceIDUtils-a114189a.js';\n\nclass ItemBuilder {\n  constructor(getMessage, selectedNumber) {\n    this._selectedNumber = 0;\n    this._getMessage = getMessage;\n    this._selectedNumber = selectedNumber;\n  }\n  /**\n   * Método responsável por inserir os items no array de opções.\n   * @param option - Nome da opção que será inserida no array.\n   * @param items - Array que será alimentado com as opções permitidas.\n   */\n  setExportOption(option, items) {\n    const groupName = this.getExportGroupName();\n    if (option === DataExporterOption.EXPORT_TO_PDF) {\n      items.push(this.getExportToPDF(groupName));\n    }\n    if (option === DataExporterOption.EXPORT_TO_XLS) {\n      items.push(this.getExportToXLS(groupName));\n    }\n    this.setExportCurrentPage(option, items);\n    if (this._selectedNumber > 0) {\n      this.setExportAllRecords(option, items);\n    }\n    this.setExportByEmail(option, items);\n  }\n  /**\n   * Método responsável por inserir os itens de exportação personalizada.\n   * @param option - Nome da opção que será inserida no array.\n   * @param items - Array que será alimentado com as opções permitidas.\n   */\n  setExportCurrentPage(option, items) {\n    var _a;\n    const pageOptions = [DataExporterOption.EXPORT_PAGE_TO_PDF, DataExporterOption.EXPORT_PAGE_TO_XLS];\n    if (option === DataExporterOption.EXPORT_CURRENT_PAGE) {\n      items.push(this.getCurrentPage());\n    }\n    if (pageOptions.includes(option)) {\n      let item = items.find((item) => item.id === DataExporterOption.EXPORT_CURRENT_PAGE);\n      if (item == undefined) {\n        items.push(this.getCurrentPage());\n        item = items.find((item) => item.id === DataExporterOption.EXPORT_CURRENT_PAGE);\n      }\n      if (!((_a = item === null || item === void 0 ? void 0 : item.children) === null || _a === void 0 ? void 0 : _a.length)) {\n        item.children = [];\n      }\n      if (option === DataExporterOption.EXPORT_PAGE_TO_PDF) {\n        item.children.push(this.getExportPageToPDF());\n      }\n      if (option === DataExporterOption.EXPORT_PAGE_TO_XLS) {\n        item.children.push(this.getExportPageToXLS());\n      }\n    }\n  }\n  /**\n   * Método responsável por inserir os itens de exportação para todos os registros.\n   * @param option - Nome da opção que será inserida no array.\n   * @param items - Array que será alimentado com as opções permitidas.\n   */\n  setExportAllRecords(option, items) {\n    var _a;\n    const pageOptions = [DataExporterOption.EXPORT_ALL_RECORDS_TO_PDF, DataExporterOption.EXPORT_ALL_RECORDS_TO_XLS];\n    if (option === DataExporterOption.EXPORT_ALL_RECORDS) {\n      items.push(this.getAllRecords());\n    }\n    if (pageOptions.includes(option)) {\n      let item = items.find((item) => item.id === DataExporterOption.EXPORT_ALL_RECORDS);\n      if (item == undefined) {\n        items.push(this.getAllRecords());\n        item = items.find((item) => item.id === DataExporterOption.EXPORT_ALL_RECORDS);\n      }\n      if (!((_a = item.children) === null || _a === void 0 ? void 0 : _a.length)) {\n        item.children = [];\n      }\n      if (option === DataExporterOption.EXPORT_ALL_RECORDS_TO_PDF) {\n        item.children.push(this.getExportAllRecordsToPDF());\n      }\n      if (option === DataExporterOption.EXPORT_ALL_RECORDS_TO_XLS) {\n        item.children.push(this.getExportAllRecordsToXLS());\n      }\n    }\n  }\n  /**\n   * Método responsável por inserir os itens de exportação por e-mail.\n   * @param option - Nome da opção que será inserida no array.\n   * @param items - Array que será alimentado com as opções permitidas.\n   */\n  setExportByEmail(option, items) {\n    if (option === DataExporterOption.EXPORT_BY_EMAIL) {\n      items.push(this.getExportByEmail());\n    }\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação em PDF.\n   * @param groupName - Nome do grupo da opção que será inserida na lista.\n   * @returns Retorna o objeto com os dados de exportação em PDF.\n   */\n  getExportToPDF(groupName) {\n    return {\n      id: DataExporterOption.EXPORT_TO_PDF,\n      label: \"PDF (.pdf)\",\n      group: groupName\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação em XLS.\n   * @param groupName - Nome do grupo da opção que será inserida na lista.\n   * @returns Retorna o objeto com os dados de exportação em XLS.\n   */\n  getExportToXLS(groupName) {\n    return {\n      id: DataExporterOption.EXPORT_TO_XLS,\n      label: `${this._getMessage(\"snkDataExporter.label.spreadsheet\")} (.xls)`,\n      group: groupName\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação personalizada.\n   * @returns Retorna o objeto com os dados de exportação personalizada.\n   */\n  getCurrentPage() {\n    return {\n      id: DataExporterOption.EXPORT_CURRENT_PAGE,\n      label: this._getMessage(\"snkDataExporter.label.currentPage\"),\n      group: this._getMessage(\"snkDataExporter.group.custom\")\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com todos os dados de exportação.\n   * @returns Retorna o objeto com todos os dados de exportação.\n   */\n  getAllRecords() {\n    return {\n      id: DataExporterOption.EXPORT_ALL_RECORDS,\n      label: this._getMessage(\"snkDataExporter.label.allRecords\"),\n      group: this._getMessage(\"snkDataExporter.group.custom\")\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação personalizada em PDF.\n   * @returns Retorna o objeto com os dados de exportação personalizada em PDF.\n   */\n  getExportPageToPDF() {\n    return {\n      id: DataExporterOption.EXPORT_PAGE_TO_PDF,\n      label: \"PDF (.pdf)\"\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação personalizada em XLS.\n   * @returns Retorna o objeto com os dados de exportação personalizada em XLS.\n   */\n  getExportPageToXLS() {\n    return {\n      id: DataExporterOption.EXPORT_PAGE_TO_XLS,\n      label: `${this._getMessage(\"snkDataExporter.label.spreadsheet\")} (.xls)`\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com todos os dados de exportação em PDF.\n   * @returns Retorna o objeto com todos os dados de exportação em PDF.\n   */\n  getExportAllRecordsToPDF() {\n    return {\n      id: DataExporterOption.EXPORT_ALL_RECORDS_TO_PDF,\n      label: \"PDF (.pdf)\"\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com todos os dados de exportação em XLS.\n   * @returns Retorna o objeto com todos os dados de exportação em XLS.\n   */\n  getExportAllRecordsToXLS() {\n    return {\n      id: DataExporterOption.EXPORT_ALL_RECORDS_TO_XLS,\n      label: `${this._getMessage(\"snkDataExporter.label.spreadsheet\")} (.xlsx)`\n    };\n  }\n  /**\n   * Método responsável por capturar o objeto com os dados de exportação por e-mail.\n   * @returns Retorna o objeto com os dados de exportação por e-mail.\n   */\n  getExportByEmail() {\n    return {\n      id: DataExporterOption.EXPORT_BY_EMAIL,\n      label: `${this._getMessage(\"snkDataExporter.label.sendByEmail\")}...`\n    };\n  }\n  /**\n   * Método responsável por capturar o nome do grupo da opção que será inserida na lista.\n   * @returns Retorna o nome do grupo da opção que será inserida na lista.\n   */\n  getExportGroupName() {\n    if (this._selectedNumber === 1) {\n      return this._getMessage(\"snkDataExporter.group.export.selectedLine\");\n    }\n    if (this._selectedNumber > 1) {\n      return this._getMessage(\"snkDataExporter.group.export.multiSelected\").replace('{0}', this._selectedNumber.toString());\n    }\n    return this._getMessage(\"snkDataExporter.group.export.default\");\n  }\n}\n\nfunction getMessage(application, key, params) {\n  var _a;\n  return (_a = application === null || application === void 0 ? void 0 : application.messagesBuilder) === null || _a === void 0 ? void 0 : _a.getMessage(key, params);\n}\nfunction fileViewer({ fileSessionKey, isDownload }) {\n  const application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n  window.open(`${window.location.protocol}//${window.location.hostname}:${window.location.port}/mge/visualizadorArquivos.mge?chaveArquivo=${fileSessionKey}${isDownload ? \"&download=S\" : \"\"}`);\n  ApplicationUtils.info(getMessage(application, \"fileViewer.message.exportSuccess\"), { iconName: \"check\" });\n}\n\nfunction getPersonalizedReports(requestBody) {\n  const application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n  const serviceName = `${application.getModuleName()}@DataExporterSPBean.getPersonalizedReports`;\n  const payload = { serviceName, requestBody };\n  return new Promise((resolve, reject) => (DataFetcher.get()\n    .callServiceBroker(serviceName, ObjectUtils.objectToString(payload))\n    .then(result => resolve(getFormatResponse(result)))\n    .catch(error => reject(error))));\n}\nfunction getFormatResponse(result) {\n  var _a;\n  const response = (_a = result === null || result === void 0 ? void 0 : result.json) === null || _a === void 0 ? void 0 : _a.$;\n  if (response == undefined) {\n    return;\n  }\n  return ObjectUtils.stringToObject(response);\n}\n\nconst DOC_MAX_WIDTH = 860;\nfunction getVisibleColumns(columns) {\n  const visibleColumns = [];\n  let totalWidth = 0;\n  for (const column of columns) {\n    totalWidth += column.width;\n    if (totalWidth >= DOC_MAX_WIDTH) {\n      break;\n    }\n    visibleColumns.push(column);\n  }\n  return visibleColumns;\n}\nfunction getOptionKey(option) {\n  return Object.keys(DataExporterOption)\n    .find((key) => {\n    return DataExporterOption[key] === option;\n  });\n}\n\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n    t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n        t[p[i]] = s[p[i]];\n    }\n  return t;\n};\nclass ServerSideExporterStrategy {\n  constructor(provider) {\n    this._provider = provider;\n  }\n  async getParsedColumns() {\n    const columns = await this._provider.getColumnsMetadata();\n    const visibleColumns = getVisibleColumns(columns);\n    return visibleColumns;\n  }\n  async getColumns(resolveProps) {\n    var _a;\n    if ((_a = getOptionKey(resolveProps === null || resolveProps === void 0 ? void 0 : resolveProps.exportOption)) === null || _a === void 0 ? void 0 : _a.includes(\"PDF\")) {\n      return await this.getParsedColumns();\n    }\n    return await this._provider.getColumnsMetadata();\n  }\n  async getParams(resolveProps) {\n    var _a, _b, _c, _d, _e, _f;\n    const filters = (_b = (_a = this._provider).getFilters) === null || _b === void 0 ? void 0 : _b.call(_a);\n    const columns = await this.getColumns(resolveProps);\n    const sort = (_d = (_c = this._provider).getOrders) === null || _d === void 0 ? void 0 : _d.call(_c);\n    const resourceURI = (_f = (_e = this._provider).getResourceURI) === null || _f === void 0 ? void 0 : _f.call(_e);\n    const selectedIDs = this._provider.getSelectedIDs();\n    const option = resolveProps.exportOption;\n    const currentPageOptions = [\n      DataExporterOption.EXPORT_PAGE_TO_PDF,\n      DataExporterOption.EXPORT_PAGE_TO_XLS\n    ];\n    delete resolveProps.exportOption;\n    let params = Object.assign({ filters,\n      columns,\n      sort,\n      resourceURI, selectedIDs: selectedIDs.slice(0, this._provider.getExportLimit()) }, resolveProps);\n    if (currentPageOptions.includes(option) || resolveProps.type == \"page\") {\n      const offset = this._provider.getOffset();\n      const limit = this._provider.getPageSize();\n      params = Object.assign(Object.assign({}, params), { offset,\n        limit, selectedIDs: [] });\n    }\n    else if (resolveProps.type == \"all\") {\n      params = Object.assign(Object.assign({}, params), { offset: 0, limit: this._provider.getExportLimit(), selectedIDs: [] });\n    }\n    return Promise.resolve(params);\n  }\n  async executeExport(resolveProps) {\n    const _a = await this.getParams(resolveProps), { methodName } = _a, requestBody = __rest(_a, [\"methodName\"]);\n    const application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n    const serviceName = `${application.getModuleName()}@DataExporterSPBean.${methodName}`;\n    const payload = { serviceName, requestBody };\n    return new Promise((resolve, reject) => {\n      DataFetcher.get()\n        .callServiceBroker(serviceName, ObjectUtils.objectToString(payload))\n        .then(result => resolve(this.getFormatResponse(result)))\n        .catch(error => reject(error));\n    });\n  }\n  getFormatResponse(result) {\n    var _a;\n    const response = (_a = result === null || result === void 0 ? void 0 : result.json) === null || _a === void 0 ? void 0 : _a.$;\n    if (response == undefined) {\n      return;\n    }\n    return ObjectUtils.stringToObject(response);\n  }\n}\n\nclass ClientSideExporterStrategy {\n  constructor(provider) {\n    this._provider = provider;\n  }\n  async getParsedColumns() {\n    const columns = await this._provider.getColumnsMetadata();\n    const visibleColumns = getVisibleColumns(columns);\n    return visibleColumns;\n  }\n  async executeExport(resolveProps) {\n    var _a;\n    const { methodName, gridTitle } = resolveProps;\n    const records = await this._provider.getRecords(resolveProps.type);\n    const columns = ((_a = getOptionKey(resolveProps === null || resolveProps === void 0 ? void 0 : resolveProps.exportOption)) === null || _a === void 0 ? void 0 : _a.includes(\"PDF\")) ? await this.getParsedColumns() : await this._provider.getColumnsMetadata();\n    const [serviceName, processor] = this.getExecutor(methodName);\n    const payload = {\n      serviceName,\n      requestBody: {\n        grid: {\n          gridTitle,\n          columns: this.buildColumnsObject(columns),\n          rows: this.buildRowsObject(columns, records),\n          customOptions: { xlsxExtension: false }\n        }\n      }\n    };\n    return new Promise((resolve, reject) => {\n      DataFetcher.get()\n        .callServiceBroker(serviceName, payload)\n        .then(result => resolve(processor(result)))\n        .catch(error => reject(error));\n    });\n  }\n  getExecutor(methodName) {\n    if (methodName === \"exportToPDF\") {\n      return [\n        \"GridPDFBuilderSP.buildPDFFromJson\",\n        responseBody => ({\n          fileSessionKey: responseBody.chavePDF.valor,\n          canPrint: responseBody.permiteImprimir.valor === \"S\",\n          canExport: responseBody.permiteExportar.valor === \"S\",\n          canSendEmail: responseBody.canSendEmail.valor === \"S\",\n          useAppPrint: true\n        })\n      ];\n    }\n    return [\n      \"GridXLSBuilderSP.buildXLSFromJson\",\n      responseBody => ({\n        fileSessionKey: responseBody.chaveXLS.valor,\n        canPrint: true,\n        canExport: true,\n        canSendEmail: true,\n        useAppPrint: false,\n      })\n    ];\n  }\n  buildColumnsObject(columns) {\n    return {\n      column: columns.map((column, index) => {\n        const { label, id, width, userInterface } = column;\n        return Object.assign({ index: index + 1, id,\n          label,\n          width, presentationType: \"P\" }, (TYPE_MAP[userInterface] || { type: \"S\", align: \"left\" }));\n      })\n    };\n  }\n  buildRowsObject(columns, records) {\n    return {\n      row: records.map(rawRecord => {\n        const record = {};\n        columns.forEach((column, index) => record[\"c\" + (index + 1)] = { $: this.formatValue(rawRecord, column) });\n        return record;\n      })\n    };\n  }\n  formatValue(record, column) {\n    if (this._provider.formatValue != undefined) {\n      return this._provider.formatValue(record, column);\n    }\n    return record[column.id] || \"\";\n  }\n}\nconst TYPE_MAP = {\n  [UserInterface.DATE]: { type: \"D\", align: \"center\" },\n  [UserInterface.DATETIME]: { type: \"H\", align: \"center\" },\n  [UserInterface.TIME]: { type: \"I\", align: \"right\" },\n  [UserInterface.ELAPSEDTIME]: { type: \"I\", align: \"right\" },\n  [UserInterface.DECIMALNUMBER]: { type: \"F\", align: \"right\" },\n  [UserInterface.INTEGERNUMBER]: { type: \"I\", align: \"right\" },\n  [UserInterface.SEARCH]: { type: \"S\", align: \"right\" }\n};\n\nconst snkDataExporterCss = \".sc-snk-data-exporter-h{display:flex;width:fit-content;height:fit-content}.snk-data-exporter.sc-snk-data-exporter{display:flex;width:fit-content;height:fit-content}.snk-data-exporter__dropdown.sc-snk-data-exporter{display:none}.snk-data-exporter__dropdown--show.sc-snk-data-exporter{display:flex;flex-direction:column;position:fixed}.snk-data-exporter__dropdown.sc-snk-data-exporter>ez-dropdown.sc-snk-data-exporter{position:relative}\";\n\nconst SnkDataExporter = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this._selectedNumber = 0;\n    this._customPrefix = \"$custom$\";\n    this._releasedToExport = [\n      DataExporterOption.EXPORT_TO_PDF,\n      DataExporterOption.EXPORT_TO_XLS,\n      DataExporterOption.EXPORT_BY_EMAIL,\n      DataExporterOption.EXPORT_PDF_TO_EMAIL,\n      DataExporterOption.EXPORT_XLS_TO_EMAIL,\n      DataExporterOption.EXPORT_PAGE_TO_PDF,\n      DataExporterOption.EXPORT_PAGE_TO_XLS,\n      DataExporterOption.EXPORT_ALL_RECORDS_TO_PDF,\n      DataExporterOption.EXPORT_ALL_RECORDS_TO_XLS,\n    ];\n    this._items = [];\n    this._showDropdown = false;\n    this.provider = null;\n    this.messagesBuilder = undefined;\n  }\n  async exportByEmail() {\n    const selectedRows = this._selectedNumber;\n    const config = {\n      type: selectedRows > 0 ? \"selection\" : \"all\",\n      selectedRows,\n      email: {\n        attachments: [\n          { name: this._appLabel }\n        ]\n      },\n      resolver: ({ type, format, email: { to, subject, message } }) => {\n        var _a;\n        const methodName = (_a = DataExporterFormat[format === null || format === void 0 ? void 0 : format.toUpperCase()]) !== null && _a !== void 0 ? _a : DataExporterFormat.PDF;\n        this.resolveExporter({ type, methodName, to, subject, message, fileName: this._appLabel, gridTitle: this._appLabel }, () => {\n          this._snkEmailSender.close();\n          ApplicationUtils.info(this.getMessage(\"snkDataExporter.message.emailSuccess\"), { iconName: \"check\" });\n        });\n      }\n    };\n    this._snkEmailSender.open(config);\n  }\n  /**\n   * Conforme mecanismo de mensagens, é possível customizar as mensagens dos blocos de construção\n   * através de um pequeno modulo na estrutura da aplicação:\n   * - Criar um arquivo no seguinte caminho: /messages/appmessages.msg.js.\n   * Para conhecer os detalhes do módulo, vide o arquivo neste projeto \"/src/lib/message/resources/snk-data-exporter.msg.ts\"\n   */\n  getMessage(key, params) {\n    if (this.messagesBuilder == undefined) {\n      const dataUnit = SnkDataUnit.getNearestInstance(this._element);\n      if (dataUnit) {\n        this.messagesBuilder = dataUnit.messagesBuilder;\n      }\n    }\n    return this.messagesBuilder.getMessage(key, params);\n  }\n  positionDropdown() {\n    var _a;\n    const bounding = (_a = this._ezButton) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    if (bounding == undefined || this._dropdownParent == undefined) {\n      return;\n    }\n    this._dropdownParent.style.top = (bounding.y + bounding.height + 5) + \"px\";\n    this._dropdownParent.style.left = bounding.x + \"px\";\n  }\n  closeDropdown(evt) {\n    const target = evt === null || evt === void 0 ? void 0 : evt.target;\n    if (target == undefined) {\n      return;\n    }\n    if (!target.closest(\".snk-data-exporter\")) {\n      this._showDropdown = false;\n    }\n  }\n  setEvents() {\n    document.removeEventListener(\"click\", this.closeDropdown.bind(this));\n    document.addEventListener(\"click\", this.closeDropdown.bind(this));\n    document.removeEventListener(\"scroll\", this.positionDropdown.bind(this));\n    document.addEventListener(\"scroll\", this.positionDropdown.bind(this));\n  }\n  controlDropdown() {\n    this._showDropdown = !this._showDropdown;\n  }\n  async resolveExporter(resolveProps, callbackResolver) {\n    if (this.provider == undefined || resolveProps == undefined || callbackResolver == undefined) {\n      return;\n    }\n    this.getExporterStrategy().executeExport(resolveProps)\n      .then((result) => callbackResolver(result))\n      .catch((exception) => {\n      console.error(exception);\n      let { title, message, statusMessage } = exception || {};\n      ApplicationUtils.error(title || this.getMessage(\"snkDataExporter.message.exportError\"), statusMessage || message || this.getMessage(\"snkDataExporter.message.unknownFailure\"));\n    });\n  }\n  getExporterStrategy() {\n    return this.provider.getRecords == undefined\n      ? new ServerSideExporterStrategy(this.provider)\n      : new ClientSideExporterStrategy(this.provider);\n  }\n  getOptionKey(option) {\n    return Object.keys(DataExporterOption)\n      .find((key) => {\n      return DataExporterOption[key] === option;\n    });\n  }\n  getExportType(option) {\n    if (option === DataExporterOption.EXPORT_ALL_RECORDS_TO_PDF || option === DataExporterOption.EXPORT_ALL_RECORDS_TO_XLS) {\n      return IExportType.ALL;\n    }\n    if (option === DataExporterOption.EXPORT_PAGE_TO_PDF || option === DataExporterOption.EXPORT_PAGE_TO_XLS) {\n      return IExportType.PAGE;\n    }\n    return IExportType.SELECTION;\n  }\n  async dispatchExporter(option) {\n    var _a, _b, _c;\n    const optionKey = this.getOptionKey(option);\n    const fileType = (_a = DataExporterType[optionKey]) !== null && _a !== void 0 ? _a : DataExporterType.EXPORT_TO_PDF;\n    const params = {\n      methodName: DataExporterOption[`EXPORT_TO_${fileType}`],\n      fileName: this._appLabel,\n      gridTitle: this._appLabel,\n      exportOption: option,\n      limit: (_c = (_b = this.provider) === null || _b === void 0 ? void 0 : _b.getExportLimit) === null || _c === void 0 ? void 0 : _c.call(_b),\n      type: this.getExportType(option),\n    };\n    await this.resolveExporter(params, (response) => {\n      if (response.canExport || fileType === DataExporterType.EXPORT_TO_PDF) {\n        fileViewer(Object.assign(Object.assign({}, response), { fileType }));\n      }\n      else {\n        ApplicationUtils.error(this.getMessage(\"snkDataExporter.title.permission\"), this.getMessage(\"snkDataExporter.message.exportPermission\"));\n      }\n    });\n  }\n  async processExporter(evt) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const item = evt === null || evt === void 0 ? void 0 : evt.detail;\n    const exportCurrentPageOptions = [DataExporterOption.EXPORT_PAGE_TO_PDF, DataExporterOption.EXPORT_PAGE_TO_XLS];\n    const isCustomReport = (_a = item === null || item === void 0 ? void 0 : item.id) === null || _a === void 0 ? void 0 : _a.includes(this._customPrefix);\n    if ((item === null || item === void 0 ? void 0 : item.id) === DataExporterOption.EXPORT_CURRENT_PAGE)\n      return;\n    const selectedRecords = (_b = this.provider) === null || _b === void 0 ? void 0 : _b.getSelectedIDs();\n    const totalRecords = (_c = this.provider) === null || _c === void 0 ? void 0 : _c.getTotalRecords();\n    const totalPerPage = (_e = (_d = this.provider) === null || _d === void 0 ? void 0 : _d.getPageSize) === null || _e === void 0 ? void 0 : _e.call(_d);\n    const exportLimit = (_g = (_f = this.provider) === null || _f === void 0 ? void 0 : _f.getExportLimit) === null || _g === void 0 ? void 0 : _g.call(_f);\n    let limitExceeded = false;\n    if ((exportCurrentPageOptions.includes(item === null || item === void 0 ? void 0 : item.id) && totalPerPage <= exportLimit) || isCustomReport) {\n      limitExceeded = false;\n    }\n    else if (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) {\n      limitExceeded = selectedRecords.length > exportLimit;\n    }\n    else if (totalRecords > exportLimit)\n      limitExceeded = true;\n    if (limitExceeded) {\n      const formattedLimit = exportLimit.toLocaleString('pt-BR', { minimumFractionDigits: 0 });\n      const limitModalMessages = {\n        title: this.getMessage(\"snkDataExporter.limitExceeded.title\"),\n        description: `\n          ${this.getMessage(\"snkDataExporter.limitExceeded.description\", { limit: formattedLimit })}\n          <br/><br/>\n          <b>\n          ${this.getMessage(\"snkDataExporter.limitExceeded.subdescription\")}\n          </b>\n        `,\n        cancel: this.getMessage(\"snkDataExporter.limitExceeded.cancel\"),\n        confirm: this.getMessage(\"snkDataExporter.limitExceeded.continue\")\n      };\n      const isAccepted = await ApplicationUtils.confirm(limitModalMessages.title, limitModalMessages.description, null, DialogType.WARN, {\n        labelCancel: limitModalMessages.cancel,\n        labelConfirm: limitModalMessages.confirm,\n      });\n      if (!isAccepted)\n        return;\n    }\n    if (isCustomReport) {\n      this.openPersonalizedReports(item.id);\n      this._showDropdown = false;\n      return;\n    }\n    if (!this.getFilteredReleasedToExport().includes(item === null || item === void 0 ? void 0 : item.id)) {\n      return;\n    }\n    if (item.id === DataExporterOption.EXPORT_BY_EMAIL) {\n      this.exportByEmail();\n    }\n    else {\n      this.dispatchExporter(item.id);\n    }\n    this._showDropdown = false;\n  }\n  getFilteredReleasedToExport() {\n    var _a, _b;\n    if (this.provider == undefined) {\n      return this._releasedToExport;\n    }\n    const hiddenOptions = (_b = (_a = this.provider).getHiddenOptions) === null || _b === void 0 ? void 0 : _b.call(_a);\n    if (hiddenOptions == undefined) {\n      return this._releasedToExport;\n    }\n    return this._releasedToExport.filter(option => !hiddenOptions.includes(option));\n  }\n  loadItems() {\n    const items = [];\n    this.getFilteredReleasedToExport()\n      .forEach((option) => {\n      var _a;\n      (_a = this._itemBuilder) === null || _a === void 0 ? void 0 : _a.setExportOption(option, items);\n    });\n    this.loadPersonalizedItems(items);\n  }\n  async loadPersonalizedItems(items) {\n    var _a, _b;\n    const recordID = (_b = (_a = this.provider) === null || _a === void 0 ? void 0 : _a.getRecordID) === null || _b === void 0 ? void 0 : _b.call(_a);\n    if (recordID == undefined) {\n      this._items = items;\n      return;\n    }\n    const personalizedReports = await getPersonalizedReports({ recordID });\n    personalizedReports === null || personalizedReports === void 0 ? void 0 : personalizedReports.forEach((item) => {\n      items.push({\n        id: `${this._customPrefix}_${item.ID}`,\n        label: item.label,\n        group: this.getMessage(\"snkDataExporter.group.custom\")\n      });\n    });\n    this._items = items;\n  }\n  openPersonalizedReports(option) {\n    var _a, _b;\n    const pkObject = [];\n    const appId = (option === null || option === void 0 ? void 0 : option.replace(this._customPrefix, \"\")) || \"\";\n    (_b = (_a = this.provider) === null || _a === void 0 ? void 0 : _a.getSelectedIDs) === null || _b === void 0 ? void 0 : _b.call(_a).forEach(({ name, type, value }, index) => {\n      const fields = {};\n      fields['fields'] = [];\n      // Se for o primeiro elemento, adiciona essa primeira PK\n      if (index === 0) {\n        pkObject[`PK_${name}`] = { type: this.parseDataType(type), value };\n        pkObject['pks'] = [];\n      }\n      const dataFields = { nome: `PK_${name}`, tipo: this.parseDataType(type), valor: value };\n      fields['fields'].push(dataFields);\n      pkObject['pks'].push(fields);\n    });\n    this._application.openApp(`${REPORT_LAUNCHER_RESOURCE_ID}${appId}`, pkObject);\n  }\n  parseDataType(type) {\n    switch (type) {\n      case DataType.NUMBER:\n        return \"I\";\n      case DataType.DATE:\n        return \"D\";\n      default:\n        return \"S\";\n    }\n  }\n  loadDropdown() {\n    var _a;\n    this._selectedNumber = ((_a = this.provider) === null || _a === void 0 ? void 0 : _a.getSelectedNumber()) || 0;\n    this._itemBuilder = new ItemBuilder(this.getMessage.bind(this), this._selectedNumber);\n    this.loadItems();\n  }\n  getElementID(sufix) {\n    return {\n      [ElementIDUtils.DATA_ELEMENT_ID_ATTRIBUTE_NAME]: ElementIDUtils.getInternalIDInfo(sufix)\n    };\n  }\n  canShowDropdown() {\n    var _a;\n    return this._showDropdown && ((_a = this._items) === null || _a === void 0 ? void 0 : _a.length) > 0;\n  }\n  componentWillLoad() {\n    var _a;\n    this._application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n    (_a = this._application) === null || _a === void 0 ? void 0 : _a.getAppLabel().then(result => this._appLabel = result);\n    this.setEvents();\n  }\n  componentDidLoad() {\n    if (this._element == undefined) {\n      return;\n    }\n    ElementIDUtils.addIDInfo(this._element);\n    this.positionDropdown();\n  }\n  componentWillUpdate() {\n    var _a;\n    if (this._showDropdown && !((_a = this._items) === null || _a === void 0 ? void 0 : _a.length)) {\n      this.loadDropdown();\n    }\n  }\n  componentDidUpdate() {\n    var _a;\n    if (this._showDropdown) {\n      this.positionDropdown();\n    }\n    else if (((_a = this._items) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n      this._items = [];\n    }\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: `snk-data-exporter\n          ${this.canShowDropdown() ? \" ez-elevation--16\" : \"\"}\n        ` }, h(\"ez-button\", Object.assign({ ref: (ref) => this._ezButton = ref, iconName: \"file-download\", size: \"small\", mode: \"icon\", title: this.getMessage(\"snkDataExporter.group.export.title\"), onClick: () => this.controlDropdown() }, this.getElementID(\"button\"))), h(\"div\", Object.assign({ ref: (ref) => this._dropdownParent = ref, class: `snk-data-exporter__dropdown\n              ${this.canShowDropdown() ? \"snk-data-exporter__dropdown--show\" : \"\"}\n            ` }, this.getElementID(\"dropdown\")), this.canShowDropdown() &&\n      h(\"ez-dropdown\", Object.assign({ items: this._items, onEzClick: (evt) => this.processExporter(evt) }, this.getElementID(\"dropdown\"))))), this.canShowDropdown() &&\n      h(\"div\", Object.assign({ class: \"ez-scrim ez-scrim--light\" }, this.getElementID(\"ezScrim\"))), h(\"snk-exporter-email-sender\", Object.assign({ ref: ref => this._snkEmailSender = ref, getMessage: (key, params) => this.getMessage(key, params) }, this.getElementID(\"snkExporterEmailSender\")))));\n  }\n  get _element() { return getElement(this); }\n};\nSnkDataExporter.style = snkDataExporterCss;\n\nexport { SnkDataExporter as snk_data_exporter };\n"],"names":["ItemBuilder","getMessage","selectedNumber","option","items","groupName","DataExporterOption","_a","pageOptions","item","application","key","params","fileViewer","fileSessionKey","isDownload","ApplicationContext","ApplicationUtils","getPersonalizedReports","requestBody","serviceName","payload","resolve","reject","DataFetcher","ObjectUtils","result","getFormatResponse","error","response","DOC_MAX_WIDTH","getVisibleColumns","columns","visibleColumns","totalWidth","column","getOptionKey","__rest","s","t","p","i","ServerSideExporterStrategy","provider","resolveProps","_b","_c","_d","_e","_f","filters","sort","resourceURI","selectedIDs","currentPageOptions","offset","limit","methodName","ClientSideExporterStrategy","gridTitle","records","processor","responseBody","index","label","id","width","userInterface","TYPE_MAP","rawRecord","record","UserInterface","snkDataExporterCss","SnkDataExporter","hostRef","registerInstance","selectedRows","config","type","format","to","subject","message","DataExporterFormat","dataUnit","SnkDataUnit","bounding","evt","target","callbackResolver","exception","title","statusMessage","IExportType","optionKey","fileType","DataExporterType","_g","exportCurrentPageOptions","isCustomReport","selectedRecords","totalRecords","totalPerPage","exportLimit","limitExceeded","formattedLimit","limitModalMessages","DialogType","hiddenOptions","recordID","personalizedReports","pkObject","appId","name","value","fields","dataFields","REPORT_LAUNCHER_RESOURCE_ID","DataType","sufix","ElementIDUtils","h","Host","ref","getElement"],"mappings":"q0BAsBA,MAAMA,CAAY,CAChB,YAAYC,EAAYC,EAAgB,CACtC,KAAK,gBAAkB,EACvB,KAAK,YAAcD,EACnB,KAAK,gBAAkBC,CAC3B,CAME,gBAAgBC,EAAQC,EAAO,CAC7B,MAAMC,EAAY,KAAK,mBAAoB,EACvCF,IAAWG,EAAmB,eAChCF,EAAM,KAAK,KAAK,eAAeC,CAAS,CAAC,EAEvCF,IAAWG,EAAmB,eAChCF,EAAM,KAAK,KAAK,eAAeC,CAAS,CAAC,EAE3C,KAAK,qBAAqBF,EAAQC,CAAK,EACnC,KAAK,gBAAkB,GACzB,KAAK,oBAAoBD,EAAQC,CAAK,EAExC,KAAK,iBAAiBD,EAAQC,CAAK,CACvC,CAME,qBAAqBD,EAAQC,EAAO,CAClC,IAAIG,EACJ,MAAMC,EAAc,CAACF,EAAmB,mBAAoBA,EAAmB,kBAAkB,EAIjG,GAHIH,IAAWG,EAAmB,qBAChCF,EAAM,KAAK,KAAK,gBAAgB,EAE9BI,EAAY,SAASL,CAAM,EAAG,CAChC,IAAIM,EAAOL,EAAM,KAAMK,GAASA,EAAK,KAAOH,EAAmB,mBAAmB,EAC9EG,GAAQ,OACVL,EAAM,KAAK,KAAK,gBAAgB,EAChCK,EAAOL,EAAM,KAAMK,GAASA,EAAK,KAAOH,EAAmB,mBAAmB,GAEzE,GAAAC,EAAKE,GAAS,KAA0B,OAASA,EAAK,YAAc,MAAQF,IAAO,SAAkBA,EAAG,SAC7GE,EAAK,SAAW,CAAE,GAEhBN,IAAWG,EAAmB,oBAChCG,EAAK,SAAS,KAAK,KAAK,mBAAkB,CAAE,EAE1CN,IAAWG,EAAmB,oBAChCG,EAAK,SAAS,KAAK,KAAK,mBAAkB,CAAE,CAEpD,CACA,CAME,oBAAoBN,EAAQC,EAAO,CACjC,IAAIG,EACJ,MAAMC,EAAc,CAACF,EAAmB,0BAA2BA,EAAmB,yBAAyB,EAI/G,GAHIH,IAAWG,EAAmB,oBAChCF,EAAM,KAAK,KAAK,eAAe,EAE7BI,EAAY,SAASL,CAAM,EAAG,CAChC,IAAIM,EAAOL,EAAM,KAAMK,GAASA,EAAK,KAAOH,EAAmB,kBAAkB,EAC7EG,GAAQ,OACVL,EAAM,KAAK,KAAK,eAAe,EAC/BK,EAAOL,EAAM,KAAMK,GAASA,EAAK,KAAOH,EAAmB,kBAAkB,GAExE,GAAAC,EAAKE,EAAK,YAAc,MAAQF,IAAO,SAAkBA,EAAG,SACjEE,EAAK,SAAW,CAAE,GAEhBN,IAAWG,EAAmB,2BAChCG,EAAK,SAAS,KAAK,KAAK,yBAAwB,CAAE,EAEhDN,IAAWG,EAAmB,2BAChCG,EAAK,SAAS,KAAK,KAAK,yBAAwB,CAAE,CAE1D,CACA,CAME,iBAAiBN,EAAQC,EAAO,CAC1BD,IAAWG,EAAmB,iBAChCF,EAAM,KAAK,KAAK,kBAAkB,CAExC,CAME,eAAeC,EAAW,CACxB,MAAO,CACL,GAAIC,EAAmB,cACvB,MAAO,aACP,MAAOD,CACR,CACL,CAME,eAAeA,EAAW,CACxB,MAAO,CACL,GAAIC,EAAmB,cACvB,MAAO,GAAG,KAAK,YAAY,mCAAmC,CAAC,UAC/D,MAAOD,CACR,CACL,CAKE,gBAAiB,CACf,MAAO,CACL,GAAIC,EAAmB,oBACvB,MAAO,KAAK,YAAY,mCAAmC,EAC3D,MAAO,KAAK,YAAY,8BAA8B,CACvD,CACL,CAKE,eAAgB,CACd,MAAO,CACL,GAAIA,EAAmB,mBACvB,MAAO,KAAK,YAAY,kCAAkC,EAC1D,MAAO,KAAK,YAAY,8BAA8B,CACvD,CACL,CAKE,oBAAqB,CACnB,MAAO,CACL,GAAIA,EAAmB,mBACvB,MAAO,YACR,CACL,CAKE,oBAAqB,CACnB,MAAO,CACL,GAAIA,EAAmB,mBACvB,MAAO,GAAG,KAAK,YAAY,mCAAmC,CAAC,SAChE,CACL,CAKE,0BAA2B,CACzB,MAAO,CACL,GAAIA,EAAmB,0BACvB,MAAO,YACR,CACL,CAKE,0BAA2B,CACzB,MAAO,CACL,GAAIA,EAAmB,0BACvB,MAAO,GAAG,KAAK,YAAY,mCAAmC,CAAC,UAChE,CACL,CAKE,kBAAmB,CACjB,MAAO,CACL,GAAIA,EAAmB,gBACvB,MAAO,GAAG,KAAK,YAAY,mCAAmC,CAAC,KAChE,CACL,CAKE,oBAAqB,CACnB,OAAI,KAAK,kBAAoB,EACpB,KAAK,YAAY,2CAA2C,EAEjE,KAAK,gBAAkB,EAClB,KAAK,YAAY,4CAA4C,EAAE,QAAQ,MAAO,KAAK,gBAAgB,UAAU,EAE/G,KAAK,YAAY,sCAAsC,CAClE,CACA,CAEA,SAASL,EAAWS,EAAaC,EAAKC,EAAQ,CAC5C,IAAIL,EACJ,OAAQA,EAAKG,GAAgB,KAAiC,OAASA,EAAY,mBAAqB,MAAQH,IAAO,OAAS,OAASA,EAAG,WAAWI,EAAKC,CAAM,CACpK,CACA,SAASC,EAAW,CAAE,eAAAC,EAAgB,WAAAC,GAAc,CAClD,MAAML,EAAcM,EAAmB,gBAAgB,sBAAsB,EAC7E,OAAO,KAAK,GAAG,OAAO,SAAS,QAAQ,KAAK,OAAO,SAAS,QAAQ,IAAI,OAAO,SAAS,IAAI,8CAA8CF,CAAc,GAAGC,EAAa,cAAgB,EAAE,EAAE,EAC5LE,EAAiB,KAAKhB,EAAWS,EAAa,kCAAkC,EAAG,CAAE,SAAU,QAAS,CAC1G,CAEA,SAASQ,EAAuBC,EAAa,CAE3C,MAAMC,EAAc,GADAJ,EAAmB,gBAAgB,sBAAsB,EAC1C,cAAa,CAAE,6CAC5CK,EAAU,CAAE,YAAAD,EAAa,YAAAD,CAAa,EAC5C,OAAO,IAAI,QAAQ,CAACG,EAASC,IAAYC,EAAY,IAAG,EACrD,kBAAkBJ,EAAaK,EAAY,eAAeJ,CAAO,CAAC,EAClE,KAAKK,GAAUJ,EAAQK,EAAkBD,CAAM,CAAC,CAAC,EACjD,MAAME,GAASL,EAAOK,CAAK,CAAC,CAAE,CACnC,CACA,SAASD,EAAkBD,EAAQ,CACjC,IAAInB,EACJ,MAAMsB,GAAYtB,EAAKmB,GAAW,KAA4B,OAASA,EAAO,QAAU,MAAQnB,IAAO,OAAS,OAASA,EAAG,EAC5H,GAAIsB,GAAY,KAGhB,OAAOJ,EAAY,eAAeI,CAAQ,CAC5C,CAEA,MAAMC,EAAgB,IACtB,SAASC,EAAkBC,EAAS,CAClC,MAAMC,EAAiB,CAAE,EACzB,IAAIC,EAAa,EACjB,UAAWC,KAAUH,EAAS,CAE5B,GADAE,GAAcC,EAAO,MACjBD,GAAcJ,EAChB,MAEFG,EAAe,KAAKE,CAAM,CAC9B,CACE,OAAOF,CACT,CACA,SAASG,EAAajC,EAAQ,CAC5B,OAAO,OAAO,KAAKG,CAAkB,EAClC,KAAMK,GACAL,EAAmBK,CAAG,IAAMR,CACpC,CACH,CAEA,IAAIkC,EAA4C,SAAUC,EAAG,EAAG,CAC9D,IAAIC,EAAI,CAAE,EACV,QAASC,KAAKF,EAAO,OAAO,UAAU,eAAe,KAAKA,EAAGE,CAAC,GAAK,EAAE,QAAQA,CAAC,EAAI,IAChFD,EAAEC,CAAC,EAAIF,EAAEE,CAAC,GACZ,GAAIF,GAAK,MAAQ,OAAO,OAAO,uBAA0B,WACvD,QAASG,EAAI,EAAGD,EAAI,OAAO,sBAAsBF,CAAC,EAAGG,EAAID,EAAE,OAAQC,IAC7D,EAAE,QAAQD,EAAEC,CAAC,CAAC,EAAI,GAAK,OAAO,UAAU,qBAAqB,KAAKH,EAAGE,EAAEC,CAAC,CAAC,IAC3EF,EAAEC,EAAEC,CAAC,CAAC,EAAIH,EAAEE,EAAEC,CAAC,CAAC,GAEtB,OAAOF,CACT,EACA,MAAMG,CAA2B,CAC/B,YAAYC,EAAU,CACpB,KAAK,UAAYA,CACrB,CACE,MAAM,kBAAmB,CACvB,MAAMX,EAAU,MAAM,KAAK,UAAU,mBAAoB,EAEzD,OADuBD,EAAkBC,CAAO,CAEpD,CACE,MAAM,WAAWY,EAAc,CAC7B,IAAIrC,EACJ,MAAK,GAAAA,EAAK6B,EAAaQ,GAAiB,KAAkC,OAASA,EAAa,YAAY,KAAO,MAAQrC,IAAO,SAAkBA,EAAG,SAAS,KAAK,EAC5J,MAAM,KAAK,iBAAkB,EAE/B,MAAM,KAAK,UAAU,mBAAoB,CACpD,CACE,MAAM,UAAUqC,EAAc,CAC5B,IAAIrC,EAAIsC,EAAIC,EAAIC,EAAIC,EAAIC,EACxB,MAAMC,GAAWL,GAAMtC,EAAK,KAAK,WAAW,cAAgB,MAAQsC,IAAO,OAAS,OAASA,EAAG,KAAKtC,CAAE,EACjGyB,EAAU,MAAM,KAAK,WAAWY,CAAY,EAC5CO,GAAQJ,GAAMD,EAAK,KAAK,WAAW,aAAe,MAAQC,IAAO,OAAS,OAASA,EAAG,KAAKD,CAAE,EAC7FM,GAAeH,GAAMD,EAAK,KAAK,WAAW,kBAAoB,MAAQC,IAAO,OAAS,OAASA,EAAG,KAAKD,CAAE,EACzGK,EAAc,KAAK,UAAU,eAAgB,EAC7ClD,EAASyC,EAAa,aACtBU,EAAqB,CACzBhD,EAAmB,mBACnBA,EAAmB,kBACpB,EACD,OAAOsC,EAAa,aACpB,IAAIhC,EAAS,OAAO,OAAO,CAAE,QAAAsC,EAC3B,QAAAlB,EACA,KAAAmB,EACA,YAAAC,EAAa,YAAaC,EAAY,MAAM,EAAG,KAAK,UAAU,eAAc,CAAE,CAAG,EAAET,CAAY,EACjG,GAAIU,EAAmB,SAASnD,CAAM,GAAKyC,EAAa,MAAQ,OAAQ,CACtE,MAAMW,EAAS,KAAK,UAAU,UAAW,EACnCC,EAAQ,KAAK,UAAU,YAAa,EAC1C5C,EAAS,OAAO,OAAO,OAAO,OAAO,GAAIA,CAAM,EAAG,CAAE,OAAA2C,EAClD,MAAAC,EAAO,YAAa,CAAA,EAAI,CAChC,MACaZ,EAAa,MAAQ,QAC5BhC,EAAS,OAAO,OAAO,OAAO,OAAO,CAAA,EAAIA,CAAM,EAAG,CAAE,OAAQ,EAAG,MAAO,KAAK,UAAU,iBAAkB,YAAa,CAAA,EAAI,GAE1H,OAAO,QAAQ,QAAQA,CAAM,CACjC,CACE,MAAM,cAAcgC,EAAc,CAChC,MAAMrC,EAAK,MAAM,KAAK,UAAUqC,CAAY,EAAG,CAAE,WAAAa,GAAelD,EAAIY,EAAckB,EAAO9B,EAAI,CAAC,YAAY,CAAC,EAErGa,EAAc,GADAJ,EAAmB,gBAAgB,sBAAsB,EAC1C,cAAa,CAAE,uBAAuByC,CAAU,GAC7EpC,EAAU,CAAE,YAAAD,EAAa,YAAAD,CAAa,EAC5C,OAAO,IAAI,QAAQ,CAACG,EAASC,IAAW,CACtCC,EAAY,IAAG,EACZ,kBAAkBJ,EAAaK,EAAY,eAAeJ,CAAO,CAAC,EAClE,KAAKK,GAAUJ,EAAQ,KAAK,kBAAkBI,CAAM,CAAC,CAAC,EACtD,MAAME,GAASL,EAAOK,CAAK,CAAC,CACrC,CAAK,CACL,CACE,kBAAkBF,EAAQ,CACxB,IAAInB,EACJ,MAAMsB,GAAYtB,EAAKmB,GAAW,KAA4B,OAASA,EAAO,QAAU,MAAQnB,IAAO,OAAS,OAASA,EAAG,EAC5H,GAAIsB,GAAY,KAGhB,OAAOJ,EAAY,eAAeI,CAAQ,CAC9C,CACA,CAEA,MAAM6B,CAA2B,CAC/B,YAAYf,EAAU,CACpB,KAAK,UAAYA,CACrB,CACE,MAAM,kBAAmB,CACvB,MAAMX,EAAU,MAAM,KAAK,UAAU,mBAAoB,EAEzD,OADuBD,EAAkBC,CAAO,CAEpD,CACE,MAAM,cAAcY,EAAc,CAChC,IAAIrC,EACJ,KAAM,CAAE,WAAAkD,EAAY,UAAAE,CAAS,EAAKf,EAC5BgB,EAAU,MAAM,KAAK,UAAU,WAAWhB,EAAa,IAAI,EAC3DZ,EAAY,GAAAzB,EAAK6B,EAAaQ,GAAiB,KAAkC,OAASA,EAAa,YAAY,KAAO,MAAQrC,IAAO,SAAkBA,EAAG,SAAS,KAAK,EAAK,MAAM,KAAK,iBAAgB,EAAK,MAAM,KAAK,UAAU,mBAAoB,EAC1P,CAACa,EAAayC,CAAS,EAAI,KAAK,YAAYJ,CAAU,EACtDpC,EAAU,CACd,YAAAD,EACA,YAAa,CACX,KAAM,CACJ,UAAAuC,EACA,QAAS,KAAK,mBAAmB3B,CAAO,EACxC,KAAM,KAAK,gBAAgBA,EAAS4B,CAAO,EAC3C,cAAe,CAAE,cAAe,EAAK,CAC/C,CACA,CACK,EACD,OAAO,IAAI,QAAQ,CAACtC,EAASC,IAAW,CACtCC,EAAY,IAAG,EACZ,kBAAkBJ,EAAaC,CAAO,EACtC,KAAKK,GAAUJ,EAAQuC,EAAUnC,CAAM,CAAC,CAAC,EACzC,MAAME,GAASL,EAAOK,CAAK,CAAC,CACrC,CAAK,CACL,CACE,YAAY6B,EAAY,CACtB,OAAIA,IAAe,cACV,CACL,oCACAK,IAAiB,CACf,eAAgBA,EAAa,SAAS,MACtC,SAAUA,EAAa,gBAAgB,QAAU,IACjD,UAAWA,EAAa,gBAAgB,QAAU,IAClD,aAAcA,EAAa,aAAa,QAAU,IAClD,YAAa,EACd,EACF,EAEI,CACL,oCACAA,IAAiB,CACf,eAAgBA,EAAa,SAAS,MACtC,SAAU,GACV,UAAW,GACX,aAAc,GACd,YAAa,EACd,EACF,CACL,CACE,mBAAmB9B,EAAS,CAC1B,MAAO,CACL,OAAQA,EAAQ,IAAI,CAACG,EAAQ4B,IAAU,CACrC,KAAM,CAAE,MAAAC,EAAO,GAAAC,EAAI,MAAAC,EAAO,cAAAC,CAAe,EAAGhC,EAC5C,OAAO,OAAO,OAAO,CAAE,MAAO4B,EAAQ,EAAG,GAAAE,EACvC,MAAAD,EACA,MAAAE,EAAO,iBAAkB,GAAK,EAAGE,EAASD,CAAa,GAAK,CAAE,KAAM,IAAK,MAAO,MAAM,CAAI,CAC7F,CAAA,CACF,CACL,CACE,gBAAgBnC,EAAS4B,EAAS,CAChC,MAAO,CACL,IAAKA,EAAQ,IAAIS,GAAa,CAC5B,MAAMC,EAAS,CAAE,EACjB,OAAAtC,EAAQ,QAAQ,CAACG,EAAQ4B,IAAUO,EAAO,KAAOP,EAAQ,EAAE,EAAI,CAAE,EAAG,KAAK,YAAYM,EAAWlC,CAAM,EAAG,EAClGmC,CACR,CAAA,CACF,CACL,CACE,YAAYA,EAAQnC,EAAQ,CAC1B,OAAI,KAAK,UAAU,aAAe,KACzB,KAAK,UAAU,YAAYmC,EAAQnC,CAAM,EAE3CmC,EAAOnC,EAAO,EAAE,GAAK,EAChC,CACA,CACA,MAAMiC,EAAW,CACf,CAACG,EAAc,IAAI,EAAG,CAAE,KAAM,IAAK,MAAO,QAAU,EACpD,CAACA,EAAc,QAAQ,EAAG,CAAE,KAAM,IAAK,MAAO,QAAU,EACxD,CAACA,EAAc,IAAI,EAAG,CAAE,KAAM,IAAK,MAAO,OAAS,EACnD,CAACA,EAAc,WAAW,EAAG,CAAE,KAAM,IAAK,MAAO,OAAS,EAC1D,CAACA,EAAc,aAAa,EAAG,CAAE,KAAM,IAAK,MAAO,OAAS,EAC5D,CAACA,EAAc,aAAa,EAAG,CAAE,KAAM,IAAK,MAAO,OAAS,EAC5D,CAACA,EAAc,MAAM,EAAG,CAAE,KAAM,IAAK,MAAO,OAAO,CACrD,EAEMC,EAAqB,qbAErBC,EAAkB,KAAM,CAC5B,YAAYC,EAAS,CACnBC,EAAiB,KAAMD,CAAO,EAC9B,KAAK,gBAAkB,EACvB,KAAK,cAAgB,WACrB,KAAK,kBAAoB,CACvBpE,EAAmB,cACnBA,EAAmB,cACnBA,EAAmB,gBACnBA,EAAmB,oBACnBA,EAAmB,oBACnBA,EAAmB,mBACnBA,EAAmB,mBACnBA,EAAmB,0BACnBA,EAAmB,yBACpB,EACD,KAAK,OAAS,CAAE,EAChB,KAAK,cAAgB,GACrB,KAAK,SAAW,KAChB,KAAK,gBAAkB,MAC3B,CACE,MAAM,eAAgB,CACpB,MAAMsE,EAAe,KAAK,gBACpBC,EAAS,CACb,KAAMD,EAAe,EAAI,YAAc,MACvC,aAAAA,EACA,MAAO,CACL,YAAa,CACX,CAAE,KAAM,KAAK,SAAS,CAChC,CACO,EACD,SAAU,CAAC,CAAE,KAAAE,EAAM,OAAAC,EAAQ,MAAO,CAAE,GAAAC,EAAI,QAAAC,EAAS,QAAAC,CAAO,KAAS,CAC/D,IAAI3E,EACJ,MAAMkD,GAAclD,EAAK4E,EAAmBJ,GAAW,KAA4B,OAASA,EAAO,YAAa,CAAA,KAAO,MAAQxE,IAAO,OAASA,EAAK4E,EAAmB,IACvK,KAAK,gBAAgB,CAAE,KAAAL,EAAM,WAAArB,EAAY,GAAAuB,EAAI,QAAAC,EAAS,QAAAC,EAAS,SAAU,KAAK,UAAW,UAAW,KAAK,SAAW,EAAE,IAAM,CAC1H,KAAK,gBAAgB,MAAO,EAC5BjE,EAAiB,KAAK,KAAK,WAAW,sCAAsC,EAAG,CAAE,SAAU,QAAS,CAC9G,CAAS,CACT,CACK,EACD,KAAK,gBAAgB,KAAK4D,CAAM,CACpC,CAOE,WAAWlE,EAAKC,EAAQ,CACtB,GAAI,KAAK,iBAAmB,KAAW,CACrC,MAAMwE,EAAWC,EAAY,mBAAmB,KAAK,QAAQ,EACzDD,IACF,KAAK,gBAAkBA,EAAS,gBAExC,CACI,OAAO,KAAK,gBAAgB,WAAWzE,EAAKC,CAAM,CACtD,CACE,kBAAmB,CACjB,IAAIL,EACJ,MAAM+E,GAAY/E,EAAK,KAAK,aAAe,MAAQA,IAAO,OAAS,OAASA,EAAG,sBAAuB,EAClG+E,GAAY,MAAa,KAAK,iBAAmB,OAGrD,KAAK,gBAAgB,MAAM,IAAOA,EAAS,EAAIA,EAAS,OAAS,EAAK,KACtE,KAAK,gBAAgB,MAAM,KAAOA,EAAS,EAAI,KACnD,CACE,cAAcC,EAAK,CACjB,MAAMC,EAASD,GAAQ,KAAyB,OAASA,EAAI,OACzDC,GAAU,OAGTA,EAAO,QAAQ,oBAAoB,IACtC,KAAK,cAAgB,IAE3B,CACE,WAAY,CACV,SAAS,oBAAoB,QAAS,KAAK,cAAc,KAAK,IAAI,CAAC,EACnE,SAAS,iBAAiB,QAAS,KAAK,cAAc,KAAK,IAAI,CAAC,EAChE,SAAS,oBAAoB,SAAU,KAAK,iBAAiB,KAAK,IAAI,CAAC,EACvE,SAAS,iBAAiB,SAAU,KAAK,iBAAiB,KAAK,IAAI,CAAC,CACxE,CACE,iBAAkB,CAChB,KAAK,cAAgB,CAAC,KAAK,aAC/B,CACE,MAAM,gBAAgB5C,EAAc6C,EAAkB,CAChD,KAAK,UAAY,MAAa7C,GAAgB,MAAa6C,GAAoB,MAGnF,KAAK,sBAAsB,cAAc7C,CAAY,EAClD,KAAMlB,GAAW+D,EAAiB/D,CAAM,CAAC,EACzC,MAAOgE,GAAc,CACtB,QAAQ,MAAMA,CAAS,EACvB,GAAI,CAAE,MAAAC,EAAO,QAAAT,EAAS,cAAAU,CAAe,EAAGF,GAAa,CAAE,EACvDzE,EAAiB,MAAM0E,GAAS,KAAK,WAAW,qCAAqC,EAAGC,GAAiBV,GAAW,KAAK,WAAW,wCAAwC,CAAC,CACnL,CAAK,CACL,CACE,qBAAsB,CACpB,OAAO,KAAK,SAAS,YAAc,KAC/B,IAAIxC,EAA2B,KAAK,QAAQ,EAC5C,IAAIgB,EAA2B,KAAK,QAAQ,CACpD,CACE,aAAavD,EAAQ,CACnB,OAAO,OAAO,KAAKG,CAAkB,EAClC,KAAMK,GACAL,EAAmBK,CAAG,IAAMR,CACpC,CACL,CACE,cAAcA,EAAQ,CACpB,OAAIA,IAAWG,EAAmB,2BAA6BH,IAAWG,EAAmB,0BACpFuF,EAAY,IAEjB1F,IAAWG,EAAmB,oBAAsBH,IAAWG,EAAmB,mBAC7EuF,EAAY,KAEdA,EAAY,SACvB,CACE,MAAM,iBAAiB1F,EAAQ,CAC7B,IAAII,EAAIsC,EAAIC,EACZ,MAAMgD,EAAY,KAAK,aAAa3F,CAAM,EACpC4F,GAAYxF,EAAKyF,EAAiBF,CAAS,KAAO,MAAQvF,IAAO,OAASA,EAAKyF,EAAiB,cAChGpF,EAAS,CACb,WAAYN,EAAmB,aAAayF,CAAQ,EAAE,EACtD,SAAU,KAAK,UACf,UAAW,KAAK,UAChB,aAAc5F,EACd,OAAQ2C,GAAMD,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,kBAAoB,MAAQC,IAAO,OAAS,OAASA,EAAG,KAAKD,CAAE,EACzI,KAAM,KAAK,cAAc1C,CAAM,CAChC,EACD,MAAM,KAAK,gBAAgBS,EAASiB,GAAa,CAC3CA,EAAS,WAAakE,IAAaC,EAAiB,cACtDnF,EAAW,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEgB,CAAQ,EAAG,CAAE,SAAAkE,CAAQ,CAAE,CAAC,EAGnE9E,EAAiB,MAAM,KAAK,WAAW,kCAAkC,EAAG,KAAK,WAAW,0CAA0C,CAAC,CAE/I,CAAK,CACL,CACE,MAAM,gBAAgBsE,EAAK,CACzB,IAAIhF,EAAIsC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIgD,EAC5B,MAAMxF,EAAO8E,GAAQ,KAAyB,OAASA,EAAI,OACrDW,EAA2B,CAAC5F,EAAmB,mBAAoBA,EAAmB,kBAAkB,EACxG6F,GAAkB5F,EAAKE,GAAS,KAA0B,OAASA,EAAK,MAAQ,MAAQF,IAAO,OAAS,OAASA,EAAG,SAAS,KAAK,aAAa,EACrJ,IAAKE,GAAS,KAA0B,OAASA,EAAK,MAAQH,EAAmB,oBAC/E,OACF,MAAM8F,GAAmBvD,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,eAAgB,EAC/FwD,GAAgBvD,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,gBAAiB,EAC7FwD,GAAgBtD,GAAMD,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,eAAiB,MAAQC,IAAO,OAAS,OAASA,EAAG,KAAKD,CAAE,EAC9IwD,GAAeN,GAAMhD,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,kBAAoB,MAAQgD,IAAO,OAAS,OAASA,EAAG,KAAKhD,CAAE,EACtJ,IAAIuD,EAAgB,GASpB,GARKN,EAAyB,SAASzF,GAAS,KAA0B,OAASA,EAAK,EAAE,GAAK6F,GAAgBC,GAAgBJ,EAC7HK,EAAgB,GAETJ,GAAoB,MAA8CA,EAAgB,OACzFI,EAAgBJ,EAAgB,OAASG,EAElCF,EAAeE,IACtBC,EAAgB,IACdA,EAAe,CACjB,MAAMC,EAAiBF,EAAY,eAAe,QAAS,CAAE,sBAAuB,EAAG,EACjFG,EAAqB,CACzB,MAAO,KAAK,WAAW,qCAAqC,EAC5D,YAAa;AAAA,YACT,KAAK,WAAW,4CAA6C,CAAE,MAAOD,CAAc,CAAE,CAAC;AAAA;AAAA;AAAA,YAGvF,KAAK,WAAW,8CAA8C,CAAC;AAAA;AAAA,UAGnE,OAAQ,KAAK,WAAW,sCAAsC,EAC9D,QAAS,KAAK,WAAW,wCAAwC,CAClE,EAKD,GAAI,CAJe,MAAMxF,EAAiB,QAAQyF,EAAmB,MAAOA,EAAmB,YAAa,KAAMC,EAAW,KAAM,CACjI,YAAaD,EAAmB,OAChC,aAAcA,EAAmB,OACzC,CAAO,EAEC,MACR,CACI,GAAIP,EAAgB,CAClB,KAAK,wBAAwB1F,EAAK,EAAE,EACpC,KAAK,cAAgB,GACrB,MACN,CACS,KAAK,4BAA6B,EAAC,SAASA,GAAS,KAA0B,OAASA,EAAK,EAAE,IAGhGA,EAAK,KAAOH,EAAmB,gBACjC,KAAK,cAAe,EAGpB,KAAK,iBAAiBG,EAAK,EAAE,EAE/B,KAAK,cAAgB,GACzB,CACE,6BAA8B,CAC5B,IAAIF,EAAIsC,EACR,GAAI,KAAK,UAAY,KACnB,OAAO,KAAK,kBAEd,MAAM+D,GAAiB/D,GAAMtC,EAAK,KAAK,UAAU,oBAAsB,MAAQsC,IAAO,OAAS,OAASA,EAAG,KAAKtC,CAAE,EAClH,OAAIqG,GAAiB,KACZ,KAAK,kBAEP,KAAK,kBAAkB,OAAOzG,GAAU,CAACyG,EAAc,SAASzG,CAAM,CAAC,CAClF,CACE,WAAY,CACV,MAAMC,EAAQ,CAAE,EAChB,KAAK,4BAA2B,EAC7B,QAASD,GAAW,CACrB,IAAII,GACHA,EAAK,KAAK,gBAAkB,MAAQA,IAAO,QAAkBA,EAAG,gBAAgBJ,EAAQC,CAAK,CACpG,CAAK,EACD,KAAK,sBAAsBA,CAAK,CACpC,CACE,MAAM,sBAAsBA,EAAO,CACjC,IAAIG,EAAIsC,EACR,MAAMgE,GAAYhE,GAAMtC,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,eAAiB,MAAQsC,IAAO,OAAS,OAASA,EAAG,KAAKtC,CAAE,EAChJ,GAAIsG,GAAY,KAAW,CACzB,KAAK,OAASzG,EACd,MACN,CACI,MAAM0G,EAAsB,MAAM5F,EAAuB,CAAE,SAAA2F,CAAQ,CAAE,EACrEC,GAAwB,MAAkDA,EAAoB,QAASrG,GAAS,CAC9GL,EAAM,KAAK,CACT,GAAI,GAAG,KAAK,aAAa,IAAIK,EAAK,EAAE,GACpC,MAAOA,EAAK,MACZ,MAAO,KAAK,WAAW,8BAA8B,CAC7D,CAAO,CACP,CAAK,EACD,KAAK,OAASL,CAClB,CACE,wBAAwBD,EAAQ,CAC9B,IAAII,EAAIsC,EACR,MAAMkE,EAAW,CAAE,EACbC,GAAS7G,GAAW,KAA4B,OAASA,EAAO,QAAQ,KAAK,cAAe,EAAE,IAAM,IACzG0C,GAAMtC,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,kBAAoB,MAAQsC,IAAO,QAAkBA,EAAG,KAAKtC,CAAE,EAAE,QAAQ,CAAC,CAAE,KAAA0G,EAAM,KAAAnC,EAAM,MAAAoC,CAAK,EAAInD,IAAU,CAC5K,MAAMoD,EAAS,CAAE,EACjBA,EAAO,OAAY,CAAE,EAEjBpD,IAAU,IACZgD,EAAS,MAAME,CAAI,EAAE,EAAI,CAAE,KAAM,KAAK,cAAcnC,CAAI,EAAG,MAAAoC,CAAO,EAClEH,EAAS,IAAS,CAAE,GAEtB,MAAMK,EAAa,CAAE,KAAM,MAAMH,CAAI,GAAI,KAAM,KAAK,cAAcnC,CAAI,EAAG,MAAOoC,CAAO,EACvFC,EAAO,OAAU,KAAKC,CAAU,EAChCL,EAAS,IAAO,KAAKI,CAAM,CACjC,CAAK,EACD,KAAK,aAAa,QAAQ,GAAGE,CAA2B,GAAGL,CAAK,GAAID,CAAQ,CAChF,CACE,cAAcjC,EAAM,CAClB,OAAQA,EAAI,CACV,KAAKwC,EAAS,OACZ,MAAO,IACT,KAAKA,EAAS,KACZ,MAAO,IACT,QACE,MAAO,GACf,CACA,CACE,cAAe,CACb,IAAI/G,EACJ,KAAK,kBAAoBA,EAAK,KAAK,YAAc,MAAQA,IAAO,OAAS,OAASA,EAAG,kBAAmB,IAAK,EAC7G,KAAK,aAAe,IAAIP,EAAY,KAAK,WAAW,KAAK,IAAI,EAAG,KAAK,eAAe,EACpF,KAAK,UAAW,CACpB,CACE,aAAauH,EAAO,CAClB,MAAO,CACL,CAACC,EAAe,8BAA8B,EAAGA,EAAe,kBAAkBD,CAAK,CACxF,CACL,CACE,iBAAkB,CAChB,IAAIhH,EACJ,OAAO,KAAK,iBAAmBA,EAAK,KAAK,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,QAAU,CACvG,CACE,mBAAoB,CAClB,IAAIA,EACJ,KAAK,aAAeS,EAAmB,gBAAgB,sBAAsB,GAC5ET,EAAK,KAAK,gBAAkB,MAAQA,IAAO,QAAkBA,EAAG,YAAa,EAAC,KAAKmB,GAAU,KAAK,UAAYA,CAAM,EACrH,KAAK,UAAW,CACpB,CACE,kBAAmB,CACb,KAAK,UAAY,OAGrB8F,EAAe,UAAU,KAAK,QAAQ,EACtC,KAAK,iBAAkB,EAC3B,CACE,qBAAsB,CACpB,IAAIjH,EACA,KAAK,eAAiB,EAAG,GAAAA,EAAK,KAAK,UAAY,MAAQA,IAAO,SAAkBA,EAAG,SACrF,KAAK,aAAc,CAEzB,CACE,oBAAqB,CACnB,IAAIA,EACA,KAAK,cACP,KAAK,iBAAkB,IAEdA,EAAK,KAAK,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,QAAU,IAC7E,KAAK,OAAS,CAAE,EAEtB,CACE,QAAS,CACP,OAAQkH,EAAEC,EAAM,KAAMD,EAAE,MAAO,CAAE,MAAO;AAAA,YAChC,KAAK,kBAAoB,oBAAsB,EAAE;AAAA,SAClD,EAAEA,EAAE,YAAa,OAAO,OAAO,CAAE,IAAME,GAAQ,KAAK,UAAYA,EAAK,SAAU,gBAAiB,KAAM,QAAS,KAAM,OAAQ,MAAO,KAAK,WAAW,oCAAoC,EAAG,QAAS,IAAM,KAAK,iBAAmB,EAAE,KAAK,aAAa,QAAQ,CAAC,CAAC,EAAGF,EAAE,MAAO,OAAO,OAAO,CAAE,IAAME,GAAQ,KAAK,gBAAkBA,EAAK,MAAO;AAAA,gBACxU,KAAK,kBAAoB,oCAAsC,EAAE;AAAA,aACpE,EAAI,KAAK,aAAa,UAAU,CAAC,EAAG,KAAK,gBAAiB,GACjEF,EAAE,cAAe,OAAO,OAAO,CAAE,MAAO,KAAK,OAAQ,UAAYlC,GAAQ,KAAK,gBAAgBA,CAAG,GAAK,KAAK,aAAa,UAAU,CAAC,CAAC,CAAC,CAAC,EAAG,KAAK,gBAAiB,GAC/JkC,EAAE,MAAO,OAAO,OAAO,CAAE,MAAO,4BAA8B,KAAK,aAAa,SAAS,CAAC,CAAC,EAAGA,EAAE,4BAA6B,OAAO,OAAO,CAAE,IAAKE,GAAO,KAAK,gBAAkBA,EAAK,WAAY,CAAChH,EAAKC,IAAW,KAAK,WAAWD,EAAKC,CAAM,GAAK,KAAK,aAAa,wBAAwB,CAAC,CAAC,CAAC,CACrS,CACE,IAAI,UAAW,CAAE,OAAOgH,EAAW,IAAI,CAAE,CAC3C,EACAnD,EAAgB,MAAQD","x_google_ignoreList":[0]}
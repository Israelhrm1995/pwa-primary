{"version":3,"file":"snk-detail-view.entry-hZnESSDg.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-detail-view.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, f as forceUpdate, h, H as Host, g as getElement } from './index-479e1293.js';\nimport { Action, StringUtils, KeyboardManager } from '@sankhyalabs/core';\nimport { S as SnkFormConfigManager } from './SnkFormConfigManager-c1cd9dcd.js';\nimport { FormMetadata, buildFormMetadata } from '@sankhyalabs/ezui/dist/collection/utils/form';\nimport './DataFetcher-db08cad0.js';\nimport './ISave-da565824.js';\nimport { P as PresentationMode } from './index-b40568ff.js';\nimport '@sankhyalabs/ezui/dist/collection/utils/constants';\nimport '@sankhyalabs/core/dist/dataunit/metadata/UnitMetadata';\nimport './dataunit-fetcher-1b78797a.js';\nimport './filter-item-type.enum-d45e026f.js';\nimport './form-config-fetcher-e623539b.js';\nimport { V as VIEW_MODE } from './constants-7b422de0.js';\nimport { T as TaskbarElement } from './taskbar-elements-171476d4.js';\nimport { S as SnkGuidesViewer } from './snk-guides-viewer-defa2629.js';\nimport { S as SnkMessageBuilder } from './SnkMessageBuilder-c8b452b6.js';\nimport { buildFieldSearch, SHORTCUT_SEARCH_FIELD, LABEL_SEARCH_FIELD } from '@sankhyalabs/ezui/dist/collection/utils';\nimport './ConfigStorage-cf578768.js';\nimport './PrintUtils-3e4ff0f5.js';\nimport '@sankhyalabs/ezui/dist/collection/components/ez-grid/utils';\nimport '@sankhyalabs/core/dist/utils/SortingUtils';\nimport './ResourceIDUtils-a114189a.js';\nimport './index-b72af127.js';\nimport './taskbar-processor-3436124c.js';\nimport '@sankhyalabs/core/dist/dataunit/DataUnit';\n\nclass GuideBuilder {\n  constructor(parentGuide, formMetadata, dataUnit) {\n    this._parentGuide = parentGuide;\n    this._formMetadata = formMetadata;\n    this._dataUnit = dataUnit;\n  }\n  get id() {\n    return this._parentGuide.id;\n  }\n  buildGuideItem(detailBuilders) {\n    const item = Object.assign({}, this._parentGuide);\n    delete item.expanded;\n    delete item.children;\n    const currentRecord = this._dataUnit.getSelectedRecord();\n    if (!currentRecord) {\n      return item;\n    }\n    const isNewRecord = this._dataUnit.isNewRecord(currentRecord.__record__id__);\n    const children = Array.from(this._formMetadata.getAllSheets().values()).map((sheet) => {\n      const { name, label } = sheet;\n      const isDetail = FormMetadata.getDetailName(name.split(\"::\").pop()) != undefined;\n      const disabled = isDetail && isNewRecord;\n      const parentId = this._parentGuide.id;\n      const id = isDetail ? `${parentId}::${name}` : `${parentId}__FORM:${name}`;\n      if (isDetail && detailBuilders.has(id) && !disabled) {\n        const item = detailBuilders.get(id).buildGuideItem(detailBuilders);\n        return item;\n      }\n      return {\n        id,\n        label,\n        disabled,\n        tooltip: disabled ? \"Finalize o cadastro para ter acesso a esta guia.\" : undefined\n      };\n    });\n    const newGuideItem = children.shift();\n    newGuideItem.label = isNewRecord ? \"Novo Registro\" : currentRecord.__record__label__;\n    newGuideItem.children = children;\n    item.children = [newGuideItem];\n    return item;\n  }\n}\n\nconst snkDetailViewCss = \".sc-snk-detail-view-h{display:flex;row-gap:24px;flex-direction:column;width:100%;height:100%}.level-path.sc-snk-detail-view{color:var(--color--title-primary, #2B3A54);font-weight:var(--text-weight--medium, 400);padding-right:3px}.form-taskbar.sc-snk-detail-view{padding-bottom:var(--space--medium)}.grid-container.sc-snk-detail-view{background-color:#FFF;min-height:100px;height:100%}.detail-header.sc-snk-detail-view{padding-bottom:0}snk-data-unit.sc-snk-detail-view{flex:1}snk-grid.sc-snk-detail-view{height:calc(100% - 43px)}\";\n\nconst SnkDetailView = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.snkDetailGuidesChange = createEvent(this, \"snkDetailGuidesChange\", 7);\n    this.snkSwitchGuide = createEvent(this, \"snkSwitchGuide\", 7);\n    this.formItemsReady = createEvent(this, \"formItemsReady\", 7);\n    this._disabledButtons = undefined;\n    this._currentView = undefined;\n    this.attachmentRegisterKey = undefined;\n    this._fieldToGetFocus = undefined;\n    this._hasToCreateFieldSearch = true;\n    this.formConfigManager = undefined;\n    this.dataUnitName = undefined;\n    this.resourceID = undefined;\n    this.guideItemPath = undefined;\n    this.entityName = undefined;\n    this.label = undefined;\n    this.dataUnit = undefined;\n    this.selectedForm = undefined;\n    this.dataState = undefined;\n    this.messagesBuilder = undefined;\n    this.branchGuide = undefined;\n    this.canEdit = true;\n    this.taskbarCustomContainerId = undefined;\n    this.customEditors = undefined;\n    this.customRenders = undefined;\n    this.presentationMode = PresentationMode.SECONDARY;\n  }\n  observeDataUnit(newDataUnit, oldDataUnit) {\n    newDataUnit === null || newDataUnit === void 0 ? void 0 : newDataUnit.subscribe(this.dataUnitActionHandler.bind(this));\n    oldDataUnit === null || oldDataUnit === void 0 ? void 0 : oldDataUnit.unsubscribe(this.dataUnitActionHandler);\n  }\n  observerDataState(newValue, oldValue) {\n    const openInsertion = !(oldValue === null || oldValue === void 0 ? void 0 : oldValue.insertionMode) && (newValue === null || newValue === void 0 ? void 0 : newValue.insertionMode);\n    const closeInsertion = (oldValue === null || oldValue === void 0 ? void 0 : oldValue.insertionMode) && !(newValue === null || newValue === void 0 ? void 0 : newValue.insertionMode);\n    if (openInsertion || closeInsertion) {\n      this.loadMetadata();\n    }\n    if (this._formMetadata == undefined) {\n      return;\n    }\n    const newRecord = newValue === null || newValue === void 0 ? void 0 : newValue.selectedRecord;\n    const oldRecord = oldValue === null || oldValue === void 0 ? void 0 : oldValue.selectedRecord;\n    if ((newRecord === null || newRecord === void 0 ? void 0 : newRecord.__record__id__) !== (oldRecord === null || oldRecord === void 0 ? void 0 : oldRecord.__record__id__)) {\n      this.snkDetailGuidesChange.emit(new GuideBuilder(this.branchGuide, this._formMetadata, this.dataUnit));\n    }\n    if (openInsertion) {\n      setTimeout(() => {\n        //FIXME: A necessidade de usar esse timeout é por causa da renderização\n        //do guide navigator... se esse evento subir antes do guidenavigator ter\n        //um item com esse id, ele fica sem seleção. Acredito que poderíamos\n        //ajustar o componente para manter o item selecionado e então remover\n        //esse timeout.\n        this.changeViewMode(VIEW_MODE.FORM);\n      }, 0);\n    }\n    if (closeInsertion) {\n      this.changeViewMode(VIEW_MODE.GRID);\n    }\n    const disabledButtons = [];\n    if (!this.dataState.hasPrevious) {\n      disabledButtons.push(TaskbarElement.PREVIOUS);\n    }\n    if (!this.dataState.hasNext) {\n      disabledButtons.push(TaskbarElement.NEXT);\n    }\n    if (this.dataState.insertionMode) {\n      disabledButtons.push(TaskbarElement.INSERT);\n    }\n    this._disabledButtons = disabledButtons;\n  }\n  /**\n  * Muda o modo de visualização do componente entre VIEW_MODE.GRID e VIEW_MODE.FORM\n  * @param mode - Novo modo que o componente deve ser apresentado.\n  */\n  async changeViewMode(mode) {\n    this.emitSwitchEvent(mode);\n  }\n  /**\n   * Abre o configurador de grid.\n   */\n  async configGrid() {\n    if (this._snkGrid) {\n      this._snkGrid.showConfig();\n    }\n  }\n  async showUp() {\n    if (this._snkFormView) {\n      this._snkFormView.showUp();\n    }\n    if (this._snkGrid) {\n      this._snkGrid.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    }\n  }\n  /**\n   * Registra um editor customizado para campos da grade e formulário.\n   */\n  async addCustomEditor(fieldName, customEditor) {\n    var _a;\n    const detailContext = this.normalizeBranchGuideId((_a = this.branchGuide) === null || _a === void 0 ? void 0 : _a.id);\n    this._snkGrid.addCustomEditor(fieldName, customEditor, detailContext);\n    this._snkFormView.addCustomEditor(fieldName, customEditor, detailContext);\n  }\n  async observerPropsCustomEditor(newValue) {\n    for (const fieldName in newValue) {\n      await this.addCustomEditor(fieldName, newValue[fieldName]);\n    }\n  }\n  /**\n   * Registra um render customizado para colunas da grid.\n   */\n  async addGridCustomRender(fieldName, customRender) {\n    var _a;\n    const detailContext = this.normalizeBranchGuideId((_a = this.branchGuide) === null || _a === void 0 ? void 0 : _a.id);\n    await this._snkGrid.addGridCustomRender(fieldName, customRender, detailContext);\n  }\n  onContentCardChanged(evt) {\n    SnkGuidesViewer.updateContentCard(evt.detail.formName, evt.detail.cardConfig, evt.detail.propertyChanged, this.formConfigManager).then(() => forceUpdate(this));\n    evt.stopPropagation();\n  }\n  async observeCustomRenders(newValue) {\n    for (const field in newValue) {\n      const customRender = newValue[field];\n      await this.addGridCustomRender(field, customRender);\n    }\n  }\n  updateLabel() {\n    const guideItemPathSize = this.guideItemPath ? this.guideItemPath.length : 0;\n    if (guideItemPathSize > 0) {\n      const labels = guideItemPathSize > 0 ? this.guideItemPath.map(item => item.label) : undefined;\n      this.label = labels.pop();\n      this._levelPath = labels.length > 0 ? labels.join(\" / \") : undefined;\n    }\n    else {\n      this.label = \"\";\n      this._levelPath = undefined;\n    }\n  }\n  getFormGuideId(formName) {\n    var _a;\n    if (!formName) {\n      const currentRecord = (_a = this.dataState) === null || _a === void 0 ? void 0 : _a.selectedRecord;\n      if (currentRecord == undefined) {\n        return;\n      }\n      const forms = Array.from(this._formMetadata.getAllSheets().keys());\n      if (!forms || forms.length == 0) {\n        return;\n      }\n      formName = forms[0];\n    }\n    return `${this.stripFormPattern(this.branchGuide.id)}__FORM:${formName}`;\n  }\n  stripFormPattern(guideId) {\n    return guideId.replace(SnkDetailView.REGEX_FORM_ID, \"\");\n  }\n  loadMetadata() {\n    if (!this.dataUnit) {\n      return;\n    }\n    if (!this.formConfigManager.isLoaded) {\n      return;\n    }\n    const formConfig = this.formConfigManager.getConfig(this.dataUnit);\n    //this._cardsState = formConfig?.cardsState;\n    this._formMetadata = buildFormMetadata(formConfig == undefined || formConfig.fields.length === 0 ? undefined : formConfig, this.dataUnit, true);\n  }\n  dataUnitReadyHandler(evt) {\n    this.dataUnit = evt.detail;\n    this.loadMetadata();\n  }\n  updateViewStack(viewStack) {\n    var _a, _b;\n    this._viewStack = viewStack;\n    this._currentView = this.selectedForm ? 1 : 0;\n    (_b = (_a = this._viewStack) === null || _a === void 0 ? void 0 : _a.show) === null || _b === void 0 ? void 0 : _b.call(_a, this._currentView);\n  }\n  getFormFields() {\n    if (this.selectedForm && this._formMetadata) {\n      return this._formMetadata.getSheet(this.selectedForm).fields;\n    }\n    return [];\n  }\n  emitSwitchEvent(mode) {\n    const guideId = mode === VIEW_MODE.GRID ? this.stripFormPattern(this.branchGuide.id) : this.getFormGuideId();\n    if (guideId) {\n      this.snkSwitchGuide.emit(guideId);\n    }\n  }\n  handleAttachBack() {\n    this._viewStack.show(VIEW_MODE.GRID);\n  }\n  executeActionHandler(evt) {\n    if (evt.detail === TaskbarElement.GRID_MODE) {\n      this.emitSwitchEvent(VIEW_MODE.GRID);\n      evt.stopPropagation();\n    }\n    if (evt.detail === TaskbarElement.FORM_MODE || evt.detail === TaskbarElement.UPDATE) {\n      this.emitSwitchEvent(VIEW_MODE.FORM);\n      evt.stopPropagation();\n    }\n    if (evt.detail === TaskbarElement.ATTACH) {\n      this._viewStack.show(VIEW_MODE.ATTACHMENT);\n      evt.stopPropagation();\n    }\n  }\n  async getAttachmentRegisterKey() {\n    if (!this._snkDataUnit)\n      return;\n    const recordCriteria = await this._snkDataUnit.getSelectedRecordsIDsInfo();\n    const joinedPrimaryKeys = recordCriteria.map(({ value }) => value).join('_');\n    return joinedPrimaryKeys;\n  }\n  async handleDataStateChange({ detail: dataState }) {\n    this.dataState = dataState;\n    if (dataState.selectedRecord !== undefined && this._snkDataUnit) {\n      this.attachmentRegisterKey = await this.getAttachmentRegisterKey();\n    }\n  }\n  componentWillLoad() {\n    this._configName = `dynaform.${this.entityName}`;\n    this.formConfigManager = new SnkFormConfigManager(this._configName, this.resourceID, () => this.loadMetadata(), this.dataUnit);\n    this.formConfigManager.loadConfig();\n    if (this.messagesBuilder == undefined) {\n      this.messagesBuilder = new SnkMessageBuilder(this.entityName);\n    }\n  }\n  async componentDidLoad() {\n    await this.observerPropsCustomEditor(this.customEditors);\n    await this.observeCustomRenders(this.customRenders);\n    this.initKeyboardManager();\n  }\n  disconnectedCallback() {\n    var _a;\n    (_a = this._keyboardManager) === null || _a === void 0 ? void 0 : _a.unbindAllShortcutKeys();\n  }\n  async dataUnitActionHandler(action) {\n    if (action.type === Action.FIELD_INVALIDATED) {\n      this.addErrorBadgeToBranchGuide();\n    }\n  }\n  addErrorBadgeToBranchGuide() {\n    this.branchGuide = Object.assign(Object.assign({}, this.branchGuide), { badge: 'error' });\n    this.snkDetailGuidesChange.emit(new GuideBuilder(this.branchGuide, this._formMetadata, this.dataUnit));\n  }\n  normalizeBranchGuideId(id) {\n    return id === null || id === void 0 ? void 0 : id.replace(/child\\[(.*?)\\]/g, '$1').replace(/::/g, '>');\n  }\n  getSettingsListForm() {\n    const hardList = [{\n        value: StringUtils.generateUUID(),\n        label: this.messagesBuilder.getMessage(\"snkCrud.findColumn\", undefined),\n        disableCloseOnSelect: true,\n        eagerInitialize: true,\n        itemBuilder: (_, item) => this.getFieldsSearch(item)\n      }];\n    return hardList;\n  }\n  getFieldsSearch(item) {\n    if (this._fieldSearch == undefined || this._hasToCreateFieldSearch) {\n      this._hasToCreateFieldSearch = false;\n      this._fieldSearch = buildFieldSearch(item, ({ argument }) => this.fieldsOptionLoader(argument), (option) => this.onSelectField(option));\n    }\n    return this._fieldSearch;\n  }\n  fieldsOptionLoader(argument) {\n    const searchTerm = argument === null || argument === void 0 ? void 0 : argument.toLowerCase();\n    const allFields = this.getFormFields().map(field => { var _a; return (_a = this.dataUnit) === null || _a === void 0 ? void 0 : _a.getField(field.name); });\n    const filteredFields = allFields.filter(field => {\n      var _a, _b;\n      return ((_a = field.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(searchTerm)) ||\n        ((_b = field.label) === null || _b === void 0 ? void 0 : _b.toLowerCase().includes(searchTerm));\n    });\n    const options = filteredFields.map(field => ({ value: field.name, label: field.label }));\n    return Promise.resolve(options);\n  }\n  onSelectField(option) {\n    if (option == undefined) {\n      return;\n    }\n    this._fieldToGetFocus = option.value;\n  }\n  clearFieldToFocusHandler() {\n    this._fieldToGetFocus = undefined;\n  }\n  async initKeyboardManager() {\n    this._keyboardManager = new KeyboardManager({ propagate: false, element: this._element });\n    this._keyboardManager.bind(SHORTCUT_SEARCH_FIELD, async () => {\n      await this._snkFormView.showSearchField();\n    }, { description: LABEL_SEARCH_FIELD, element: this._element });\n  }\n  render() {\n    this.updateLabel();\n    //const cardConfig: IFormCardConfig = this._cardsState?.get(this.selectedForm);\n    return (h(Host, null, h(\"snk-data-unit\", { ref: (el) => this._snkDataUnit = el, dataUnitName: `${this.dataUnitName}`, onDataUnitReady: evt => this.dataUnitReadyHandler(evt), entityName: this.entityName, onDataStateChange: this.handleDataStateChange.bind(this), ignoreSaveMessage: this._currentView === VIEW_MODE.GRID, messagesBuilder: this.messagesBuilder, configName: this._configName }, h(\"ez-view-stack\", { ref: (ref) => this.updateViewStack(ref) }, h(\"stack-item\", null, h(\"div\", { class: \"ez-box ez-box--shadow grid-container\" }, h(\"div\", { class: \"ez-title--primary ez-size-width--full ez-padding--large detail-header\" }, h(\"div\", { class: \"ez-flex ez-text ez-text--bold ez-flex--justify-start ez-flex--align-items-center\" }, this._levelPath ? h(\"span\", { class: \"level-path\" }, this._levelPath + \" /\") : undefined, this.label)), h(\"snk-grid\", { class: \"ez-size-width--full\", ref: (ref) => this._snkGrid = ref, configName: this._configName, messagesBuilder: this.messagesBuilder, onGridDoubleClick: () => this.emitSwitchEvent(VIEW_MODE.FORM), onActionClick: (evt) => this.executeActionHandler(evt), presentationMode: this.presentationMode, canEdit: this.canEdit, isDetail: true, taskbarCustomContainerId: this.taskbarCustomContainerId, gridHeaderCustomSlotId: \"DETAIL_GRID_HEADER_CUSTOM_ELEMENTS\", topTaskbarCustomSlotId: \"DETAIL_GRID_TASKBAR_CUSTOM_ELEMENTS\", outlineMode: false }))), h(\"stack-item\", null, h(\"snk-form-view\", { ref: (ref) => this._snkFormView = ref, canExpand: false, canFix: false, name: this.selectedForm, formMetadata: this._formMetadata, dataUnit: this.dataUnit, fields: this.getFormFields(), fieldToFocus: this._fieldToGetFocus, label: this.label, levelPath: this._levelPath, onFormItemsReady: ({ detail: formItems }) => this.formItemsReady.emit(formItems), onSnkRequestClearFieldToFocus: this.clearFieldToFocusHandler.bind(this), fieldSearch: this._fieldSearch }, h(\"snk-taskbar\", { key: \"guideViewerTaskbar\", class: \"form-taskbar\", \"data-element-id\": \"guideViewer\", configName: this._configName, messagesBuilder: this.messagesBuilder, disabledButtons: this._disabledButtons, buttons: \"INSERT,PREVIOUS,NEXT,DIVIDER,CLONE,REMOVE,MORE_OPTIONS,DIVIDER,GRID_MODE,CONFIGURATOR\", primaryButton: \"INSERT\", presentationMode: this.presentationMode, onActionClick: evt => this.executeActionHandler(evt), dataUnit: this.dataUnit, resourceID: this.resourceID, customContainerId: this.taskbarCustomContainerId, customSlotId: \"DETAIL_TASKBAR_CUSTOM_ELEMENTS\", actionsSettingsList: this.getSettingsListForm() }, h(\"slot\", { name: \"DETAIL_TASKBAR_CUSTOM_ELEMENTS\" })))), h(\"stack-item\", null, h(\"snk-attach\", { registerKey: this.attachmentRegisterKey, messagesBuilder: this.messagesBuilder, entityName: this.entityName, onBack: this.handleAttachBack.bind(this) }))))));\n  }\n  get _element() { return getElement(this); }\n  static get watchers() { return {\n    \"dataUnit\": [\"observeDataUnit\"],\n    \"dataState\": [\"observerDataState\"],\n    \"customEditors\": [\"observerPropsCustomEditor\"],\n    \"customRenders\": [\"observeCustomRenders\"]\n  }; }\n};\nSnkDetailView.REGEX_FORM_ID = /__FORM:[^:]+/g;\nSnkDetailView.style = snkDetailViewCss;\n\nexport { SnkDetailView as snk_detail_view };\n"],"names":["GuideBuilder","parentGuide","formMetadata","dataUnit","detailBuilders","item","currentRecord","isNewRecord","children","sheet","name","label","isDetail","FormMetadata","disabled","parentId","id","newGuideItem","snkDetailViewCss","SnkDetailView","hostRef","registerInstance","createEvent","PresentationMode","newDataUnit","oldDataUnit","newValue","oldValue","openInsertion","closeInsertion","newRecord","oldRecord","VIEW_MODE","disabledButtons","TaskbarElement","mode","fieldName","customEditor","_a","detailContext","customRender","evt","SnkGuidesViewer","forceUpdate","field","guideItemPathSize","labels","formName","forms","guideId","formConfig","buildFormMetadata","viewStack","_b","value","dataState","SnkFormConfigManager","SnkMessageBuilder","action","Action","StringUtils","_","buildFieldSearch","argument","option","searchTerm","options","KeyboardManager","SHORTCUT_SEARCH_FIELD","LABEL_SEARCH_FIELD","h","Host","el","ref","formItems","getElement"],"mappings":"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","x_google_ignoreList":[0]}
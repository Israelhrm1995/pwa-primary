{"version":3,"file":"snk-filter-bar_4.entry-N8Y-SIAB.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-filter-bar_4.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-479e1293.js';\nimport { DataType, StringUtils, ObjectUtils, ElementIDUtils, ErrorException, ApplicationContext, LockManager, LockManagerOperation, DateUtils, MaskFormatter, FloatingManager, ArrayUtils } from '@sankhyalabs/core';\nimport { EzScrollDirection } from '@sankhyalabs/ezui/dist/collection/components/ez-scroller/EzScrollDirection';\nimport { C as ConfigStorage } from './ConfigStorage-cf578768.js';\nimport { toString } from '@sankhyalabs/core/dist/dataunit/metadata/DataType';\nimport { F as FilterItemType } from './filter-item-type.enum-d45e026f.js';\nimport { F as FilterOperand, D as DefaultFilter } from './index-8acbae97.js';\nimport { F as FilterNumberVariation } from './filterNumberVariation-8cee02ea.js';\nimport { ApplicationUtils } from '@sankhyalabs/ezui/dist/collection/utils';\nimport { P as PersonalizedFilterUtils } from './PersonalizedFilterUtils-2db38ff2.js';\nimport { ModalAction } from '@sankhyalabs/ezui/dist/collection/components/ez-modal-container';\nimport { F as FilterType } from './filter-type.enum-f6a8fe23.js';\nimport { A as ActionDefaultFilter } from './default-filters-50105e43.js';\nimport './form-config-fetcher-e623539b.js';\nimport './DataFetcher-db08cad0.js';\nimport './PrintUtils-3e4ff0f5.js';\nimport '@sankhyalabs/core/dist/dataunit/metadata/UnitMetadata';\n\nconst buildFilter = (item) => {\n  switch (item.type) {\n    case FilterItemType.DEFAULT_FILTER:\n      return buildDefault(item);\n    case FilterItemType.BINARY_SELECT:\n      return buildBinary(item);\n    case FilterItemType.MULTI_SELECT:\n      return buildMultSelect(item);\n    case FilterItemType.MULTI_LIST:\n      return buildMultiList(item);\n    case FilterItemType.PERIOD:\n      return buildPeriod(item);\n    case FilterItemType.SEARCH:\n      return buildSearch(item);\n    case FilterItemType.TEXT:\n      return buildText(item);\n    case FilterItemType.NUMBER:\n      return buildNumber(item);\n    case FilterItemType.PERSONALIZED:\n      return buildPersonalized(item);\n    case FilterItemType.CHECK_BOX_LIST:\n      return buildCheckboxList(item);\n    default:\n      return undefined;\n  }\n};\nfunction buildDefault(item) {\n  return { name: item.id, expression: item.props.expression, params: [] };\n}\nfunction buildBinary(item) {\n  const { id, value, props } = item;\n  const options = props.options;\n  const selectedOption = options.find(opt => opt.name === value);\n  return { name: id, expression: selectedOption.expression, params: [] };\n}\nfunction buildMultSelect(item) {\n  const { id, value, props } = item;\n  return { name: id, expression: props.expression, params: [{ name: id, dataType: DataType.TEXT, value }] };\n}\nfunction buildMultiList(item) {\n  const { id, value, props } = item;\n  const parsedValues = parseMultiListValues(value);\n  if (parsedValues.length > 0) {\n    return {\n      name: id,\n      expression: props.expression,\n      params: [{\n          name: id,\n          dataType: DataType.TEXT,\n          value: JSON.stringify(parsedValues)\n        }]\n    };\n  }\n}\nfunction buildCheckboxList(item) {\n  var _a;\n  const { id, value, props } = item;\n  const selectedOptionNames = Object.entries(value !== null && value !== void 0 ? value : {})\n    .filter(([_, valueChecked]) => valueChecked === true)\n    .map(([key, _]) => key);\n  const selectedOptionsObject = (_a = props.options) === null || _a === void 0 ? void 0 : _a.filter(option => selectedOptionNames.includes(option.name));\n  return { name: id, expression: buildCheckboxListExpression(selectedOptionsObject), params: [] };\n}\nfunction buildCheckboxListExpression(options) {\n  let expression = \"\";\n  options.forEach((option, index) => {\n    var _a;\n    expression += ` ${index > 0 ? ((_a = option.operand) !== null && _a !== void 0 ? _a : 'OR') : ''} ${option.expression}`;\n  });\n  return expression.trim();\n}\nfunction parseMultiListValues(multiListValue) {\n  var _a, _b;\n  const value = (_b = (_a = multiListValue === null || multiListValue === void 0 ? void 0 : multiListValue.elements) !== null && _a !== void 0 ? _a : multiListValue === null || multiListValue === void 0 ? void 0 : multiListValue.members) !== null && _b !== void 0 ? _b : multiListValue;\n  return value.filter(item => item === null || item === void 0 ? void 0 : item.check).map(({ id }) => Number.isNaN(+id) ? String(id) : Number(id));\n}\nfunction buildPeriod(item) {\n  const { id, value, props } = item;\n  let { end, start } = value;\n  if (typeof end === \"string\") {\n    end = new Date(end);\n  }\n  if (typeof start === \"string\") {\n    start = new Date(start);\n  }\n  const params = [];\n  let expression;\n  if (end && start) {\n    expression = props.expression.fullfill;\n    params.push({ name: `${id}.START`, dataType: DataType.DATE, value: toString(DataType.DATE, start) }, { name: `${id}.END`, dataType: DataType.DATE, value: toString(DataType.DATE, end) });\n  }\n  else {\n    if (start) {\n      expression = props.expression.onlystart;\n      params.push({ name: id, dataType: DataType.DATE, value: toString(DataType.DATE, start) });\n    }\n    else {\n      expression = props.expression.onlyend;\n      params.push({ name: id, dataType: DataType.DATE, value: toString(DataType.DATE, end) });\n    }\n  }\n  return { name: id, expression, params };\n}\nfunction buildSearch(item) {\n  const { id, value, props } = item;\n  const expression = props.expression;\n  return { name: id, expression, params: [{ name: id, dataType: DataType.TEXT, value: toString(DataType.TEXT, value === null || value === void 0 ? void 0 : value.value) }] };\n}\nfunction buildText(item) {\n  let { id, value, props } = item;\n  const expression = props.expression;\n  if (!StringUtils.isEmpty(props.likeAs)) {\n    value = buildLikeValue(value, props.likeAs);\n  }\n  return { name: id, expression, params: [{ name: id, dataType: DataType.TEXT, value: toString(DataType.TEXT, value) }] };\n}\nfunction buildNumber(item) {\n  const { id, value, props } = item;\n  const variation = props.variation;\n  if (variation === FilterNumberVariation.INTERVAL) {\n    const { start, end } = value !== null && value !== void 0 ? value : { start: 0, end: 0 };\n    if (!isNaN(start) && !isNaN(end)) {\n      return {\n        name: id,\n        expression: props.intervalExpression.fullfill,\n        params: [\n          { name: `${id}.START`, dataType: DataType.NUMBER, value: toString(DataType.NUMBER, start) },\n          { name: `${id}.END`, dataType: DataType.NUMBER, value: toString(DataType.NUMBER, end) }\n        ]\n      };\n    }\n    if (!isNaN(start)) {\n      return {\n        name: id,\n        expression: props.intervalExpression.onlystart,\n        params: [\n          { name: id, dataType: DataType.NUMBER, value: toString(DataType.NUMBER, start) }\n        ]\n      };\n    }\n    if (!isNaN(end)) {\n      return {\n        name: id,\n        expression: props.intervalExpression.onlyend,\n        params: [\n          { name: id, dataType: DataType.NUMBER, value: toString(DataType.NUMBER, end) }\n        ]\n      };\n    }\n  }\n  const expression = props.expression;\n  return { name: id, expression, params: [{ name: id, dataType: DataType.NUMBER, value: toString(DataType.NUMBER, value) }] };\n}\nfunction buildLikeValue(valueAsString, likeAs) {\n  if (likeAs === \"CONTANIS\") {\n    return `%${valueAsString}%`;\n  }\n  else if (likeAs === \"STARTS_WITH\") {\n    return `${valueAsString}%`;\n  }\n  else if (likeAs === \"ENDS_WITH\") {\n    return `%${valueAsString}`;\n  }\n  return valueAsString;\n}\nfunction buildPersonalized(item) {\n  const { id, groupedItems = [] } = item;\n  const activeFilters = groupedItems.filter(groupItem => !!groupItem.visible);\n  const filters = activeFilters.map(item => {\n    var _a;\n    const expression = item.props.expression;\n    const params = (((_a = item.props.personalizedFilter) === null || _a === void 0 ? void 0 : _a.parameters) || []).map((param, index) => {\n      const valuesArray = Array.from(item.value || 0);\n      const dataType = param.dataType;\n      let paramValue = (index >= 0 && index < valuesArray.length ? valuesArray[index] : null);\n      if (paramValue != undefined && typeof paramValue === \"object\" && \"value\" in paramValue) {\n        paramValue = paramValue[\"value\"];\n      }\n      if (paramValue == undefined && dataType === DataType.BOOLEAN) {\n        paramValue = false;\n      }\n      return { name: param.name, dataType, value: typeof paramValue === \"string\" ? paramValue : toString(dataType, paramValue) };\n    });\n    return { expression, name: item.id, params };\n  });\n  const expression = filters.map(filter => `(${filter.expression})`).join(` ${FilterOperand.AND} `);\n  const params = filters.flatMap(filter => filter.params);\n  return { name: id, expression, params };\n}\n\nclass SnkFilterModalFactory {\n  constructor({ filterConfig, configName, onComplete, getMessage, disablePersonalizedFilter, onAddPersonalizedFilter, onEditPersonalizedFilter, onDeletePersonalizedFilter }) {\n    this._filterConfig = filterConfig;\n    this._configName = configName;\n    this._onComplete = onComplete;\n    this._getMessage = getMessage;\n    this._disablePersonalizedFilter = disablePersonalizedFilter;\n    this._addPersonalizedFilterFn = onAddPersonalizedFilter;\n    this._editPersonalizedFilterFn = onEditPersonalizedFilter;\n    this._onDeletePersonalizedFilter = onDeletePersonalizedFilter;\n  }\n  applyFilters(newFilterConfig) {\n    this._onComplete(newFilterConfig);\n    this._closeModal();\n  }\n  buildFilterModal() {\n    const filterModal = document.createElement(\"snk-filter-modal\");\n    filterModal.className = \"ez-size-height--full\";\n    filterModal.filters = this._filterConfig;\n    filterModal.configName = this._configName;\n    filterModal.disablePersonalizedFilter = this._disablePersonalizedFilter;\n    filterModal.getMessage = this._getMessage.bind(this);\n    filterModal.applyFilters = this.applyFilters.bind(this);\n    filterModal.closeModal = () => this._closeModal();\n    filterModal.addPersonalizedFilter = (isDefault) => this._addPersonalizedFilterFn(isDefault);\n    filterModal.editPersonalizedFilter = (id, isDefault) => this._editPersonalizedFilterFn(id, isDefault);\n    filterModal.deletePersonalizedFilter = (filter, configName, isDefault) => this._onDeletePersonalizedFilter(filter, configName, isDefault);\n    return filterModal;\n  }\n  async showModal() {\n    const filterModal = this.buildFilterModal();\n    const modalProps = {\n      content: filterModal,\n      position: 'right',\n      heightMode: 'full',\n      closeOutsideClick: false,\n      useScrimLight: true\n    };\n    this._closeModal = await ApplicationUtils.showModal(modalProps);\n  }\n  async closeModal() {\n    this._closeModal();\n  }\n}\n\nconst snkFilterBarCss = \".sc-snk-filter-bar-h{display:grid;grid-template-columns:1fr minmax(100px, 100%) 1fr 1fr;--snk-personalized-filter--z-index:var(--elevation--20, 20);--snk-personalized-filter--background-color:var(--background--xlight, #fff)}.snk-filter-bar__title.sc-snk-filter-bar{max-width:260px;display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:16px;font-family:var(--font-pattern, Arial);font-weight:var(--text-weight--large, 600);color:var(--color--title-primary, #2B3A54);margin-top:12px}[data-mode=\\\"hidden\\\"].sc-snk-filter-bar-h{width:0px;height:0px}[data-mode=\\\"button\\\"].sc-snk-filter-bar-h{grid-template-columns:1fr;width:fit-content}.snk-filter__popover-container.sc-snk-filter-bar{display:flex;cursor:auto}.filter-bar__personalized-filter.sc-snk-filter-bar{display:flex;flex-direction:column;position:fixed;top:0;left:0;width:100%;height:100%;overflow:auto;z-index:var(--snk-personalized-filter--z-index);background-color:var(--snk-personalized-filter--background-color)}.snk-filter__popover.sc-snk-filter-bar{display:flex;flex-direction:column;position:absolute;width:fit-content;height:fit-content;min-width:265px;background-color:var(--background--xlight, #fff);border-radius:var(--border--radius-medium, 12px);box-shadow:var(--shadow, 0px 0px 16px 0px #000)}.snk-filter-item__editor-header.sc-snk-filter-bar{flex-grow:1;font-weight:var(--text-weight--medium, 400);color:var(--color--title-primary, #2B3A54)}.snk-filter__popover-rule.sc-snk-filter-bar{border-style:solid;border-color:var(--color--disable-secondary, #F2F5F8);border-radius:1px;border-width:1px;width:100%}.editor__ez-check.sc-snk-filter-bar{--ez-check__label--padding-left:0}.snk-filter-item__editor-header-button.sc-snk-filter-bar{cursor:pointer;background-color:transparent;border:none;padding:3px;outline-color:var(--color--primary)}.snk-filter-bar__divider.sc-snk-filter-bar{margin-bottom:var(--space--small);height:80%}.snk-filter-bar__filter-item-container.sc-snk-filter-bar{display:flex;align-items:start}.snk-filter-bar__scroller.sc-snk-filter-bar .sc-snk-filter-bar:first-child{margin-left:var(--space-extra-small, 3px)}.snk-filter-bar__filter-list-items-container.sc-snk-filter-bar{overflow-y:auto;max-height:360px;margin-top:var(--space--small, 6px)}.snk-filter-bar__filter-list-item.sc-snk-filter-bar{cursor:pointer;border-radius:var(--border--radius-small, 6px);border:none;background-color:transparent}.snk-filter-bar__filter-list-item__label.sc-snk-filter-bar{color:var(--title--primary)}.snk-filter-bar__filter-list-item__label--secondary.sc-snk-filter-bar{color:var(--text--primary)}.snk-filter-bar__filter-list-item__icon.sc-snk-filter-bar{--ez-icon--color:var(--title--primary)}.snk-filter-bar__filter-list-item__icon--secondary.sc-snk-filter-bar{--ez-icon--color:var(--text--secondary)}.snk-filter-bar__filter-list-item.sc-snk-filter-bar:focus-visible{outline:none;background-color:var(--background--medium)}.snk-filter-bar__filter-list-item.sc-snk-filter-bar:hover{background-color:var(--background--medium)}.snk-filter-bar__filter-list-items-container--empty.sc-snk-filter-bar{width:100%;height:100px;display:flex;justify-content:center;align-self:center;align-items:center}.snk-filter-bar__filter-list-items-button--active.sc-snk-filter-bar{position:relative}.snk-filter-bar__filter-list-items-button--active.sc-snk-filter-bar::after{display:flex;position:absolute;content:\\\"\\\";width:8px;height:8px;top:7px;left:17px;background-color:var(--icon--alert--color, #008561);border-radius:50%}.snk-filter-bar__filter-modal-item.sc-snk-filter-bar{--modal-item-border-width:2px;display:flex;flex-direction:row;margin-left:var(--modal-item-border-width);border-radius:var(--border--radius-medium, 12px);background-color:var(--background--medium, #f0f3f7);border:none;width:100%}.snk-filter-bar__filter-modal-item.sc-snk-filter-bar:focus-visible{outline:var(--color--primary) solid var(--modal-item-border-width)}.snk-filter-bar__filter-modal-item__check.sc-snk-filter-bar{width:auto}.snk-filter-bar__filter-modal-item__label.sc-snk-filter-bar{font-weight:var(--text-weight--medium)}.snk-filter-bar__filter-modal-content.sc-snk-filter-bar{display:grid;grid-template-rows:auto auto 1fr auto;width:99%;height:100%}\";\n\nconst SnkFilterBar = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.configUpdated = createEvent(this, \"configUpdated\", 7);\n    this._updateSequence = [];\n    this._loadingPending = false;\n    this._configUpdated = false;\n    this._firstLoad = true;\n    this._pendingVariables = false;\n    this._isDefaultFilter = false;\n    this._customfiltersToBeUpdated = [];\n    this._resolveLoading = undefined;\n    this._calculateSortIndex = (item) => {\n      if (!item.visible)\n        return 0;\n      if (item.hardFixed)\n        return 1000000; //campos Hard Fixed não variam a ordem\n      let index = item.fixed ? 100000 : 0;\n      index += this.hasValidValue(item) ? 10000 : 0;\n      index += this._updateSequence.lastIndexOf(item.id) + 1;\n      return index;\n    };\n    this._filtersComparator = (a, b) => {\n      return this._calculateSortIndex(b) - this._calculateSortIndex(a);\n    };\n    this.enableLockManagerLoadingComp = false;\n    this.customFilterBarConfig = undefined;\n    this.dataUnit = undefined;\n    this.title = undefined;\n    this.configName = undefined;\n    this.resourceID = undefined;\n    this.mode = \"regular\";\n    this.filterConfig = undefined;\n    this.messagesBuilder = undefined;\n    this.disablePersonalizedFilter = undefined;\n    this.filterBarLegacyConfigName = undefined;\n    this.autoLoad = undefined;\n    this.afterApplyConfig = undefined;\n    this.allowDefault = undefined;\n    this.scrollerLocked = false;\n    this.showPersonalizedFilter = false;\n    this.personalizedFilterId = undefined;\n  }\n  hasValidValue(item) {\n    if (item.value === undefined || item.value === null)\n      return false;\n    if (!Array.isArray(item.value))\n      return true;\n    return item.value.some(filterItem => filterItem.check === true);\n  }\n  observeFilterConfig(newValue, oldValue) {\n    if (ObjectUtils.equals(newValue, oldValue))\n      return;\n    this.handleFilterConfigsChanged(oldValue, newValue);\n  }\n  handleFilterConfigsChanged(oldValue, newValue) {\n    if (oldValue != undefined && newValue == undefined) {\n      this._loadingPending = true;\n      this._configUpdated = true;\n    }\n    else {\n      const oldItems = new Map(oldValue ? oldValue.map(item => [item.id, item]) : undefined);\n      if (oldItems.size === 0 && newValue.length > 0) {\n        this._loadingPending = true;\n        this._configUpdated = false;\n      }\n      else {\n        newValue.forEach(newItem => {\n          const oldItem = oldItems.get(newItem.id);\n          if (oldItem != undefined) {\n            this._configUpdated = this._configUpdated || ObjectUtils.objectToString(oldItem) != ObjectUtils.objectToString(newItem);\n            this._loadingPending = this._loadingPending || ObjectUtils.objectToString(oldItem.value) !== ObjectUtils.objectToString(newItem.value);\n            if (!this._loadingPending) {\n              const groupedChanged = ObjectUtils.objectToString(oldItem.groupedItems) != ObjectUtils.objectToString(newItem.groupedItems);\n              this._configUpdated = this._configUpdated || groupedChanged;\n              this._loadingPending = this._loadingPending || groupedChanged;\n            }\n          }\n          else {\n            this._configUpdated = true;\n            this._loadingPending = this._loadingPending || newItem.value != undefined;\n          }\n        });\n      }\n    }\n    if (this._loadingPending || this._configUpdated)\n      this.configUpdated.emit(newValue);\n    this.processAfterUpdateConfig();\n  }\n  /**\n   * Faz o recarregamento da filterbar buscando o state no servidor.\n   */\n  async reload() {\n    this.loadConfigFromStorage(true);\n  }\n  /**\n   * Retorna um item de filtro pelo ID.\n   */\n  async getFilterItem(id) {\n    const item = this.filterConfig.find(item => item.id === id);\n    return Promise.resolve(ObjectUtils.copy(item));\n  }\n  /**\n  * Atualiza um item do filtro.\n  *\n  * @param filterItem - Item com as informações atualizadas, caso o item não seja encontrado no array ele mão será modificado\n  */\n  async updateFilterItem(newFilterItem) {\n    const itemIndex = this.filterConfig.findIndex(item => item.id === newFilterItem.id);\n    if (itemIndex == -1) {\n      console.warn(\"[SnkFilterBar.updateFilterItem] FilterItem não encontrado, o mesmo não será atualizado.\");\n      return Promise.resolve();\n    }\n    this._loadingPending = true;\n    this.updateFilter(newFilterItem);\n    return Promise.resolve();\n  }\n  /**\n  * Adiciona um item de filtro.\n  *\n  * @param filterItem - Item a ser adicionado, caso o item já exista com o ID ele não será adicionado novamente\n  */\n  async addFilterItem(filterItem) {\n    const itemIndex = this.filterConfig.findIndex(item => item.id === filterItem.id);\n    if (itemIndex > -1) {\n      console.warn(\"[SnkFilterBar.addFilterItem] FilterItem já existe , o mesmo não será adicionado novamente.\");\n      return Promise.resolve();\n    }\n    this.filterConfig.push(filterItem);\n    this._loadingPending = true;\n    this.updateFilter(filterItem);\n    return Promise.resolve();\n  }\n  /**\n  * Remove um item de filtro.\n  *\n  * @param filterID - ID do a ser adicionado\n  *\n  * @returns {Promise<SnkFilterItemConfig|undefined>} - Retorna o item de filtro removido, ou undefined caso não encontrado.\n  */\n  async removeFilterItem(filterID) {\n    const itemIndex = this.filterConfig.findIndex(item => item.id === filterID);\n    if (itemIndex == -1) {\n      console.warn(\"[SnkFilterBar.removeFilterItem] FilterItem não encontrado\");\n      return Promise.resolve(undefined);\n    }\n    const itemToRemove = this.filterConfig[itemIndex];\n    this.filterConfig = this.filterConfig.filter(item => item.id !== filterID);\n    return Promise.resolve(itemToRemove);\n  }\n  componentDidLoad() {\n    if (this._element) {\n      const dataInfo = { dataUnit: this.dataUnit };\n      ElementIDUtils.addIDInfo(this._element, null, dataInfo);\n    }\n  }\n  processPendingFilter() {\n    if (this._pendingVariables) {\n      const popUp = this._element.querySelector(\"#filter-PERSONALIZED_FILTER_GROUP\");\n      if (popUp) {\n        popUp.showUp(true).then(() => {\n          this.processAfterUpdateConfig();\n        });\n      }\n    }\n    else {\n      this.processAfterUpdateConfig();\n    }\n  }\n  getPersonalizedFilterItem() {\n    return this.filterConfig.find(item => item.type === FilterItemType.PERSONALIZED);\n  }\n  async processAfterUpdateConfig() {\n    var _a;\n    if (this._loadingPending) {\n      if (await this._application.isLoadedByPk() && !this._configUpdated)\n        return;\n      const personalizedFilter = this.getPersonalizedFilterItem();\n      this._pendingVariables = !PersonalizedFilterUtils.validateVariableValues(personalizedFilter);\n      if (this._pendingVariables) {\n        return;\n      }\n      this._loadingPending = false;\n      this.doLoadData(this.dataUnit.getLastLoadRequest() != undefined);\n    }\n    if (this._configUpdated) {\n      this._configUpdated = false;\n      ConfigStorage.saveFilterBarConfig(this.filterConfig, this.configName, this.resourceID);\n      (_a = this.afterApplyConfig) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n  async doLoadData(forceReload = false) {\n    try {\n      if (this._firstLoad && this.autoLoad === false) {\n        return;\n      }\n      if (this._firstLoad && !forceReload && this.autoLoad === undefined) {\n        let autoLoad = await this._application.getBooleanParam(\"global.carregar.registros.iniciar.tela\");\n        if (!autoLoad) {\n          return;\n        }\n      }\n      this.dataUnit.loadData(undefined, undefined, true);\n    }\n    finally {\n      this._firstLoad = false;\n    }\n  }\n  /**\n   * Conforme mecanismo de mensagens, é possível customizar as mensagens dos blocos de construção\n   * através de um pequeno modulo na estrutura da aplicação:\n   * - Criar um arquivo no seguinte caminho: /messages/appmessages.msg.js.\n   * Para conhecer os detalhes do módulo, vide o arquivo neste projeto \"/src/lib/message/resources/snk-filter-bar.msg.ts\"\n   */\n  getMessage(key, params, defaultValue) {\n    var _a;\n    if (this.messagesBuilder == undefined && this._application) {\n      this.messagesBuilder = this._application.messagesBuilder;\n    }\n    return ((_a = this.messagesBuilder) === null || _a === void 0 ? void 0 : _a.getMessage(key, params)) || defaultValue;\n  }\n  getFilter(_dataUnit) {\n    var _a;\n    const filters = [];\n    (_a = this.filterConfig) === null || _a === void 0 ? void 0 : _a.filter(item => this.isActiveFilter(item)).forEach(item => {\n      const filter = buildFilter(item);\n      if (filter) {\n        filters.push(filter);\n      }\n    });\n    return filters;\n  }\n  isActiveFilter(item) {\n    /*\n      - O filtro padrão também deve sempre ser condiderado ativo, pois, sempre deve\n        ser aplicado.\n    */\n    if (item.type === FilterItemType.DEFAULT_FILTER) {\n      return true;\n    }\n    return this.filterActiveFilter(item) && (item.groupedItems || item.value != undefined);\n  }\n  async registryFilterProvider() {\n    this.dataUnit.addFilterProvider(this);\n    if (this.filterConfig) {\n      await this.doLoadData();\n    }\n  }\n  itemFocused(selectedItem) {\n    this._element.querySelectorAll(\"snk-filter-item,snk-filter-list\").forEach(item => {\n      if (item.id === selectedItem) {\n        if (item.tagName.toLowerCase() === \"snk-filter-item\" && item.getClientRects()[0].x < 0) {\n          item.scrollIntoView({ behavior: \"auto\", inline: 'nearest' });\n        }\n      }\n      else {\n        item[\"hideDetail\"]();\n      }\n    });\n  }\n  filterActiveFilter(item) {\n    return item.visible || item.removalBlocked;\n  }\n  filterPersonalizedItems(item) {\n    return item.type === FilterItemType.PERSONALIZED;\n  }\n  getPersonalizedFilterVariableItems() {\n    return this.filterConfig\n      .filter(this.filterPersonalizedItems)\n      .map(item => {\n      const itemId = `filter-${item.id}`;\n      return (h(\"snk-filter-item\", { key: item.id, id: itemId, config: Object.assign({}, item), onFocusin: () => this.itemFocused(itemId), onVisibleChanged: (evt) => this.scrollerLocked = evt.detail, onFilterChange: (event) => this.updateFilter(event.detail), getMessage: (key, props) => this.getMessage(key, props), showChips: false }));\n    });\n  }\n  getFilterItems() {\n    const pinnedItems = [];\n    const unpinnedItems = [];\n    this.filterConfig.sort((a, b) => this._filtersComparator(a, b))\n      .filter(this.filterActiveFilter)\n      .forEach((item, index) => {\n      item = ObjectUtils.copy(item);\n      const itemId = `filter-${item.id}`;\n      const filterItem = (h(\"snk-filter-item\", { onVisibleChanged: (evt) => this.scrollerLocked = evt.detail, onFilterChange: (event) => this.updateFilter(event.detail), onFocusin: () => this.itemFocused(itemId), id: itemId, config: item, class: index > 0 ? \"ez-padding-left--medium\" : \"\", getMessage: (key, props) => this.getMessage(key, props), key: item.id }));\n      if (item.fixed || item.hardFixed) {\n        pinnedItems.push(filterItem);\n      }\n      else {\n        unpinnedItems.push(filterItem);\n      }\n      return filterItem;\n    });\n    const elements = [];\n    elements.push(...pinnedItems);\n    if (pinnedItems.length > 0 && unpinnedItems.length > 0) {\n      elements.push(h(\"hr\", { class: \"ez-divider-vertical ez-divider--dark ez-margin-left--medium snk-filter-bar__divider\" }));\n    }\n    elements.push(...unpinnedItems);\n    return elements;\n  }\n  calculateUpdateSequence(item) {\n    if (item) {\n      this._updateSequence = this._updateSequence.filter(itemId => item.id !== itemId);\n      this._updateSequence.push(item.id);\n    }\n  }\n  normalizeItem(item) {\n    const normalized = Object.assign({}, item);\n    const optionals = [\"props\", \"value\", \"hardFixed\", \"fixed\"];\n    optionals.forEach(prop => {\n      if (normalized[prop] == undefined) {\n        delete normalized[prop];\n      }\n    });\n    if (item.value === \"\") {\n      delete item.value;\n    }\n    return normalized;\n  }\n  updateFilter(newItem) {\n    this.filterConfig = this.filterConfig.map(item => {\n      newItem = this.normalizeItem(newItem);\n      if (item.id === newItem.id) {\n        if (ObjectUtils.objectToString(item) != ObjectUtils.objectToString(newItem)) {\n          this.calculateUpdateSequence(newItem);\n        }\n        return newItem;\n      }\n      return item;\n    }).sort((a, b) => this._filtersComparator(a, b));\n  }\n  loadPermitions() {\n    this._application.isUserSup().then(value => this.allowDefault = value);\n  }\n  addFilterBarLegacyConfigName() {\n    if (this.filterBarLegacyConfigName) {\n      ConfigStorage.addFilterBarLegacyConfig(this.configName, this.filterBarLegacyConfigName);\n    }\n  }\n  async loadConfigFromStorage(clearCache) {\n    try {\n      if (clearCache) {\n        await ConfigStorage.deleteFilterBarConfigCache(this.configName, this.resourceID);\n      }\n      let config;\n      if (this.customFilterBarConfig) {\n        config = await this.customFilterBarConfig(this.configName, this.resourceID, { contextURI: this.dataUnit.name });\n      }\n      else {\n        config = await ConfigStorage.loadFilterBarConfig(this.configName, this.resourceID, { contextURI: this.dataUnit.name });\n      }\n      this.filterConfig = config.map(item => this.normalizeItem(item));\n      this.filterConfig.sort((a, b) => this._filtersComparator(a, b));\n    }\n    catch (e) {\n      throw new ErrorException(this.getMessage(\"snkFilterBar.failToLoadConfig\"), e);\n    }\n  }\n  async attachDataUnit() {\n    if (this.dataUnit == undefined) {\n      let parent = this._element.parentElement;\n      while (parent) {\n        if (parent.tagName.toUpperCase() === \"SNK-DATA-UNIT\") {\n          const snkDataUnit = parent;\n          this.dataUnit = snkDataUnit.dataUnit;\n          if (this.dataUnit) {\n            await this.registryFilterProvider();\n          }\n          else {\n            snkDataUnit.addEventListener(\"dataUnitReady\", async (evt) => {\n              this.dataUnit = evt.detail;\n              await this.registryFilterProvider();\n            });\n          }\n          break;\n        }\n      }\n      parent = parent.parentElement;\n    }\n    else {\n      await this.registryFilterProvider();\n    }\n  }\n  /**\n  * Emitido quando acontece a alteração do estado do filtro.\n  */\n  filterChangeListener(evt) {\n    this.updateFilter(evt.detail);\n  }\n  /**\n   * Abre o modal de filtros\n  */\n  async showFilterModal() {\n    const callbackOnApplyFilter = (filters) => {\n      var _a;\n      this.filterConfig = filters.map(this.normalizeItem).sort((a, b) => this._filtersComparator(a, b));\n      (_a = this.afterApplyConfig) === null || _a === void 0 ? void 0 : _a.call(this);\n    };\n    let filtersConfigCopy = ObjectUtils.copy(this.filterConfig);\n    filtersConfigCopy = filtersConfigCopy.sort((itemA, itemB) => {\n      return itemA.originOrder - itemB.originOrder;\n    });\n    const factoryParams = {\n      filterConfig: filtersConfigCopy,\n      configName: this.configName,\n      onComplete: callbackOnApplyFilter,\n      disablePersonalizedFilter: this.disablePersonalizedFilter,\n      getMessage: (key, props) => this.getMessage(key, props),\n      onAddPersonalizedFilter: (isDefault) => this.addPersonalizedFilter(isDefault),\n      onEditPersonalizedFilter: (id, isDefault) => this.editPersonalizedFilter(id, isDefault),\n      onDeletePersonalizedFilter: (filter, configName, isDefault) => this.deletePersonalizedFilter(filter, FilterItemType.PERSONALIZED, configName, isDefault),\n    };\n    this._filterModalFactory = new SnkFilterModalFactory(factoryParams);\n    await this._filterModalFactory.showModal();\n  }\n  addPersonalizedFilter(isDefault = false) {\n    this._filterModalFactory.closeModal();\n    this._isDefaultFilter = isDefault;\n    this.personalizedFilterId = undefined;\n    this.showPersonalizedFilter = true;\n    window.requestAnimationFrame(() => {\n      this._elPersonalizedFilter.createPersonalizedFilter();\n    });\n  }\n  editPersonalizedFilter(id, isDefault = false) {\n    this._filterModalFactory.closeModal();\n    this._isDefaultFilter = isDefault;\n    this.showPersonalizedFilter = true;\n    this.personalizedFilterId = id;\n  }\n  deletePersonalizedFilter(filter, filterItemType, configName, isDefault = false) {\n    if (isDefault) {\n      ConfigStorage.removeDefaultFilter(filter, this.resourceID, configName);\n      this._isDefaultFilter = false;\n      return;\n    }\n    if (filterItemType === FilterItemType.PERSONALIZED) {\n      ConfigStorage.removePersonalizedFilter(filter, this.resourceID, configName);\n    }\n  }\n  handleHidePersonalizedFilter(reloadFilterBar) {\n    if (reloadFilterBar) {\n      this.loadConfigFromStorage().then(() => {\n        this.hidePersonalizedFilter();\n      });\n    }\n    else {\n      this.hidePersonalizedFilter();\n    }\n  }\n  hidePersonalizedFilter() {\n    this.personalizedFilterId = undefined;\n    this.showPersonalizedFilter = false;\n    this._isDefaultFilter = false;\n  }\n  async componentWillLoad() {\n    var _a;\n    try {\n      this._application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n      await this.attachDataUnit();\n      if (this._application) {\n        if (this._application.enableLockManagerLoadingApp && this.enableLockManagerLoadingComp) {\n          const appLoadLockerID = LockManager.addLockManagerCtxId(this._element);\n          this._resolveLoading = LockManager.lock(appLoadLockerID, LockManagerOperation.APP_LOADING);\n        }\n        await Promise.all([\n          this.loadPermitions(),\n          this.addFilterBarLegacyConfigName(),\n          this.loadConfigFromStorage(),\n        ]);\n      }\n    }\n    finally {\n      (_a = this._resolveLoading) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n  componentDidRender() {\n    this.processPendingFilter();\n  }\n  render() {\n    if (!this.dataUnit || !this.filterConfig || this.filterConfig.length === 0) {\n      return undefined;\n    }\n    if (this.showPersonalizedFilter) {\n      return h(\"snk-personalized-filter\", { class: \"filter-bar__personalized-filter\", filterId: this.personalizedFilterId, ref: (el) => this._elPersonalizedFilter = el, isDefaultFilter: this._isDefaultFilter, onEzCancel: () => this.handleHidePersonalizedFilter(false), onEzAfterSave: () => this.handleHidePersonalizedFilter(true), entityUri: this.dataUnit.name, configName: this.configName, resourceID: this.resourceID });\n    }\n    if (this.mode !== \"regular\") {\n      return (h(Host, { \"data-mode\": this.mode }, this.getPersonalizedFilterVariableItems(), this.mode === 'button' && (h(\"ez-button\", { class: \"ez-margin-left--medium\", size: \"small\", label: this.getMessage('snkFilterBar.filters', undefined, 'Filtros'), onClick: this.showFilterModal.bind(this) }))));\n    }\n    return (h(Host, null, h(\"div\", null, h(\"span\", { class: \"snk-filter-bar__title\", title: this.title, \"data-tooltip\": this.title, \"data-flow\": \"bottom\" }, this.title)), h(\"ez-scroller\", { class: \"snk-filter-bar__scroller\", direction: EzScrollDirection.HORIZONTAL, activeShadow: true, locked: this.scrollerLocked }, h(\"section\", { class: \"snk-filter-bar__filter-item-container\" }, this.getFilterItems())), h(\"ez-button\", { class: \"ez-padding-left--medium ez-margin-top--extra-small\", size: \"small\", label: this.getMessage('snkFilterBar.filters', undefined, 'Filtros'), onClick: this.showFilterModal.bind(this) }, h(\"ez-icon\", { slot: \"leftIcon\", iconName: \"plus\", class: \"ez-padding-right--small\" }))));\n  }\n  get _element() { return getElement(this); }\n  static get watchers() { return {\n    \"filterConfig\": [\"observeFilterConfig\"]\n  }; }\n};\nSnkFilterBar.style = snkFilterBarCss;\n\nconst snkFilterItemCss = \"ez-popover-core.sc-snk-filter-item{--ez-popover__box--z-index:var(--elevation--20, 20);--ez-popover__box--overlay-z-index:var(--elevation--16, 16)}\";\n\nconst SnkFilterItem = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.visibleChanged = createEvent(this, \"visibleChanged\", 7);\n    this.filterChange = createEvent(this, \"filterChange\", 3);\n    this.detailIsVisible = undefined;\n    this.config = undefined;\n    this.getMessage = undefined;\n    this.showChips = true;\n  }\n  observeDetailIsVisible(value) {\n    this.visibleChanged.emit(value);\n  }\n  /**\n   * Emitido quando o estado do filtro é alterado.\n   */\n  filterChangeListener() {\n    this.hideDetail();\n  }\n  /**\n   * Exibe os detalhes de um item da lista.\n   */\n  async showUp(open = false) {\n    var _a;\n    this._filterItemElement.scrollIntoView({ behavior: \"auto\", block: \"nearest\", inline: \"nearest\" });\n    if (open) {\n      await ((_a = this._chipElement) === null || _a === void 0 ? void 0 : _a.setBlur());\n      await this._popover.showUnder(this._chipElement);\n    }\n  }\n  /**\n   * Oculta os detalhes de um item da lista.\n   */\n  async hideDetail() {\n    await this._popover.hide();\n  }\n  getConfigChanges() {\n    var _a;\n    const configToBeCleared = this.config;\n    if (!!((_a = configToBeCleared.groupedItems) === null || _a === void 0 ? void 0 : _a.length)) {\n      configToBeCleared.visible = false;\n      configToBeCleared.groupedItems = configToBeCleared.groupedItems.map(item => (Object.assign(Object.assign({}, item), { visible: false })));\n    }\n    const hasMultiValues = configToBeCleared.type === FilterItemType.MULTI_LIST && Array.isArray(configToBeCleared.value);\n    const newValue = hasMultiValues ? configToBeCleared.value.map((valueItem) => (Object.assign(Object.assign({}, valueItem), { check: false }))) : undefined;\n    return Object.assign(Object.assign({}, configToBeCleared), { value: newValue });\n  }\n  clearFilter(event) {\n    event === null || event === void 0 ? void 0 : event.stopPropagation();\n    if (this.canClearFilter()) {\n      const configChanged = this.getConfigChanges();\n      this.filterChange.emit(configChanged);\n    }\n    else {\n      this.togglePopover();\n    }\n  }\n  async togglePopover(event) {\n    event === null || event === void 0 ? void 0 : event.preventDefault();\n    event === null || event === void 0 ? void 0 : event.stopPropagation();\n    if (this.detailIsVisible) {\n      await this.hideDetail();\n    }\n    else {\n      await this.showUp(true);\n    }\n  }\n  getLabel(isTooltipLabel = false) {\n    var _a, _b;\n    const { type, value, label, props, groupedItems = [] } = this.config;\n    if (value || groupedItems.length) {\n      if (type === FilterItemType.BINARY_SELECT) {\n        const [optOne, optTwo] = props.options;\n        const tooltip = this.getMessage('snkFilterBar.binarySelectTooltip');\n        if (optOne.name === value) {\n          return isTooltipLabel ? `${tooltip} ${String(optOne.label).toLowerCase()}` : optOne.label;\n        }\n        if (optTwo.name === value) {\n          return isTooltipLabel ? `${tooltip} ${String(optTwo.label).toLowerCase()}` : optTwo.label;\n        }\n      }\n      if (type === FilterItemType.MULTI_SELECT) {\n        const opt = props.options.find(opt => opt.value === value);\n        return `${label}: ${opt.label}`;\n      }\n      if (type === FilterItemType.PERIOD) {\n        let { end, start } = value;\n        if (typeof end === \"string\") {\n          end = new Date(end);\n          end.setMinutes(end.getMinutes() + end.getTimezoneOffset());\n        }\n        if (typeof start === \"string\") {\n          start = new Date(start);\n          start.setMinutes(start.getMinutes() + start.getTimezoneOffset());\n        }\n        const dateFormater = new Intl.DateTimeFormat(\"pt-BR\");\n        if (end && start) {\n          const isSameYear = start.getFullYear() === end.getFullYear();\n          const formatOptions = Object.assign({ day: '2-digit', month: '2-digit' }, ((!isSameYear || isTooltipLabel) && { year: '2-digit' }));\n          const startLabel = DateUtils.formatDate(start, formatOptions);\n          const endLabel = DateUtils.formatDate(end, formatOptions);\n          if (isTooltipLabel) {\n            return this.getMessage('snkFilterBar.fullPeriodTooltip', { LABEL: label, START_LABEL: startLabel, END_LABEL: endLabel });\n          }\n          return `${label}: ${startLabel} \\u2192 ${endLabel}`;\n        }\n        else {\n          if (start) {\n            return `${label}: ${this.getMessage('snkFilterBar.onlyStartToltip')} ${dateFormater.format(start)}`;\n          }\n          else if (end) {\n            return `${label}: ${this.getMessage('snkFilterBar.onlyEndToltip')} ${dateFormater.format(end)}`;\n          }\n          else {\n            return label;\n          }\n        }\n      }\n      if (type === FilterItemType.SEARCH) {\n        return `${label}: ${value.value} - ${value.label}`;\n      }\n      if (type === FilterItemType.PERSONALIZED) {\n        const activeCount = this.calculateActiveCount(groupedItems);\n        if (activeCount <= 0)\n          return label;\n        return `${label}: ${this.getMessage('snkFilterBar.personalizedCount', { activeCount })}`;\n      }\n      if (type === FilterItemType.MULTI_LIST) {\n        const selectedOptions = ((_a = value.elements) !== null && _a !== void 0 ? _a : value).filter(item => item === null || item === void 0 ? void 0 : item.check);\n        return this.getLabelFromCheckedOptions(selectedOptions, label, isTooltipLabel);\n      }\n      if (type === FilterItemType.CHECK_BOX_LIST) {\n        const selectedValues = Object.entries(value !== null && value !== void 0 ? value : {})\n          .filter(([_, value]) => value === true)\n          .map(([key, _]) => key);\n        const options = (_b = props.options) !== null && _b !== void 0 ? _b : [];\n        const selectedOptions = options.filter(option => selectedValues.includes(option.name));\n        return this.getLabelFromCheckedOptions(selectedOptions, label, isTooltipLabel);\n      }\n      if (type === FilterItemType.NUMBER && props.variation === FilterNumberVariation.INTERVAL) {\n        const { start, end } = value;\n        if (!isNaN(start) && !isNaN(end)) {\n          return this.getMessage('snkFilterBar.fullIntervalTooltip', { LABEL: label, START_LABEL: start, END_LABEL: end });\n        }\n        if (!isNaN(start)) {\n          return `${label}: ${this.getMessage('snkFilterBar.onlyStartToltip')} ${Number(start)}`;\n        }\n        if (!isNaN(end)) {\n          return `${label}: ${this.getMessage('snkFilterBar.onlyEndToltip')} ${Number(end)}`;\n        }\n      }\n      if (this.config.mask) {\n        const _maskFormatter = new MaskFormatter(this.config.mask);\n        return `${label}: ${_maskFormatter.format(value)}`;\n      }\n      return `${label}: ${value}`;\n    }\n    return label;\n  }\n  getLabelFromCheckedOptions(selectedOptions, label, isTooltipLabel) {\n    const checkedAmount = selectedOptions.length;\n    if (checkedAmount === 0) {\n      return `${label}`;\n    }\n    if (checkedAmount > 1) {\n      if (isTooltipLabel) {\n        const selectedOptionsDescrptions = selectedOptions.map(item => item.label);\n        return `${label}: ${selectedOptionsDescrptions.join(',')}`;\n      }\n      return `${label}: ${checkedAmount} ${this.getMessage('snkFilterBar.multiListToltip')}`;\n    }\n    return `${label}: ${selectedOptions[0].label}`;\n  }\n  calculateActiveCount(groupedItems) {\n    return groupedItems.reduce((total, item) => {\n      if (!!item.visible)\n        return total + 1;\n      return total;\n    }, 0);\n  }\n  componentDidLoad() {\n    if (this._filterItemElement) {\n      ElementIDUtils.addIDInfo(this._filterItemElement);\n      this._idSnkFilterDetail = `filterDetail_${this.config.id}`;\n    }\n  }\n  canClearFilter() {\n    const { value, groupedItems = [] } = this.config;\n    if (value != undefined && this.config.type === FilterItemType.MULTI_LIST) {\n      return value.some((item) => item.check);\n    }\n    return value !== undefined || groupedItems.some(item => item.visible);\n  }\n  getRightIconName() {\n    if (this.canClearFilter())\n      return \"close\";\n    return this.detailIsVisible ? \"chevron-up\" : \"chevron-down\";\n  }\n  getLeftIconName() {\n    switch (this.config.type) {\n      case FilterItemType.PERIOD:\n        return \"calendar\";\n      case FilterItemType.PERSONALIZED:\n        return \"tune\";\n    }\n    return undefined;\n  }\n  hasActiveElements(value) {\n    var _a, _b, _c;\n    return ((_c = (_b = ((_a = value === null || value === void 0 ? void 0 : value.elements) !== null && _a !== void 0 ? _a : value)) === null || _b === void 0 ? void 0 : _b.filter(val => val === null || val === void 0 ? void 0 : val.check)) === null || _c === void 0 ? void 0 : _c.length) > 0;\n  }\n  hasActiveValue(config) {\n    return (config.type !== FilterItemType.MULTI_LIST && config.value !== undefined) || this.hasActiveElements(config.value);\n  }\n  getEnabledChip() {\n    if (this.detailIsVisible) {\n      return true;\n    }\n    if (this.config.type === FilterItemType.PERSONALIZED) {\n      const { groupedItems = [] } = this.config;\n      return groupedItems.some(item => item.visible);\n    }\n    return this.hasActiveValue(this.config);\n  }\n  handleVisibilityPopover(event) {\n    this.detailIsVisible = event.detail;\n  }\n  render() {\n    const leftIcon = this.getLeftIconName();\n    return (h(Host, null, this.showChips && (h(\"ez-chip\", { id: this.config.id, ref: ref => this._chipElement = ref, label: this.getLabel(), value: this.getEnabledChip(), onClick: (event) => this.togglePopover(event), disableAutoUpdateValue: true }, leftIcon && (h(\"ez-icon\", { ref: ref => this._leftIconElement = ref, iconName: leftIcon, class: \"ez-padding-right--small\", slot: \"leftIcon\" })), h(\"ez-icon\", { ref: ref => this._rightIconElement = ref, iconName: this.getRightIconName(), class: \"ez-padding-left--small\", slot: \"rightIcon\", id: \"removeFilter\", onClick: (event) => this.clearFilter(event) }))), h(\"ez-popover-core\", { ref: elem => this._popover = elem, onEzVisibilityChange: (event) => this.handleVisibilityPopover(event) }, h(\"snk-filter-detail\", { key: this.config.id, config: this.config, getMessage: this.getMessage, class: \"sc-snk-filter-bar snk-filter__popover ez-padding--small ez-elevation--16\", \"data-element-id\": this._idSnkFilterDetail, showHardFixed: this.showChips }))));\n  }\n  get _filterItemElement() { return getElement(this); }\n  static get watchers() { return {\n    \"detailIsVisible\": [\"observeDetailIsVisible\"]\n  }; }\n};\nSnkFilterItem.style = snkFilterItemCss;\n\nconst SHOW_MORE_ITEM_NAME = \"__SHOWMORE__\";\nconst MAX_FILTERS = 5;\nconst SnkFilterList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.snkItemSelected = createEvent(this, \"snkItemSelected\", 7);\n    this._preselection = -1;\n    this.innerClickCheck = (_floatingContainer, node) => {\n      if (node.id != FloatingManager.MODAL_ELEMENT_ID) {\n        return true;\n      }\n      this._detailIsVisible = false;\n      return false;\n    };\n    this._filterArgument = undefined;\n    this._showAll = undefined;\n    this.label = undefined;\n    this.iconName = undefined;\n    this.items = undefined;\n    this.getMessage = undefined;\n    this.emptyText = undefined;\n    this.findFilterText = undefined;\n    this.buttonClass = undefined;\n  }\n  showDetail() {\n    this._preselection = -1;\n    this._floatingID = FloatingManager.float(this._popover, this._popoverContainer, {\n      autoClose: true,\n      innerClickTest: this.innerClickCheck,\n      backClickListener: () => this.onListCloseCallback(),\n      useOverlay: true\n    });\n    this._detailIsVisible = true;\n    this._showAll = false;\n    this._filterArgument = \"\";\n    this._filterInput.setFocus();\n  }\n  /**\n   * Oculta os detalhes do componente snk-filter-list.\n   */\n  async hideDetail() {\n    if (this._floatingID != undefined) {\n      FloatingManager.close(this._floatingID);\n    }\n  }\n  onListCloseCallback() {\n    this._floatingID = undefined;\n    this._detailIsVisible = false;\n  }\n  buttonClick() {\n    if (this._detailIsVisible) {\n      this.hideDetail();\n    }\n    else {\n      this.showDetail();\n    }\n  }\n  componentDidLoad() {\n    if (this._element) {\n      ElementIDUtils.addIDInfo(this._element);\n    }\n  }\n  componentDidRender() {\n    if (this._floatingID == undefined) {\n      if (this._popover) {\n        this._popover.remove();\n      }\n    }\n  }\n  buildIdElement(buttonElement, name) {\n    if (!buttonElement)\n      return;\n    const dataElement = { id: name };\n    buttonElement.removeAttribute(ElementIDUtils.DATA_ELEMENT_ID_ATTRIBUTE_NAME);\n    ElementIDUtils.addIDInfoIfNotExists(buttonElement, \"filterItemList\", dataElement);\n  }\n  buildItemElement(item) {\n    const itemId = ++this._selectableItemsCount;\n    return (h(\"button\", { ref: elem => elem && this.buildIdElement(elem, item.label), id: `filter-item${itemId}`, onFocusin: () => this._preselection = itemId, class: `ez-col ez-col--sd-12 ez-align--middle ez-padding--small sc-snk-filter-bar snk-filter-bar__filter-list-item`, onClick: () => this.itemSelected(item.name), name: item.label, key: itemId }, item.iconName ? h(\"ez-icon\", { iconName: item.iconName, size: \"small\", class: `ez-padding-right--extra-small sc-snk-filter-bar snk-filter-bar__filter-list-item__icon ${item.iconClass || \"\"}` }) : undefined, h(\"div\", { class: `ez-text ez-text--medium ez-text--primary ez-padding--extra-small sc-snk-filter-bar snk-filter-bar__filter-list-item__label ${item.labelClass || \"\"}` }, item.label)));\n  }\n  itemSelected(itemName) {\n    if (itemName === SHOW_MORE_ITEM_NAME) {\n      this._showAll = true;\n    }\n    else {\n      this.hideDetail();\n      this.snkItemSelected.emit(itemName);\n    }\n  }\n  getFilterItems() {\n    const items = this.items ? ArrayUtils.applyStringFilter(this._filterArgument, this.items.filter(item => item.kind === \"FILTER\")) : [];\n    if (items.length === 0) {\n      return h(\"div\", { class: \"ez-text ez-text--medium ez-text--primary ez-padding--extra-small sc-snk-filter-bar snk-filter-bar__filter-list-items-container--empty\" }, this.emptyText);\n    }\n    const hideItems = !this._filterArgument && !this._showAll && (items.length > MAX_FILTERS + 1);\n    if (hideItems) {\n      items.splice(MAX_FILTERS);\n      items.push({ kind: \"INTERNAL\", label: \"Mostrar mais\", iconName: \"dots-horizontal\", name: SHOW_MORE_ITEM_NAME, iconClass: \"snk-filter-bar__filter-list-item__icon--secondary\", labelClass: \"snk-filter-bar__filter-list-item__label--secondary\" });\n    }\n    this._selectableItemsCount = 0;\n    return h(\"div\", { class: \"sc-snk-filter-bar snk-filter-bar__filter-list-items-container\" }, items.map(item => this.buildItemElement(item)));\n  }\n  getFooterItems() {\n    return this.items.filter(item => item.kind === \"FOOTER\");\n  }\n  keyDownHandler(event) {\n    switch (event.key) {\n      case \"ArrowDown\":\n        this.changePreselection(this._preselection + 1);\n        //Paramos a propagação do evento para evitar scroll indesejado\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      case \"ArrowUp\":\n        this.changePreselection(this._preselection - 1);\n        //Paramos a propagação do evento para evitar scroll indesejado\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n    }\n  }\n  changePreselection(newSelection) {\n    if (newSelection < 0) {\n      newSelection = this._selectableItemsCount;\n    }\n    this._preselection = newSelection > this._selectableItemsCount ? 0 : newSelection;\n    if (this._preselection === 0) {\n      this._filterInput.setFocus();\n    }\n    else {\n      const item = this._element.querySelector(`#filter-item${this._preselection}`);\n      if (item) {\n        item.focus();\n      }\n    }\n  }\n  render() {\n    return (h(Host, { class: \"ez-flex ez-flex--column\" }, h(\"ez-button\", { class: this.buttonClass, label: this.label, onClick: () => this.buttonClick(), mode: this.iconName ? \"icon\" : undefined, iconName: this.iconName, size: \"small\" }, h(\"slot\", { name: \"leftIcon\" })), h(\"section\", { class: \"ez-margin-top--small sc-snk-filter-bar snk-filter__popover-container\", ref: elem => this._popoverContainer = elem }, h(\"div\", { class: \"sc-snk-filter-bar snk-filter__popover ez-padding--small ez-elevation--4\", ref: elem => this._popover = elem }, h(\"ez-filter-input\", { ref: ref => this._filterInput = ref, \"data-element-id\": \"serachFilters\", mode: \"slim\", label: this.findFilterText, value: this._filterArgument, onEzChange: (evt) => this._filterArgument = evt.detail, onFocus: () => this._preselection = 0 }), this.getFilterItems(), h(\"hr\", { class: \"sc-snk-filter-bar snk-filter__popover-rule\" }), this.items ? this.getFooterItems().map(item => this.buildItemElement(item)) : undefined))));\n  }\n  get _element() { return getElement(this); }\n};\n\nconst snkFilterModalCss = \"ez-modal{--ez-modal-content-padding:24px 12px}.snk-filter-modal__container{width:344px;max-width:344px;min-width:344px;overflow:hidden}.snk-filter-modal__content{display:flex;flex-direction:column;gap:var(--space--medium, 12px);padding-right:var(--space--3xs, 4px)}.snk-filter-modal__collapsible-box{border:var(--border--small, 1px solid) var(--color--strokes, #DCE0E8);border-radius:var(--border--radius-medium);padding:var(--space--medium, 12px) var(--space--small, 6px)}.snk-filter-modal__rendered-items{max-height:760px;overflow-x:hidden;overflow-y:auto}.snk-filter-modal__rendered-items::-webkit-scrollbar{width:var(--space--small);min-width:var(--space--small);max-width:var(--space--small)}\";\n\nconst SnkFilterModal = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.getMessage = undefined;\n    this.configName = undefined;\n    this.filters = undefined;\n    this.applyFilters = undefined;\n    this.closeModal = undefined;\n    this.addPersonalizedFilter = undefined;\n    this.editPersonalizedFilter = undefined;\n    this.deletePersonalizedFilter = undefined;\n    this.filtersToDelete = [];\n    this.filterDefaultToDelete = undefined;\n    this.disablePersonalizedFilter = undefined;\n  }\n  /**\n   * Emitido quando um filtro personalizado é deletado.\n   */\n  deletePersonalizedFilterListener(event) {\n    this.filtersToDelete.push(event.detail);\n  }\n  getCustomMessage(key, params) {\n    var _a;\n    return (_a = this.getMessage) === null || _a === void 0 ? void 0 : _a.call(this, `snkFilterBar.filterModal.${key}`, params);\n  }\n  //TODO: tratar clear all dos filtros personalizados\n  handleClearAll() {\n    const { customFilters, quickFilters, otherFilters, multiListFilters } = this.filters.reduce((acc, filter) => {\n      if (filter.type === FilterItemType.MULTI_LIST) {\n        acc.multiListFilters.push(filter);\n        return acc;\n      }\n      if (filter.filterType === FilterType.QUICK_FILTER) {\n        acc.quickFilters.push(filter);\n        return acc;\n      }\n      if (filter.filterType === FilterType.CUSTOM_FILTER) {\n        acc.customFilters.push(filter);\n        return acc;\n      }\n      if (filter.filterType === FilterType.OTHER_FILTERS) {\n        acc.otherFilters.push(filter);\n        return acc;\n      }\n      return acc;\n    }, { quickFilters: [], customFilters: [], otherFilters: [], multiListFilters: [] });\n    this.handleClearFilterList(quickFilters);\n    this.handleClearCustomFilters(customFilters);\n    this.handleClearOthersFilters(otherFilters);\n    multiListFilters.forEach(multiListFilter => this.handleClearSigleFilter(multiListFilter));\n  }\n  handleClearOthersFilters(otherFilters) {\n    this.filters = this.filters.map(filter => otherFilters.includes(filter) ? (Object.assign(Object.assign({}, filter), { value: undefined })) : filter);\n  }\n  handleClearCustomFilters(customFilters) {\n    this.filters.forEach((filter, index) => {\n      if (filter.filterType === FilterType.CUSTOM_FILTER)\n        this.filters[index] = this.clearAllCustomFilter(customFilters).shift();\n    });\n  }\n  clearAllCustomFilter(filterConfigSnapshot) {\n    return filterConfigSnapshot.map(filterItem => {\n      const copy = Object.assign({}, filterItem);\n      delete copy.value;\n      copy.visible = false;\n      if (copy.groupedItems) {\n        copy.groupedItems = this.clearAllCustomFilter(copy.groupedItems);\n      }\n      return copy;\n    });\n  }\n  hasChangeToSave() {\n    const hasChangesPersonalizedFilters = ObjectUtils.objectToString(this.filters) !== ObjectUtils.objectToString(this._originalFilterConfig);\n    return hasChangesPersonalizedFilters;\n  }\n  handleClose() {\n    const hasChangesToSave = this.hasChangeToSave();\n    if (!hasChangesToSave) {\n      this.closeModal();\n      return;\n    }\n    return ApplicationUtils.confirm(this.getCustomMessage('validations.notSaved.title'), this.getCustomMessage('validations.notSaved.message')).then((cancelAction) => {\n      if (cancelAction)\n        this.closeModal();\n    });\n  }\n  handleApplyFilters() {\n    const filterPersonalized = this.filters.find(filter => filter.filterType === FilterType.CUSTOM_FILTER || filter.filterType === FilterType.DEFAULT_FILTER);\n    if (this.isValidCustomFilter(filterPersonalized)) {\n      this.applyFilters(this.filters);\n    }\n    if (this.filtersToDelete.length > 0) {\n      this.filtersToDelete.forEach(filter => {\n        this.deletePersonalizedFilter(filter, this.configName);\n      });\n      this.filtersToDelete = [];\n    }\n    if (this.filterDefaultToDelete) {\n      this.deletePersonalizedFilter(this.filterDefaultToDelete, this.configName, true);\n      this._defaultFilter = undefined;\n      this.filterDefaultToDelete = undefined;\n    }\n  }\n  isValidCustomFilter(filterPersonalized) {\n    const isValid = PersonalizedFilterUtils.validateVariableValues(filterPersonalized);\n    if (!isValid) {\n      ApplicationUtils.alert(this.getCustomMessage('validations.notFullFilled.title'), this.getCustomMessage('validations.notFullFilled.message'));\n      return false;\n    }\n    return true;\n  }\n  modalActionListener(evt) {\n    const modalAction = evt.detail;\n    switch (modalAction) {\n      case ModalAction.CANCEL:\n        this.handleClearAll();\n        break;\n      case ModalAction.OK:\n        this.handleApplyFilters();\n        break;\n      case ModalAction.CLOSE:\n        this.handleClose();\n        break;\n    }\n  }\n  handleFilterChange(filterConfig) {\n    this.filters = this.filters.map(filter => filter.id === filterConfig.id ? filterConfig : filter);\n  }\n  handleClearFilterList(filterList) {\n    this.filters = this.filters.map(filter => filterList.includes(filter) ? (Object.assign(Object.assign({}, filter), { value: undefined })) : filter);\n  }\n  handleClearSigleFilter(filterItem) {\n    if (FilterItemType.MULTI_LIST === filterItem.type) {\n      let filterItemCopy = ObjectUtils.copy(filterItem);\n      this.uncheckFilterValues(filterItemCopy.value);\n      const filterListCopy = ObjectUtils.copy(this.filters);\n      const index = filterListCopy.findIndex(item => item.id === filterItem.id);\n      filterListCopy.splice(index, 1, filterItemCopy);\n      this.filters = ObjectUtils.copy(filterListCopy);\n      return;\n    }\n    if (FilterItemType.CHECK_BOX_LIST === filterItem.type) {\n      const filterListCopy = ObjectUtils.copy(this.filters);\n      filterListCopy.find(filter => filter.id === filterItem.id).value = undefined;\n      this.filters = ObjectUtils.copy(filterListCopy);\n      return;\n    }\n    const filter = this.filters.find(filter => filter.id === filterItem.id);\n    filter.value = undefined;\n    this.filters = ObjectUtils.copy(this.filters);\n  }\n  uncheckFilterValues(valueList) {\n    valueList.forEach(value => {\n      if (!!value) {\n        value.check = false;\n      }\n    });\n    return valueList;\n  }\n  renderFilterItem(filterItem, fullRow) {\n    return (h(\"snk-filter-modal-item\", { class: fullRow ? 'ez-col ez-col--sd-12' : 'ez-col ez-col--sd-6 ez-padding--small', filterItem: filterItem, configName: this.configName, onFilterChange: (event) => this.handleFilterChange(event.detail), onEditPersonalizedFilter: evt => this.editPersonalizedFilter(evt.detail), onAddPersonalizedFilter: () => this.addPersonalizedFilter() }));\n  }\n  isDefaultFilterNumberVariation(filter) {\n    var _a;\n    return filter.type === FilterItemType.NUMBER\n      && (!filter.props.variation || ((_a = filter.props) === null || _a === void 0 ? void 0 : _a.variation) === FilterNumberVariation.DEFAULT);\n  }\n  mountFiltersLines(filters) {\n    const MAX_LINE_LENGTH = 2;\n    let currentLine = 0;\n    let forceAddCurrent = false;\n    const filtersLines = {};\n    for (let curr = 0; curr < filters.length; curr++) {\n      filtersLines[currentLine] = filtersLines[currentLine] || [];\n      const item = filters[curr];\n      const isLast = curr === filters.length - 1;\n      const currentItemMatch = item.type === FilterItemType.TEXT || this.isDefaultFilterNumberVariation(item);\n      const nextItemMatch = isLast ? false : filters[curr + 1].type === FilterItemType.TEXT || this.isDefaultFilterNumberVariation(filters[curr + 1]);\n      if ((currentItemMatch && nextItemMatch) || forceAddCurrent) {\n        filtersLines[currentLine].push(item);\n        forceAddCurrent = filtersLines[currentLine].length < MAX_LINE_LENGTH;\n        if (filtersLines[currentLine].length === MAX_LINE_LENGTH)\n          ++currentLine;\n        continue;\n      }\n      filtersLines[currentLine] = filtersLines[currentLine] || [];\n      filtersLines[currentLine].push(item);\n      ++currentLine;\n    }\n    return Object.values(filtersLines);\n  }\n  renderFilterLine(filters) {\n    const fullLine = filters.length === 1;\n    return filters.map((filter) => this.renderFilterItem(filter, fullLine));\n  }\n  getIformedFiltersCount(listItems) {\n    let countInformedItens = 0;\n    listItems.forEach(item => {\n      var _a, _b, _c, _d, _e, _f;\n      if (FilterItemType.MULTI_LIST === item.type) {\n        countInformedItens += (_e = (_d = (_c = ((_b = (_a = item.value) === null || _a === void 0 ? void 0 : _a.elements) !== null && _b !== void 0 ? _b : item.value)) === null || _c === void 0 ? void 0 : _c.filter(value => value === null || value === void 0 ? void 0 : value.check)) === null || _d === void 0 ? void 0 : _d.length) !== null && _e !== void 0 ? _e : 0;\n        return;\n      }\n      if (FilterItemType.CHECK_BOX_LIST === item.type) {\n        countInformedItens += Object.entries((_f = item.value) !== null && _f !== void 0 ? _f : {})\n          .filter(([_, value]) => value === true)\n          .map(([key, _]) => key).length;\n        return;\n      }\n      if (item.groupedItems != undefined) {\n        countInformedItens = item.groupedItems.filter(item => item.visible).length;\n        return;\n      }\n      if (!!item.value) {\n        countInformedItens++;\n      }\n    });\n    return countInformedItens;\n  }\n  renderCollapsibleFilterBox(label, listItems, isSingleItem, shouldRenderFooter = true) {\n    if (!listItems.length)\n      return null;\n    const appliedFilters = this.getIformedFiltersCount(listItems);\n    const lines = this.mountFiltersLines(listItems);\n    return (h(\"ez-collapsible-box\", { class: \"snk-filter-modal__collapsible-box\", headerSize: \"medium\", value: true, label: label }, !!appliedFilters && (h(\"ez-badge\", { class: \"ez-badge--primary-subtle\", slot: \"rightSlot\", label: appliedFilters === null || appliedFilters === void 0 ? void 0 : appliedFilters.toString() })), h(\"div\", { class: \"ez-row snk-filter-modal__rendered-items\" }, lines.map(this.renderFilterLine.bind(this))), shouldRenderFooter && (h(\"div\", { class: \"ez-flex ez-flex--justify-end grow\" }, h(\"ez-button\", { class: \"ez-button--tertiary\", size: \"medium\", label: \"Limpar\", onClick: () => isSingleItem ? this.handleClearSigleFilter(listItems[0]) : this.handleClearFilterList(listItems) })))));\n  }\n  handleDeleteFilter() {\n    this._application.confirm(this.getMessage('snkPersonalizedFilter.deleteConfirm.title'), this.getMessage('snkPersonalizedFilter.info.deleteDefaultFilterConfirm'), \"alert-circle-inverted\", \"critical\").then((actionConfirmed) => {\n      if (!actionConfirmed) {\n        return;\n      }\n      this.filterDefaultToDelete = this._defaultFilter;\n      this.filters = this.filters.filter(filter => filter.id !== FilterType.DEFAULT_FILTER);\n    });\n  }\n  handleActionSelectedDefaultFilter({ detail: action }) {\n    switch (action) {\n      case ActionDefaultFilter.CREATE:\n        this.addPersonalizedFilter(true);\n        break;\n      case ActionDefaultFilter.EDIT:\n        this.editPersonalizedFilter(this._defaultFilter.id, true);\n        break;\n      case ActionDefaultFilter.REMOVE:\n        this.handleDeleteFilter();\n        break;\n    }\n  }\n  getCustomFilter(filters) {\n    const customFilters = filters.filter((filter) => filter.filterType === FilterType.CUSTOM_FILTER);\n    return customFilters;\n  }\n  getDefaultFilter(filters) {\n    const defaultFilter = filters.find((item) => item.id === DefaultFilter.id);\n    return defaultFilter;\n  }\n  componentWillLoad() {\n    this._application = ApplicationContext.getContextValue('__SNK__APPLICATION__');\n  }\n  componentWillRender() {\n    this._modalTitle = this.getCustomMessage('title');\n    this._okButtonLabel = this.getCustomMessage('okButtonLabel');\n    this._cancelButtonLabel = this.getCustomMessage('cancelButtonLabel');\n  }\n  componentDidLoad() {\n    if (!this._originalFilterConfig)\n      this._originalFilterConfig = this.filters;\n  }\n  render() {\n    this._defaultFilter = this.getDefaultFilter(this.filters);\n    const customFilters = this.getCustomFilter(this.filters);\n    const quickFilters = this.filters.filter(filter => filter.filterType === FilterType.QUICK_FILTER);\n    const otherFilters = this.filters.filter(filter => filter.filterType === FilterType.OTHER_FILTERS);\n    return (h(\"ez-modal-container\", { class: \"snk-filter-modal__container\", modalTitle: this._modalTitle, cancelButtonLabel: this._cancelButtonLabel, okButtonLabel: this._okButtonLabel, onEzModalAction: this.modalActionListener.bind(this) }, h(\"div\", { class: \"snk-filter-modal__content ez-col--sd-12\" }, h(\"snk-default-filter\", { getMessage: this.getCustomMessage.bind(this), hasDefaultFilter: !!this._defaultFilter, onActionSelected: this.handleActionSelectedDefaultFilter.bind(this) }), !this.disablePersonalizedFilter && this.renderCollapsibleFilterBox(this.getCustomMessage('customFilters'), customFilters, false, false), this.renderCollapsibleFilterBox(this.getCustomMessage('quickFilters'), quickFilters, false), otherFilters.map(filter => this.renderCollapsibleFilterBox(filter.label, [filter], true)))));\n  }\n};\nSnkFilterModal.style = snkFilterModalCss;\n\nexport { SnkFilterBar as snk_filter_bar, SnkFilterItem as snk_filter_item, SnkFilterList as snk_filter_list, SnkFilterModal as snk_filter_modal };\n"],"names":["buildFilter","item","FilterItemType","buildDefault","buildBinary","buildMultSelect","buildMultiList","buildPeriod","buildSearch","buildText","buildNumber","buildPersonalized","buildCheckboxList","id","value","props","selectedOption","opt","DataType","parsedValues","parseMultiListValues","_a","selectedOptionNames","_","valueChecked","key","selectedOptionsObject","option","buildCheckboxListExpression","options","expression","index","multiListValue","_b","end","start","params","toString","StringUtils","buildLikeValue","FilterNumberVariation","valueAsString","likeAs","groupedItems","filters","groupItem","param","valuesArray","dataType","paramValue","filter","FilterOperand","SnkFilterModalFactory","filterConfig","configName","onComplete","getMessage","disablePersonalizedFilter","onAddPersonalizedFilter","onEditPersonalizedFilter","onDeletePersonalizedFilter","newFilterConfig","filterModal","isDefault","modalProps","ApplicationUtils","snkFilterBarCss","SnkFilterBar","hostRef","registerInstance","createEvent","a","b","filterItem","newValue","oldValue","ObjectUtils","oldItems","newItem","oldItem","groupedChanged","newFilterItem","filterID","itemIndex","itemToRemove","dataInfo","ElementIDUtils","popUp","personalizedFilter","PersonalizedFilterUtils","ConfigStorage","forceReload","defaultValue","_dataUnit","selectedItem","itemId","h","evt","event","pinnedItems","unpinnedItems","elements","normalized","prop","clearCache","config","e","ErrorException","parent","snkDataUnit","callbackOnApplyFilter","filtersConfigCopy","itemA","itemB","factoryParams","filterItemType","reloadFilterBar","ApplicationContext","appLoadLockerID","LockManager","LockManagerOperation","el","Host","EzScrollDirection","getElement","snkFilterItemCss","SnkFilterItem","open","configToBeCleared","valueItem","configChanged","isTooltipLabel","type","label","optOne","optTwo","tooltip","dateFormater","isSameYear","formatOptions","startLabel","DateUtils","endLabel","activeCount","selectedOptions","selectedValues","_maskFormatter","MaskFormatter","checkedAmount","selectedOptionsDescrptions","total","_c","val","leftIcon","ref","elem","SHOW_MORE_ITEM_NAME","MAX_FILTERS","SnkFilterList","_floatingContainer","node","FloatingManager","buttonElement","name","dataElement","itemName","items","ArrayUtils","newSelection","snkFilterModalCss","SnkFilterModal","customFilters","quickFilters","otherFilters","multiListFilters","acc","FilterType","multiListFilter","filterConfigSnapshot","copy","cancelAction","filterPersonalized","ModalAction","filterList","filterItemCopy","filterListCopy","valueList","fullRow","currentLine","forceAddCurrent","filtersLines","curr","isLast","currentItemMatch","nextItemMatch","fullLine","listItems","countInformedItens","_d","_e","_f","isSingleItem","shouldRenderFooter","appliedFilters","lines","actionConfirmed","action","ActionDefaultFilter","DefaultFilter"],"mappings":"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","x_google_ignoreList":[0]}
{"version":3,"file":"snk-filter-modal-item.entry-CUTHbA9S.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-filter-modal-item.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-479e1293.js';\nimport { ElementIDUtils, ObjectUtils } from '@sankhyalabs/core';\nimport { F as FilterItemType } from './filter-item-type.enum-d45e026f.js';\nimport { E as EPresentationMode } from './presentationMode-783bbf9d.js';\nimport { C as ConfigStorage } from './ConfigStorage-cf578768.js';\nimport { F as FilterType } from './filter-type.enum-f6a8fe23.js';\nimport './form-config-fetcher-e623539b.js';\nimport './DataFetcher-db08cad0.js';\nimport './PrintUtils-3e4ff0f5.js';\nimport '@sankhyalabs/core/dist/dataunit/metadata/UnitMetadata';\n\nconst snkFilterModalItemCss = \".grow{flex-grow:1}.gap{gap:4px}\";\n\nconst SnkFilterModalItem = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.filterChange = createEvent(this, \"filterChange\", 7);\n    this.editPersonalizedFilter = createEvent(this, \"editPersonalizedFilter\", 7);\n    this.addPersonalizedFilter = createEvent(this, \"addPersonalizedFilter\", 7);\n    this.filterItem = undefined;\n    this.configName = undefined;\n    this.resourceID = undefined;\n  }\n  observeFilterItem(newValue) {\n    var _a, _b;\n    this._editor && (this._editor[\"config\"] = newValue);\n    (_b = (_a = this._editor) === null || _a === void 0 ? void 0 : _a['reloadList']) === null || _b === void 0 ? void 0 : _b.call(_a);\n    this.filterChange.emit(newValue);\n  }\n  getContentEditorConfig() {\n    const props = { presentationMode: EPresentationMode.MODAL };\n    switch (this.filterItem.type) {\n      case FilterItemType.BINARY_SELECT:\n        return { tag: \"snk-filter-binary-select\", props };\n      case FilterItemType.MULTI_SELECT:\n        return { tag: \"snk-filter-multi-select\" };\n      case FilterItemType.PERIOD:\n        return { tag: \"snk-filter-period\", props };\n      case FilterItemType.SEARCH:\n        return { tag: \"snk-filter-search\" };\n      case FilterItemType.NUMBER:\n        return { tag: \"snk-filter-number\", props };\n      case FilterItemType.PERSONALIZED:\n        return this.buildSnkFilterPersonalizedProps();\n      case FilterItemType.CHECK_BOX_LIST:\n        return { tag: \"snk-filter-checkbox-list\", props };\n      case FilterItemType.MULTI_LIST:\n        return { tag: \"snk-entity-list\", props: { maxHeightList: \"640px\", rightListSlotBuilder: item => this.buildRightSlot(item) } };\n    }\n    return { tag: \"snk-filter-text\" };\n  }\n  buildSnkFilterPersonalizedProps() {\n    return {\n      tag: \"snk-personalized-filter-editor\", props: {\n        onEditFilter: (event) => this.editPersonalizedFilter.emit(event.detail),\n        onAddFilter: () => this.addPersonalizedFilter.emit(),\n      }\n    };\n  }\n  isVisible(newValue) {\n    return !this.filterItem.visible ? newValue !== undefined : true;\n  }\n  updateFilterValue(data) {\n    const newValue = (data === null || data === void 0 ? void 0 : data.value) !== undefined ? data.value : data;\n    if (this.filterItem.groupedItems != undefined) {\n      this.filterItem = Object.assign(Object.assign({}, this.filterItem), { visible: newValue > 0, value: newValue, groupedItems: data.items });\n    }\n    else {\n      this.filterItem = Object.assign(Object.assign({}, this.filterItem), { value: this.filterItem.type === (FilterItemType.SEARCH || FilterItemType.CHECK_BOX_LIST) ? data : newValue, visible: this.isVisible(newValue) });\n    }\n  }\n  handleDeleteFilter(filter, filterItemType) {\n    if (filterItemType === FilterItemType.PERSONALIZED) {\n      ConfigStorage.removePersonalizedFilter(filter, this.resourceID, this.configName);\n    }\n  }\n  componentDidLoad() {\n    if (this._element) {\n      ElementIDUtils.addIDInfo(this._element);\n      const dataElementIdDoFilterItem = this._element.getAttribute(ElementIDUtils.DATA_ELEMENT_ID_ATTRIBUTE_NAME);\n      this._idContentEditor = `${dataElementIdDoFilterItem}_${this.filterItem.id}`;\n    }\n  }\n  buildRightSlot(item) {\n    return (h(\"ez-icon\", { iconName: \"delete\", onClick: () => this.removeValueFromConfig(item) }));\n  }\n  removeValueFromConfig(item) {\n    var _a, _b, _c;\n    const index = (_b = (_a = this.filterItem) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.findIndex(({ id }) => id === item.id);\n    const filterItemCopy = ObjectUtils.copy(this.filterItem);\n    (_c = filterItemCopy === null || filterItemCopy === void 0 ? void 0 : filterItemCopy.value) === null || _c === void 0 ? void 0 : _c.splice(index, 1);\n    this.updateFilterValue(filterItemCopy.value);\n  }\n  canShowDetailModal() {\n    const { CUSTOM_FILTER, OTHER_FILTERS } = FilterType;\n    return ![CUSTOM_FILTER, OTHER_FILTERS].includes(this.filterItem.filterType) && this.filterItem.type !== FilterItemType.BINARY_SELECT;\n  }\n  render() {\n    const { tag: ContentEditor, props } = this.getContentEditorConfig();\n    return (h(Host, null, h(\"div\", { class: \"ez-flex ez-flex--column grow\" }, this.canShowDetailModal() && (h(\"div\", { class: \"col ez-col--sd-12 ez-align--right ez-padding-medium ez-flex--align-items-center\" }, h(\"div\", { class: \"ez-title ez-title--small ez-title--primary grow\" }, this.filterItem.detailModal))), h(ContentEditor, Object.assign({ ref: ref => this._editor = ref, config: this.filterItem, value: this.filterItem.value, onValueChanged: (event) => this.updateFilterValue(event.detail), \"data-element-id\": this._idContentEditor }, props)))));\n  }\n  get _element() { return getElement(this); }\n  static get watchers() { return {\n    \"filterItem\": [\"observeFilterItem\"]\n  }; }\n};\nSnkFilterModalItem.style = snkFilterModalItemCss;\n\nexport { SnkFilterModalItem as snk_filter_modal_item };\n"],"names":["snkFilterModalItemCss","SnkFilterModalItem","hostRef","registerInstance","createEvent","newValue","_a","_b","props","EPresentationMode","FilterItemType","item","event","data","filter","filterItemType","ConfigStorage","ElementIDUtils","dataElementIdDoFilterItem","h","_c","index","id","filterItemCopy","ObjectUtils","CUSTOM_FILTER","OTHER_FILTERS","FilterType","ContentEditor","Host","ref","getElement"],"mappings":"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","x_google_ignoreList":[0]}
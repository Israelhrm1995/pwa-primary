{"version":3,"file":"snk-personalized-filter.entry-DSE65CC8.js","sources":["../../node_modules/@sankhyalabs/sankhyablocks/dist/esm/snk-personalized-filter.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, F as Fragment, H as Host } from './index-479e1293.js';\nimport { StringUtils, ObjectUtils, ApplicationContext, ElementIDUtils } from '@sankhyalabs/core';\nimport { P as PersonalizedFilterUtils } from './PersonalizedFilterUtils-2db38ff2.js';\nimport { P as PersonalizedFilterFetcher, C as ConfigStorage } from './ConfigStorage-cf578768.js';\nimport { ApplicationUtils } from '@sankhyalabs/ezui/dist/collection/utils';\nimport { a as FilterGroupCondition, D as DefaultFilter } from './index-8acbae97.js';\nimport { s as store } from './index-b72af127.js';\nimport './filter-item-type.enum-d45e026f.js';\nimport './form-config-fetcher-e623539b.js';\nimport './DataFetcher-db08cad0.js';\nimport './PrintUtils-3e4ff0f5.js';\nimport '@sankhyalabs/core/dist/dataunit/metadata/UnitMetadata';\n\nconst snkPersonalizedFilterCss = \".sc-snk-personalized-filter-h{display:flex;height:100%;padding:var(--space--large, 24px);--snk-personalized-filter--width:100%;--snk-personalized-filter--height:100%;--snk-personalized-filter--background-color-line:var(--color--disable-secondary);--snk-personalized-filter--margin-line:var(--border--radius-medium, 12px)}.snk-personalized-filter.sc-snk-personalized-filter{height:var(--snk-personalized-filter--width);width:var(--snk-personalized-filter--height)}.snk-personalized-filter__header-actions.sc-snk-personalized-filter{display:flex;gap:var(--space--medium)}.snk-personalized-filter__group.sc-snk-personalized-filter{flex:1}.snk-personalized-filter__expression-input--line.sc-snk-personalized-filter{width:100%;height:2px;background-color:var(--snk-personalized-filter--background-color-line);margin-top:var(--snk-personalized-filter--margin-line);margin-bottom:var(--snk-personalized-filter--margin-line)}.ez-box__main.sc-snk-personalized-filter{height:90%}.snk-personalized-filter__button-mode.sc-snk-personalized-filter{height:35px}\";\n\nconst SnkPersonalizedFilter = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ezCancel = createEvent(this, \"ezCancel\", 7);\n    this.ezSave = createEvent(this, \"ezSave\", 7);\n    this.ezAfterSave = createEvent(this, \"ezAfterSave\", 7);\n    this._personalizedFilterFetcher = new PersonalizedFilterFetcher();\n    this._filterMetadataStorage = new Map();\n    this._dataSourceFetcher = {\n      fetchData: async (entity) => {\n        let entityURI = entity === null || entity === void 0 ? void 0 : entity.uri;\n        if (StringUtils.isEmpty(entityURI)) {\n          entityURI = this.entityUri;\n        }\n        if (!this._filterMetadataStorage.has(entityURI)) {\n          const filterMetadata = await this._personalizedFilterFetcher.loadFields(entityURI);\n          this._filterMetadataStorage.set(entityURI, filterMetadata);\n        }\n        return this._filterMetadataStorage.get(entityURI);\n      }\n    };\n    this._filterAssistentMode = true;\n    this._filterAssistent = undefined;\n    this.messagesBuilder = undefined;\n    this.entityUri = undefined;\n    this.filterId = undefined;\n    this.configName = undefined;\n    this.resourceID = undefined;\n    this.isDefaultFilter = false;\n  }\n  /*\n   * Cria um novo filtro se nÃ£o houver nenhum filtro existente\n   */\n  async createPersonalizedFilter() {\n    const newPersonalizedFilter = {\n      name: \"\",\n      active: true,\n      expression: \"\",\n      parameters: [],\n      assistent: {\n        id: StringUtils.generateUUID(),\n        items: [\n          {\n            id: StringUtils.generateUUID(),\n            entityName: \"\",\n            fieldName: \"\",\n            description: \"\",\n            fieldLabel: \"Valor\",\n            type: undefined,\n            expression: undefined,\n            operand: undefined,\n            paramVariable: false,\n            value: undefined,\n            systemConfig: null,\n            userConfig: null\n          }\n        ],\n        childrenGroups: [],\n        operand: FilterGroupCondition.AND\n      }\n    };\n    if (this.isDefaultFilter) {\n      this.buildDataDefaultFilter(newPersonalizedFilter);\n    }\n    this._originalFilterAssistent = ObjectUtils.copy(newPersonalizedFilter);\n    this._filterAssistent = ObjectUtils.copy(newPersonalizedFilter);\n  }\n  loadFilter(newValue, oldValue) {\n    if (newValue == null || oldValue == newValue || this.resourceID == undefined) {\n      return;\n    }\n    if (newValue === DefaultFilter.id) {\n      ConfigStorage.loadDefaultFilter(newValue, this.resourceID, this.configName)\n        .then((resp) => {\n        const personalizedFilter = this.applyDefaultValues(resp);\n        this._filterAssistent = personalizedFilter;\n        this._originalFilterAssistent = ObjectUtils.copy(personalizedFilter);\n        this._filterAssistentMode = this._filterAssistent.hasOwnProperty(\"assistent\") && this._filterAssistent.assistent != undefined;\n      });\n      return;\n    }\n    ConfigStorage.loadPersonalizedFilter(newValue, this.resourceID, this.configName)\n      .then((resp) => {\n      const personalizedFilter = this.applyDefaultValues(resp);\n      this._filterAssistent = personalizedFilter;\n      this._originalFilterAssistent = ObjectUtils.copy(personalizedFilter);\n      this._filterAssistentMode = this._filterAssistent.hasOwnProperty(\"assistent\") && this._filterAssistent.assistent != undefined;\n    });\n  }\n  componentWillLoad() {\n    var _a;\n    if (store.get(`filterFieldsDataSource.${this.entityUri}`) == undefined) {\n      store.set(`filterFieldsDataSource.${this.entityUri}`, this._dataSourceFetcher);\n    }\n    if (!this.messagesBuilder) {\n      this._application = ApplicationContext.getContextValue(\"__SNK__APPLICATION__\");\n      this.messagesBuilder = (_a = this._application) === null || _a === void 0 ? void 0 : _a.messagesBuilder;\n    }\n    this.loadFilter(this.filterId, undefined);\n  }\n  componentDidRender() {\n    var _a;\n    (_a = this._viewStackRef) === null || _a === void 0 ? void 0 : _a.show(this._filterAssistentMode ? 0 : 1);\n    if (this._elButtonMode) {\n      this._elButtonMode.setAttribute(ElementIDUtils.DATA_ELEMENT_ID_ATTRIBUTE_NAME, ElementIDUtils.getInternalIDInfo(`${this._filterAssistentMode ? \"advancedMode_ezButton\" : \"assistentMode_ezButton\"}`));\n    }\n  }\n  buildDataDefaultFilter(data) {\n    data.name = DefaultFilter.name;\n    data.id = DefaultFilter.id;\n  }\n  getMessage(key, params) {\n    return this._application.messagesBuilder.getMessage(key, params);\n  }\n  async saveFilter() {\n    let response;\n    if (this.isDefaultFilter) {\n      response = await ConfigStorage.saveDefaultFilter(this._filterAssistent, this.resourceID, this.configName);\n    }\n    else {\n      response = await ConfigStorage.savePersonalizedFilter(this._filterAssistent, this.resourceID, this.configName);\n    }\n    this._elButtonSave.enabled = false;\n    const messageToken = !!this._filterAssistent.id ? 'confirmEdit' : 'confirmSave';\n    ApplicationUtils.info(this.getMessage(`snkPersonalizedFilter.${messageToken}.title`), { iconName: \"check\" });\n    const updatedFilterAssistent = Object.assign(Object.assign({}, response), this._filterAssistent);\n    updatedFilterAssistent.parameters = PersonalizedFilterUtils.buildVariableParameters(this._filterAssistent.assistent);\n    this._originalFilterAssistent = ObjectUtils.copy(updatedFilterAssistent);\n    this._filterAssistent = ObjectUtils.copy(updatedFilterAssistent);\n    this.ezAfterSave.emit();\n  }\n  removeFilter() {\n    ConfigStorage.removePersonalizedFilter(this._filterAssistent, this.resourceID, this.configName);\n  }\n  hasChangesToSave() {\n    return JSON.stringify(this._filterAssistent) === JSON.stringify(this._originalFilterAssistent);\n  }\n  async handleSave() {\n    if (this._filterAssistentMode) {\n      const isValid = PersonalizedFilterUtils.validateFields(this._filterAssistent.assistent);\n      if (!isValid || !this._filterAssistent.name)\n        return this._application.error(this.getMessage(\"snkPersonalizedFilter.error.title\"), this.getMessage(\"snkPersonalizedFilter.error.description\"));\n      this.saveAssistentMode();\n    }\n    else {\n      if (!this._filterAssistent.expression || !this._filterAssistent.name)\n        return this._application.error(this.getMessage(\"snkPersonalizedFilter.error.title\"), this.getMessage(\"snkPersonalizedFilter.error.description\"));\n      const isValidExpressionForAdvancedMode = await this.validateExpressionBeforeSaving();\n      if (!isValidExpressionForAdvancedMode)\n        return;\n      this.saveAdvancedMode();\n    }\n  }\n  saveAssistentMode() {\n    const { assistent, expression } = this._filterAssistent;\n    const expressionQuery = !!assistent ? PersonalizedFilterUtils.buildGroupExpression(assistent) : expression;\n    this._filterAssistent.expression = expressionQuery;\n    this.ezSave.emit(expressionQuery);\n    this.saveFilter();\n  }\n  saveAdvancedMode() {\n    if (this._originalFilterAssistent.expression !== this._filterAssistent.expression && this._filterAssistent.assistent) {\n      ApplicationUtils.confirm(this.getMessage(\"snkPersonalizedFilter.confirmSaveModeAdvanced.title\"), this.getMessage(\"snkPersonalizedFilter.confirmSaveModeAdvanced.description\"))\n        .then((confirm) => {\n        if (!confirm)\n          return;\n        this.saveAndTransformToAdvancedMode();\n      });\n    }\n    else if (!this._filterAssistent.assistent) {\n      this.saveAndTransformToAdvancedMode();\n    }\n    else {\n      this.saveAssistentMode();\n    }\n  }\n  saveAndTransformToAdvancedMode() {\n    this._filterAssistent.assistent = undefined;\n    this.ezSave.emit(this._filterAssistent.expression);\n    this.saveFilter();\n  }\n  async validateExpressionBeforeSaving() {\n    const { valid, message = \"\" } = await this._personalizedFilterFetcher.validatePersonalizedFilter(this.entityUri, this._filterAssistent.expression);\n    valid || this._application.error(this.getMessage(\"snkPersonalizedFilter.errorValidation.title\"), message.replace(/.*Exception: /, ''));\n    return valid;\n  }\n  handleCancel() {\n    if (this.hasChangesToSave()) {\n      return this.ezCancel.emit();\n    }\n    ApplicationUtils.confirm(this.getMessage(\"snkPersonalizedFilter.confirmCancel.title\"), this.getMessage(\"snkPersonalizedFilter.confirmCancel.description\"))\n      .then((canCancel) => {\n      var _a;\n      if (!canCancel)\n        return;\n      this._filterAssistent = ObjectUtils.copy((_a = this._originalFilterAssistent) !== null && _a !== void 0 ? _a : {});\n      this.ezCancel.emit();\n      this._elButtonSave.enabled = false;\n    });\n  }\n  handleTitleChange(name) {\n    this._filterAssistent = Object.assign(Object.assign({}, this._filterAssistent), { name });\n    this._elButtonSave.enabled = !this.hasChangesToSave();\n  }\n  applyDefaultValues(personalizedFilter) {\n    this.addLabelToItems(personalizedFilter);\n    this.addFilterGroupCondition(personalizedFilter);\n    return personalizedFilter;\n  }\n  addFilterGroupCondition(personalizedFilter) {\n    if (personalizedFilter.assistent && !personalizedFilter.assistent.operand) {\n      personalizedFilter.assistent.operand = FilterGroupCondition.AND;\n    }\n  }\n  ;\n  addLabelToItems(personalizedFilter) {\n    //Workaround: Alguns filtros foram salvos sem o fieldLabel. Para evitar transtornos\n    //tentamos usar o fieldLabel que pode estar informado no parametro.\n    if (personalizedFilter.assistent && personalizedFilter.assistent.items && personalizedFilter.assistent.items.length > 0) {\n      personalizedFilter.assistent.items.forEach(item => {\n        if (item.fieldLabel == undefined) {\n          const param = (personalizedFilter.parameters || []).find(param => param.fieldName === item.fieldName);\n          if (param) {\n            item.fieldLabel = param.label;\n          }\n        }\n      });\n    }\n  }\n  handleExpressionChangeAdvancedMode(expression) {\n    this._filterAssistent = Object.assign(Object.assign({}, this._filterAssistent), { expression });\n    this._elButtonSave.enabled = !this.hasChangesToSave();\n  }\n  handleChangeFilterAssistentMode(filterAssistent) {\n    this._elButtonSave.enabled = !this.hasChangesToSave();\n    this._filterAssistent = Object.assign({}, filterAssistent);\n  }\n  selectField(fieldName) {\n    if (!('name' in fieldName))\n      return;\n    const fieldExpression = this.buildExpression(fieldName.entityName, fieldName.name, fieldName.entityPath);\n    const textAreaElement = this._elAdvancedMode.querySelector('ez-text-area');\n    textAreaElement.appendTextToSelection(fieldExpression);\n  }\n  buildExpression(entityName, fieldName, entityPath) {\n    if (entityPath.length > 0) {\n      entityPath.shift();\n    }\n    return entityPath.length > 0 ? `${entityPath.join(\"->\")}->${fieldName}` : `${entityName}.${fieldName}`;\n  }\n  onAddField(target) {\n    const textAreaElement = this._elAdvancedMode.querySelector('ez-text-area');\n    const options = { horizontalGap: 0, verticalGap: 12, fromRight: true };\n    textAreaElement.setFocus();\n    target.setBlur();\n    if (this._elFilterFieldSearch)\n      this._elFilterFieldSearch.show(target, options);\n  }\n  renderButtonAddField() {\n    if (this._filterAssistentMode)\n      return;\n    return (h(Fragment, null, h(\"ez-button\", { class: \"snk-personalized-filter__button-mode\", label: this.getMessage(\"snkPersonalizedFilter.info.addField\"), enabled: true, onClick: (evt) => this.onAddField(evt.target) }, h(\"ez-icon\", { class: \"ez-padding-right--small\", slot: \"leftIcon\", iconName: \"plus\" })), h(\"snk-filter-field-search\", { class: \"ez-padding-left--medium\", ref: ref => this._elFilterFieldSearch = ref, onEzSelectFilterItem: (evt) => this.selectField(evt.detail), fieldsDataSource: this._dataSourceFetcher })));\n  }\n  buildContainerPersonalizedFilter() {\n    return (h(\"ez-view-stack\", { ref: (ref) => this._viewStackRef = ref }, h(\"stack-item\", null, this._filterAssistentMode &&\n      h(\"snk-filter-assistent-mode\", { filterAssistent: this._filterAssistent, messagesBuilder: this.messagesBuilder, filterId: this.filterId, entityUri: this.entityUri, application: this._application, onEzChangeFilter: (ev) => this.handleChangeFilterAssistentMode(ev.detail), isDefaultFilter: this.isDefaultFilter })), h(\"stack-item\", null, h(\"snk-filter-advanced-mode\", { ref: (ref) => this._elAdvancedMode = ref, filterAssistent: this._filterAssistent, application: this._application, onEzExpressionChange: (ev) => this.handleExpressionChangeAdvancedMode(ev.detail) }))));\n  }\n  handleModeChange() {\n    var _a, _b;\n    if (this._filterAssistentMode) {\n      ApplicationUtils.confirm(this.getMessage(\"snkPersonalizedFilter.confirmChangeModeAssistent.title\"), this.getMessage(\"snkPersonalizedFilter.confirmChangeModeAssistent.description\"))\n        .then((canCancel) => {\n        if (!canCancel)\n          return;\n        this._filterAssistentMode = !this._filterAssistentMode;\n        if (!this.hasChangesToSave()) {\n          const expression = PersonalizedFilterUtils.buildGroupExpression(this._filterAssistent.assistent);\n          this._filterAssistent.expression = expression;\n          this._elButtonSave.enabled = !this.hasChangesToSave();\n        }\n      });\n    }\n    else {\n      if (((_a = this._filterAssistent) === null || _a === void 0 ? void 0 : _a.expression) === ((_b = this._originalFilterAssistent) === null || _b === void 0 ? void 0 : _b.expression)) {\n        this._filterAssistentMode = !this._filterAssistentMode;\n      }\n      else {\n        const expressionBefore = this._filterAssistent.expression;\n        const expression = PersonalizedFilterUtils.buildGroupExpression(this._filterAssistent.assistent);\n        if (expressionBefore !== expression) {\n          ApplicationUtils.confirm(this.getMessage(\"snkPersonalizedFilter.confirmChangeModeAdvanced.title\"), this.getMessage(\"snkPersonalizedFilter.confirmChangeModeAdvanced.description\"))\n            .then((canCancel) => {\n            if (!canCancel)\n              return;\n            this._filterAssistent = Object.assign(Object.assign({}, this._filterAssistent), { expression });\n            this._filterAssistentMode = !this._filterAssistentMode;\n          });\n        }\n        else {\n          this._filterAssistentMode = !this._filterAssistentMode;\n        }\n      }\n    }\n  }\n  buildTitle() {\n    if (this.isDefaultFilter && !this.filterId) {\n      return this.getMessage(\"snkPersonalizedFilter.info.titleCreateDefault\");\n    }\n    if (this.isDefaultFilter && this.filterId) {\n      return this.getMessage(\"snkPersonalizedFilter.info.titleEditDefault\");\n    }\n    if (this.filterId) {\n      return this.getMessage(\"snkPersonalizedFilter.info.titleEdit\");\n    }\n    return this.getMessage(\"snkPersonalizedFilter.info.titleAdd\");\n  }\n  render() {\n    var _a, _b, _c, _d;\n    if (!((_a = this._filterAssistent) === null || _a === void 0 ? void 0 : _a.assistent) && this._filterAssistentMode) {\n      return;\n    }\n    return (h(Host, null, h(\"div\", { class: \"snk-personalized-filter\" }, h(\"div\", null, h(\"snk-simple-bar\", { label: this.buildTitle(), onExit: () => this.handleCancel() }, h(\"div\", { class: \"snk-personalized-filter__header-actions\", slot: \"rightSlot\" }, h(\"ez-button\", { size: \"small\", label: this.getMessage(\"snkPersonalizedFilter.info.labelCancel\"), onClick: () => this.handleCancel() }), h(\"ez-button\", { size: \"small\", ref: (el) => this._elButtonSave = el, enabled: false, class: \"ez-button--primary\", label: this.getMessage(\"snkPersonalizedFilter.info.labelSave\"), onClick: this.handleSave.bind(this) })))), h(\"div\", { class: \"ez-box ez-margin-bottom--medium ez-box__main\" }, h(\"div\", { class: \"ez-box__container\" }, h(\"div\", { class: \"ez-flex ez-flex--column ez-size-width--full\" }, h(\"div\", { class: \"ez-flex\" }, h(\"ez-tooltip\", { message: this.getMessage(\"snkPersonalizedFilter.info.textInputDisabled\"), active: this.isDefaultFilter }, h(\"ez-text-input\", { class: \"ez-padding-right--medium\", label: this.getMessage(\"snkPersonalizedFilter.info.labelNameFilter\"), value: (_b = this._filterAssistent) === null || _b === void 0 ? void 0 : _b.name, onEzChange: (evt) => this.handleTitleChange(evt.detail), enabled: !this.isDefaultFilter })), this.renderButtonAddField(), h(\"ez-button\", { ref: (el) => this._elButtonMode = el, class: \"snk-personalized-filter__button-mode\", label: this._filterAssistentMode ? this.getMessage(\"snkPersonalizedFilter.info.activeModeAdvanced\") : this.getMessage(\"snkPersonalizedFilter.info.activeModeAssistent\"), onClick: () => this.handleModeChange(), \"data-tooltip\": !(this._filterAssistentMode || ((_c = this._filterAssistent) === null || _c === void 0 ? void 0 : _c.assistent)) ? this.getMessage(\"snkPersonalizedFilter.info.tooltipDisabledAssistentMode\") : undefined, \"data-flow\": \"bottom\", enabled: (!this._filterAssistent.name || Boolean(this._filterAssistentMode || ((_d = this._filterAssistent) === null || _d === void 0 ? void 0 : _d.assistent))) })), this.buildContainerPersonalizedFilter()))))));\n  }\n  static get watchers() { return {\n    \"filterId\": [\"loadFilter\"]\n  }; }\n};\nSnkPersonalizedFilter.style = snkPersonalizedFilterCss;\n\nexport { SnkPersonalizedFilter as snk_personalized_filter };\n"],"names":["snkPersonalizedFilterCss","SnkPersonalizedFilter","hostRef","registerInstance","createEvent","PersonalizedFilterFetcher","entity","entityURI","StringUtils","filterMetadata","newPersonalizedFilter","FilterGroupCondition","ObjectUtils","newValue","oldValue","DefaultFilter","ConfigStorage","resp","personalizedFilter","_a","store","ApplicationContext","ElementIDUtils","data","key","params","response","messageToken","ApplicationUtils","updatedFilterAssistent","PersonalizedFilterUtils","assistent","expression","expressionQuery","confirm","valid","message","canCancel","name","item","param","filterAssistent","fieldName","fieldExpression","entityName","entityPath","target","textAreaElement","options","h","Fragment","evt","ref","ev","_b","expressionBefore","_c","_d","Host","el"],"mappings":"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","x_google_ignoreList":[0]}